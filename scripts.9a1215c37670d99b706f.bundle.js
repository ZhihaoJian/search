!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t){t=t||ie;var i=t.createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function n(e){var t=!!e&&"length"in e&&e.length,i=ge.type(e);return"function"!==i&&!ge.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,i){return ge.isFunction(t)?ge.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?ge.grep(e,function(e){return e===t!==i}):"string"!=typeof t?ge.grep(e,function(e){return se.call(t,e)>-1!==i}):Ce.test(t)?ge.filter(t,e,i):(t=ge.filter(t,e),ge.grep(e,function(e){return se.call(t,e)>-1!==i&&1===e.nodeType}))}function a(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return ge.each(e.match(Te)||[],function(e,i){t[i]=!0}),t}function l(e){return e}function d(e){throw e}function c(e,t,i,n){var r;try{e&&ge.isFunction(r=e.promise)?r.call(e).done(t).fail(i):e&&ge.isFunction(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}function u(){ie.removeEventListener("DOMContentLoaded",u),e.removeEventListener("load",u),ge.ready()}function p(){this.expando=ge.expando+p.uid++}function f(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Oe.test(e)?JSON.parse(e):e)}function h(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Ge,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=f(i)}catch(e){}Pe.set(e,t,i)}else i=void 0;return i}function g(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return ge.css(e,t,"")},l=s(),d=i&&i[3]||(ge.cssNumber[t]?"":"px"),c=(ge.cssNumber[t]||"px"!==d&&+l)&&Me.exec(ge.css(e,t));if(c&&c[3]!==d){d=d||c[3],i=i||[],c=+l||1;do{o=o||".5",c/=o,ge.style(e,t,c+d)}while(o!==(o=s()/l)&&1!==o&&--a)}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=r)),r}function m(e){var t,i=e.ownerDocument,n=e.nodeName,r=Ue[n];return r||(t=i.body.appendChild(i.createElement(n)),r=ge.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Ue[n]=r,r)}function v(e,t){for(var i,n,r=[],o=0,a=e.length;o<a;o++)n=e[o],n.style&&(i=n.style.display,t?("none"===i&&(r[o]=Ee.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Le(n)&&(r[o]=m(n))):"none"!==i&&(r[o]="none",Ee.set(n,"display",i)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function b(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&r(e,t)?ge.merge([e],i):i}function y(e,t){for(var i=0,n=e.length;i<n;i++)Ee.set(e[i],"globalEval",!t||Ee.get(t[i],"globalEval"))}function $(e,t,i,n,r){for(var o,a,s,l,d,c,u=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if((o=e[f])||0===o)if("object"===ge.type(o))ge.merge(p,o.nodeType?[o]:o);else if(Xe.test(o)){for(a=a||u.appendChild(t.createElement("div")),s=(Ve.exec(o)||["",""])[1].toLowerCase(),l=Qe[s]||Qe._default,a.innerHTML=l[1]+ge.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;ge.merge(p,a.childNodes),a=u.firstChild,a.textContent=""}else p.push(t.createTextNode(o));for(u.textContent="",f=0;o=p[f++];)if(n&&ge.inArray(o,n)>-1)r&&r.push(o);else if(d=ge.contains(o.ownerDocument,o),a=b(u.appendChild(o),"script"),d&&y(a),i)for(c=0;o=a[c++];)We.test(o.type||"")&&i.push(o);return u}function w(){return!0}function x(){return!1}function j(){try{return ie.activeElement}catch(e){}}function _(e,t,i,n,r,o){var a,s;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(s in t)_(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=x;else if(!r)return e;return 1===o&&(a=r,r=function(e){return ge().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ge.guid++)),e.each(function(){ge.event.add(this,t,r,n,i)})}function C(e,t){return r(e,"table")&&r(11!==t.nodeType?t:t.firstChild,"tr")?ge(">tbody",e)[0]||e:e}function q(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function S(e){var t=nt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function D(e,t){var i,n,r,o,a,s,l,d;if(1===t.nodeType){if(Ee.hasData(e)&&(o=Ee.access(e),a=Ee.set(t,o),d=o.events)){delete a.handle,a.events={};for(r in d)for(i=0,n=d[r].length;i<n;i++)ge.event.add(t,r,d[r][i])}Pe.hasData(e)&&(s=Pe.access(e),l=ge.extend({},s),Pe.set(t,l))}}function k(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Be.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function T(e,t,n,r){t=oe.apply([],t);var o,a,s,l,d,c,u=0,p=e.length,f=p-1,h=t[0],g=ge.isFunction(h);if(g||p>1&&"string"==typeof h&&!fe.checkClone&&it.test(h))return e.each(function(i){var o=e.eq(i);g&&(t[0]=h.call(this,i,o.html())),T(o,t,n,r)});if(p&&(o=$(t,e[0].ownerDocument,!1,e,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(s=ge.map(b(o,"script"),q),l=s.length;u<p;u++)d=o,u!==f&&(d=ge.clone(d,!0,!0),l&&ge.merge(s,b(d,"script"))),n.call(e[u],d,u);if(l)for(c=s[s.length-1].ownerDocument,ge.map(s,S),u=0;u<l;u++)d=s[u],We.test(d.type||"")&&!Ee.access(d,"globalEval")&&ge.contains(c,d)&&(d.src?ge._evalUrl&&ge._evalUrl(d.src):i(d.textContent.replace(rt,""),c))}return e}function I(e,t,i){for(var n,r=t?ge.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||ge.cleanData(b(n)),n.parentNode&&(i&&ge.contains(n.ownerDocument,n)&&y(b(n,"script")),n.parentNode.removeChild(n));return e}function F(e,t,i){var n,r,o,a,s=e.style;return i=i||st(e),i&&(a=i.getPropertyValue(t)||i[t],""!==a||ge.contains(e.ownerDocument,e)||(a=ge.style(e,t)),!fe.pixelMarginRight()&&at.test(a)&&ot.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function A(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function R(e){if(e in ft)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=pt.length;i--;)if((e=pt[i]+t)in ft)return e}function E(e){var t=ge.cssProps[e];return t||(t=ge.cssProps[e]=R(e)||e),t}function P(e,t,i){var n=Me.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function O(e,t,i,n,r){var o,a=0;for(o=i===(n?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===i&&(a+=ge.css(e,i+ze[o],!0,r)),n?("content"===i&&(a-=ge.css(e,"padding"+ze[o],!0,r)),"margin"!==i&&(a-=ge.css(e,"border"+ze[o]+"Width",!0,r))):(a+=ge.css(e,"padding"+ze[o],!0,r),"padding"!==i&&(a+=ge.css(e,"border"+ze[o]+"Width",!0,r)));return a}function G(e,t,i){var n,r=st(e),o=F(e,t,r),a="border-box"===ge.css(e,"boxSizing",!1,r);return at.test(o)?o:(n=a&&(fe.boxSizingReliable()||o===e.style[t]),"auto"===o&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)]),(o=parseFloat(o)||0)+O(e,t,i||(a?"border":"content"),n,r)+"px")}function N(e,t,i,n,r){return new N.prototype.init(e,t,i,n,r)}function M(){gt&&(!1===ie.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(M):e.setTimeout(M,ge.fx.interval),ge.fx.tick())}function z(){return e.setTimeout(function(){ht=void 0}),ht=ge.now()}function L(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)i=ze[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function H(e,t,i){for(var n,r=(V.tweeners[t]||[]).concat(V.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function U(e,t,i){var n,r,o,a,s,l,d,c,u="width"in t||"height"in t,p=this,f={},h=e.style,g=e.nodeType&&Le(e),m=Ee.get(e,"fxshow");i.queue||(a=ge._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,ge.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(r=t[n],mt.test(r)){if(delete t[n],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;g=!0}f[n]=m&&m[n]||ge.style(e,n)}if((l=!ge.isEmptyObject(t))||!ge.isEmptyObject(f)){u&&1===e.nodeType&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],d=m&&m.display,null==d&&(d=Ee.get(e,"display")),c=ge.css(e,"display"),"none"===c&&(d?c=d:(v([e],!0),d=e.style.display||d,c=ge.css(e,"display"),v([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===ge.css(e,"float")&&(l||(p.done(function(){h.display=d}),null==d&&(c=h.display,d="none"===c?"":c)),h.display="inline-block")),i.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),l=!1;for(n in f)l||(m?"hidden"in m&&(g=m.hidden):m=Ee.access(e,"fxshow",{display:d}),o&&(m.hidden=!g),g&&v([e],!0),p.done(function(){g||v([e]),Ee.remove(e,"fxshow");for(n in f)ge.style(e,n,f[n])})),l=H(g?m[n]:0,n,p),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}}function B(e,t){var i,n,r,o,a;for(i in e)if(n=ge.camelCase(i),r=t[n],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=ge.cssHooks[n])&&"expand"in a){o=a.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function V(e,t,i){var n,r,o=0,a=V.prefilters.length,s=ge.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=ht||z(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,o=1-n,a=0,l=d.tweens.length;a<l;a++)d.tweens[a].run(o);return s.notifyWith(e,[d,o,i]),o<1&&l?i:(l||s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:ge.extend({},t),opts:ge.extend(!0,{specialEasing:{},easing:ge.easing._default},i),originalProperties:t,originalOptions:i,startTime:ht||z(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ge.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)d.tweens[i].run(1);return t?(s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d,t])):s.rejectWith(e,[d,t]),this}}),c=d.props;for(B(c,d.opts.specialEasing);o<a;o++)if(n=V.prefilters[o].call(d,e,c,d.opts))return ge.isFunction(n.stop)&&(ge._queueHooks(d.elem,d.opts.queue).stop=ge.proxy(n.stop,n)),n;return ge.map(c,H,d),ge.isFunction(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),ge.fx.timer(ge.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}function W(e){return(e.match(Te)||[]).join(" ")}function Q(e){return e.getAttribute&&e.getAttribute("class")||""}function X(e,t,i,n){var r;if(Array.isArray(t))ge.each(t,function(t,r){i||St.test(e)?n(e,r):X(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==ge.type(t))n(e,t);else for(r in t)X(e+"["+r+"]",t[r],i,n)}function Y(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(Te)||[];if(ge.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function K(e,t,i,n){function r(s){var l;return o[s]=!0,ge.each(e[s]||[],function(e,s){var d=s(t,i,n);return"string"!=typeof d||a||o[d]?a?!(l=d):void 0:(t.dataTypes.unshift(d),r(d),!1)}),l}var o={},a=e===Nt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function J(e,t){var i,n,r=ge.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&ge.extend(!0,e,n),e}function Z(e,t,i){for(var n,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}function ee(e,t,i,n){var r,o,a,s,l,d={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=d[l+" "+o]||d["* "+o]))for(r in d)if(s=r.split(" "),s[1]===o&&(a=d[l+" "+s[0]]||d["* "+s[0]])){!0===a?a=d[r]:!0!==d[r]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var te=[],ie=e.document,ne=Object.getPrototypeOf,re=te.slice,oe=te.concat,ae=te.push,se=te.indexOf,le={},de=le.toString,ce=le.hasOwnProperty,ue=ce.toString,pe=ue.call(Object),fe={},he="3.2.1",ge=function(e,t){return new ge.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ve=/^-ms-/,be=/-([a-z])/g,ye=function(e,t){return t.toUpperCase()};ge.fn=ge.prototype={jquery:he,constructor:ge,length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?re.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ge.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ge.each(this,e)},map:function(e){return this.pushStack(ge.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ae,sort:te.sort,splice:te.splice},ge.extend=ge.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[s]||{},s++),"object"==typeof a||ge.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],n=e[t],a!==n&&(d&&n&&(ge.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&ge.isPlainObject(i)?i:{},a[t]=ge.extend(d,o,n)):void 0!==n&&(a[t]=n));return a},ge.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ge.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ge.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==de.call(e)||(t=ne(e))&&("function"!=typeof(i=ce.call(t,"constructor")&&t.constructor)||ue.call(i)!==pe))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?le[de.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(ve,"ms-").replace(be,ye)},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ge.merge(i,"string"==typeof e?[e]:e):ae.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:se.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var r,o,a=0,s=[];if(n(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,i))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,i))&&s.push(o);return oe.apply([],s)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),ge.isFunction(e))return n=re.call(arguments,2),r=function(){return e.apply(t||this,n.concat(re.call(arguments)))},r.guid=e.guid=e.guid||ge.guid++,r},now:Date.now,support:fe}),"function"==typeof Symbol&&(ge.fn[Symbol.iterator]=te[Symbol.iterator]),ge.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){le["[object "+t+"]"]=t.toLowerCase()});var $e=function(e){function t(e,t,i,n){var r,o,a,s,l,c,p,f=t&&t.ownerDocument,h=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return i;if(!n&&((t?t.ownerDocument||t:N)!==I&&T(t),t=t||I,A)){if(11!==h&&(l=ge.exec(e)))if(r=l[1]){if(9===h){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(f&&(a=f.getElementById(r))&&O(t,a)&&a.id===r)return i.push(a),i}else{if(l[2])return Y.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&$.getElementsByClassName&&t.getElementsByClassName)return Y.apply(i,t.getElementsByClassName(r)),i}if($.qsa&&!U[e+" "]&&(!R||!R.test(e))){if(1!==h)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ye,$e):t.setAttribute("id",s=G),c=_(e),o=c.length;o--;)c[o]="#"+s+" "+u(c[o]);p=c.join(","),f=me.test(e)&&d(t.parentNode)||t}if(p)try{return Y.apply(i,f.querySelectorAll(p)),i}catch(e){}finally{s===G&&t.removeAttribute("id")}}}return q(e.replace(oe,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[G]=!0,e}function r(e){var t=I.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=i.length;n--;)w.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&xe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function u(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,r=t.next,o=r||n,a=i&&"parentNode"===o,s=z++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,r);return!1}:function(t,i,l){var d,c,u,p=[M,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(u=t[G]||(t[G]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((d=c[o])&&d[0]===M&&d[1]===s)return p[2]=d[2];if(c[o]=p,p[2]=e(t,i,l))return!0}return!1}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function h(e,i,n){for(var r=0,o=i.length;r<o;r++)t(e,i[r],n);return n}function g(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,d=null!=t;s<l;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),d&&t.push(s)));return a}function m(e,t,i,r,o,a){return r&&!r[G]&&(r=m(r)),o&&!o[G]&&(o=m(o,a)),n(function(n,a,s,l){var d,c,u,p=[],f=[],m=a.length,v=n||h(t||"*",s.nodeType?[s]:s,[]),b=!e||!n&&t?v:g(v,p,e,s,l),y=i?o||(n?e:m||r)?[]:a:b;if(i&&i(b,y,s,l),r)for(d=g(y,f),r(d,[],s,l),c=d.length;c--;)(u=d[c])&&(y[f[c]]=!(b[f[c]]=u));if(n){if(o||e){if(o){for(d=[],c=y.length;c--;)(u=y[c])&&d.push(b[c]=u);o(null,y=[],d,l)}for(c=y.length;c--;)(u=y[c])&&(d=o?J(n,u):p[c])>-1&&(n[d]=!(a[d]=u))}}else y=g(y===a?y.splice(m,y.length):y),o?o(null,a,y,l):Y.apply(a,y)})}function v(e){for(var t,i,n,r=e.length,o=w.relative[e[0].type],a=o||w.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),d=p(function(e){return J(t,e)>-1},a,!0),c=[function(e,i,n){var r=!o&&(n||i!==S)||((t=i).nodeType?l(e,i,n):d(e,i,n));return t=null,r}];s<r;s++)if(i=w.relative[e[s].type])c=[p(f(c),i)];else{if(i=w.filter[e[s].type].apply(null,e[s].matches),i[G]){for(n=++s;n<r&&!w.relative[e[n].type];n++);return m(s>1&&f(c),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),i,s<n&&v(e.slice(s,n)),n<r&&v(e=e.slice(n)),n<r&&u(e))}c.push(i)}return f(c)}function b(e,i){var r=i.length>0,o=e.length>0,a=function(n,a,s,l,d){var c,u,p,f=0,h="0",m=n&&[],v=[],b=S,y=n||o&&w.find.TAG("*",d),$=M+=null==b?1:Math.random()||.1,x=y.length;for(d&&(S=a===I||a||d);h!==x&&null!=(c=y[h]);h++){if(o&&c){for(u=0,a||c.ownerDocument===I||(T(c),s=!A);p=e[u++];)if(p(c,a||I,s)){l.push(c);break}d&&(M=$)}r&&((c=!p&&c)&&f--,n&&m.push(c))}if(f+=h,r&&h!==f){for(u=0;p=i[u++];)p(m,v,a,s);if(n){if(f>0)for(;h--;)m[h]||v[h]||(v[h]=Q.call(l));v=g(v)}Y.apply(l,v),d&&!n&&v.length>0&&f+i.length>1&&t.uniqueSort(l)}return d&&(M=$,S=b),m};return r?n(a):a}var y,$,w,x,j,_,C,q,S,D,k,T,I,F,A,R,E,P,O,G="sizzle"+1*new Date,N=e.document,M=0,z=0,L=i(),H=i(),U=i(),B=function(e,t){return e===t&&(k=!0),0},V={}.hasOwnProperty,W=[],Q=W.pop,X=W.push,Y=W.push,K=W.slice,J=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",re=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),de=new RegExp(ne),ce=new RegExp("^"+te+"$"),ue={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/[+~]/,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,$e=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){T()},xe=p(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Y.apply(W=K.call(N.childNodes),N.childNodes),W[N.childNodes.length].nodeType}catch(e){Y={apply:W.length?function(e,t){X.apply(e,K.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}$=t.support={},j=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:N;return n!==I&&9===n.nodeType&&n.documentElement?(I=n,F=I.documentElement,A=!j(I),N!==I&&(i=I.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",we,!1):i.attachEvent&&i.attachEvent("onunload",we)),$.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),$.getElementsByTagName=r(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),$.getElementsByClassName=he.test(I.getElementsByClassName),$.getById=r(function(e){return F.appendChild(e).id=G,!I.getElementsByName||!I.getElementsByName(G).length}),$.getById?(w.filter.ID=function(e){var t=e.replace(ve,be);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var i=t.getElementById(e);return i?[i]:[]}}):(w.filter.ID=function(e){var t=e.replace(ve,be);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),w.find.TAG=$.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):$.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},w.find.CLASS=$.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},E=[],R=[],($.qsa=he.test(I.querySelectorAll))&&(r(function(e){F.appendChild(e).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+G+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+G+"+*").length||R.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),F.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),($.matchesSelector=he.test(P=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&r(function(e){$.disconnectedMatch=P.call(e,"*"),P.call(e,"[s!='']:x"),E.push("!=",ne)}),R=R.length&&new RegExp(R.join("|")),E=E.length&&new RegExp(E.join("|")),t=he.test(F.compareDocumentPosition),O=t||he.test(F.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=t?function(e,t){if(e===t)return k=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!$.sortDetached&&t.compareDocumentPosition(e)===i?e===I||e.ownerDocument===N&&O(N,e)?-1:t===I||t.ownerDocument===N&&O(N,t)?1:D?J(D,e)-J(D,t):0:4&i?-1:1)}:function(e,t){if(e===t)return k=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!r||!o)return e===I?-1:t===I?1:r?-1:o?1:D?J(D,e)-J(D,t):0;if(r===o)return a(e,t);for(i=e;i=i.parentNode;)s.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;s[n]===l[n];)n++;return n?a(s[n],l[n]):s[n]===N?-1:l[n]===N?1:0},I):I},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==I&&T(e),i=i.replace(le,"='$1']"),$.matchesSelector&&A&&!U[i+" "]&&(!E||!E.test(i))&&(!R||!R.test(i)))try{var n=P.call(e,i);if(n||$.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&T(e),O(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&T(e);var i=w.attrHandle[t.toLowerCase()],n=i&&V.call(w.attrHandle,t.toLowerCase())?i(e,t,!A):void 0;return void 0!==n?n:$.attributes||!A?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(ye,$e)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(k=!$.detectDuplicates,D=!$.sortStable&&e.slice(0),e.sort(B),k){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return D=null,e},x=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=x(t);return i},w=t.selectors={cacheLength:50,createPseudo:n,match:ue,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ue.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=_(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=L[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&L(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(re," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,p,f,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&b){for(p=m,u=p[G]||(p[G]={}),c=u[p.uniqueID]||(u[p.uniqueID]={}),d=c[e]||[],f=d[0]===M&&d[1],y=f&&d[2],p=f&&m.childNodes[f];p=++f&&p&&p[g]||(y=f=0)||h.pop();)if(1===p.nodeType&&++y&&p===t){c[e]=[M,f,y];break}}else if(b&&(p=t,u=p[G]||(p[G]={}),c=u[p.uniqueID]||(u[p.uniqueID]={}),d=c[e]||[],f=d[0]===M&&d[1],y=f),!1===y)for(;(p=++f&&p&&p[g]||(y=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++y||(b&&(u=p[G]||(p[G]={}),c=u[p.uniqueID]||(u[p.uniqueID]={}),c[e]=[M,y]),p!==t)););return(y-=r)===n||y%n==0&&y/n>=0}}},PSEUDO:function(e,i){var r,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[G]?o(i):o.length>1?(r=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),a=r.length;a--;)n=J(e,r[a]),e[n]=!(t[n]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=C(e.replace(oe,"$1"));return r[G]?n(function(e,t,i,n){for(var o,a=r(e,null,n,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(ve,be),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,be).toLowerCase(),function(t){var i;do{if(i=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase()
;return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[i<0?i+t:i]}),even:l(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:l(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})w.pseudos[y]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(y);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,_=t.tokenize=function(e,i){var n,r,o,a,s,l,d,c=H[e+" "];if(c)return i?0:c.slice(0);for(s=e,l=[],d=w.preFilter;s;){n&&!(r=ae.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=se.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(oe," ")}),s=s.slice(n.length));for(a in w.filter)!(r=ue[a].exec(s))||d[a]&&!(r=d[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return i?s.length:s?t.error(e):H(e,l).slice(0)},C=t.compile=function(e,t){var i,n=[],r=[],o=U[e+" "];if(!o){for(t||(t=_(e)),i=t.length;i--;)o=v(t[i]),o[G]?n.push(o):r.push(o);o=U(e,b(r,n)),o.selector=e}return o},q=t.select=function(e,t,i,n){var r,o,a,s,l,c="function"==typeof e&&e,p=!n&&_(e=c.selector||e);if(i=i||[],1===p.length){if(o=p[0]=p[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&A&&w.relative[o[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(ve,be),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ue.needsContext.test(e)?0:o.length;r--&&(a=o[r],!w.relative[s=a.type]);)if((l=w.find[s])&&(n=l(a.matches[0].replace(ve,be),me.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&u(o)))return Y.apply(i,n),i;break}}return(c||C(e,p))(n,t,!A,i,!t||me.test(e)&&d(t.parentNode)||t),i},$.sortStable=G.split("").sort(B).join("")===G,$.detectDuplicates=!!k,T(),$.sortDetached=r(function(e){return 1&e.compareDocumentPosition(I.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),$.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);ge.find=$e,ge.expr=$e.selectors,ge.expr[":"]=ge.expr.pseudos,ge.uniqueSort=ge.unique=$e.uniqueSort,ge.text=$e.getText,ge.isXMLDoc=$e.isXML,ge.contains=$e.contains,ge.escapeSelector=$e.escape;var we=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ge(e).is(i))break;n.push(e)}return n},xe=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},je=ge.expr.match.needsContext,_e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ce=/^.[^:#\[\.,]*$/;ge.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ge.find.matchesSelector(n,e)?[n]:[]:ge.find.matches(e,ge.grep(t,function(e){return 1===e.nodeType}))},ge.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(ge(e).filter(function(){for(t=0;t<n;t++)if(ge.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)ge.find(e,r[t],i);return n>1?ge.uniqueSort(i):i},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&je.test(e)?ge(e):e||[],!1).length}});var qe,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ge.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||qe,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Se.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ge?t[0]:t,ge.merge(this,ge.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),_e.test(n[1])&&ge.isPlainObject(t))for(n in t)ge.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=ie.getElementById(n[2]),r&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ge.isFunction(e)?void 0!==i.ready?i.ready(e):e(ge):ge.makeArray(e,this)}).prototype=ge.fn,qe=ge(ie);var De=/^(?:parents|prev(?:Until|All))/,ke={children:!0,contents:!0,next:!0,prev:!0};ge.fn.extend({has:function(e){var t=ge(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(ge.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&ge(e);if(!je.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&ge.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?ge.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?se.call(ge(e),this[0]):se.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ge.uniqueSort(ge.merge(this.get(),ge(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,i){return we(e,"parentNode",i)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,i){return we(e,"nextSibling",i)},prevUntil:function(e,t,i){return we(e,"previousSibling",i)},siblings:function(e){return xe((e.parentNode||{}).firstChild,e)},children:function(e){return xe(e.firstChild)},contents:function(e){return r(e,"iframe")?e.contentDocument:(r(e,"template")&&(e=e.content||e),ge.merge([],e.childNodes))}},function(e,t){ge.fn[e]=function(i,n){var r=ge.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=ge.filter(n,r)),this.length>1&&(ke[e]||ge.uniqueSort(r),De.test(e)&&r.reverse()),this.pushStack(r)}});var Te=/[^\x20\t\r\n\f]+/g;ge.Callbacks=function(e){e="string"==typeof e?s(e):ge.extend({},e);var t,i,n,r,o=[],a=[],l=-1,d=function(){for(r=r||e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<o.length;)!1===o[l].apply(i[0],i[1])&&e.stopOnFalse&&(l=o.length,i=!1);e.memory||(i=!1),t=!1,r&&(o=i?[]:"")},c={add:function(){return o&&(i&&!t&&(l=o.length-1,a.push(i)),function t(i){ge.each(i,function(i,n){ge.isFunction(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==ge.type(n)&&t(n)})}(arguments),i&&!t&&d()),this},remove:function(){return ge.each(arguments,function(e,t){for(var i;(i=ge.inArray(t,o,i))>-1;)o.splice(i,1),i<=l&&l--}),this},has:function(e){return e?ge.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=i="",this},disabled:function(){return!o},lock:function(){return r=a=[],i||t||(o=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},ge.extend({Deferred:function(t){var i=[["notify","progress",ge.Callbacks("memory"),ge.Callbacks("memory"),2],["resolve","done",ge.Callbacks("once memory"),ge.Callbacks("once memory"),0,"resolved"],["reject","fail",ge.Callbacks("once memory"),ge.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return ge.Deferred(function(t){ge.each(i,function(i,n){var r=ge.isFunction(e[n[4]])&&e[n[4]];o[n[1]](function(){var e=r&&r.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,n,r){function o(t,i,n,r){return function(){var s=this,c=arguments,u=function(){var e,u;if(!(t<a)){if((e=n.apply(s,c))===i.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,ge.isFunction(u)?r?u.call(e,o(a,i,l,r),o(a,i,d,r)):(a++,u.call(e,o(a,i,l,r),o(a,i,d,r),o(a,i,l,i.notifyWith))):(n!==l&&(s=void 0,c=[e]),(r||i.resolveWith)(s,c))}},p=r?u:function(){try{u()}catch(e){ge.Deferred.exceptionHook&&ge.Deferred.exceptionHook(e,p.stackTrace),t+1>=a&&(n!==d&&(s=void 0,c=[e]),i.rejectWith(s,c))}};t?p():(ge.Deferred.getStackHook&&(p.stackTrace=ge.Deferred.getStackHook()),e.setTimeout(p))}}var a=0;return ge.Deferred(function(e){i[0][3].add(o(0,e,ge.isFunction(r)?r:l,e.notifyWith)),i[1][3].add(o(0,e,ge.isFunction(t)?t:l)),i[2][3].add(o(0,e,ge.isFunction(n)?n:d))}).promise()},promise:function(e){return null!=e?ge.extend(e,r):r}},o={};return ge.each(i,function(e,t){var a=t[2],s=t[5];r[t[1]]=a.add,s&&a.add(function(){n=s},i[3-e][2].disable,i[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),r=re.call(arguments),o=ge.Deferred(),a=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?re.call(arguments):i,--t||o.resolveWith(n,r)}};if(t<=1&&(c(e,o.done(a(i)).resolve,o.reject,!t),"pending"===o.state()||ge.isFunction(r[i]&&r[i].then)))return o.then();for(;i--;)c(r[i],a(i),o.reject);return o.promise()}});var Ie=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ge.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Ie.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},ge.readyException=function(t){e.setTimeout(function(){throw t})};var Fe=ge.Deferred();ge.fn.ready=function(e){return Fe.then(e).catch(function(e){ge.readyException(e)}),this},ge.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ge.readyWait:ge.isReady)||(ge.isReady=!0,!0!==e&&--ge.readyWait>0||Fe.resolveWith(ie,[ge]))}}),ge.ready.then=Fe.then,"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll?e.setTimeout(ge.ready):(ie.addEventListener("DOMContentLoaded",u),e.addEventListener("load",u));var Ae=function(e,t,i,n,r,o,a){var s=0,l=e.length,d=null==i;if("object"===ge.type(i)){r=!0;for(s in i)Ae(e,t,s,i[s],!0,o,a)}else if(void 0!==n&&(r=!0,ge.isFunction(n)||(a=!0),d&&(a?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(ge(e),i)})),t))for(;s<l;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:d?t.call(e):l?t(e[0],i):o},Re=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};p.uid=1,p.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Re(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[ge.camelCase(t)]=i;else for(n in t)r[ge.camelCase(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ge.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(ge.camelCase):(t=ge.camelCase(t),t=t in n?[t]:t.match(Te)||[]),i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||ge.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ge.isEmptyObject(t)}};var Ee=new p,Pe=new p,Oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ge=/[A-Z]/g;ge.extend({hasData:function(e){return Pe.hasData(e)||Ee.hasData(e)},data:function(e,t,i){return Pe.access(e,t,i)},removeData:function(e,t){Pe.remove(e,t)},_data:function(e,t,i){return Ee.access(e,t,i)},_removeData:function(e,t){Ee.remove(e,t)}}),ge.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Pe.get(o),1===o.nodeType&&!Ee.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=ge.camelCase(n.slice(5)),h(o,n,r[n])));Ee.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Pe.set(this,e)}):Ae(this,function(t){var i;if(o&&void 0===t){if(void 0!==(i=Pe.get(o,e)))return i;if(void 0!==(i=h(o,e)))return i}else this.each(function(){Pe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Pe.remove(this,e)})}}),ge.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Ee.get(e,t),i&&(!n||Array.isArray(i)?n=Ee.access(e,t,ge.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=ge.queue(e,t),n=i.length,r=i.shift(),o=ge._queueHooks(e,t),a=function(){ge.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Ee.get(e,i)||Ee.access(e,i,{empty:ge.Callbacks("once memory").add(function(){Ee.remove(e,[t+"queue",i])})})}}),ge.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ge.queue(this[0],e):void 0===t?this:this.each(function(){var i=ge.queue(this,e,t);ge._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ge.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=ge.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=Ee.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),ze=["Top","Right","Bottom","Left"],Le=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ge.contains(e.ownerDocument,e)&&"none"===ge.css(e,"display")},He=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=a[o];return r},Ue={};ge.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Le(this)?ge(this).show():ge(this).hide()})}});var Be=/^(?:checkbox|radio)$/i,Ve=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,We=/^$|\/(?:java|ecma)script/i,Qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td;var Xe=/<|&#?\w+;/;!function(){var e=ie.createDocumentFragment(),t=e.appendChild(ie.createElement("div")),i=ie.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),fe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",fe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ye=ie.documentElement,Ke=/^key/,Je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ze=/^([^.]*)(?:\.(.+)|)/;ge.event={global:{},add:function(e,t,i,n,r){var o,a,s,l,d,c,u,p,f,h,g,m=Ee.get(e);if(m)for(i.handler&&(o=i,i=o.handler,r=o.selector),r&&ge.find.matchesSelector(Ye,r),i.guid||(i.guid=ge.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==ge&&ge.event.triggered!==t.type?ge.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Te)||[""],d=t.length;d--;)s=Ze.exec(t[d])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(u=ge.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=ge.event.special[f]||{},c=ge.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&ge.expr.match.needsContext.test(r),namespace:h.join(".")},o),(p=l[f])||(p=l[f]=[],p.delegateCount=0,u.setup&&!1!==u.setup.call(e,n,h,a)||e.addEventListener&&e.addEventListener(f,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),ge.event.global[f]=!0)},remove:function(e,t,i,n,r){var o,a,s,l,d,c,u,p,f,h,g,m=Ee.hasData(e)&&Ee.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Te)||[""],d=t.length;d--;)if(s=Ze.exec(t[d])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(u=ge.event.special[f]||{},f=(n?u.delegateType:u.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!r&&g!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,u.remove&&u.remove.call(e,c));a&&!p.length&&(u.teardown&&!1!==u.teardown.call(e,h,m.handle)||ge.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)ge.event.remove(e,f+t[d],i,n,!0);ge.isEmptyObject(l)&&Ee.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,s=ge.event.fix(e),l=new Array(arguments.length),d=(Ee.get(this,"events")||{})[s.type]||[],c=ge.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=ge.event.handlers.call(this,s,d),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((ge.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,o,a,s=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],a={},i=0;i<l;i++)n=t[i],r=n.selector+" ",void 0===a[r]&&(a[r]=n.needsContext?ge(r,this).index(d)>-1:ge.find(r,this,null,[d]).length),a[r]&&o.push(n);o.length&&s.push({elem:d,handlers:o})}return d=this,l<t.length&&s.push({elem:d,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(ge.Event.prototype,e,{enumerable:!0,configurable:!0,get:ge.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ge.expando]?e:new ge.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==j()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===j()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r(this,"input"))return this.click(),!1},_default:function(e){return r(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ge.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},ge.Event=function(e,t){return this instanceof ge.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?w:x,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),void(this[ge.expando]=!0)):new ge.Event(e,t)},ge.Event.prototype={constructor:ge.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ge.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ke.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Je.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ge.event.addProp),ge.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ge.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===n||ge.contains(n,r))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),ge.fn.extend({on:function(e,t,i,n){return _(this,e,t,i,n)},one:function(e,t,i,n){return _(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ge(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=x),this.each(function(){ge.event.remove(this,e,i,t)})}});var et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,tt=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^true\/(.*)/,rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ge.extend({htmlPrefilter:function(e){return e.replace(et,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s=e.cloneNode(!0),l=ge.contains(e.ownerDocument,e);if(!(fe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(a=b(s),o=b(e),n=0,r=o.length;n<r;n++)k(o[n],a[n]);if(t)if(i)for(o=o||b(e),a=a||b(s),n=0,r=o.length;n<r;n++)D(o[n],a[n]);else D(e,s);return a=b(s,"script"),a.length>0&&y(a,!l&&b(e,"script")),s},cleanData:function(e){for(var t,i,n,r=ge.event.special,o=0;void 0!==(i=e[o]);o++)if(Re(i)){if(t=i[Ee.expando]){if(t.events)for(n in t.events)r[n]?ge.event.remove(i,n):ge.removeEvent(i,n,t.handle);i[Ee.expando]=void 0}i[Pe.expando]&&(i[Pe.expando]=void 0)}}}),ge.fn.extend({detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return Ae(this,function(e){return void 0===e?ge.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){C(this,e).appendChild(e)}})},prepend:function(){return T(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=C(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return T(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ge.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return Ae(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!tt.test(e)&&!Qe[(Ve.exec(e)||["",""])[1].toLowerCase()]){e=ge.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(ge.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return T(this,arguments,function(t){var i=this.parentNode;ge.inArray(this,e)<0&&(ge.cleanData(b(this)),i&&i.replaceChild(t,this))},e)}}),ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ge.fn[e]=function(e){for(var i,n=[],r=ge(e),o=r.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),ge(r[a])[t](i),ae.apply(n,i.get());return this.pushStack(n)}});var ot=/^margin/,at=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),st=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ye.appendChild(a);var t=e.getComputedStyle(s);i="1%"!==t.top,o="2px"===t.marginLeft,n="4px"===t.width,s.style.marginRight="50%",r="4px"===t.marginRight,Ye.removeChild(a),s=null}}var i,n,r,o,a=ie.createElement("div"),s=ie.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",fe.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ge.extend(fe,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),r},reliableMarginLeft:function(){return t(),o}}))}();var lt=/^(none|table(?!-c[ea]).+)/,dt=/^--/,ct={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","Moz","ms"],ft=ie.createElement("div").style;ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=F(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=ge.camelCase(t),l=dt.test(t),d=e.style;return l||(t=E(s)),a=ge.cssHooks[t]||ge.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:d[t]:(o=typeof i,"string"===o&&(r=Me.exec(i))&&r[1]&&(i=g(e,t,r),o="number"),void(null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(ge.cssNumber[s]?"":"px")),fe.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?d.setProperty(t,i):d[t]=i))))}},css:function(e,t,i,n){var r,o,a,s=ge.camelCase(t);return dt.test(t)||(t=E(s)),a=ge.cssHooks[t]||ge.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=F(e,t,n)),"normal"===r&&t in ut&&(r=ut[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),ge.each(["height","width"],function(e,t){ge.cssHooks[t]={get:function(e,i,n){if(i)return!lt.test(ge.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?G(e,t,n):He(e,ct,function(){return G(e,t,n)})},set:function(e,i,n){var r,o=n&&st(e),a=n&&O(e,t,n,"border-box"===ge.css(e,"boxSizing",!1,o),o);return a&&(r=Me.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=ge.css(e,t)),P(e,i,a)}}}),ge.cssHooks.marginLeft=A(fe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(F(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ge.each({margin:"",padding:"",border:"Width"},function(e,t){ge.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+ze[n]+t]=o[n]||o[n-2]||o[0];return r}},ot.test(e)||(ge.cssHooks[e+t].set=P)}),ge.fn.extend({css:function(e,t){return Ae(this,function(e,t,i){var n,r,o={},a=0;if(Array.isArray(t)){for(n=st(e),r=t.length;a<r;a++)o[t[a]]=ge.css(e,t[a],!1,n);return o}return void 0!==i?ge.style(e,t,i):ge.css(e,t)},e,t,arguments.length>1)}}),ge.Tween=N,N.prototype={constructor:N,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||ge.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ge.cssNumber[i]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,i=N.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ge.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ge.cssProps[e.prop]]&&!ge.cssHooks[e.prop]?e.elem[e.prop]=e.now:ge.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ge.fx=N.prototype.init,ge.fx.step={};var ht,gt,mt=/^(?:toggle|show|hide)$/,vt=/queueHooks$/;ge.Animation=ge.extend(V,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return g(i.elem,e,Me.exec(t),i),i}]},tweener:function(e,t){ge.isFunction(e)?(t=e,e=["*"]):e=e.match(Te);for(var i,n=0,r=e.length;n<r;n++)i=e[n],V.tweeners[i]=V.tweeners[i]||[],V.tweeners[i].unshift(t)},prefilters:[U],prefilter:function(e,t){t?V.prefilters.unshift(e):V.prefilters.push(e)}}),ge.speed=function(e,t,i){var n=e&&"object"==typeof e?ge.extend({},e):{complete:i||!i&&t||ge.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ge.isFunction(t)&&t};return ge.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in ge.fx.speeds?n.duration=ge.fx.speeds[n.duration]:n.duration=ge.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ge.isFunction(n.old)&&n.old.call(this),n.queue&&ge.dequeue(this,n.queue)},n},ge.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Le).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=ge.isEmptyObject(e),o=ge.speed(t,i,n),a=function(){var t=V(this,ge.extend({},e),o);(r||Ee.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=ge.timers,a=Ee.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&vt.test(r)&&n(a[r])
;for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));!t&&i||ge.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Ee.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=ge.timers,a=n?n.length:0;for(i.finish=!0,ge.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ge.each(["toggle","show","hide"],function(e,t){var i=ge.fn[t];ge.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(L(t,!0),e,n,r)}}),ge.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ge.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ge.timers=[],ge.fx.tick=function(){var e,t=0,i=ge.timers;for(ht=ge.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||ge.fx.stop(),ht=void 0},ge.fx.timer=function(e){ge.timers.push(e),ge.fx.start()},ge.fx.interval=13,ge.fx.start=function(){gt||(gt=!0,M())},ge.fx.stop=function(){gt=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fn.delay=function(t,i){return t=ge.fx?ge.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=ie.createElement("input"),t=ie.createElement("select"),i=t.appendChild(ie.createElement("option"));e.type="checkbox",fe.checkOn=""!==e.value,fe.optSelected=i.selected,e=ie.createElement("input"),e.value="t",e.type="radio",fe.radioValue="t"===e.value}();var bt,yt=ge.expr.attrHandle;ge.fn.extend({attr:function(e,t){return Ae(this,ge.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})}}),ge.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?ge.prop(e,t,i):(1===o&&ge.isXMLDoc(e)||(r=ge.attrHooks[t.toLowerCase()]||(ge.expr.match.bool.test(t)?bt:void 0)),void 0!==i?null===i?void ge.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=ge.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!fe.radioValue&&"radio"===t&&r(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Te);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),bt={set:function(e,t,i){return!1===t?ge.removeAttr(e,i):e.setAttribute(i,i),i}},ge.each(ge.expr.match.bool.source.match(/\w+/g),function(e,t){var i=yt[t]||ge.find.attr;yt[t]=function(e,t,n){var r,o,a=t.toLowerCase();return n||(o=yt[a],yt[a]=r,r=null!=i(e,t,n)?a:null,yt[a]=o),r}});var $t=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;ge.fn.extend({prop:function(e,t){return Ae(this,ge.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ge.propFix[e]||e]})}}),ge.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ge.isXMLDoc(e)||(t=ge.propFix[t]||t,r=ge.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ge.find.attr(e,"tabindex");return t?parseInt(t,10):$t.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),fe.optSelected||(ge.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ge.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ge.propFix[this.toLowerCase()]=this}),ge.fn.extend({addClass:function(e){var t,i,n,r,o,a,s,l=0;if(ge.isFunction(e))return this.each(function(t){ge(this).addClass(e.call(this,t,Q(this)))});if("string"==typeof e&&e)for(t=e.match(Te)||[];i=this[l++];)if(r=Q(i),n=1===i.nodeType&&" "+W(r)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=W(n),r!==s&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,r,o,a,s,l=0;if(ge.isFunction(e))return this.each(function(t){ge(this).removeClass(e.call(this,t,Q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Te)||[];i=this[l++];)if(r=Q(i),n=1===i.nodeType&&" "+W(r)+" "){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");s=W(n),r!==s&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ge.isFunction(e)?this.each(function(i){ge(this).toggleClass(e.call(this,i,Q(this),t),t)}):this.each(function(){var t,n,r,o;if("string"===i)for(n=0,r=ge(this),o=e.match(Te)||[];t=o[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||(t=Q(this),t&&Ee.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ee.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+W(Q(i))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;ge.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=ge.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,ge(this).val()):e,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=ge.map(r,function(e){return null==e?"":e+""})),(t=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=ge.valHooks[r.type]||ge.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(xt,""):null==i?"":i)):void 0}}),ge.extend({valHooks:{option:{get:function(e){var t=ge.find.attr(e,"value");return null!=t?t:W(ge.text(e))}},select:{get:function(e){var t,i,n,o=e.options,a=e.selectedIndex,s="select-one"===e.type,l=s?null:[],d=s?a+1:o.length;for(n=a<0?d:s?a:0;n<d;n++)if(i=o[n],(i.selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!r(i.parentNode,"optgroup"))){if(t=ge(i).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var i,n,r=e.options,o=ge.makeArray(t),a=r.length;a--;)n=r[a],(n.selected=ge.inArray(ge.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ge.inArray(ge(e).val(),t)>-1}},fe.checkOn||(ge.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var jt=/^(?:focusinfocus|focusoutblur)$/;ge.extend(ge.event,{trigger:function(t,i,n,r){var o,a,s,l,d,c,u,p=[n||ie],f=ce.call(t,"type")?t.type:t,h=ce.call(t,"namespace")?t.namespace.split("."):[];if(a=s=n=n||ie,3!==n.nodeType&&8!==n.nodeType&&!jt.test(f+ge.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),d=f.indexOf(":")<0&&"on"+f,t=t[ge.expando]?t:new ge.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:ge.makeArray(i,[t]),u=ge.event.special[f]||{},r||!u.trigger||!1!==u.trigger.apply(n,i))){if(!r&&!u.noBubble&&!ge.isWindow(n)){for(l=u.delegateType||f,jt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||ie)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?l:u.bindType||f,c=(Ee.get(a,"events")||{})[t.type]&&Ee.get(a,"handle"),c&&c.apply(a,i),(c=d&&a[d])&&c.apply&&Re(a)&&(t.result=c.apply(a,i),!1===t.result&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),i)||!Re(n)||d&&ge.isFunction(n[f])&&!ge.isWindow(n)&&(s=n[d],s&&(n[d]=null),ge.event.triggered=f,n[f](),ge.event.triggered=void 0,s&&(n[d]=s)),t.result}},simulate:function(e,t,i){var n=ge.extend(new ge.Event,i,{type:e,isSimulated:!0});ge.event.trigger(n,null,t)}}),ge.fn.extend({trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return ge.event.trigger(e,t,i,!0)}}),ge.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ge.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ge.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),fe.focusin="onfocusin"in e,fe.focusin||ge.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){ge.event.simulate(t,e.target,ge.event.fix(e))};ge.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=Ee.access(n,t);r||n.addEventListener(e,i,!0),Ee.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Ee.access(n,t)-1;r?Ee.access(n,t,r):(n.removeEventListener(e,i,!0),Ee.remove(n,t))}}});var _t=e.location,Ct=ge.now(),qt=/\?/;ge.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+t),i};var St=/\[\]$/,Dt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;ge.param=function(e,t){var i,n=[],r=function(e,t){var i=ge.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){r(this.name,this.value)});else for(i in e)X(i,e[i],t,r);return n.join("&")},ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ge.prop(this,"elements");return e?ge.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ge(this).is(":disabled")&&Tt.test(this.nodeName)&&!kt.test(e)&&(this.checked||!Be.test(e))}).map(function(e,t){var i=ge(this).val();return null==i?null:Array.isArray(i)?ge.map(i,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:i.replace(Dt,"\r\n")}}).get()}});var It=/%20/g,Ft=/#.*$/,At=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Et=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pt=/^(?:GET|HEAD)$/,Ot=/^\/\//,Gt={},Nt={},Mt="*/".concat("*"),zt=ie.createElement("a");zt.href=_t.href,ge.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:Et.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ge.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?J(J(e,ge.ajaxSettings),t):J(ge.ajaxSettings,e)},ajaxPrefilter:Y(Gt),ajaxTransport:Y(Nt),ajax:function(t,i){function n(t,i,n,s){var d,p,f,$,w,x=i;c||(c=!0,l&&e.clearTimeout(l),r=void 0,a=s||"",j.readyState=t>0?4:0,d=t>=200&&t<300||304===t,n&&($=Z(h,j,n)),$=ee(h,$,j,d),d?(h.ifModified&&(w=j.getResponseHeader("Last-Modified"),w&&(ge.lastModified[o]=w),(w=j.getResponseHeader("etag"))&&(ge.etag[o]=w)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=$.state,p=$.data,f=$.error,d=!f)):(f=x,!t&&x||(x="error",t<0&&(t=0))),j.status=t,j.statusText=(i||x)+"",d?v.resolveWith(g,[p,x,j]):v.rejectWith(g,[j,x,f]),j.statusCode(y),y=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[j,h,d?p:f]),b.fireWith(g,[j,x]),u&&(m.trigger("ajaxComplete",[j,h]),--ge.active||ge.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,o,a,s,l,d,c,u,p,f,h=ge.ajaxSetup({},i),g=h.context||h,m=h.context&&(g.nodeType||g.jquery)?ge(g):ge.event,v=ge.Deferred(),b=ge.Callbacks("once memory"),y=h.statusCode||{},$={},w={},x="canceled",j={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Rt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,$[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)j.always(e[j.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),n(0,t),this}};if(v.promise(j),h.url=((t||h.url||_t.href)+"").replace(Ot,_t.protocol+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Te)||[""],null==h.crossDomain){d=ie.createElement("a");try{d.href=h.url,d.href=d.href,h.crossDomain=zt.protocol+"//"+zt.host!=d.protocol+"//"+d.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ge.param(h.data,h.traditional)),K(Gt,h,i,j),c)return j;u=ge.event&&h.global,u&&0==ge.active++&&ge.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Pt.test(h.type),o=h.url.replace(Ft,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(It,"+")):(f=h.url.slice(o.length),h.data&&(o+=(qt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(At,"$1"),f=(qt.test(o)?"&":"?")+"_="+Ct+++f),h.url=o+f),h.ifModified&&(ge.lastModified[o]&&j.setRequestHeader("If-Modified-Since",ge.lastModified[o]),ge.etag[o]&&j.setRequestHeader("If-None-Match",ge.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&j.setRequestHeader("Content-Type",h.contentType),j.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Mt+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)j.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,j,h)||c))return j.abort();if(x="abort",b.add(h.complete),j.done(h.success),j.fail(h.error),r=K(Nt,h,i,j)){if(j.readyState=1,u&&m.trigger("ajaxSend",[j,h]),c)return j;h.async&&h.timeout>0&&(l=e.setTimeout(function(){j.abort("timeout")},h.timeout));try{c=!1,r.send($,n)}catch(e){if(c)throw e;n(-1,e)}}else n(-1,"No Transport");return j},getJSON:function(e,t,i){return ge.get(e,t,i,"json")},getScript:function(e,t){return ge.get(e,void 0,t,"script")}}),ge.each(["get","post"],function(e,t){ge[t]=function(e,i,n,r){return ge.isFunction(i)&&(r=r||n,n=i,i=void 0),ge.ajax(ge.extend({url:e,type:t,dataType:r,data:i,success:n},ge.isPlainObject(e)&&e))}}),ge._evalUrl=function(e){return ge.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ge.fn.extend({wrapAll:function(e){var t;return this[0]&&(ge.isFunction(e)&&(e=e.call(this[0])),t=ge(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ge.isFunction(e)?this.each(function(t){ge(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ge(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ge.isFunction(e);return this.each(function(i){ge(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ge(this).replaceWith(this.childNodes)}),this}}),ge.expr.pseudos.hidden=function(e){return!ge.expr.pseudos.visible(e)},ge.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ge.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Lt={0:200,1223:204},Ht=ge.ajaxSettings.xhr();fe.cors=!!Ht&&"withCredentials"in Ht,fe.ajax=Ht=!!Ht,ge.ajaxTransport(function(t){var i,n;if(fe.cors||Ht&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);i=function(e){return function(){i&&(i=n=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Lt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=i(),n=s.onerror=i("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),ge.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ge.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=ge("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),ie.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Ut=[],Bt=/(=)\?(?=&|$)|\?\?/;ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||ge.expando+"_"+Ct++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,a,s=!1!==t.jsonp&&(Bt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=ge.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Bt,"$1"+r):!1!==t.jsonp&&(t.url+=(qt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||ge.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},n.always(function(){void 0===o?ge(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,Ut.push(r)),a&&ge.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),fe.createHTMLDocument=function(){var e=ie.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ge.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,r,o;return t||(fe.createHTMLDocument?(t=ie.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=ie.location.href,t.head.appendChild(n)):t=ie),r=_e.exec(e),o=!i&&[],r?[t.createElement(r[1])]:(r=$([e],t,o),o&&o.length&&ge(o).remove(),ge.merge([],r.childNodes))},ge.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");return s>-1&&(n=W(e.slice(s)),e=e.slice(0,s)),ge.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&ge.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?ge("<div>").append(ge.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},ge.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.expr.pseudos.animated=function(e){return ge.grep(ge.timers,function(t){return e===t.elem}).length},ge.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,d,c=ge.css(e,"position"),u=ge(e),p={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=ge.css(e,"top"),l=ge.css(e,"left"),d=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,d?(n=u.position(),a=n.top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),ge.isFunction(t)&&(t=t.call(e,i,ge.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):u.css(p)}},ge.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ge.offset.setOffset(this,e,t)});var t,i,n,r,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect(),t=o.ownerDocument,i=t.documentElement,r=t.defaultView,{top:n.top+r.pageYOffset-i.clientTop,left:n.left+r.pageXOffset-i.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===ge.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),r(e[0],"html")||(n=e.offset()),n={top:n.top+ge.css(e[0],"borderTopWidth",!0),left:n.left+ge.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-ge.css(i,"marginTop",!0),left:t.left-n.left-ge.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||Ye})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;ge.fn[e]=function(n){return Ae(this,function(e,n,r){var o;return ge.isWindow(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r?o?o[t]:e[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r)},e,n,arguments.length)}}),ge.each(["top","left"],function(e,t){ge.cssHooks[t]=A(fe.pixelPosition,function(e,i){if(i)return i=F(e,t),at.test(i)?ge(e).position()[t]+"px":i})}),ge.each({Height:"height",Width:"width"},function(e,t){ge.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){ge.fn[n]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===o?"margin":"border");return Ae(this,function(t,i,r){var o;return ge.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?ge.css(t,i,s):ge.style(t,i,r,s)},t,a?r:void 0,a)}})}),ge.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),ge.holdReady=function(e){e?ge.readyWait++:ge.ready(!0)},ge.isArray=Array.isArray,ge.parseJSON=JSON.parse,ge.nodeName=r,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ge});var Vt=e.jQuery,Wt=e.$;return ge.noConflict=function(t){return e.$===ge&&(e.$=Wt),t&&e.jQuery===ge&&(e.jQuery=Vt),ge},t||(e.jQuery=e.$=ge),ge}),function(e,t){var i={},n={},r={};!function(e,t){function i(e){if("number"==typeof e)return e;var t={};for(var i in e)t[i]=e[i];return t}function n(){this._delay=0,this._endDelay=0,this._fill="none",this._iterationStart=0,this._iterations=1,this._duration=0,this._playbackRate=1,this._direction="normal",this._easing="linear",this._easingFunction=j}function r(){return e.isDeprecated("Invalid timing inputs","2016-03-02","TypeError exceptions will be thrown instead.",!0)}function o(t,i,r){var o=new n;return i&&(o.fill="both",o.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.getOwnPropertyNames(t).forEach(function(i){if("auto"!=t[i]){if(("number"==typeof o[i]||"duration"==i)&&("number"!=typeof t[i]||isNaN(t[i])))return;if("fill"==i&&-1==w.indexOf(t[i]))return;if("direction"==i&&-1==x.indexOf(t[i]))return;if("playbackRate"==i&&1!==t[i]&&e.isDeprecated("AnimationEffectTiming.playbackRate","2014-11-28","Use Animation.playbackRate instead."))return;o[i]=t[i]}}):o.duration=t,o}function a(e){return"number"==typeof e&&(e=isNaN(e)?{duration:0}:{duration:e}),e}function s(t,i){return t=e.numericTimingToObject(t),o(t,i)}function l(e,t,i,n){return e<0||e>1||i<0||i>1?j:function(r){function o(e,t,i){return 3*e*(1-i)*(1-i)*i+3*t*(1-i)*i*i+i*i*i}if(r<=0){var a=0;return e>0?a=t/e:!t&&i>0&&(a=n/i),a*r}if(r>=1){var s=0;return i<1?s=(n-1)/(i-1):1==i&&e<1&&(s=(t-1)/(e-1)),1+s*(r-1)}for(var l=0,d=1;l<d;){var c=(l+d)/2,u=o(e,i,c);if(Math.abs(r-u)<1e-5)return o(t,n,c);u<r?l=c:d=c}return o(t,n,c)}}function d(e,t){return function(i){if(i>=1)return 1;var n=1/e;return(i+=t*n)-i%n}}function c(e){D||(D=document.createElement("div").style),D.animationTimingFunction="",D.animationTimingFunction=e;var t=D.animationTimingFunction;if(""==t&&r())throw new TypeError(e+" is not a valid value for easing");return t}function u(e){if("linear"==e)return j;var t=T.exec(e);if(t)return l.apply(this,t.slice(1).map(Number));var i=I.exec(e);return i?d(Number(i[1]),{start:_,middle:C,end:q}[i[2]]):S[e]||j}function p(e){return Math.abs(f(e)/e.playbackRate)}function f(e){return 0===e.duration||0===e.iterations?0:e.duration*e.iterations}function h(e,t,i){if(null==t)return F;var n=i.delay+e+i.endDelay;return t<Math.min(i.delay,n)?A:t>=Math.min(i.delay+e,n)?R:E}function g(e,t,i,n,r){switch(n){case A:return"backwards"==t||"both"==t?0:null;case E:return i-r;case R:return"forwards"==t||"both"==t?e:null;case F:return null}}function m(e,t,i,n,r){var o=r;return 0===e?t!==A&&(o+=i):o+=n/e,o}function v(e,t,i,n,r,o){var a=e===1/0?t%1:e%1;return 0!==a||i!==R||0===n||0===r&&0!==o||(a=1),a}function b(e,t,i,n){return e===R&&t===1/0?1/0:1===i?Math.floor(n)-1:Math.floor(n)}function y(e,t,i){var n=e;if("normal"!==e&&"reverse"!==e){var r=t;"alternate-reverse"===e&&(r+=1),n="normal",r!==1/0&&r%2!=0&&(n="reverse")}return"normal"===n?i:1-i}function $(e,t,i){var n=h(e,t,i),r=g(e,i.fill,t,n,i.delay);if(null===r)return null;var o=m(i.duration,n,i.iterations,r,i.iterationStart),a=v(o,i.iterationStart,n,i.iterations,r,i.duration),s=b(n,i.iterations,a,o),l=y(i.direction,s,a);return i._easingFunction(l)}var w="backwards|forwards|both|none".split("|"),x="reverse|alternate|alternate-reverse".split("|"),j=function(e){return e};n.prototype={_setMember:function(t,i){this["_"+t]=i,this._effect&&(this._effect._timingInput[t]=i,this._effect._timing=e.normalizeTimingInput(this._effect._timingInput),this._effect.activeDuration=e.calculateActiveDuration(this._effect._timing),this._effect._animation&&this._effect._animation._rebuildUnderlyingAnimation())},get playbackRate(){return this._playbackRate},set delay(e){this._setMember("delay",e)},get delay(){return this._delay},set endDelay(e){this._setMember("endDelay",e)},get endDelay(){return this._endDelay},set fill(e){this._setMember("fill",e)},get fill(){return this._fill},set iterationStart(e){if((isNaN(e)||e<0)&&r())throw new TypeError("iterationStart must be a non-negative number, received: "+timing.iterationStart);this._setMember("iterationStart",e)},get iterationStart(){return this._iterationStart},set duration(e){if("auto"!=e&&(isNaN(e)||e<0)&&r())throw new TypeError("duration must be non-negative or auto, received: "+e);this._setMember("duration",e)},get duration(){return this._duration},set direction(e){this._setMember("direction",e)},get direction(){return this._direction},set easing(e){this._easingFunction=u(c(e)),this._setMember("easing",e)},get easing(){return this._easing},set iterations(e){if((isNaN(e)||e<0)&&r())throw new TypeError("iterations must be non-negative, received: "+e);this._setMember("iterations",e)},get iterations(){return this._iterations}};var _=1,C=.5,q=0,S={ease:l(.25,.1,.25,1),"ease-in":l(.42,0,1,1),"ease-out":l(0,0,.58,1),"ease-in-out":l(.42,0,.58,1),"step-start":d(1,_),"step-middle":d(1,C),"step-end":d(1,q)},D=null,k="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",T=new RegExp("cubic-bezier\\("+k+","+k+","+k+","+k+"\\)"),I=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/,F=0,A=1,R=2,E=3;e.cloneTimingInput=i,e.makeTiming=o,e.numericTimingToObject=a,e.normalizeTimingInput=s,e.calculateActiveDuration=p,e.calculateIterationProgress=$,e.calculatePhase=h,e.normalizeEasing=c,e.parseEasingFunction=u}(i),function(e,t){function i(e,t){return e in c?c[e][t]||t:t}function n(e){return"display"===e||0===e.lastIndexOf("animation",0)||0===e.lastIndexOf("transition",0)}function r(e,t,r){if(!n(e)){var o=s[e];if(o){l.style[e]=t;for(var a in o){var d=o[a],c=l.style[d];r[d]=i(d,c)}}else r[e]=i(e,t)}}function o(e){var t=[];for(var i in e)if(!(i in["easing","offset","composite"])){var n=e[i];Array.isArray(n)||(n=[n]);for(var r,o=n.length,a=0;a<o;a++)r={},r.offset="offset"in e?e.offset:1==o?1:a/(o-1),"easing"in e&&(r.easing=e.easing),"composite"in e&&(r.composite=e.composite),r[i]=n[a],t.push(r)}return t.sort(function(e,t){return e.offset-t.offset}),t}function a(t){if(null==t)return[];window.Symbol&&Symbol.iterator&&Array.prototype.from&&t[Symbol.iterator]&&(t=Array.from(t)),Array.isArray(t)||(t=o(t));for(var i=t.map(function(t){var i={};for(var n in t){var o=t[n];if("offset"==n){if(null!=o){if(o=Number(o),!isFinite(o))throw new TypeError("Keyframe offsets must be numbers.");if(o<0||o>1)throw new TypeError("Keyframe offsets must be between 0 and 1.")}}else if("composite"==n){if("add"==o||"accumulate"==o)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"add compositing is not supported"};if("replace"!=o)throw new TypeError("Invalid composite mode "+o+".")}else o="easing"==n?e.normalizeEasing(o):""+o;r(n,o,i)}return void 0==i.offset&&(i.offset=null),void 0==i.easing&&(i.easing="linear"),i}),n=!0,a=-1/0,s=0;s<i.length;s++){var l=i[s].offset;if(null!=l){if(l<a)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");a=l}else n=!1}return i=i.filter(function(e){return e.offset>=0&&e.offset<=1}),n||function(){var e=i.length;null==i[e-1].offset&&(i[e-1].offset=1),e>1&&null==i[0].offset&&(i[0].offset=0);for(var t=0,n=i[0].offset,r=1;r<e;r++){var o=i[r].offset;if(null!=o){for(var a=1;a<r-t;a++)i[t+a].offset=n+(o-n)*a/(r-t);t=r,n=o}}}(),i}var s={background:["backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundOrigin","backgroundClip","backgroundColor"],border:["borderTopColor","borderTopStyle","borderTopWidth","borderRightColor","borderRightStyle","borderRightWidth","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],flex:["flexGrow","flexShrink","flexBasis"],font:["fontFamily","fontSize","fontStyle","fontVariant","fontWeight","lineHeight"],margin:["marginTop","marginRight","marginBottom","marginLeft"],outline:["outlineColor","outlineStyle","outlineWidth"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"]},l=document.createElementNS("http://www.w3.org/1999/xhtml","div"),d={thin:"1px",medium:"3px",thick:"5px"},c={borderBottomWidth:d,borderLeftWidth:d,borderRightWidth:d,borderTopWidth:d,fontSize:{"xx-small":"60%","x-small":"75%",small:"89%",medium:"100%",large:"120%","x-large":"150%","xx-large":"200%"},fontWeight:{normal:"400",bold:"700"},outlineWidth:d,textShadow:{none:"0px 0px 0px transparent"},boxShadow:{none:"0px 0px 0px 0px transparent"}};e.convertToArrayForm=o,e.normalizeKeyframes=a}(i),function(e){var t={};e.isDeprecated=function(e,i,n,r){var o=r?"are":"is",a=new Date,s=new Date(i)
;return s.setMonth(s.getMonth()+3),!(a<s&&(e in t||console.warn("Web Animations: "+e+" "+o+" deprecated and will stop working on "+s.toDateString()+". "+n),t[e]=!0,1))},e.deprecated=function(t,i,n,r){var o=r?"are":"is";if(e.isDeprecated(t,i,n,r))throw new Error(t+" "+o+" no longer supported. "+n)}}(i),function(){if(document.documentElement.animate){var e=document.documentElement.animate([],0),t=!0;if(e&&(t=!1,"play|currentTime|pause|reverse|playbackRate|cancel|finish|startTime|playState".split("|").forEach(function(i){void 0===e[i]&&(t=!0)})),!t)return}!function(e,t,i){function n(e){for(var t={},i=0;i<e.length;i++)for(var n in e[i])if("offset"!=n&&"easing"!=n&&"composite"!=n){var r={offset:e[i].offset,easing:e[i].easing,value:e[i][n]};t[n]=t[n]||[],t[n].push(r)}for(var o in t){var a=t[o];if(0!=a[0].offset||1!=a[a.length-1].offset)throw{type:DOMException.NOT_SUPPORTED_ERR,name:"NotSupportedError",message:"Partial keyframes are not supported"}}return t}function r(i){var n=[];for(var r in i)for(var o=i[r],a=0;a<o.length-1;a++){var s=a,l=a+1,d=o[s].offset,c=o[l].offset,u=d,p=c;0==a&&(u=-1/0,0==c&&(l=s)),a==o.length-2&&(p=1/0,1==d&&(s=l)),n.push({applyFrom:u,applyTo:p,startOffset:o[s].offset,endOffset:o[l].offset,easingFunction:e.parseEasingFunction(o[s].easing),property:r,interpolation:t.propertyInterpolation(r,o[s].value,o[l].value)})}return n.sort(function(e,t){return e.startOffset-t.startOffset}),n}t.convertEffectInput=function(i){var o=e.normalizeKeyframes(i),a=n(o),s=r(a);return function(e,i){if(null!=i)s.filter(function(e){return i>=e.applyFrom&&i<e.applyTo}).forEach(function(n){var r=i-n.startOffset,o=n.endOffset-n.startOffset,a=0==o?0:n.easingFunction(r/o);t.apply(e,n.property,n.interpolation(a))});else for(var n in a)"offset"!=n&&"easing"!=n&&"composite"!=n&&t.clear(e,n)}}}(i,n),function(e,t,i){function n(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function r(e,t,i){s[i]=s[i]||[],s[i].push([e,t])}function o(e,t,i){for(var o=0;o<i.length;o++)r(e,t,n(i[o]))}function a(i,r,o){var a=i;/-/.test(i)&&!e.isDeprecated("Hyphenated property names","2016-03-22","Use camelCase instead.",!0)&&(a=n(i)),"initial"!=r&&"initial"!=o||("initial"==r&&(r=l[a]),"initial"==o&&(o=l[a]));for(var d=r==o?[]:s[a],c=0;d&&c<d.length;c++){var u=d[c][0](r),p=d[c][0](o);if(void 0!==u&&void 0!==p){var f=d[c][1](u,p);if(f){var h=t.Interpolation.apply(null,f);return function(e){return 0==e?r:1==e?o:h(e)}}}}return t.Interpolation(!1,!0,function(e){return e?o:r})}var s={};t.addPropertiesHandler=o;var l={backgroundColor:"transparent",backgroundPosition:"0% 0%",borderBottomColor:"currentColor",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",borderBottomWidth:"3px",borderLeftColor:"currentColor",borderLeftWidth:"3px",borderRightColor:"currentColor",borderRightWidth:"3px",borderSpacing:"2px",borderTopColor:"currentColor",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderTopWidth:"3px",bottom:"auto",clip:"rect(0px, 0px, 0px, 0px)",color:"black",fontSize:"100%",fontWeight:"400",height:"auto",left:"auto",letterSpacing:"normal",lineHeight:"120%",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",marginTop:"0px",maxHeight:"none",maxWidth:"none",minHeight:"0px",minWidth:"0px",opacity:"1.0",outlineColor:"invert",outlineOffset:"0px",outlineWidth:"3px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",right:"auto",strokeDasharray:"none",strokeDashoffset:"0px",textIndent:"0px",textShadow:"0px 0px 0px transparent",top:"auto",transform:"",verticalAlign:"0px",visibility:"visible",width:"auto",wordSpacing:"normal",zIndex:"auto"};t.propertyInterpolation=a}(i,n),function(e,t,i){function n(t){var i=e.calculateActiveDuration(t),n=function(n){return e.calculateIterationProgress(i,n,t)};return n._totalDuration=t.delay+i+t.endDelay,n}t.KeyframeEffect=function(i,r,o,a){var s,l=n(e.normalizeTimingInput(o)),d=t.convertEffectInput(r),c=function(){d(i,s)};return c._update=function(e){return null!==(s=l(e))},c._clear=function(){d(i,null)},c._hasSameTarget=function(e){return i===e},c._target=i,c._totalDuration=l._totalDuration,c._id=a,c}}(i,n),function(e,t){function i(e,t){return!(!t.namespaceURI||-1==t.namespaceURI.indexOf("/svg"))&&(a in e||(e[a]=/Trident|MSIE|IEMobile|Edge|Android 4/i.test(e.navigator.userAgent)),e[a])}function n(e,t,i){i.enumerable=!0,i.configurable=!0,Object.defineProperty(e,t,i)}function r(e){this._element=e,this._surrogateStyle=document.createElementNS("http://www.w3.org/1999/xhtml","div").style,this._style=e.style,this._length=0,this._isAnimatedProperty={},this._updateSvgTransformAttr=i(window,e),this._savedTransformAttr=null;for(var t=0;t<this._style.length;t++){var n=this._style[t];this._surrogateStyle[n]=this._style[n]}this._updateIndices()}function o(e){if(!e._webAnimationsPatchedStyle){var t=new r(e);try{n(e,"style",{get:function(){return t}})}catch(t){e.style._set=function(t,i){e.style[t]=i},e.style._clear=function(t){e.style[t]=""}}e._webAnimationsPatchedStyle=e.style}}var a="_webAnimationsUpdateSvgTransformAttr",s={cssText:1,length:1,parentRule:1},l={getPropertyCSSValue:1,getPropertyPriority:1,getPropertyValue:1,item:1,removeProperty:1,setProperty:1},d={removeProperty:1,setProperty:1};r.prototype={get cssText(){return this._surrogateStyle.cssText},set cssText(e){for(var t={},i=0;i<this._surrogateStyle.length;i++)t[this._surrogateStyle[i]]=!0;this._surrogateStyle.cssText=e,this._updateIndices();for(var i=0;i<this._surrogateStyle.length;i++)t[this._surrogateStyle[i]]=!0;for(var n in t)this._isAnimatedProperty[n]||this._style.setProperty(n,this._surrogateStyle.getPropertyValue(n))},get length(){return this._surrogateStyle.length},get parentRule(){return this._style.parentRule},_updateIndices:function(){for(;this._length<this._surrogateStyle.length;)Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,get:function(e){return function(){return this._surrogateStyle[e]}}(this._length)}),this._length++;for(;this._length>this._surrogateStyle.length;)this._length--,Object.defineProperty(this,this._length,{configurable:!0,enumerable:!1,value:void 0})},_set:function(t,i){this._style[t]=i,this._isAnimatedProperty[t]=!0,this._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(t)&&(null==this._savedTransformAttr&&(this._savedTransformAttr=this._element.getAttribute("transform")),this._element.setAttribute("transform",e.transformToSvgMatrix(i)))},_clear:function(t){this._style[t]=this._surrogateStyle[t],this._updateSvgTransformAttr&&"transform"==e.unprefixedPropertyName(t)&&(this._savedTransformAttr?this._element.setAttribute("transform",this._savedTransformAttr):this._element.removeAttribute("transform"),this._savedTransformAttr=null),delete this._isAnimatedProperty[t]}};for(var c in l)r.prototype[c]=function(e,t){return function(){var i=this._surrogateStyle[e].apply(this._surrogateStyle,arguments);return t&&(this._isAnimatedProperty[arguments[0]]||this._style[e].apply(this._style,arguments),this._updateIndices()),i}}(c,c in d);for(var u in document.documentElement.style)u in s||u in l||function(e){n(r.prototype,e,{get:function(){return this._surrogateStyle[e]},set:function(t){this._surrogateStyle[e]=t,this._updateIndices(),this._isAnimatedProperty[e]||(this._style[e]=t)}})}(u);e.apply=function(t,i,n){o(t),t.style._set(e.propertyName(i),n)},e.clear=function(t,i){t._webAnimationsPatchedStyle&&t.style._clear(e.propertyName(i))}}(n),function(e){window.Element.prototype.animate=function(t,i){var n="";return i&&i.id&&(n=i.id),e.timeline._play(e.KeyframeEffect(this,t,i,n))}}(n),function(e,t){function i(e,t,n){if("number"==typeof e&&"number"==typeof t)return e*(1-n)+t*n;if("boolean"==typeof e&&"boolean"==typeof t)return n<.5?e:t;if(e.length==t.length){for(var r=[],o=0;o<e.length;o++)r.push(i(e[o],t[o],n));return r}throw"Mismatched interpolation arguments "+e+":"+t}e.Interpolation=function(e,t,n){return function(r){return n(i(e,t,r))}}}(n),function(e,t){function i(e,t,i){return Math.max(Math.min(e,i),t)}function n(t,n,r){var o=e.dot(t,n);o=i(o,-1,1);var a=[];if(1===o)a=t;else for(var s=Math.acos(o),l=1*Math.sin(r*s)/Math.sqrt(1-o*o),d=0;d<4;d++)a.push(t[d]*(Math.cos(r*s)-o*l)+n[d]*l);return a}var r=function(){function e(e,t){for(var i=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],n=0;n<4;n++)for(var r=0;r<4;r++)for(var o=0;o<4;o++)i[n][r]+=t[n][o]*e[o][r];return i}function t(e){return 0==e[0][2]&&0==e[0][3]&&0==e[1][2]&&0==e[1][3]&&0==e[2][0]&&0==e[2][1]&&1==e[2][2]&&0==e[2][3]&&0==e[3][2]&&1==e[3][3]}function i(i,n,r,o,a){for(var s=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)s[l][3]=a[l];for(var l=0;l<3;l++)for(var d=0;d<3;d++)s[3][l]+=i[d]*s[d][l];var c=o[0],u=o[1],p=o[2],f=o[3],h=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];h[0][0]=1-2*(u*u+p*p),h[0][1]=2*(c*u-p*f),h[0][2]=2*(c*p+u*f),h[1][0]=2*(c*u+p*f),h[1][1]=1-2*(c*c+p*p),h[1][2]=2*(u*p-c*f),h[2][0]=2*(c*p-u*f),h[2][1]=2*(u*p+c*f),h[2][2]=1-2*(c*c+u*u),s=e(s,h);var g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r[2]&&(g[2][1]=r[2],s=e(s,g)),r[1]&&(g[2][1]=0,g[2][0]=r[0],s=e(s,g)),r[0]&&(g[2][0]=0,g[1][0]=r[0],s=e(s,g));for(var l=0;l<3;l++)for(var d=0;d<3;d++)s[l][d]*=n[l];return t(s)?[s[0][0],s[0][1],s[1][0],s[1][1],s[3][0],s[3][1]]:s[0].concat(s[1],s[2],s[3])}return i}();e.composeMatrix=r,e.quat=n}(n),function(e,t,i){e.sequenceNumber=0;var n=function(e,t,i){this.target=e,this.currentTime=t,this.timelineTime=i,this.type="finish",this.bubbles=!1,this.cancelable=!1,this.currentTarget=e,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()};t.Animation=function(t){this.id="",t&&t._id&&(this.id=t._id),this._sequenceNumber=e.sequenceNumber++,this._currentTime=0,this._startTime=null,this._paused=!1,this._playbackRate=1,this._inTimeline=!0,this._finishedFlag=!0,this.onfinish=null,this._finishHandlers=[],this._effect=t,this._inEffect=this._effect._update(0),this._idle=!0,this._currentTimePending=!1},t.Animation.prototype={_ensureAlive:function(){this.playbackRate<0&&0===this.currentTime?this._inEffect=this._effect._update(-1):this._inEffect=this._effect._update(this.currentTime),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,t.timeline._animations.push(this))},_tickCurrentTime:function(e,t){e!=this._currentTime&&(this._currentTime=e,this._isFinished&&!t&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this._ensureAlive())},get currentTime(){return this._idle||this._currentTimePending?null:this._currentTime},set currentTime(e){e=+e,isNaN(e)||(t.restart(),this._paused||null==this._startTime||(this._startTime=this._timeline.currentTime-e/this._playbackRate),this._currentTimePending=!1,this._currentTime!=e&&(this._idle&&(this._idle=!1,this._paused=!0),this._tickCurrentTime(e,!0),t.applyDirtiedAnimation(this)))},get startTime(){return this._startTime},set startTime(e){e=+e,isNaN(e)||this._paused||this._idle||(this._startTime=e,this._tickCurrentTime((this._timeline.currentTime-this._startTime)*this.playbackRate),t.applyDirtiedAnimation(this))},get playbackRate(){return this._playbackRate},set playbackRate(e){if(e!=this._playbackRate){var i=this.currentTime;this._playbackRate=e,this._startTime=null,"paused"!=this.playState&&"idle"!=this.playState&&(this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),t.applyDirtiedAnimation(this)),null!=i&&(this.currentTime=i)}},get _isFinished(){return!this._idle&&(this._playbackRate>0&&this._currentTime>=this._totalDuration||this._playbackRate<0&&this._currentTime<=0)},get _totalDuration(){return this._effect._totalDuration},get playState(){return this._idle?"idle":null==this._startTime&&!this._paused&&0!=this.playbackRate||this._currentTimePending?"pending":this._paused?"paused":this._isFinished?"finished":"running"},_rewind:function(){if(this._playbackRate>=0)this._currentTime=0;else{if(!(this._totalDuration<1/0))throw new DOMException("Unable to rewind negative playback rate animation with infinite duration","InvalidStateError");this._currentTime=this._totalDuration}},play:function(){this._paused=!1,(this._isFinished||this._idle)&&(this._rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this._ensureAlive(),t.applyDirtiedAnimation(this)},pause:function(){this._isFinished||this._paused||this._idle?this._idle&&(this._rewind(),this._idle=!1):this._currentTimePending=!0,this._startTime=null,this._paused=!0},finish:function(){this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this._currentTimePending=!1,t.applyDirtiedAnimation(this))},cancel:function(){this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._isFinished=!0,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this._effect._update(null),t.applyDirtiedAnimation(this))},reverse:function(){this.playbackRate*=-1,this.play()},addEventListener:function(e,t){"function"==typeof t&&"finish"==e&&this._finishHandlers.push(t)},removeEventListener:function(e,t){if("finish"==e){var i=this._finishHandlers.indexOf(t);i>=0&&this._finishHandlers.splice(i,1)}},_fireEvents:function(e){if(this._isFinished){if(!this._finishedFlag){var t=new n(this,this._currentTime,e),i=this._finishHandlers.concat(this.onfinish?[this.onfinish]:[]);setTimeout(function(){i.forEach(function(e){e.call(t.target,t)})},0),this._finishedFlag=!0}}else this._finishedFlag=!1},_tick:function(e,t){this._idle||this._paused||(null==this._startTime?t&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this._tickCurrentTime((e-this._startTime)*this.playbackRate)),t&&(this._currentTimePending=!1,this._fireEvents(e))},get _needsTick(){return this.playState in{pending:1,running:1}||!this._finishedFlag},_targetAnimations:function(){var e=this._effect._target;return e._activeAnimations||(e._activeAnimations=[]),e._activeAnimations},_markTarget:function(){var e=this._targetAnimations();-1===e.indexOf(this)&&e.push(this)},_unmarkTarget:function(){var e=this._targetAnimations(),t=e.indexOf(this);-1!==t&&e.splice(t,1)}}}(i,n),function(e,t,i){function n(e){var t=d;d=[],e<m.currentTime&&(e=m.currentTime),m._animations.sort(r),m._animations=s(e,!0,m._animations)[0],t.forEach(function(t){t[1](e)}),a(),u=void 0}function r(e,t){return e._sequenceNumber-t._sequenceNumber}function o(){this._animations=[],this.currentTime=window.performance&&performance.now?performance.now():0}function a(){h.forEach(function(e){e()}),h.length=0}function s(e,i,n){g=!0,f=!1,t.timeline.currentTime=e,p=!1;var r=[],o=[],a=[],s=[];return n.forEach(function(t){t._tick(e,i),t._inEffect?(o.push(t._effect),t._markTarget()):(r.push(t._effect),t._unmarkTarget()),t._needsTick&&(p=!0);var n=t._inEffect||t._needsTick;t._inTimeline=n,n?a.push(t):s.push(t)}),h.push.apply(h,r),h.push.apply(h,o),p&&requestAnimationFrame(function(){}),g=!1,[a,s]}var l=window.requestAnimationFrame,d=[],c=0;window.requestAnimationFrame=function(e){var t=c++;return 0==d.length&&l(n),d.push([t,e]),t},window.cancelAnimationFrame=function(e){d.forEach(function(t){t[0]==e&&(t[1]=function(){})})},o.prototype={_play:function(i){i._timing=e.normalizeTimingInput(i.timing);var n=new t.Animation(i);return n._idle=!1,n._timeline=this,this._animations.push(n),t.restart(),t.applyDirtiedAnimation(n),n}};var u=void 0,p=!1,f=!1;t.restart=function(){return p||(p=!0,requestAnimationFrame(function(){}),f=!0),f},t.applyDirtiedAnimation=function(e){if(!g){e._markTarget();var i=e._targetAnimations();i.sort(r),s(t.timeline.currentTime,!1,i.slice())[1].forEach(function(e){var t=m._animations.indexOf(e);-1!==t&&m._animations.splice(t,1)}),a()}};var h=[],g=!1,m=new o;t.timeline=m}(i,n),function(e,t){function i(e,t){for(var i=0,n=0;n<e.length;n++)i+=e[n]*t[n];return i}function n(e,t){return[e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],e[0]*t[4]+e[4]*t[5]+e[8]*t[6]+e[12]*t[7],e[1]*t[4]+e[5]*t[5]+e[9]*t[6]+e[13]*t[7],e[2]*t[4]+e[6]*t[5]+e[10]*t[6]+e[14]*t[7],e[3]*t[4]+e[7]*t[5]+e[11]*t[6]+e[15]*t[7],e[0]*t[8]+e[4]*t[9]+e[8]*t[10]+e[12]*t[11],e[1]*t[8]+e[5]*t[9]+e[9]*t[10]+e[13]*t[11],e[2]*t[8]+e[6]*t[9]+e[10]*t[10]+e[14]*t[11],e[3]*t[8]+e[7]*t[9]+e[11]*t[10]+e[15]*t[11],e[0]*t[12]+e[4]*t[13]+e[8]*t[14]+e[12]*t[15],e[1]*t[12]+e[5]*t[13]+e[9]*t[14]+e[13]*t[15],e[2]*t[12]+e[6]*t[13]+e[10]*t[14]+e[14]*t[15],e[3]*t[12]+e[7]*t[13]+e[11]*t[14]+e[15]*t[15]]}function r(e){var t=e.rad||0;return((e.deg||0)/360+(e.grad||0)/400+(e.turn||0))*(2*Math.PI)+t}function o(e){switch(e.t){case"rotatex":var t=r(e.d[0]);return[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1];case"rotatey":var t=r(e.d[0]);return[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1];case"rotate":case"rotatez":var t=r(e.d[0]);return[Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1,0,0,0,0,1];case"rotate3d":var i=e.d[0],n=e.d[1],o=e.d[2],t=r(e.d[3]),a=i*i+n*n+o*o;if(0===a)i=1,n=0,o=0;else if(1!==a){var s=Math.sqrt(a);i/=s,n/=s,o/=s}var l=Math.sin(t/2),d=l*Math.cos(t/2),c=l*l;return[1-2*(n*n+o*o)*c,2*(i*n*c+o*d),2*(i*o*c-n*d),0,2*(i*n*c-o*d),1-2*(i*i+o*o)*c,2*(n*o*c+i*d),0,2*(i*o*c+n*d),2*(n*o*c-i*d),1-2*(i*i+n*n)*c,0,0,0,0,1];case"scale":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,1,0,0,0,0,1];case"scalex":return[e.d[0],0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,e.d[0],0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,e.d[0],0,0,0,0,1];case"scale3d":return[e.d[0],0,0,0,0,e.d[1],0,0,0,0,e.d[2],0,0,0,0,1];case"skew":var u=r(e.d[0]),p=r(e.d[1]);return[1,Math.tan(p),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewx":var t=r(e.d[0]);return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1];case"skewy":var t=r(e.d[0]);return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":var i=e.d[0].px||0,n=e.d[1].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,i,n,0,1];case"translatex":var i=e.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,i,0,0,1];case"translatey":var n=e.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":var o=e.d[0].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,o,1];case"translate3d":var i=e.d[0].px||0,n=e.d[1].px||0,o=e.d[2].px||0;return[1,0,0,0,0,1,0,0,0,0,1,0,i,n,o,1];case"perspective":return[1,0,0,0,0,1,0,0,0,0,1,e.d[0].px?-1/e.d[0].px:0,0,0,0,1];case"matrix":return[e.d[0],e.d[1],0,0,e.d[2],e.d[3],0,0,0,0,1,0,e.d[4],e.d[5],0,1];case"matrix3d":return e.d}}function a(e){return 0===e.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:e.map(o).reduce(n)}function s(e){return[l(a(e))]}var l=function(){function e(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][2]*e[1][1]*e[2][0]-e[1][2]*e[2][1]*e[0][0]-e[2][2]*e[0][1]*e[1][0]}function t(t){for(var i=1/e(t),n=t[0][0],r=t[0][1],o=t[0][2],a=t[1][0],s=t[1][1],l=t[1][2],d=t[2][0],c=t[2][1],u=t[2][2],p=[[(s*u-l*c)*i,(o*c-r*u)*i,(r*l-o*s)*i,0],[(l*d-a*u)*i,(n*u-o*d)*i,(o*a-n*l)*i,0],[(a*c-s*d)*i,(d*r-n*c)*i,(n*s-r*a)*i,0]],f=[],h=0;h<3;h++){for(var g=0,m=0;m<3;m++)g+=t[3][m]*p[m][h];f.push(g)}return f.push(1),p.push(f),p}function n(e){return[[e[0][0],e[1][0],e[2][0],e[3][0]],[e[0][1],e[1][1],e[2][1],e[3][1]],[e[0][2],e[1][2],e[2][2],e[3][2]],[e[0][3],e[1][3],e[2][3],e[3][3]]]}function r(e,t){for(var i=[],n=0;n<4;n++){for(var r=0,o=0;o<4;o++)r+=e[o]*t[o][n];i.push(r)}return i}function o(e){var t=a(e);return[e[0]/t,e[1]/t,e[2]/t]}function a(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function s(e,t,i,n){return[i*e[0]+n*t[0],i*e[1]+n*t[1],i*e[2]+n*t[2]]}function l(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function d(d){var c=[d.slice(0,4),d.slice(4,8),d.slice(8,12),d.slice(12,16)];if(1!==c[3][3])return null;for(var u=[],p=0;p<4;p++)u.push(c[p].slice());for(var p=0;p<3;p++)u[p][3]=0;if(0===e(u))return null;var f,h=[];c[0][3]||c[1][3]||c[2][3]?(h.push(c[0][3]),h.push(c[1][3]),h.push(c[2][3]),h.push(c[3][3]),f=r(h,n(t(u)))):f=[0,0,0,1];var g=c[3].slice(0,3),m=[];m.push(c[0].slice(0,3));var v=[];v.push(a(m[0])),m[0]=o(m[0]);var b=[];m.push(c[1].slice(0,3)),b.push(i(m[0],m[1])),m[1]=s(m[1],m[0],1,-b[0]),v.push(a(m[1])),m[1]=o(m[1]),b[0]/=v[1],m.push(c[2].slice(0,3)),b.push(i(m[0],m[2])),m[2]=s(m[2],m[0],1,-b[1]),b.push(i(m[1],m[2])),m[2]=s(m[2],m[1],1,-b[2]),v.push(a(m[2])),m[2]=o(m[2]),b[1]/=v[2],b[2]/=v[2];var y=l(m[1],m[2]);if(i(m[0],y)<0)for(var p=0;p<3;p++)v[p]*=-1,m[p][0]*=-1,m[p][1]*=-1,m[p][2]*=-1;var $,w,x=m[0][0]+m[1][1]+m[2][2]+1;return x>1e-4?($=.5/Math.sqrt(x),w=[(m[2][1]-m[1][2])*$,(m[0][2]-m[2][0])*$,(m[1][0]-m[0][1])*$,.25/$]):m[0][0]>m[1][1]&&m[0][0]>m[2][2]?($=2*Math.sqrt(1+m[0][0]-m[1][1]-m[2][2]),w=[.25*$,(m[0][1]+m[1][0])/$,(m[0][2]+m[2][0])/$,(m[2][1]-m[1][2])/$]):m[1][1]>m[2][2]?($=2*Math.sqrt(1+m[1][1]-m[0][0]-m[2][2]),w=[(m[0][1]+m[1][0])/$,.25*$,(m[1][2]+m[2][1])/$,(m[0][2]-m[2][0])/$]):($=2*Math.sqrt(1+m[2][2]-m[0][0]-m[1][1]),w=[(m[0][2]+m[2][0])/$,(m[1][2]+m[2][1])/$,.25*$,(m[1][0]-m[0][1])/$]),[g,v,b,w,f]}return d}();e.dot=i,e.makeMatrixDecomposition=s,e.transformListToMatrix=a}(n),function(e){function t(e,t){var i=e.exec(t);if(i)return i=e.ignoreCase?i[0].toLowerCase():i[0],[i,t.substr(i.length)]}function i(e,t){t=t.replace(/^\s*/,"");var i=e(t);if(i)return[i[0],i[1].replace(/^\s*/,"")]}function n(e,n,r){e=i.bind(null,e);for(var o=[];;){var a=e(r);if(!a)return[o,r];if(o.push(a[0]),r=a[1],!(a=t(n,r))||""==a[1])return[o,r];r=a[1]}}function r(e,t){for(var i=0,n=0;n<t.length&&(!/\s|,/.test(t[n])||0!=i);n++)if("("==t[n])i++;else if(")"==t[n]&&(i--,0==i&&n++,i<=0))break;var r=e(t.substr(0,n));return void 0==r?void 0:[r,t.substr(n)]}function o(e,t){for(var i=e,n=t;i&&n;)i>n?i%=n:n%=i;return i=e*t/(i+n)}function a(e){return function(t){var i=e(t);return i&&(i[0]=void 0),i}}function s(e,t){return function(i){return e(i)||[t,i]}}function l(t,i){for(var n=[],r=0;r<t.length;r++){var o=e.consumeTrimmed(t[r],i);if(!o||""==o[0])return;void 0!==o[0]&&n.push(o[0]),i=o[1]}if(""==i)return n}function d(e,t,i,n,r){for(var a=[],s=[],l=[],d=o(n.length,r.length),c=0;c<d;c++){var u=t(n[c%n.length],r[c%r.length]);if(!u)return;a.push(u[0]),s.push(u[1]),l.push(u[2])}return[a,s,function(t){var n=t.map(function(e,t){return l[t](e)}).join(i);return e?e(n):n}]}function c(e,t,i){for(var n=[],r=[],o=[],a=0,s=0;s<i.length;s++)if("function"==typeof i[s]){var l=i[s](e[a],t[a++]);n.push(l[0]),r.push(l[1]),o.push(l[2])}else!function(e){n.push(!1),r.push(!1),o.push(function(){return i[e]})}(s);return[n,r,function(e){for(var t="",i=0;i<e.length;i++)t+=o[i](e[i]);return t}]}e.consumeToken=t,e.consumeTrimmed=i,e.consumeRepeated=n,e.consumeParenthesised=r,e.ignore=a,e.optional=s,e.consumeList=l,e.mergeNestedRepeated=d.bind(null,null),e.mergeWrappedNestedRepeated=d,e.mergeList=c}(n),function(e){function t(t){function i(t){var i=e.consumeToken(/^inset/i,t);if(i)return n.inset=!0,i;var i=e.consumeLengthOrPercent(t);if(i)return n.lengths.push(i[0]),i;var i=e.consumeColor(t);return i?(n.color=i[0],i):void 0}var n={inset:!1,lengths:[],color:null},r=e.consumeRepeated(i,/^/,t);if(r&&r[0].length)return[n,r[1]]}function i(i){var n=e.consumeRepeated(t,/^,/,i);if(n&&""==n[1])return n[0]}function n(t,i){for(;t.lengths.length<Math.max(t.lengths.length,i.lengths.length);)t.lengths.push({px:0});for(;i.lengths.length<Math.max(t.lengths.length,i.lengths.length);)i.lengths.push({px:0});if(t.inset==i.inset&&!!t.color==!!i.color){for(var n,r=[],o=[[],0],a=[[],0],s=0;s<t.lengths.length;s++){var l=e.mergeDimensions(t.lengths[s],i.lengths[s],2==s);o[0].push(l[0]),a[0].push(l[1]),r.push(l[2])}if(t.color&&i.color){var d=e.mergeColors(t.color,i.color);o[1]=d[0],a[1]=d[1],n=d[2]}return[o,a,function(e){for(var i=t.inset?"inset ":" ",o=0;o<r.length;o++)i+=r[o](e[0][o])+" ";return n&&(i+=n(e[1])),i}]}}function r(t,i,n,r){function o(e){return{inset:e,color:[0,0,0,0],lengths:[{px:0},{px:0},{px:0},{px:0}]}}for(var a=[],s=[],l=0;l<n.length||l<r.length;l++){var d=n[l]||o(r[l].inset),c=r[l]||o(n[l].inset);a.push(d),s.push(c)}return e.mergeNestedRepeated(t,i,a,s)}var o=r.bind(null,n,", ");e.addPropertiesHandler(i,o,["box-shadow","text-shadow"])}(n),function(e,t){function i(e){return e.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function n(e,t,i){return Math.min(t,Math.max(e,i))}function r(e){if(/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e))return Number(e)}function o(e,t){return[e,t,i]}function a(e,t){if(0!=e)return l(0,1/0)(e,t)}function s(e,t){return[e,t,function(e){return Math.round(n(1,1/0,e))}]}function l(e,t){return function(r,o){return[r,o,function(r){return i(n(e,t,r))}]}}function d(e){var t=e.trim().split(/\s*[\s,]\s*/);if(0!==t.length){for(var i=[],n=0;n<t.length;n++){var o=r(t[n]);if(void 0===o)return;i.push(o)}return i}}function c(e,t){if(e.length==t.length)return[e,t,function(e){return e.map(i).join(" ")}]}function u(e,t){return[e,t,Math.round]}e.clamp=n,e.addPropertiesHandler(d,c,["stroke-dasharray"]),e.addPropertiesHandler(r,l(0,1/0),["border-image-width","line-height"]),e.addPropertiesHandler(r,l(0,1),["opacity","shape-image-threshold"]),e.addPropertiesHandler(r,a,["flex-grow","flex-shrink"]),e.addPropertiesHandler(r,s,["orphans","widows"]),e.addPropertiesHandler(r,u,["z-index"]),e.parseNumber=r,e.parseNumberList=d,e.mergeNumbers=o,e.numberToString=i}(n),function(e,t){function i(e,t){if("visible"==e||"visible"==t)return[0,1,function(i){return i<=0?e:i>=1?t:"visible"}]}e.addPropertiesHandler(String,i,["visibility"])}(n),function(e,t){function i(e){e=e.trim(),o.fillStyle="#000",o.fillStyle=e;var t=o.fillStyle;if(o.fillStyle="#fff",o.fillStyle=e,t==o.fillStyle){o.fillRect(0,0,1,1);var i=o.getImageData(0,0,1,1).data;o.clearRect(0,0,1,1);var n=i[3]/255;return[i[0]*n,i[1]*n,i[2]*n,n]}}function n(t,i){return[t,i,function(t){if(t[3])for(var i=0;i<3;i++)t[i]=Math.round(function(e){return Math.max(0,Math.min(255,e))}(t[i]/t[3]));return t[3]=e.numberToString(e.clamp(0,1,t[3])),"rgba("+t.join(",")+")"}]}var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=r.height=1;var o=r.getContext("2d");e.addPropertiesHandler(i,n,["background-color","border-bottom-color","border-left-color","border-right-color","border-top-color","color","fill","flood-color","lighting-color","outline-color","stop-color","stroke","text-decoration-color"]),e.consumeColor=e.consumeParenthesised.bind(null,i),e.mergeColors=n}(n),function(e,t){function i(e){function t(){var t=s.exec(e);a=t?t[0]:void 0}function i(){var e=Number(a);return t(),e}function n(){if("("!==a)return i();t();var e=o();return")"!==a?NaN:(t(),e)}function r(){for(var e=n();"*"===a||"/"===a;){var i=a;t();var r=n();"*"===i?e*=r:e/=r}return e}function o(){for(var e=r();"+"===a||"-"===a;){var i=a;t();var n=r();"+"===i?e+=n:e-=n}return e}var a,s=/([\+\-\w\.]+|[\(\)\*\/])/g;return t(),o()}function n(e,t){if("0"==(t=t.trim().toLowerCase())&&"px".search(e)>=0)return{px:0};if(/^[^(]*$|^calc/.test(t)){t=t.replace(/calc\(/g,"(");var n={};t=t.replace(e,function(e){return n[e]=null,"U"+e});for(var r="U("+e.source+")",o=t.replace(/[-+]?(\d*\.)?\d+([Ee][-+]?\d+)?/g,"N").replace(new RegExp("N"+r,"g"),"D").replace(/\s[+-]\s/g,"O").replace(/\s/g,""),a=[/N\*(D)/g,/(N|D)[*\/]N/g,/(N|D)O\1/g,/\((N|D)\)/g],s=0;s<a.length;)a[s].test(o)?(o=o.replace(a[s],"$1"),s=0):s++;if("D"==o){for(var l in n){var d=i(t.replace(new RegExp("U"+l,"g"),"").replace(new RegExp(r,"g"),"*0"));if(!isFinite(d))return;n[l]=d}return n}}}function r(e,t){return o(e,t,!0)}function o(t,i,n){var r,o=[];for(r in t)o.push(r);for(r in i)o.indexOf(r)<0&&o.push(r);return t=o.map(function(e){return t[e]||0}),i=o.map(function(e){return i[e]||0}),[t,i,function(t){var i=t.map(function(i,r){return 1==t.length&&n&&(i=Math.max(i,0)),e.numberToString(i)+o[r]}).join(" + ");return t.length>1?"calc("+i+")":i}]}var a="px|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc",s=n.bind(null,new RegExp(a,"g")),l=n.bind(null,new RegExp(a+"|%","g")),d=n.bind(null,/deg|rad|grad|turn/g);e.parseLength=s,e.parseLengthOrPercent=l,e.consumeLengthOrPercent=e.consumeParenthesised.bind(null,l),e.parseAngle=d,e.mergeDimensions=o;var c=e.consumeParenthesised.bind(null,s),u=e.consumeRepeated.bind(void 0,c,/^/),p=e.consumeRepeated.bind(void 0,u,/^,/);e.consumeSizePairList=p;var f=function(e){var t=p(e);if(t&&""==t[1])return t[0]},h=e.mergeNestedRepeated.bind(void 0,r," "),g=e.mergeNestedRepeated.bind(void 0,h,",");e.mergeNonNegativeSizePair=h,e.addPropertiesHandler(f,g,["background-size"]),e.addPropertiesHandler(l,r,["border-bottom-width","border-image-width","border-left-width","border-right-width","border-top-width","flex-basis","font-size","height","line-height","max-height","max-width","outline-width","width"]),e.addPropertiesHandler(l,o,["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","bottom","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","min-height","min-width","outline-offset","padding-bottom","padding-left","padding-right","padding-top","perspective","right","shape-margin","stroke-dashoffset","text-indent","top","vertical-align","word-spacing"])}(n),function(e,t){function i(t){return e.consumeLengthOrPercent(t)||e.consumeToken(/^auto/,t)}function n(t){var n=e.consumeList([e.ignore(e.consumeToken.bind(null,/^rect/)),e.ignore(e.consumeToken.bind(null,/^\(/)),e.consumeRepeated.bind(null,i,/^,/),e.ignore(e.consumeToken.bind(null,/^\)/))],t);if(n&&4==n[0].length)return n[0]}function r(t,i){return"auto"==t||"auto"==i?[!0,!1,function(n){var r=n?t:i;if("auto"==r)return"auto";var o=e.mergeDimensions(r,r);return o[2](o[0])}]:e.mergeDimensions(t,i)}function o(e){return"rect("+e+")"}var a=e.mergeWrappedNestedRepeated.bind(null,o,r,", ");e.parseBox=n,e.mergeBoxes=a,e.addPropertiesHandler(n,a,["clip"])}(n),function(e,t){function i(e){return function(t){var i=0;return e.map(function(e){return e===c?t[i++]:e})}}function n(e){return e}function r(t){if("none"==(t=t.toLowerCase().trim()))return[];for(var i,n=/\s*(\w+)\(([^)]*)\)/g,r=[],o=0;i=n.exec(t);){if(i.index!=o)return;o=i.index+i[0].length;var a=i[1],s=f[a];if(!s)return;var l=i[2].split(","),d=s[0];if(d.length<l.length)return;for(var c=[],h=0;h<d.length;h++){var g,m=l[h],v=d[h];if(void 0===(g=m?{A:function(t){return"0"==t.trim()?p:e.parseAngle(t)},N:e.parseNumber,T:e.parseLengthOrPercent,L:e.parseLength}[v.toUpperCase()](m):{a:p,n:c[0],t:u}[v]))return;c.push(g)}if(r.push({t:a,d:c}),n.lastIndex==t.length)return r}}function o(e){return e.toFixed(6).replace(".000000","")}function a(t,i){if(t.decompositionPair!==i){t.decompositionPair=i;var n=e.makeMatrixDecomposition(t)}if(i.decompositionPair!==t){i.decompositionPair=t;var r=e.makeMatrixDecomposition(i)}return null==n[0]||null==r[0]?[[!1],[!0],function(e){return e?i[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var i=e.quat(n[0][3],r[0][3],t[5]);return e.composeMatrix(t[0],t[1],t[2],i,t[4]).map(o).join(",")}])}function s(e){return e.replace(/[xy]/,"")}function l(e){return e.replace(/(x|y|z|3d)?$/,"3d")}function d(t,i){var n=e.makeMatrixDecomposition&&!0,r=!1;if(!t.length||!i.length){t.length||(r=!0,t=i,i=[]);for(var o=0;o<t.length;o++){var d=t[o].t,c=t[o].d,u="scale"==d.substr(0,5)?1:0;i.push({t:d,d:c.map(function(e){if("number"==typeof e)return u;var t={};for(var i in e)t[i]=u;return t})})}}var p=[],h=[],g=[];if(t.length!=i.length){if(!n)return;var m=a(t,i);p=[m[0]],h=[m[1]],g=[["matrix",[m[2]]]]}else for(var o=0;o<t.length;o++){var d,v=t[o].t,b=i[o].t,y=t[o].d,$=i[o].d,w=f[v],x=f[b];if(function(e,t){return"perspective"==e&&"perspective"==t||("matrix"==e||"matrix3d"==e)&&("matrix"==t||"matrix3d"==t)}(v,b)){if(!n)return;var m=a([t[o]],[i[o]]);p.push(m[0]),h.push(m[1]),g.push(["matrix",[m[2]]])}else{if(v==b)d=v;else if(w[2]&&x[2]&&s(v)==s(b))d=s(v),y=w[2](y),$=x[2]($);else{if(!w[1]||!x[1]||l(v)!=l(b)){if(!n)return;var m=a(t,i);p=[m[0]],h=[m[1]],g=[["matrix",[m[2]]]];break}d=l(v),y=w[1](y),$=x[1]($)}for(var j=[],_=[],C=[],q=0;q<y.length;q++){var S="number"==typeof y[q]?e.mergeNumbers:e.mergeDimensions,m=S(y[q],$[q]);j[q]=m[0],_[q]=m[1],C.push(m[2])}p.push(j),h.push(_),g.push([d,C])}}
if(r){var D=p;p=h,h=D}return[p,h,function(e){return e.map(function(e,t){var i=e.map(function(e,i){return g[t][1][i](e)}).join(",");return"matrix"==g[t][0]&&16==i.split(",").length&&(g[t][0]="matrix3d"),g[t][0]+"("+i+")"}).join(" ")}]}var c=null,u={px:0},p={deg:0},f={matrix:["NNNNNN",[c,c,0,0,c,c,0,0,0,0,1,0,c,c,0,1],n],matrix3d:["NNNNNNNNNNNNNNNN",n],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",i([c,c,1]),n],scalex:["N",i([c,1,1]),i([c,1])],scaley:["N",i([1,c,1]),i([1,c])],scalez:["N",i([1,1,c])],scale3d:["NNN",n],skew:["Aa",null,n],skewx:["A",null,i([c,p])],skewy:["A",null,i([p,c])],translate:["Tt",i([c,c,u]),n],translatex:["T",i([c,u,u]),i([c,u])],translatey:["T",i([u,c,u]),i([u,c])],translatez:["L",i([u,u,c])],translate3d:["TTL",n]};e.addPropertiesHandler(r,d,["transform"]),e.transformToSvgMatrix=function(t){var i=e.transformListToMatrix(r(t));return"matrix("+o(i[0])+" "+o(i[1])+" "+o(i[4])+" "+o(i[5])+" "+o(i[12])+" "+o(i[13])+")"}}(n),function(e){function t(e){var t=Number(e);if(!(isNaN(t)||t<100||t>900||t%100!=0))return t}function i(t){return t=100*Math.round(t/100),t=e.clamp(100,900,t),400===t?"normal":700===t?"bold":String(t)}function n(e,t){return[e,t,i]}e.addPropertiesHandler(t,n,["font-weight"])}(n),function(e){function t(e){var t={};for(var i in e)t[i]=-e[i];return t}function i(t){return e.consumeToken(/^(left|center|right|top|bottom)\b/i,t)||e.consumeLengthOrPercent(t)}function n(t,n){var r=e.consumeRepeated(i,/^/,n);if(r&&""==r[1]){var o=r[0];if(o[0]=o[0]||"center",o[1]=o[1]||"center",3==t&&(o[2]=o[2]||{px:0}),o.length==t){if(/top|bottom/.test(o[0])||/left|right/.test(o[1])){var s=o[0];o[0]=o[1],o[1]=s}if(/left|right|center|Object/.test(o[0])&&/top|bottom|center|Object/.test(o[1]))return o.map(function(e){return"object"==typeof e?e:a[e]})}}}function r(n){var r=e.consumeRepeated(i,/^/,n);if(r){for(var o=r[0],s=[{"%":50},{"%":50}],l=0,d=!1,c=0;c<o.length;c++){var u=o[c];"string"==typeof u?(d=/bottom|right/.test(u),l={left:0,right:0,center:l,top:1,bottom:1}[u],s[l]=a[u],"center"==u&&l++):(d&&(u=t(u),u["%"]=(u["%"]||0)+100),s[l]=u,l++,d=!1)}return[s,r[1]]}}function o(t){var i=e.consumeRepeated(r,/^,/,t);if(i&&""==i[1])return i[0]}var a={left:{"%":0},center:{"%":50},right:{"%":100},top:{"%":0},bottom:{"%":100}},s=e.mergeNestedRepeated.bind(null,e.mergeDimensions," ");e.addPropertiesHandler(n.bind(null,3),s,["transform-origin"]),e.addPropertiesHandler(n.bind(null,2),s,["perspective-origin"]),e.consumePosition=r,e.mergeOffsetList=s;var l=e.mergeNestedRepeated.bind(null,s,", ");e.addPropertiesHandler(o,l,["background-position","object-position"])}(n),function(e){function t(t){var i=e.consumeToken(/^circle/,t);if(i&&i[0])return["circle"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),n,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],i[1]));var o=e.consumeToken(/^ellipse/,t);if(o&&o[0])return["ellipse"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),r,e.ignore(e.consumeToken.bind(void 0,/^at/)),e.consumePosition,e.ignore(e.consumeToken.bind(void 0,/^\)/))],o[1]));var a=e.consumeToken(/^polygon/,t);return a&&a[0]?["polygon"].concat(e.consumeList([e.ignore(e.consumeToken.bind(void 0,/^\(/)),e.optional(e.consumeToken.bind(void 0,/^nonzero\s*,|^evenodd\s*,/),"nonzero,"),e.consumeSizePairList,e.ignore(e.consumeToken.bind(void 0,/^\)/))],a[1])):void 0}function i(t,i){if(t[0]===i[0])return"circle"==t[0]?e.mergeList(t.slice(1),i.slice(1),["circle(",e.mergeDimensions," at ",e.mergeOffsetList,")"]):"ellipse"==t[0]?e.mergeList(t.slice(1),i.slice(1),["ellipse(",e.mergeNonNegativeSizePair," at ",e.mergeOffsetList,")"]):"polygon"==t[0]&&t[1]==i[1]?e.mergeList(t.slice(2),i.slice(2),["polygon(",t[1],a,")"]):void 0}var n=e.consumeParenthesised.bind(null,e.parseLengthOrPercent),r=e.consumeRepeated.bind(void 0,n,/^/),o=e.mergeNestedRepeated.bind(void 0,e.mergeDimensions," "),a=e.mergeNestedRepeated.bind(void 0,o,",");e.addPropertiesHandler(t,i,["shape-outside"])}(n),function(e,t){function i(e,t){t.concat([e]).forEach(function(t){t in document.documentElement.style&&(n[e]=t),r[t]=e})}var n={},r={};i("transform",["webkitTransform","msTransform"]),i("transformOrigin",["webkitTransformOrigin"]),i("perspective",["webkitPerspective"]),i("perspectiveOrigin",["webkitPerspectiveOrigin"]),e.propertyName=function(e){return n[e]||e},e.unprefixedPropertyName=function(e){return r[e]||e}}(n)}(),function(){if(void 0===document.createElement("div").animate([]).oncancel){var e;if(window.performance&&performance.now)var e=function(){return performance.now()};else var e=function(){return Date.now()};var t=function(e,t,i){this.target=e,this.currentTime=t,this.timelineTime=i,this.type="cancel",this.bubbles=!1,this.cancelable=!1,this.currentTarget=e,this.defaultPrevented=!1,this.eventPhase=Event.AT_TARGET,this.timeStamp=Date.now()},i=window.Element.prototype.animate;window.Element.prototype.animate=function(n,r){var o=i.call(this,n,r);o._cancelHandlers=[],o.oncancel=null;var a=o.cancel;o.cancel=function(){a.call(this);var i=new t(this,null,e()),n=this._cancelHandlers.concat(this.oncancel?[this.oncancel]:[]);setTimeout(function(){n.forEach(function(e){e.call(i.target,i)})},0)};var s=o.addEventListener;o.addEventListener=function(e,t){"function"==typeof t&&"cancel"==e?this._cancelHandlers.push(t):s.call(this,e,t)};var l=o.removeEventListener;return o.removeEventListener=function(e,t){if("cancel"==e){var i=this._cancelHandlers.indexOf(t);i>=0&&this._cancelHandlers.splice(i,1)}else l.call(this,e,t)},o}}}(),function(e){var t=document.documentElement,i=null,n=!1;try{var r=getComputedStyle(t).getPropertyValue("opacity"),o="0"==r?"1":"0";i=t.animate({opacity:[o,o]},{duration:1}),i.currentTime=0,n=getComputedStyle(t).getPropertyValue("opacity")==o}catch(e){}finally{i&&i.cancel()}if(!n){var a=window.Element.prototype.animate;window.Element.prototype.animate=function(t,i){return window.Symbol&&Symbol.iterator&&Array.prototype.from&&t[Symbol.iterator]&&(t=Array.from(t)),Array.isArray(t)||null===t||(t=e.convertToArrayForm(t)),a.call(this,t,i)}}}(i),function(e,t,i){function n(e){var i=t.timeline;i.currentTime=e,i._discardAnimations(),0==i._animations.length?o=!1:requestAnimationFrame(n)}var r=window.requestAnimationFrame;window.requestAnimationFrame=function(e){return r(function(i){t.timeline._updateAnimationsPromises(),e(i),t.timeline._updateAnimationsPromises()})},t.AnimationTimeline=function(){this._animations=[],this.currentTime=void 0},t.AnimationTimeline.prototype={getAnimations:function(){return this._discardAnimations(),this._animations.slice()},_updateAnimationsPromises:function(){t.animationsWithPromises=t.animationsWithPromises.filter(function(e){return e._updatePromises()})},_discardAnimations:function(){this._updateAnimationsPromises(),this._animations=this._animations.filter(function(e){return"finished"!=e.playState&&"idle"!=e.playState})},_play:function(e){var i=new t.Animation(e,this);return this._animations.push(i),t.restartWebAnimationsNextTick(),i._updatePromises(),i._animation.play(),i._updatePromises(),i},play:function(e){return e&&e.remove(),this._play(e)}};var o=!1;t.restartWebAnimationsNextTick=function(){o||(o=!0,requestAnimationFrame(n))};var a=new t.AnimationTimeline;t.timeline=a;try{Object.defineProperty(window.document,"timeline",{configurable:!0,get:function(){return a}})}catch(e){}try{window.document.timeline=a}catch(e){}}(0,r),function(e,t,i){t.animationsWithPromises=[],t.Animation=function(t,i){if(this.id="",t&&t._id&&(this.id=t._id),this.effect=t,t&&(t._animation=this),!i)throw new Error("Animation with null timeline is not supported");this._timeline=i,this._sequenceNumber=e.sequenceNumber++,this._holdTime=0,this._paused=!1,this._isGroup=!1,this._animation=null,this._childAnimations=[],this._callback=null,this._oldPlayState="idle",this._rebuildUnderlyingAnimation(),this._animation.cancel(),this._updatePromises()},t.Animation.prototype={_updatePromises:function(){var e=this._oldPlayState,t=this.playState;return this._readyPromise&&t!==e&&("idle"==t?(this._rejectReadyPromise(),this._readyPromise=void 0):"pending"==e?this._resolveReadyPromise():"pending"==t&&(this._readyPromise=void 0)),this._finishedPromise&&t!==e&&("idle"==t?(this._rejectFinishedPromise(),this._finishedPromise=void 0):"finished"==t?this._resolveFinishedPromise():"finished"==e&&(this._finishedPromise=void 0)),this._oldPlayState=this.playState,this._readyPromise||this._finishedPromise},_rebuildUnderlyingAnimation:function(){this._updatePromises();var e,i,n,r,o=!!this._animation;o&&(e=this.playbackRate,i=this._paused,n=this.startTime,r=this.currentTime,this._animation.cancel(),this._animation._wrapper=null,this._animation=null),(!this.effect||this.effect instanceof window.KeyframeEffect)&&(this._animation=t.newUnderlyingAnimationForKeyframeEffect(this.effect),t.bindAnimationForKeyframeEffect(this)),(this.effect instanceof window.SequenceEffect||this.effect instanceof window.GroupEffect)&&(this._animation=t.newUnderlyingAnimationForGroup(this.effect),t.bindAnimationForGroup(this)),this.effect&&this.effect._onsample&&t.bindAnimationForCustomEffect(this),o&&(1!=e&&(this.playbackRate=e),null!==n?this.startTime=n:null!==r?this.currentTime=r:null!==this._holdTime&&(this.currentTime=this._holdTime),i&&this.pause()),this._updatePromises()},_updateChildren:function(){if(this.effect&&"idle"!=this.playState){var e=this.effect._timing.delay;this._childAnimations.forEach(function(i){this._arrangeChildren(i,e),this.effect instanceof window.SequenceEffect&&(e+=t.groupChildDuration(i.effect))}.bind(this))}},_setExternalAnimation:function(e){if(this.effect&&this._isGroup)for(var t=0;t<this.effect.children.length;t++)this.effect.children[t]._animation=e,this._childAnimations[t]._setExternalAnimation(e)},_constructChildAnimations:function(){if(this.effect&&this._isGroup){var e=this.effect._timing.delay;this._removeChildAnimations(),this.effect.children.forEach(function(i){var n=t.timeline._play(i);this._childAnimations.push(n),n.playbackRate=this.playbackRate,this._paused&&n.pause(),i._animation=this.effect._animation,this._arrangeChildren(n,e),this.effect instanceof window.SequenceEffect&&(e+=t.groupChildDuration(i))}.bind(this))}},_arrangeChildren:function(e,t){null===this.startTime?e.currentTime=this.currentTime-t/this.playbackRate:e.startTime!==this.startTime+t/this.playbackRate&&(e.startTime=this.startTime+t/this.playbackRate)},get timeline(){return this._timeline},get playState(){return this._animation?this._animation.playState:"idle"},get finished(){return window.Promise?(this._finishedPromise||(-1==t.animationsWithPromises.indexOf(this)&&t.animationsWithPromises.push(this),this._finishedPromise=new Promise(function(e,t){this._resolveFinishedPromise=function(){e(this)},this._rejectFinishedPromise=function(){t({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"finished"==this.playState&&this._resolveFinishedPromise()),this._finishedPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get ready(){return window.Promise?(this._readyPromise||(-1==t.animationsWithPromises.indexOf(this)&&t.animationsWithPromises.push(this),this._readyPromise=new Promise(function(e,t){this._resolveReadyPromise=function(){e(this)},this._rejectReadyPromise=function(){t({type:DOMException.ABORT_ERR,name:"AbortError"})}}.bind(this)),"pending"!==this.playState&&this._resolveReadyPromise()),this._readyPromise):(console.warn("Animation Promises require JavaScript Promise constructor"),null)},get onfinish(){return this._animation.onfinish},set onfinish(e){this._animation.onfinish="function"==typeof e?function(t){t.target=this,e.call(this,t)}.bind(this):e},get oncancel(){return this._animation.oncancel},set oncancel(e){this._animation.oncancel="function"==typeof e?function(t){t.target=this,e.call(this,t)}.bind(this):e},get currentTime(){this._updatePromises();var e=this._animation.currentTime;return this._updatePromises(),e},set currentTime(e){this._updatePromises(),this._animation.currentTime=isFinite(e)?e:Math.sign(e)*Number.MAX_VALUE,this._register(),this._forEachChild(function(t,i){t.currentTime=e-i}),this._updatePromises()},get startTime(){return this._animation.startTime},set startTime(e){this._updatePromises(),this._animation.startTime=isFinite(e)?e:Math.sign(e)*Number.MAX_VALUE,this._register(),this._forEachChild(function(t,i){t.startTime=e+i}),this._updatePromises()},get playbackRate(){return this._animation.playbackRate},set playbackRate(e){this._updatePromises();var t=this.currentTime;this._animation.playbackRate=e,this._forEachChild(function(t){t.playbackRate=e}),null!==t&&(this.currentTime=t),this._updatePromises()},play:function(){this._updatePromises(),this._paused=!1,this._animation.play(),-1==this._timeline._animations.indexOf(this)&&this._timeline._animations.push(this),this._register(),t.awaitStartTime(this),this._forEachChild(function(e){var t=e.currentTime;e.play(),e.currentTime=t}),this._updatePromises()},pause:function(){this._updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._animation.pause(),this._register(),this._forEachChild(function(e){e.pause()}),this._paused=!0,this._updatePromises()},finish:function(){this._updatePromises(),this._animation.finish(),this._register(),this._updatePromises()},cancel:function(){this._updatePromises(),this._animation.cancel(),this._register(),this._removeChildAnimations(),this._updatePromises()},reverse:function(){this._updatePromises();var e=this.currentTime;this._animation.reverse(),this._forEachChild(function(e){e.reverse()}),null!==e&&(this.currentTime=e),this._updatePromises()},addEventListener:function(e,t){var i=t;"function"==typeof t&&(i=function(e){e.target=this,t.call(this,e)}.bind(this),t._wrapper=i),this._animation.addEventListener(e,i)},removeEventListener:function(e,t){this._animation.removeEventListener(e,t&&t._wrapper||t)},_removeChildAnimations:function(){for(;this._childAnimations.length;)this._childAnimations.pop().cancel()},_forEachChild:function(t){var i=0;if(this.effect.children&&this._childAnimations.length<this.effect.children.length&&this._constructChildAnimations(),this._childAnimations.forEach(function(e){t.call(this,e,i),this.effect instanceof window.SequenceEffect&&(i+=e.effect.activeDuration)}.bind(this)),"pending"!=this.playState){var n=this.effect._timing,r=this.currentTime;null!==r&&(r=e.calculateIterationProgress(e.calculateActiveDuration(n),r,n)),(null==r||isNaN(r))&&this._removeChildAnimations()}}},window.Animation=t.Animation}(i,r),function(e,t,i){function n(t){this._frames=e.normalizeKeyframes(t)}function r(){for(var e=!1;l.length;)l.shift()._updateChildren(),e=!0;return e}var o=function(e){if(e._animation=void 0,e instanceof window.SequenceEffect||e instanceof window.GroupEffect)for(var t=0;t<e.children.length;t++)o(e.children[t])};t.removeMulti=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n._parent?(-1==t.indexOf(n._parent)&&t.push(n._parent),n._parent.children.splice(n._parent.children.indexOf(n),1),n._parent=null,o(n)):n._animation&&n._animation.effect==n&&(n._animation.cancel(),n._animation.effect=new KeyframeEffect(null,[]),n._animation._callback&&(n._animation._callback._animation=null),n._animation._rebuildUnderlyingAnimation(),o(n))}for(i=0;i<t.length;i++)t[i]._rebuild()},t.KeyframeEffect=function(t,i,r,o){return this.target=t,this._parent=null,r=e.numericTimingToObject(r),this._timingInput=e.cloneTimingInput(r),this._timing=e.normalizeTimingInput(r),this.timing=e.makeTiming(r,!1,this),this.timing._effect=this,"function"==typeof i?(e.deprecated("Custom KeyframeEffect","2015-06-22","Use KeyframeEffect.onsample instead."),this._normalizedKeyframes=i):this._normalizedKeyframes=new n(i),this._keyframes=i,this.activeDuration=e.calculateActiveDuration(this._timing),this._id=o,this},t.KeyframeEffect.prototype={getFrames:function(){return"function"==typeof this._normalizedKeyframes?this._normalizedKeyframes:this._normalizedKeyframes._frames},set onsample(e){if("function"==typeof this.getFrames())throw new Error("Setting onsample on custom effect KeyframeEffect is not supported.");this._onsample=e,this._animation&&this._animation._rebuildUnderlyingAnimation()},get parent(){return this._parent},clone:function(){if("function"==typeof this.getFrames())throw new Error("Cloning custom effects is not supported.");var t=new KeyframeEffect(this.target,[],e.cloneTimingInput(this._timingInput),this._id);return t._normalizedKeyframes=this._normalizedKeyframes,t._keyframes=this._keyframes,t},remove:function(){t.removeMulti([this])}};var a=Element.prototype.animate;Element.prototype.animate=function(e,i){var n="";return i&&i.id&&(n=i.id),t.timeline._play(new t.KeyframeEffect(this,e,i,n))};var s=document.createElementNS("http://www.w3.org/1999/xhtml","div");t.newUnderlyingAnimationForKeyframeEffect=function(e){if(e){var t=e.target||s,i=e._keyframes;"function"==typeof i&&(i=[]);var n=e._timingInput;n.id=e._id}else var t=s,i=[],n=0;return a.apply(t,[i,n])},t.bindAnimationForKeyframeEffect=function(e){e.effect&&"function"==typeof e.effect._normalizedKeyframes&&t.bindAnimationForCustomEffect(e)};var l=[];t.awaitStartTime=function(e){null===e.startTime&&e._isGroup&&(0==l.length&&requestAnimationFrame(r),l.push(e))};var d=window.getComputedStyle;Object.defineProperty(window,"getComputedStyle",{configurable:!0,enumerable:!0,value:function(){t.timeline._updateAnimationsPromises();var e=d.apply(this,arguments);return r()&&(e=d.apply(this,arguments)),t.timeline._updateAnimationsPromises(),e}}),window.KeyframeEffect=t.KeyframeEffect,window.Element.prototype.getAnimations=function(){return document.timeline.getAnimations().filter(function(e){return null!==e.effect&&e.effect.target==this}.bind(this))}}(i,r),function(e,t,i){function n(e){e._registered||(e._registered=!0,a.push(e),s||(s=!0,requestAnimationFrame(r)))}function r(e){var t=a;a=[],t.sort(function(e,t){return e._sequenceNumber-t._sequenceNumber}),t=t.filter(function(e){e();var t=e._animation?e._animation.playState:"idle";return"running"!=t&&"pending"!=t&&(e._registered=!1),e._registered}),a.push.apply(a,t),a.length?(s=!0,requestAnimationFrame(r)):s=!1}var o=(document.createElementNS("http://www.w3.org/1999/xhtml","div"),0);t.bindAnimationForCustomEffect=function(t){var i,r=t.effect.target,a="function"==typeof t.effect.getFrames();i=a?t.effect.getFrames():t.effect._onsample;var s=t.effect.timing,l=null;s=e.normalizeTimingInput(s);var d=function(){var n=d._animation?d._animation.currentTime:null;null!==n&&(n=e.calculateIterationProgress(e.calculateActiveDuration(s),n,s),isNaN(n)&&(n=null)),n!==l&&(a?i(n,r,t.effect):i(n,t.effect,t.effect._animation)),l=n};d._animation=t,d._registered=!1,d._sequenceNumber=o++,t._callback=d,n(d)};var a=[],s=!1;t.Animation.prototype._register=function(){this._callback&&n(this._callback)}}(i,r),function(e,t,i){function n(e){return e._timing.delay+e.activeDuration+e._timing.endDelay}function r(t,i,n){this._id=n,this._parent=null,this.children=t||[],this._reparent(this.children),i=e.numericTimingToObject(i),this._timingInput=e.cloneTimingInput(i),this._timing=e.normalizeTimingInput(i,!0),this.timing=e.makeTiming(i,!0,this),this.timing._effect=this,"auto"===this._timing.duration&&(this._timing.duration=this.activeDuration)}window.SequenceEffect=function(){r.apply(this,arguments)},window.GroupEffect=function(){r.apply(this,arguments)},r.prototype={_isAncestor:function(e){for(var t=this;null!==t;){if(t==e)return!0;t=t._parent}return!1},_rebuild:function(){for(var e=this;e;)"auto"===e.timing.duration&&(e._timing.duration=e.activeDuration),e=e._parent;this._animation&&this._animation._rebuildUnderlyingAnimation()},_reparent:function(e){t.removeMulti(e);for(var i=0;i<e.length;i++)e[i]._parent=this},_putChild:function(e,t){for(var i=t?"Cannot append an ancestor or self":"Cannot prepend an ancestor or self",n=0;n<e.length;n++)if(this._isAncestor(e[n]))throw{type:DOMException.HIERARCHY_REQUEST_ERR,name:"HierarchyRequestError",message:i};for(var n=0;n<e.length;n++)t?this.children.push(e[n]):this.children.unshift(e[n]);this._reparent(e),this._rebuild()},append:function(){this._putChild(arguments,!0)},prepend:function(){this._putChild(arguments,!1)},get parent(){return this._parent},get firstChild(){return this.children.length?this.children[0]:null},get lastChild(){return this.children.length?this.children[this.children.length-1]:null},clone:function(){for(var t=e.cloneTimingInput(this._timingInput),i=[],n=0;n<this.children.length;n++)i.push(this.children[n].clone());return this instanceof GroupEffect?new GroupEffect(i,t):new SequenceEffect(i,t)},remove:function(){t.removeMulti([this])}},window.SequenceEffect.prototype=Object.create(r.prototype),Object.defineProperty(window.SequenceEffect.prototype,"activeDuration",{get:function(){var e=0;return this.children.forEach(function(t){e+=n(t)}),Math.max(e,0)}}),window.GroupEffect.prototype=Object.create(r.prototype),Object.defineProperty(window.GroupEffect.prototype,"activeDuration",{get:function(){var e=0;return this.children.forEach(function(t){e=Math.max(e,n(t))}),e}}),t.newUnderlyingAnimationForGroup=function(i){var n,r=null,o=function(t){var i=n._wrapper;if(i&&"pending"!=i.playState&&i.effect)return null==t?void i._removeChildAnimations():0==t&&i.playbackRate<0&&(r||(r=e.normalizeTimingInput(i.effect.timing)),t=e.calculateIterationProgress(e.calculateActiveDuration(r),-1,r),isNaN(t)||null==t)?(i._forEachChild(function(e){e.currentTime=-1}),void i._removeChildAnimations()):void 0},a=new KeyframeEffect(null,[],i._timing,i._id);return a.onsample=o,n=t.timeline._play(a)},t.bindAnimationForGroup=function(e){e._animation._wrapper=e,e._isGroup=!0,t.awaitStartTime(e),e._constructChildAnimations(),e._setExternalAnimation(e)},t.groupChildDuration=n}(i,r),t.true=e}({},function(){return this}()),function(e,t,i,n){e.site=e.fn.site=function(n){var r,o,a=(new Date).getTime(),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1),u=e.isPlainObject(n)?e.extend(!0,{},e.site.settings,n):e.extend({},e.site.settings),p=u.namespace,f=u.error,h="module-"+p,g=e(i),m=g,v=this,b=m.data(h);return r={initialize:function(){r.instantiate()},instantiate:function(){r.verbose("Storing instance of site",r),b=r,m.data(h,r)},normalize:function(){r.fix.console(),r.fix.requestAnimationFrame()},fix:{console:function(){r.debug("Normalizing window.console"),void 0!==console&&void 0!==console.log||(r.verbose("Console not available, normalizing events"),r.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(r.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(r.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){r.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){r.debug("Normalizing requestAnimationFrame"),void 0===t.requestAnimationFrame&&(r.debug("RequestAnimationFrame not available, normalizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return void 0!==e.fn[t]&&void 0!==e.fn[t].settings},enabled:{modules:function(t){var i=[];return t=t||u.modules,e.each(t,function(e,t){r.moduleExists(t)&&i.push(t)}),i}},disabled:{modules:function(t){var i=[];return t=t||u.modules,e.each(t,function(e,t){r.moduleExists(t)||i.push(t)}),i}},change:{setting:function(t,i,n,o){n="string"==typeof n?"all"===n?u.modules:[n]:n||u.modules,o=void 0===o||o,e.each(n,function(n,a){var s,l=!r.moduleExists(a)||e.fn[a].settings.namespace||!1;r.moduleExists(a)&&(r.verbose("Changing default setting",t,i,a),e.fn[a].settings[t]=i,o&&l&&(s=e(":data(module-"+l+")"),s.length>0&&(r.verbose("Modifying existing settings",s),s[a]("setting",t,i))))})},settings:function(t,i,n){i="string"==typeof i?[i]:i||u.modules,n=void 0===n||n,e.each(i,function(i,o){var a;r.moduleExists(o)&&(r.verbose("Changing default setting",t,o),e.extend(!0,e.fn[o].settings,t),n&&p&&(a=e(":data(module-"+p+")"),a.length>0&&(r.verbose("Modifying existing settings",a),a[o]("setting",t))))})}},enable:{console:function(){r.console(!0)},debug:function(e,t){e=e||u.modules,r.debug("Enabling debug for modules",e),r.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||u.modules,r.debug("Enabling verbose debug for modules",e),r.change.setting("verbose",!0,e,t)}},disable:{console:function(){r.console(!1)},debug:function(e,t){e=e||u.modules,r.debug("Disabling debug for modules",e),r.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||u.modules,r.debug("Disabling verbose debug for modules",e),r.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(void 0===b.cache.console)return void r.error(f.console);r.debug("Restoring console function"),t.console=b.cache.console}else r.debug("Disabling console function"),b.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){r.verbose("Destroying previous site for",m),m.removeData(h)},cache:{},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,u,t);else{if(void 0===i)return u[t];u[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,r,t);else{if(void 0===i)return r[t];r[t]=i}},debug:function(){u.debug&&(u.performance?r.performance.log(arguments):(r.debug=Function.prototype.bind.call(console.info,console,u.name+":"),r.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?r.performance.log(arguments):(r.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),r.verbose.apply(console,arguments)))},error:function(){r.error=Function.prototype.bind.call(console.error,console,u.name+":"),r.error.apply(console,arguments)},performance:{log:function(e){var t,i,n;u.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Element:v,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(r.performance.timer),r.performance.timer=setTimeout(r.performance.display,500)},display:function(){var t=u.name+":",i=0;a=!1,clearTimeout(r.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,n){var a,s,l,d=b;return i=i||c,n=v||n,"string"==typeof t&&void 0!==d&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(i,n){var o=i!=a?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(d[o])&&i!=a)d=d[o];else{if(void 0!==d[o])return s=d[o],!1;if(!e.isPlainObject(d[n])||i==a)return void 0!==d[n]?(s=d[n],!1):(r.error(f.method,t),!1);d=d[n]}})),e.isFunction(s)?l=s.apply(n,i):void 0!==s&&(l=s),e.isArray(o)?o.push(l):void 0!==o?o=[o,l]:void 0!==l&&(o=l),s}},d?(void 0===b&&r.initialize(),r.invoke(l)):(void 0!==b&&r.destroy(),r.initialize()),void 0!==o?o:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.form=function(t){var n,r=e(this),o=r.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],d=arguments[1],c="string"==typeof l,u=[].slice.call(arguments,1);return r.each(function(){var p,f,h,g,m,v,b,y,$,w,x,j,_,C,q,S,D,k,T,I=e(this),F=this,A=[],R=!1;T={initialize:function(){T.get.settings(),c?(void 0===k&&T.instantiate(),T.invoke(l)):(void 0!==k&&k.invoke("destroy"),T.verbose("Initializing form validation",I,y),T.bindEvents(),T.set.defaults(),T.instantiate())},instantiate:function(){T.verbose("Storing instance of module",T),k=T,I.data(S,T)},destroy:function(){T.verbose("Destroying previous module",k),T.removeEvents(),I.removeData(S)},refresh:function(){T.verbose("Refreshing selector cache"),p=I.find(x.field),f=I.find(x.group),h=I.find(x.message),g=I.find(x.prompt),m=I.find(x.submit),v=I.find(x.clear),b=I.find(x.reset)},submit:function(){T.verbose("Submitting form",I),I.submit()},attachEvents:function(t,i){i=i||"submit",e(t).on("click"+D,function(e){T[i](),e.preventDefault()})},bindEvents:function(){T.verbose("Attaching form events"),I.on("submit"+D,T.validate.form).on("blur"+D,x.field,T.event.field.blur).on("click"+D,x.submit,T.submit).on("click"+D,x.reset,T.reset).on("click"+D,x.clear,T.clear),y.keyboardShortcuts&&I.on("keydown"+D,x.field,T.event.field.keydown),p.each(function(){var t=e(this),i=t.prop("type"),n=T.get.changeEvent(i,t);e(this).on(n+D,T.event.field.change)})},clear:function(){p.each(function(){var t=e(this),i=t.parent(),n=t.closest(f),r=n.find(x.prompt),o=t.data(w.defaultValue)||"",a=i.is(x.uiCheckbox),s=i.is(x.uiDropdown);n.hasClass(j.error)&&(T.verbose("Resetting error on field",n),n.removeClass(j.error),r.remove()),s?(T.verbose("Resetting dropdown value",i,o),i.dropdown("clear")):a?t.prop("checked",!1):(T.verbose("Resetting field value",t,o),t.val(""))})},reset:function(){p.each(function(){var t=e(this),i=t.parent(),n=t.closest(f),r=n.find(x.prompt),o=t.data(w.defaultValue),a=i.is(x.uiCheckbox),s=i.is(x.uiDropdown),l=n.hasClass(j.error);void 0!==o&&(l&&(T.verbose("Resetting error on field",n),n.removeClass(j.error),r.remove()),s?(T.verbose("Resetting dropdown value",i,o),i.dropdown("restore defaults")):a?(T.verbose("Resetting checkbox value",i,o),t.prop("checked",o)):(T.verbose("Resetting field value",t,o),t.val(o)))})},determine:{isValid:function(){var t=!0;return e.each($,function(e,i){T.validate.field(i,e,!0)||(t=!1)}),t}},is:{bracketedRule:function(e){return e.type&&e.type.match(y.regExp.bracket)},shorthandFields:function(e){var t=Object.keys(e),i=e[t[0]];return T.is.shorthandRules(i)},shorthandRules:function(t){return"string"==typeof t||e.isArray(t)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):T.is.blank(e))},blank:function(t){return""===e.trim(t.val())},valid:function(t){var i=!0;return t?(T.verbose("Checking if field is valid",t),T.validate.field($[t],t,!1)):(T.verbose("Checking if form is valid"),e.each($,function(e,t){T.is.valid(e)||(i=!1)}),i)}},removeEvents:function(){I.off(D),p.off(D),m.off(D),p.off(D)},event:{field:{keydown:function(t){var i=e(this),n=t.which,r=i.is(x.input),o=i.is(x.checkbox),a=i.closest(x.uiDropdown).length>0,s={enter:13,escape:27};n==s.escape&&(T.verbose("Escape key pressed blurring field"),i.blur()),t.ctrlKey||n!=s.enter||!r||a||o||(R||(i.one("keyup"+D,T.event.field.keyup),T.submit(),T.debug("Enter pressed on input submitting form")),R=!0)},keyup:function(){R=!1},blur:function(t){var i=e(this),n=i.closest(f),r=T.get.validation(i);n.hasClass(j.error)?(T.debug("Revalidating field",i,r),r&&T.validate.field(r)):"blur"!=y.on&&"change"!=y.on||r&&T.validate.field(r)},change:function(t){var i=e(this),n=i.closest(f),r=T.get.validation(i)
;r&&("change"==y.on||n.hasClass(j.error)&&y.revalidate)&&(clearTimeout(T.timer),T.timer=setTimeout(function(){T.debug("Revalidating field",i,T.get.validation(i)),T.validate.field(r)},y.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!T.is.bracketedRule(e))&&(void 0!==e.value?e.value:e.type.match(y.regExp.bracket)[1]+"")},ruleName:function(e){return T.is.bracketedRule(e)?e.type.replace(e.type.match(y.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":T.get.inputEvent()},inputEvent:function(){return void 0!==i.createElement("input").oninput?"input":void 0!==i.createElement("input").onpropertychange?"propertychange":"keyup"},fieldsFromShorthand:function(t){var i={};return e.each(t,function(t,n){"string"==typeof n&&(n=[n]),i[t]={rules:[]},e.each(n,function(e,n){i[t].rules.push({type:n})})}),i},prompt:function(e,t){var i,n,r,o=T.get.ruleName(e),a=T.get.ancillaryValue(e),s=e.prompt||y.prompt[o]||y.text.unspecifiedRule,l=-1!==s.search("{value}"),d=-1!==s.search("{name}");return(d||l)&&(n=T.get.field(t.identifier)),l&&(s=s.replace("{value}",n.val())),d&&(i=n.closest(x.group).find("label").eq(0),r=1==i.length?i.text():n.prop("placeholder")||y.text.unspecifiedField,s=s.replace("{name}",r)),s=s.replace("{identifier}",t.identifier),s=s.replace("{ruleValue}",a),e.prompt||T.verbose("Using default validation prompt for type",s,o),s},settings:function(){if(e.isPlainObject(t)){var i=Object.keys(t);i.length>0&&void 0!==t[i[0]].identifier&&void 0!==t[i[0]].rules?(y=e.extend(!0,{},e.fn.form.settings,d),$=e.extend({},e.fn.form.settings.defaults,t),T.error(y.error.oldSyntax,F),T.verbose("Extending settings from legacy parameters",$,y)):(t.fields&&T.is.shorthandFields(t.fields)&&(t.fields=T.get.fieldsFromShorthand(t.fields)),y=e.extend(!0,{},e.fn.form.settings,t),$=e.extend({},e.fn.form.settings.defaults,y.fields),T.verbose("Extending settings",$,y))}else y=e.fn.form.settings,$=e.fn.form.settings.defaults,T.verbose("Using default form validation",$,y);q=y.namespace,w=y.metadata,x=y.selector,j=y.className,_=y.regExp,C=y.error,S="module-"+q,D="."+q,k=I.data(S),T.refresh()},field:function(t){return T.verbose("Finding field with identifier",t),t=T.escape.string(t),p.filter("#"+t).length>0?p.filter("#"+t):p.filter('[name="'+t+'"]').length>0?p.filter('[name="'+t+'"]'):p.filter('[name="'+t+'[]"]').length>0?p.filter('[name="'+t+'[]"]'):p.filter("[data-"+w.validate+'="'+t+'"]').length>0?p.filter("[data-"+w.validate+'="'+t+'"]'):e("<input/>")},fields:function(t){var i=e();return e.each(t,function(e,t){i=i.add(T.get.field(t))}),i},validation:function(t){var i,n;return!!$&&(e.each($,function(e,r){n=r.identifier||e,T.get.field(n)[0]==t[0]&&(r.identifier=n,i=r)}),i||!1)},value:function(e){var t,i=[];return i.push(e),t=T.get.values.call(F,i),t[e]},values:function(t){var i=e.isArray(t)?T.get.fields(t):p,n={};return i.each(function(t,i){var r=e(i),o=(r.prop("type"),r.prop("name")),a=r.val(),s=r.is(x.checkbox),l=r.is(x.radio),d=-1!==o.indexOf("[]"),c=!!s&&r.is(":checked");o&&(d?(o=o.replace("[]",""),n[o]||(n[o]=[]),s?c?n[o].push(a||!0):n[o].push(!1):n[o].push(a)):l?void 0===n[o]&&(n[o]=!!c):n[o]=s?!!c&&(a||!0):a)}),n}},has:{field:function(e){return T.verbose("Checking for existence of a field with identifier",e),e=T.escape.string(e),"string"!=typeof e&&T.error(C.identifier,e),p.filter("#"+e).length>0||p.filter('[name="'+e+'"]').length>0||p.filter("[data-"+w.validate+'="'+e+'"]').length>0}},escape:{string:function(e){return e=String(e),e.replace(_.escape,"\\$&")}},add:{rule:function(e,t){T.add.field(e,t)},field:function(t,i){var n={};T.is.shorthandRules(i)?(i=e.isArray(i)?i:[i],n[t]={rules:[]},e.each(i,function(e,i){n[t].rules.push({type:i})})):n[t]=i,$=e.extend({},$,n),T.debug("Adding rules",n,$)},fields:function(t){var i;i=t&&T.is.shorthandFields(t)?T.get.fieldsFromShorthand(t):t,$=e.extend({},$,i)},prompt:function(t,i){var n=T.get.field(t),r=n.closest(f),o=r.children(x.prompt),a=0!==o.length;i="string"==typeof i?[i]:i,T.verbose("Adding field error state",t),r.addClass(j.error),y.inline&&(a||(o=y.templates.prompt(i),o.appendTo(r)),o.html(i[0]),a?T.verbose("Inline errors are disabled, no inline error added",t):y.transition&&void 0!==e.fn.transition&&I.transition("is supported")?(T.verbose("Displaying error with css transition",y.transition),o.transition(y.transition+" in",y.duration)):(T.verbose("Displaying error with fallback javascript animation"),o.fadeIn(y.duration)))},errors:function(e){T.debug("Adding form error messages",e),T.set.error(),h.html(y.templates.error(e))}},remove:{rule:function(t,i){var n=e.isArray(i)?i:[i];if(void 0==i)return T.debug("Removed all rules"),void($[t].rules=[]);void 0!=$[t]&&e.isArray($[t].rules)&&e.each($[t].rules,function(e,i){-1!==n.indexOf(i.type)&&(T.debug("Removed rule",i.type),$[t].rules.splice(e,1))})},field:function(t){var i=e.isArray(t)?t:[t];e.each(i,function(e,t){T.remove.rule(t)})},rules:function(t,i){e.isArray(t)?e.each(fields,function(e,t){T.remove.rule(t,i)}):T.remove.rule(t,i)},fields:function(e){T.remove.field(e)},prompt:function(t){var i=T.get.field(t),n=i.closest(f),r=n.children(x.prompt);n.removeClass(j.error),y.inline&&r.is(":visible")&&(T.verbose("Removing prompt for field",t),y.transition&&void 0!==e.fn.transition&&I.transition("is supported")?r.transition(y.transition+" out",y.duration,function(){r.remove()}):r.fadeOut(y.duration,function(){r.remove()}))}},set:{success:function(){I.removeClass(j.error).addClass(j.success)},defaults:function(){p.each(function(){var t=e(this),i=t.filter(x.checkbox).length>0,n=i?t.is(":checked"):t.val();t.data(w.defaultValue,n)})},error:function(){I.removeClass(j.success).addClass(j.error)},value:function(e,t){var i={};return i[e]=t,T.set.values.call(F,i)},values:function(t){e.isEmptyObject(t)||e.each(t,function(t,i){var n,r=T.get.field(t),o=r.parent(),a=e.isArray(i),s=o.is(x.uiCheckbox),l=o.is(x.uiDropdown),d=r.is(x.radio)&&s;r.length>0&&(a&&s?(T.verbose("Selecting multiple",i,r),o.checkbox("uncheck"),e.each(i,function(e,t){n=r.filter('[value="'+t+'"]'),o=n.parent(),n.length>0&&o.checkbox("check")})):d?(T.verbose("Selecting radio value",i,r),r.filter('[value="'+i+'"]').parent(x.uiCheckbox).checkbox("check")):s?(T.verbose("Setting checkbox value",i,o),!0===i?o.checkbox("check"):o.checkbox("uncheck")):l?(T.verbose("Setting dropdown value",i,o),o.dropdown("set selected",i)):(T.verbose("Setting field value",i,r),r.val(i)))})}},validate:{form:function(e,t){var i=T.get.values();if(R)return!1;if(A=[],T.determine.isValid()){if(T.debug("Form has no validation errors, submitting"),T.set.success(),!0!==t)return y.onSuccess.call(F,e,i)}else if(T.debug("Form has errors"),T.set.error(),y.inline||T.add.errors(A),void 0!==I.data("moduleApi")&&e.stopImmediatePropagation(),!0!==t)return y.onFailure.call(F,A,i)},field:function(t,i,n){n=void 0===n||n,"string"==typeof t&&(T.verbose("Validating field",t),i=t,t=$[t]);var r=t.identifier||i,o=T.get.field(r),a=!!t.depends&&T.get.field(t.depends),s=!0,l=[];return t.identifier||(T.debug("Using field name as identifier",r),t.identifier=r),o.prop("disabled")?(T.debug("Field is disabled. Skipping",r),s=!0):t.optional&&T.is.blank(o)?(T.debug("Field is optional and blank. Skipping",r),s=!0):t.depends&&T.is.empty(a)?(T.debug("Field depends on another value that is not present or empty. Skipping",a),s=!0):void 0!==t.rules&&e.each(t.rules,function(e,i){T.has.field(r)&&!T.validate.rule(t,i)&&(T.debug("Field is invalid",r,i.type),l.push(T.get.prompt(i,t)),s=!1)}),s?(n&&(T.remove.prompt(r,l),y.onValid.call(o)),!0):(n&&(A=A.concat(l),T.add.prompt(r,l),y.onInvalid.call(o,l)),!1)},rule:function(t,i){var n=T.get.field(t.identifier),r=(i.type,n.val()),o=T.get.ancillaryValue(i),a=T.get.ruleName(i),s=y.rules[a];return e.isFunction(s)?(r=void 0===r||""===r||null===r?"":e.trim(r+""),s.call(n,r,o)):void T.error(C.noRule,a)}},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===i)return y[t];y[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,T,t);else{if(void 0===i)return T[t];T[t]=i}},debug:function(){!y.silent&&y.debug&&(y.performance?T.performance.log(arguments):(T.debug=Function.prototype.bind.call(console.info,console,y.name+":"),T.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?T.performance.log(arguments):(T.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),T.verbose.apply(console,arguments)))},error:function(){y.silent||(T.error=Function.prototype.bind.call(console.error,console,y.name+":"),T.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;y.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:F,"Execution Time":i})),clearTimeout(T.performance.timer),T.performance.timer=setTimeout(T.performance.display,500)},display:function(){var t=y.name+":",i=0;a=!1,clearTimeout(T.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,r){var o,a,s,l=k;return i=i||u,r=F||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},T.initialize()}),void 0!==n?n:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} cannot contain "{ruleValue}"',containExactly:'{name} cannot contain exactly "{ruleValue}"',doesntContain:'{name} must contain  "{ruleValue}"',doesntContainExactly:'{name} must contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(t){var i='<ul class="list">';return e.each(t,function(e,t){i+="<li>"+t+"</li>"}),i+="</ul>",e(i)},prompt:function(t){return e("<div/>").addClass("ui basic red pointing prompt label").html(t[0])}},rules:{empty:function(t){return!(void 0===t||""===t||e.isArray(t)&&0===t.length)},checked:function(){return e(this).filter(":checked").length>0},email:function(t){return e.fn.form.settings.regExp.email.test(t)},url:function(t){return e.fn.form.settings.regExp.url.test(t)},regExp:function(t,i){if(i instanceof RegExp)return t.match(i);var n,r=i.match(e.fn.form.settings.regExp.flags);return r&&(i=r.length>=2?r[1]:i,n=r.length>=3?r[2]:""),t.match(new RegExp(i,n))},integer:function(t,i){var n,r,o,a=e.fn.form.settings.regExp.integer;return i&&-1===["",".."].indexOf(i)&&(-1==i.indexOf("..")?a.test(i)&&(n=r=i-0):(o=i.split("..",2),a.test(o[0])&&(n=o[0]-0),a.test(o[1])&&(r=o[1]-0))),a.test(t)&&(void 0===n||t>=n)&&(void 0===r||t<=r)},decimal:function(t){return e.fn.form.settings.regExp.decimal.test(t)},number:function(t){return e.fn.form.settings.regExp.number.test(t)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,(e="string"==typeof e?e.toLowerCase():e)==t},isExactly:function(e,t){return e==t},not:function(e,t){return e="string"==typeof e?e.toLowerCase():e,t="string"==typeof t?t.toLowerCase():t,e!=t},notExactly:function(e,t){return e!=t},contains:function(t,i){return i=i.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(i,"i"))},containsExactly:function(t,i){return i=i.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(i))},doesntContain:function(t,i){return i=i.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(i,"i"))},doesntContainExactly:function(t,i){return i=i.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(i))},minLength:function(e,t){return void 0!==e&&e.length>=t},length:function(e,t){return void 0!==e&&e.length>=t},exactLength:function(e,t){return void 0!==e&&e.length==t},maxLength:function(e,t){return void 0!==e&&e.length<=t},match:function(t,i){var n;return e(this),e('[data-validate="'+i+'"]').length>0?n=e('[data-validate="'+i+'"]').val():e("#"+i).length>0?n=e("#"+i).val():e('[name="'+i+'"]').length>0?n=e('[name="'+i+'"]').val():e('[name="'+i+'[]"]').length>0&&(n=e('[name="'+i+'[]"]')),void 0!==n&&t.toString()==n.toString()},different:function(t,i){var n;return e(this),e('[data-validate="'+i+'"]').length>0?n=e('[data-validate="'+i+'"]').val():e("#"+i).length>0?n=e("#"+i).val():e('[name="'+i+'"]').length>0?n=e('[name="'+i+'"]').val():e('[name="'+i+'[]"]').length>0&&(n=e('[name="'+i+'[]"]')),void 0!==n&&t.toString()!==n.toString()},creditCard:function(t,i){var n,r,o={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},a={},s=!1,l="string"==typeof i&&i.split(",");if("string"==typeof t&&0!==t.length){if(t=t.replace(/[\-]/g,""),l&&(e.each(l,function(i,n){(r=o[n])&&(a={length:-1!==e.inArray(t.length,r.length),pattern:-1!==t.search(r.pattern)},a.length&&a.pattern&&(s=!0))}),!s))return!1;if(n={number:-1!==e.inArray(t.length,o.unionPay.length),pattern:-1!==t.search(o.unionPay.pattern)},n.number&&n.pattern)return!0;for(var d=t.length,c=0,u=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],p=0;d--;)p+=u[c][parseInt(t.charAt(d),10)],c^=1;return p%10==0&&p>0}},minCount:function(e,t){return 0==t||(1==t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&-1===e.search(","):e.split(",").length==t},maxCount:function(e,t){return 0!=t&&(1==t?-1===e.search(","):e.split(",").length<=t)}}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.accordion=function(i){var n,r=e(this),o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,d=[].slice.call(arguments,1);return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,r.each(function(){var c,u,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.accordion.settings,i):e.extend({},e.fn.accordion.settings),f=p.className,h=p.namespace,g=p.selector,m=p.error,v="."+h,b="module-"+h,y=r.selector||"",$=e(this),w=$.find(g.title),x=$.find(g.content),j=this,_=$.data(b);u={initialize:function(){u.debug("Initializing",$),u.bind.events(),p.observeChanges&&u.observeChanges(),u.instantiate()},instantiate:function(){_=u,$.data(b,u)},destroy:function(){u.debug("Destroying previous instance",$),$.off(v).removeData(b)},refresh:function(){w=$.find(g.title),x=$.find(g.content)},observeChanges:function(){"MutationObserver"in t&&(c=new MutationObserver(function(e){u.debug("DOM tree modified, updating selector cache"),u.refresh()}),c.observe(j,{childList:!0,subtree:!0}),u.debug("Setting up mutation observer",c))},bind:{events:function(){u.debug("Binding delegated events"),$.on(p.on+v,g.trigger,u.event.click)}},event:{click:function(){u.toggle.call(this)}},toggle:function(t){var i=void 0!==t?"number"==typeof t?w.eq(t):e(t).closest(g.title):e(this).closest(g.title),n=i.next(x),r=n.hasClass(f.animating),o=n.hasClass(f.active),a=o&&!r,s=!o&&r;u.debug("Toggling visibility of content",i),a||s?p.collapsible?u.close.call(i):u.debug("Cannot close accordion content collapsing is disabled"):u.open.call(i)},open:function(t){var i=void 0!==t?"number"==typeof t?w.eq(t):e(t).closest(g.title):e(this).closest(g.title),n=i.next(x),r=n.hasClass(f.animating);if(n.hasClass(f.active)||r)return void u.debug("Accordion already open, skipping",n);u.debug("Opening accordion content",i),p.onOpening.call(n),p.exclusive&&u.closeOthers.call(i),i.addClass(f.active),n.stop(!0,!0).addClass(f.animating),p.animateChildren&&(void 0!==e.fn.transition&&$.transition("is supported")?n.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:p.debug,verbose:p.verbose,duration:p.duration}):n.children().stop(!0,!0).animate({opacity:1},p.duration,u.resetOpacity)),n.slideDown(p.duration,p.easing,function(){n.removeClass(f.animating).addClass(f.active),u.reset.display.call(this),p.onOpen.call(this),p.onChange.call(this)})},close:function(t){var i=void 0!==t?"number"==typeof t?w.eq(t):e(t).closest(g.title):e(this).closest(g.title),n=i.next(x),r=n.hasClass(f.animating),o=n.hasClass(f.active),a=!o&&r,s=o&&r;!o&&!a||s||(u.debug("Closing accordion content",n),p.onClosing.call(n),i.removeClass(f.active),n.stop(!0,!0).addClass(f.animating),p.animateChildren&&(void 0!==e.fn.transition&&$.transition("is supported")?n.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:p.debug,verbose:p.verbose,duration:p.duration}):n.children().stop(!0,!0).animate({opacity:0},p.duration,u.resetOpacity)),n.slideUp(p.duration,p.easing,function(){n.removeClass(f.animating).removeClass(f.active),u.reset.display.call(this),p.onClose.call(this),p.onChange.call(this)}))},closeOthers:function(t){var i,n,r,o=void 0!==t?w.eq(t):e(this).closest(g.title),a=o.parents(g.content).prev(g.title),s=o.closest(g.accordion),l=g.title+"."+f.active+":visible",d=g.content+"."+f.active+":visible";p.closeNested?(i=s.find(l).not(a),r=i.next(x)):(i=s.find(l).not(a),n=s.find(d).find(l).not(a),i=i.not(n),r=i.next(x)),i.length>0&&(u.debug("Exclusive enabled, closing other content",i),i.removeClass(f.active),r.removeClass(f.animating).stop(!0,!0),p.animateChildren&&(void 0!==e.fn.transition&&$.transition("is supported")?r.children().transition({animation:"fade out",useFailSafe:!0,debug:p.debug,verbose:p.verbose,duration:p.duration}):r.children().stop(!0,!0).animate({opacity:0},p.duration,u.resetOpacity)),r.slideUp(p.duration,p.easing,function(){e(this).removeClass(f.active),u.reset.display.call(this)}))},reset:{display:function(){u.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){u.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(t,i){if(u.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(u.debug("Changing internal",t,i),void 0===i)return u[t];e.isPlainObject(t)?e.extend(!0,u,t):u[t]=i},debug:function(){!p.silent&&p.debug&&(p.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,p.name+":"),u.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),u.verbose.apply(console,arguments)))},error:function(){p.silent||(u.error=Function.prototype.bind.call(console.error,console,p.name+":"),u.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=o||t,i=t-n,o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":i})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,500)},display:function(){var t=p.name+":",i=0;o=!1,clearTimeout(u.performance.timer),e.each(a,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",y&&(t+=" '"+y+"'"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,i,r){var o,a,s,l=_;return i=i||d,r=j||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(u.error(m.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},l?(void 0===_&&u.initialize(),u.invoke(s)):(void 0!==_&&_.invoke("destroy"),u.initialize())}),void 0!==n?n:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,t,i,n,r){return-n*(t/=r)*(t-2)+i}})}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(n){var r,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],d=arguments[0],c="string"==typeof d,u=[].slice.call(arguments,1);return o.each(function(){var o,p,f=e.extend(!0,{},e.fn.checkbox.settings,n),h=f.className,g=f.namespace,m=f.selector,v=f.error,b="."+g,y="module-"+g,$=e(this),w=e(this).children(m.label),x=e(this).children(m.input),j=x[0],_=!1,C=!1,q=$.data(y),S=this;p={initialize:function(){p.verbose("Initializing checkbox",f),p.create.label(),p.bind.events(),p.set.tabbable(),p.hide.input(),p.observeChanges(),p.instantiate(),p.setup()},instantiate:function(){p.verbose("Storing instance of module",p),q=p,$.data(y,p)},destroy:function(){p.verbose("Destroying module"),p.unbind.events(),p.show.input(),$.removeData(y)},fix:{reference:function(){$.is(m.input)&&(p.debug("Behavior called on <input> adjusting invoked element"),$=$.closest(m.checkbox),p.refresh())}},setup:function(){p.set.initialLoad(),p.is.indeterminate()?(p.debug("Initial value is indeterminate"),p.indeterminate()):p.is.checked()?(p.debug("Initial value is checked"),p.check()):(p.debug("Initial value is unchecked"),p.uncheck()),p.remove.initialLoad()},refresh:function(){w=$.children(m.label),x=$.children(m.input),j=x[0]},hide:{input:function(){p.verbose("Modifying <input> z-index to be unselectable"),x.addClass(h.hidden)}},show:{input:function(){p.verbose("Modifying <input> z-index to be selectable"),x.removeClass(h.hidden)}},observeChanges:function(){"MutationObserver"in t&&(o=new MutationObserver(function(e){p.debug("DOM tree modified, updating selector cache"),p.refresh()}),o.observe(S,{childList:!0,subtree:!0}),p.debug("Setting up mutation observer",o))},attachEvents:function(t,i){var n=e(t);i=e.isFunction(p[i])?p[i]:p.toggle,n.length>0?(p.debug("Attaching checkbox events to element",t,i),n.on("click"+b,i)):p.error(v.notFound)},event:{click:function(t){var i=e(t.target);return i.is(m.input)?void p.verbose("Using default check action on initialized checkbox"):i.is(m.link)?void p.debug("Clicking link inside checkbox, skipping toggle"):(p.toggle(),x.focus(),void t.preventDefault())},keydown:function(e){var t=e.which,i={enter:13,space:32,escape:27};t==i.escape?(p.verbose("Escape key pressed blurring field"),x.blur(),C=!0):e.ctrlKey||t!=i.space&&t!=i.enter?C=!1:(p.verbose("Enter/space key pressed, toggling checkbox"),p.toggle(),C=!0)},keyup:function(e){C&&e.preventDefault()}},check:function(){p.should.allowCheck()&&(p.debug("Checking checkbox",x),p.set.checked(),p.should.ignoreCallbacks()||(f.onChecked.call(j),f.onChange.call(j)))},uncheck:function(){p.should.allowUncheck()&&(p.debug("Unchecking checkbox"),p.set.unchecked(),p.should.ignoreCallbacks()||(f.onUnchecked.call(j),f.onChange.call(j)))},indeterminate:function(){if(p.should.allowIndeterminate())return void p.debug("Checkbox is already indeterminate");p.debug("Making checkbox indeterminate"),p.set.indeterminate(),p.should.ignoreCallbacks()||(f.onIndeterminate.call(j),f.onChange.call(j))},determinate:function(){if(p.should.allowDeterminate())return void p.debug("Checkbox is already determinate");p.debug("Making checkbox determinate"),p.set.determinate(),p.should.ignoreCallbacks()||(f.onDeterminate.call(j),f.onChange.call(j))},enable:function(){if(p.is.enabled())return void p.debug("Checkbox is already enabled");p.debug("Enabling checkbox"),p.set.enabled(),f.onEnable.call(j),f.onEnabled.call(j)},disable:function(){if(p.is.disabled())return void p.debug("Checkbox is already disabled");p.debug("Disabling checkbox"),p.set.disabled(),f.onDisable.call(j),f.onDisabled.call(j)},get:{radios:function(){var t=p.get.name();return e('input[name="'+t+'"]').closest(m.checkbox)},otherRadios:function(){return p.get.radios().not($)},name:function(){return x.attr("name")}},is:{initialLoad:function(){return _},radio:function(){return x.hasClass(h.radio)||"radio"==x.attr("type")},indeterminate:function(){return void 0!==x.prop("indeterminate")&&x.prop("indeterminate")},checked:function(){return void 0!==x.prop("checked")&&x.prop("checked")},disabled:function(){return void 0!==x.prop("disabled")&&x.prop("disabled")},enabled:function(){return!p.is.disabled()},determinate:function(){return!p.is.indeterminate()},unchecked:function(){return!p.is.checked()}},should:{allowCheck:function(){return p.is.determinate()&&p.is.checked()&&!p.should.forceCallbacks()?(p.debug("Should not allow check, checkbox is already checked"),!1):!1!==f.beforeChecked.apply(j)||(p.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return p.is.determinate()&&p.is.unchecked()&&!p.should.forceCallbacks()?(p.debug("Should not allow uncheck, checkbox is already unchecked"),!1):!1!==f.beforeUnchecked.apply(j)||(p.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return p.is.indeterminate()&&!p.should.forceCallbacks()?(p.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!1!==f.beforeIndeterminate.apply(j)||(p.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return p.is.determinate()&&!p.should.forceCallbacks()?(p.debug("Should not allow determinate, checkbox is already determinate"),!1):!1!==f.beforeDeterminate.apply(j)||(p.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return p.is.initialLoad()&&f.fireOnInit},ignoreCallbacks:function(){return _&&!f.fireOnInit}},can:{change:function(){return!($.hasClass(h.disabled)||$.hasClass(h.readOnly)||x.prop("disabled")||x.prop("readonly"))},uncheck:function(){return"boolean"==typeof f.uncheckable?f.uncheckable:!p.is.radio()}},set:{initialLoad:function(){_=!0},checked:function(){if(p.verbose("Setting class to checked"),$.removeClass(h.indeterminate).addClass(h.checked),p.is.radio()&&p.uncheckOthers(),!p.is.indeterminate()&&p.is.checked())return void p.debug("Input is already checked, skipping input property change");p.verbose("Setting state to checked",j),x.prop("indeterminate",!1).prop("checked",!0),p.trigger.change()},unchecked:function(){if(p.verbose("Removing checked class"),$.removeClass(h.indeterminate).removeClass(h.checked),!p.is.indeterminate()&&p.is.unchecked())return void p.debug("Input is already unchecked");p.debug("Setting state to unchecked"),x.prop("indeterminate",!1).prop("checked",!1),p.trigger.change()},indeterminate:function(){if(p.verbose("Setting class to indeterminate"),$.addClass(h.indeterminate),p.is.indeterminate())return void p.debug("Input is already indeterminate, skipping input property change");p.debug("Setting state to indeterminate"),x.prop("indeterminate",!0),p.trigger.change()},determinate:function(){if(p.verbose("Removing indeterminate class"),$.removeClass(h.indeterminate),p.is.determinate())return void p.debug("Input is already determinate, skipping input property change");p.debug("Setting state to determinate"),x.prop("indeterminate",!1)},disabled:function(){if(p.verbose("Setting class to disabled"),$.addClass(h.disabled),p.is.disabled())return void p.debug("Input is already disabled, skipping input property change");p.debug("Setting state to disabled"),x.prop("disabled","disabled"),p.trigger.change()},enabled:function(){if(p.verbose("Removing disabled class"),$.removeClass(h.disabled),p.is.enabled())return void p.debug("Input is already enabled, skipping input property change");p.debug("Setting state to enabled"),x.prop("disabled",!1),p.trigger.change()},tabbable:function(){p.verbose("Adding tabindex to checkbox"),void 0===x.attr("tabindex")&&x.attr("tabindex",0)}},remove:{initialLoad:function(){_=!1}},trigger:{change:function(){var e=i.createEvent("HTMLEvents"),t=x[0];t&&(p.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){
x.prevAll(m.label).length>0?(x.prev(m.label).detach().insertAfter(x),p.debug("Moving existing label",w)):p.has.label()||(w=e("<label>").insertAfter(x),p.debug("Creating label",w))}},has:{label:function(){return w.length>0}},bind:{events:function(){p.verbose("Attaching checkbox events"),$.on("click"+b,p.event.click).on("keydown"+b,m.input,p.event.keydown).on("keyup"+b,m.input,p.event.keyup)}},unbind:{events:function(){p.debug("Removing events"),$.off(b)}},uncheckOthers:function(){var e=p.get.otherRadios();p.debug("Unchecking other radios",e),e.removeClass(h.checked)},toggle:function(){if(!p.can.change())return void(p.is.radio()||p.debug("Checkbox is read-only or disabled, ignoring toggle"));p.is.indeterminate()||p.is.unchecked()?(p.debug("Currently unchecked"),p.check()):p.is.checked()&&p.can.uncheck()&&(p.debug("Currently checked"),p.uncheck())},setting:function(t,i){if(p.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===i)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],i):f[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];p[t]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,f.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),p.verbose.apply(console,arguments)))},error:function(){f.silent||(p.error=Function.prototype.bind.call(console.error,console,f.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;f.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=f.name+":",i=0;s=!1,clearTimeout(p.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,n){var o,a,s,l=q;return i=i||u,n=S||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(p.error(v.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===q&&p.initialize(),p.invoke(d)):(void 0!==q&&q.invoke("destroy"),p.initialize())}),void 0!==r?r:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dimmer=function(t){var n,r=e(this),o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,d=[].slice.call(arguments,1);return r.each(function(){var c,u,p,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),h=f.selector,g=f.namespace,m=f.className,v=f.error,b="."+g,y="module-"+g,$=r.selector||"",w="ontouchstart"in i.documentElement?"touchstart":"click",x=e(this),j=this,_=x.data(y);p={preinitialize:function(){p.is.dimmer()?(u=x.parent(),c=x):(u=x,c=p.has.dimmer()?f.dimmerName?u.find(h.dimmer).filter("."+f.dimmerName):u.find(h.dimmer):p.create(),p.set.variation())},initialize:function(){p.debug("Initializing dimmer",f),p.bind.events(),p.set.dimmable(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),_=p,x.data(y,_)},destroy:function(){p.verbose("Destroying previous module",c),p.unbind.events(),p.remove.variation(),u.off(b)},bind:{events:function(){"hover"==f.on?u.on("mouseenter"+b,p.show).on("mouseleave"+b,p.hide):"click"==f.on&&u.on(w+b,p.toggle),p.is.page()&&(p.debug("Setting as a page dimmer",u),p.set.pageDimmer()),p.is.closable()&&(p.verbose("Adding dimmer close event",c),u.on(w+b,h.dimmer,p.event.click))}},unbind:{events:function(){x.removeData(y),u.off(b)}},event:{click:function(t){p.verbose("Determining if event occured on dimmer",t),(0===c.find(t.target).length||e(t.target).is(h.content))&&(p.hide(),t.stopImmediatePropagation())}},addContent:function(t){var i=e(t);p.debug("Add content to dimmer",i),i.parent()[0]!==c[0]&&i.detach().appendTo(c)},create:function(){var t=e(f.template.dimmer());return f.dimmerName&&(p.debug("Creating named dimmer",f.dimmerName),t.addClass(f.dimmerName)),t.appendTo(u),t},show:function(t){t=e.isFunction(t)?t:function(){},p.debug("Showing dimmer",c,f),p.is.dimmed()&&!p.is.animating()||!p.is.enabled()?p.debug("Dimmer is already shown or disabled"):(p.animate.show(t),f.onShow.call(j),f.onChange.call(j))},hide:function(t){t=e.isFunction(t)?t:function(){},p.is.dimmed()||p.is.animating()?(p.debug("Hiding dimmer",c),p.animate.hide(t),f.onHide.call(j),f.onChange.call(j)):p.debug("Dimmer is not visible")},toggle:function(){p.verbose("Toggling dimmer visibility",c),p.is.dimmed()?p.hide():p.show()},animate:{show:function(t){t=e.isFunction(t)?t:function(){},f.useCSS&&void 0!==e.fn.transition&&c.transition("is supported")?("auto"!==f.opacity&&p.set.opacity(),c.transition({animation:f.transition+" in",queue:!1,duration:p.get.duration(),useFailSafe:!0,onStart:function(){p.set.dimmed()},onComplete:function(){p.set.active(),t()}})):(p.verbose("Showing dimmer animation with javascript"),p.set.dimmed(),"auto"==f.opacity&&(f.opacity=.8),c.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(p.get.duration(),f.opacity,function(){c.removeAttr("style"),p.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},f.useCSS&&void 0!==e.fn.transition&&c.transition("is supported")?(p.verbose("Hiding dimmer with css"),c.transition({animation:f.transition+" out",queue:!1,duration:p.get.duration(),useFailSafe:!0,onStart:function(){p.remove.dimmed()},onComplete:function(){p.remove.active(),t()}})):(p.verbose("Hiding dimmer with javascript"),p.remove.dimmed(),c.stop().fadeOut(p.get.duration(),function(){p.remove.active(),c.removeAttr("style"),t()}))}},get:{dimmer:function(){return c},duration:function(){return"object"==typeof f.duration?p.is.active()?f.duration.hide:f.duration.show:f.duration}},has:{dimmer:function(){return f.dimmerName?x.find(h.dimmer).filter("."+f.dimmerName).length>0:x.find(h.dimmer).length>0}},is:{active:function(){return c.hasClass(m.active)},animating:function(){return c.is(":animated")||c.hasClass(m.animating)},closable:function(){return"auto"==f.closable?"hover"!=f.on:f.closable},dimmer:function(){return x.hasClass(m.dimmer)},dimmable:function(){return x.hasClass(m.dimmable)},dimmed:function(){return u.hasClass(m.dimmed)},disabled:function(){return u.hasClass(m.disabled)},enabled:function(){return!p.is.disabled()},page:function(){return u.is("body")},pageDimmer:function(){return c.hasClass(m.pageDimmer)}},can:{show:function(){return!c.hasClass(m.disabled)}},set:{opacity:function(e){var t=c.css("background-color"),i=t.split(","),n=i&&3==i.length,r=i&&4==i.length;e=0===f.opacity?0:f.opacity||e,n||r?(i[3]=e+")",t=i.join(",")):t="rgba(0, 0, 0, "+e+")",p.debug("Setting opacity to",e),c.css("background-color",t)},active:function(){c.addClass(m.active)},dimmable:function(){u.addClass(m.dimmable)},dimmed:function(){u.addClass(m.dimmed)},pageDimmer:function(){c.addClass(m.pageDimmer)},disabled:function(){c.addClass(m.disabled)},variation:function(e){(e=e||f.variation)&&c.addClass(e)}},remove:{active:function(){c.removeClass(m.active)},dimmed:function(){u.removeClass(m.dimmed)},disabled:function(){c.removeClass(m.disabled)},variation:function(e){(e=e||f.variation)&&c.removeClass(e)}},setting:function(t,i){if(p.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===i)return f[t];e.isPlainObject(f[t])?e.extend(!0,f[t],i):f[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];p[t]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,f.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),p.verbose.apply(console,arguments)))},error:function(){f.silent||(p.error=Function.prototype.bind.call(console.error,console,f.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;f.performance&&(t=(new Date).getTime(),n=o||t,i=t-n,o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=f.name+":",i=0;o=!1,clearTimeout(p.performance.timer),e.each(a,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",$&&(t+=" '"+$+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,i,r){var o,a,s,l=_;return i=i||d,r=j||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(p.error(v.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},p.preinitialize(),l?(void 0===_&&p.initialize(),p.invoke(s)):(void 0!==_&&_.invoke("destroy"),p.initialize())}),void 0!==n?n:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(n){var r,o=e(this),a=e(i),s=o.selector||"",l="ontouchstart"in i.documentElement,d=(new Date).getTime(),c=[],u=arguments[0],p="string"==typeof u,f=[].slice.call(arguments,1);return o.each(function(h){var g,m,v,b,y,$,w,x,j=e.isPlainObject(n)?e.extend(!0,{},e.fn.dropdown.settings,n):e.extend({},e.fn.dropdown.settings),_=j.className,C=j.message,q=j.fields,S=j.keys,D=j.metadata,k=j.namespace,T=j.regExp,I=j.selector,F=j.error,A=j.templates,R="."+k,E="module-"+k,P=e(this),O=e(j.context),G=P.find(I.text),N=P.find(I.search),M=P.find(I.sizer),z=P.find(I.input),L=P.find(I.icon),H=P.prev().find(I.text).length>0?P.prev().find(I.text):P.prev(),U=P.children(I.menu),B=U.find(I.item),V=!1,W=!1,Q=!1,X=this,Y=P.data(E);x={initialize:function(){x.debug("Initializing dropdown",j),x.is.alreadySetup()?x.setup.reference():(x.setup.layout(),j.values&&x.change.values(j.values),x.refreshData(),x.save.defaults(),x.restore.selected(),x.create.id(),x.bind.events(),x.observeChanges(),x.instantiate())},instantiate:function(){x.verbose("Storing instance of dropdown",x),Y=x,P.data(E,x)},destroy:function(){x.verbose("Destroying previous dropdown",P),x.remove.tabbable(),P.off(R).removeData(E),U.off(R),a.off(b),x.disconnect.menuObserver(),x.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&($=new MutationObserver(x.event.select.mutation),w=new MutationObserver(x.event.menu.mutation),x.debug("Setting up mutation observer",$,w),x.observe.select(),x.observe.menu())},disconnect:{menuObserver:function(){w&&w.disconnect()},selectObserver:function(){$&&$.disconnect()}},observe:{select:function(){x.has.input()&&$.observe(P[0],{childList:!0,subtree:!0})},menu:function(){x.has.menu()&&w.observe(U[0],{childList:!0,subtree:!0})}},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),b="."+y,x.verbose("Creating unique id for element",y)},userChoice:function(t){var i,n,r;return!!(t=t||x.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,function(t,o){!1===x.get.item(o)&&(r=j.templates.addition(x.add.variables(C.addResult,o)),n=e("<div />").html(r).attr("data-"+D.value,o).attr("data-"+D.text,o).addClass(_.addition).addClass(_.item),j.hideAdditions&&n.addClass(_.hidden),i=void 0===i?n:i.add(n),x.verbose("Creating user choices for value",o,n))}),i)},userLabels:function(t){var i=x.get.userValues();i&&(x.debug("Adding user labels",i),e.each(i,function(e,t){x.verbose("Adding custom user value"),x.add.label(t,t)}))},menu:function(){U=e("<div />").addClass(_.menu).appendTo(P)},sizer:function(){M=e("<span />").addClass(_.sizer).insertAfter(N)}},search:function(e){e=void 0!==e?e:x.get.query(),x.verbose("Searching for query",e),x.has.minCharacters(e)?x.filter(e):x.hide()},select:{firstUnfiltered:function(){x.verbose("Selecting first non-filtered element"),x.remove.selectedItem(),B.not(I.unselectable).not(I.addition+I.hidden).eq(0).addClass(_.selected)},nextAvailable:function(e){e=e.eq(0);var t=e.nextAll(I.item).not(I.unselectable).eq(0),i=e.prevAll(I.item).not(I.unselectable).eq(0);t.length>0?(x.verbose("Moving selection to",t),t.addClass(_.selected)):(x.verbose("Moving selection to",i),i.addClass(_.selected))}},setup:{api:function(){var e={debug:j.debug,urlData:{value:x.get.value(),query:x.get.query()},on:!1};x.verbose("First request, initializing API"),P.api(e)},layout:function(){P.is("select")&&(x.setup.select(),x.setup.returnedObject()),x.has.menu()||x.create.menu(),x.is.search()&&!x.has.search()&&(x.verbose("Adding search input"),N=e("<input />").addClass(_.search).prop("autocomplete","off").insertBefore(G)),x.is.multiple()&&x.is.searchSelection()&&!x.has.sizer()&&x.create.sizer(),j.allowTab&&x.set.tabbable()},select:function(){var t=x.get.selectValues();x.debug("Dropdown initialized on a select",t),P.is("select")&&(z=P),z.parent(I.dropdown).length>0?(x.debug("UI dropdown already exists. Creating dropdown menu only"),P=z.closest(I.dropdown),x.has.menu()||x.create.menu(),U=P.children(I.menu),x.setup.menu(t)):(x.debug("Creating entire dropdown from select"),P=e("<div />").attr("class",z.attr("class")).addClass(_.selection).addClass(_.dropdown).html(A.dropdown(t)).insertBefore(z),z.hasClass(_.multiple)&&!1===z.prop("multiple")&&(x.error(F.missingMultiple),z.prop("multiple",!0)),z.is("[multiple]")&&x.set.multiple(),z.prop("disabled")&&(x.debug("Disabling dropdown"),P.addClass(_.disabled)),z.removeAttr("class").detach().prependTo(P)),x.refresh()},menu:function(e){U.html(A.menu(e,q)),B=U.find(I.item)},reference:function(){x.debug("Dropdown behavior was called on select, replacing with closest dropdown"),P=P.parent(I.dropdown),Y=P.data(E),X=P.get(0),x.refresh(),x.setup.returnedObject()},returnedObject:function(){var e=o.slice(0,h),t=o.slice(h+1);o=e.add(P).add(t)}},refresh:function(){x.refreshSelectors(),x.refreshData()},refreshItems:function(){B=U.find(I.item)},refreshSelectors:function(){x.verbose("Refreshing selector cache"),G=P.find(I.text),N=P.find(I.search),z=P.find(I.input),L=P.find(I.icon),H=P.prev().find(I.text).length>0?P.prev().find(I.text):P.prev(),U=P.children(I.menu),B=U.find(I.item)},refreshData:function(){x.verbose("Refreshing cached metadata"),B.removeData(D.text).removeData(D.value)},clearData:function(){x.verbose("Clearing metadata"),B.removeData(D.text).removeData(D.value),P.removeData(D.defaultText).removeData(D.defaultValue).removeData(D.placeholderText)},toggle:function(){x.verbose("Toggling menu visibility"),x.is.active()?x.hide():x.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},!x.can.show()&&x.is.remote()&&(x.debug("No API results retrieved, searching before show"),x.queryRemote(x.get.query(),x.show)),x.can.show()&&!x.is.active()){if(x.debug("Showing dropdown"),!x.has.message()||x.has.maxSelections()||x.has.allResultsFiltered()||x.remove.message(),x.is.allFiltered())return!0;!1!==j.onShow.call(X)&&x.animate.show(function(){x.can.click()&&x.bind.intent(),x.has.menuSearch()&&x.focusSearch(),x.set.visible(),t.call(X)})}},hide:function(t){t=e.isFunction(t)?t:function(){},x.is.active()&&(x.debug("Hiding dropdown"),!1!==j.onHide.call(X)&&x.animate.hide(function(){x.remove.visible(),t.call(X)}))},hideOthers:function(){x.verbose("Finding other dropdowns to hide"),o.not(P).has(I.menu+"."+_.visible).dropdown("hide")},hideMenu:function(){x.verbose("Hiding menu  instantaneously"),x.remove.active(),x.remove.visible(),U.transition("hide")},hideSubMenus:function(){var e=U.children(I.item).find(I.menu);x.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){l&&x.bind.touchEvents(),x.bind.keyboardEvents(),x.bind.inputEvents(),x.bind.mouseEvents()},touchEvents:function(){x.debug("Touch device detected binding additional touch events"),x.is.searchSelection()||x.is.single()&&P.on("touchstart"+R,x.event.test.toggle),U.on("touchstart"+R,I.item,x.event.item.mouseenter)},keyboardEvents:function(){x.verbose("Binding keyboard events"),P.on("keydown"+R,x.event.keydown),x.has.search()&&P.on(x.get.inputEvent()+R,I.search,x.event.input),x.is.multiple()&&a.on("keydown"+b,x.event.document.keydown)},inputEvents:function(){x.verbose("Binding input change events"),P.on("change"+R,I.input,x.event.change)},mouseEvents:function(){x.verbose("Binding mouse events"),x.is.multiple()&&P.on("click"+R,I.label,x.event.label.click).on("click"+R,I.remove,x.event.remove.click),x.is.searchSelection()?(P.on("mousedown"+R,x.event.mousedown).on("mouseup"+R,x.event.mouseup).on("mousedown"+R,I.menu,x.event.menu.mousedown).on("mouseup"+R,I.menu,x.event.menu.mouseup).on("click"+R,I.icon,x.event.icon.click).on("focus"+R,I.search,x.event.search.focus).on("click"+R,I.search,x.event.search.focus).on("blur"+R,I.search,x.event.search.blur).on("click"+R,I.text,x.event.text.focus),x.is.multiple()&&P.on("click"+R,x.event.click)):("click"==j.on?P.on("click"+R,I.icon,x.event.icon.click).on("click"+R,x.event.test.toggle):"hover"==j.on?P.on("mouseenter"+R,x.delay.show).on("mouseleave"+R,x.delay.hide):P.on(j.on+R,x.toggle),P.on("mousedown"+R,x.event.mousedown).on("mouseup"+R,x.event.mouseup).on("focus"+R,x.event.focus),x.has.menuSearch()?P.on("blur"+R,I.search,x.event.search.blur):P.on("blur"+R,x.event.blur)),U.on("mouseenter"+R,I.item,x.event.item.mouseenter).on("mouseleave"+R,I.item,x.event.item.mouseleave).on("click"+R,I.item,x.event.item.click)},intent:function(){x.verbose("Binding hide intent event to document"),l&&a.on("touchstart"+b,x.event.test.touch).on("touchmove"+b,x.event.test.touch),a.on("click"+b,x.event.test.hide)}},unbind:{intent:function(){x.verbose("Removing hide intent event from document"),l&&a.off("touchstart"+b).off("touchmove"+b),a.off("click"+b)}},filter:function(e){var t=void 0!==e?e:x.get.query(),i=function(){x.is.multiple()&&x.filterActive(),(e||!e&&0==x.get.activeItem().length)&&x.select.firstUnfiltered(),x.has.allResultsFiltered()?j.onNoResults.call(X,t)?j.allowAdditions?j.hideAdditions&&(x.verbose("User addition with no menu, setting empty style"),x.set.empty(),x.hideMenu()):(x.verbose("All items filtered, showing message",t),x.add.message(C.noResults)):(x.verbose("All items filtered, hiding dropdown",t),x.hideMenu()):(x.remove.empty(),x.remove.message()),j.allowAdditions&&x.add.userSuggestion(e),x.is.searchSelection()&&x.can.show()&&x.is.focusedOnSearch()&&x.show()};j.useLabels&&x.has.maxSelections()||(j.apiSettings?x.can.useAPI()?x.queryRemote(t,function(){j.filterRemoteData&&x.filterItems(t),i()}):x.error(F.noAPI):(x.filterItems(t),i()))},queryRemote:function(t,i){var n={errorDuration:!1,cache:"local",throttle:j.throttle,urlData:{query:t},onError:function(){x.add.message(C.serverError),i()},onFailure:function(){x.add.message(C.serverError),i()},onSuccess:function(e){x.remove.message(),x.setup.menu({values:e[q.remoteValues]}),i()}};P.api("get request")||x.setup.api(),n=e.extend(!0,{},n,j.apiSettings),P.api("setting",n).api("query")},filterItems:function(t){var i=void 0!==t?t:x.get.query(),n=null,r=x.escape.string(i),o=new RegExp("^"+r,"igm");x.has.query()&&(n=[],x.verbose("Searching for matching values",i),B.each(function(){var t,r,a=e(this);if("both"==j.match||"text"==j.match){if(t=String(x.get.choiceText(a,!1)),-1!==t.search(o))return n.push(this),!0;if("exact"===j.fullTextSearch&&x.exactSearch(i,t))return n.push(this),!0;if(!0===j.fullTextSearch&&x.fuzzySearch(i,t))return n.push(this),!0}if("both"==j.match||"value"==j.match){if(r=String(x.get.choiceValue(a,t)),-1!==r.search(o))return n.push(this),!0;if("exact"===j.fullTextSearch&&x.exactSearch(i,r))return n.push(this),!0;if(!0===j.fullTextSearch&&x.fuzzySearch(i,r))return n.push(this),!0}})),x.debug("Showing only matched items",i),x.remove.filteredItem(),n&&B.not(n).addClass(_.filtered)},fuzzySearch:function(e,t){var i=t.length,n=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),n>i)return!1;if(n===i)return e===t;e:for(var r=0,o=0;r<n;r++){for(var a=e.charCodeAt(r);o<i;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),t.indexOf(e)>-1},filterActive:function(){j.useLabels&&B.filter("."+_.active).addClass(_.filtered)},focusSearch:function(e){x.has.search()&&!x.is.focusedOnSearch()&&(e?(P.off("focus"+R,I.search),N.focus(),P.on("focus"+R,I.search,x.event.search.focus)):N.focus())},forceSelection:function(){var e=B.not(_.filtered).filter("."+_.selected).eq(0),t=B.not(_.filtered).filter("."+_.active).eq(0),i=e.length>0?e:t;if(i.length>0&&!x.is.multiple())return x.debug("Forcing partial selection to selected item",i),void x.event.item.click.call(i,{},!0);j.allowAdditions?(x.set.selected(x.get.query()),x.remove.searchTerm()):x.remove.searchTerm()},change:{values:function(t){j.allowAdditions||x.clear(),x.debug("Creating dropdown with specified values",t),x.setup.menu({values:t}),e.each(t,function(e,t){if(1==t.selected)return x.debug("Setting initial selection to",t.value),x.set.selected(t.value),!0})}},event:{change:function(){Q||(x.debug("Input changed, updating selection"),x.set.selected())},focus:function(){j.showOnFocus&&!V&&x.is.hidden()&&!m&&x.show()},blur:function(e){m=i.activeElement===this,V||m||(x.remove.activeLabel(),x.hide())},mousedown:function(){x.is.searchSelection()?v=!0:V=!0},mouseup:function(){x.is.searchSelection()?v=!1:V=!1},click:function(t){e(t.target).is(P)&&(x.is.focusedOnSearch()?x.show():x.focusSearch())},search:{focus:function(){V=!0,x.is.multiple()&&x.remove.activeLabel(),j.showOnFocus&&x.search()},blur:function(e){m=i.activeElement===this,x.is.searchSelection()&&!v&&(W||m||(j.forceSelection&&x.forceSelection(),x.hide())),v=!1}},icon:{click:function(e){x.toggle()}},text:{focus:function(e){V=!0,x.focusSearch()}},input:function(e){(x.is.multiple()||x.is.searchSelection())&&x.set.filtered(),clearTimeout(x.timer),x.timer=setTimeout(x.search,j.delay.search)},label:{click:function(t){var i=e(this),n=P.find(I.label),r=n.filter("."+_.active),o=i.nextAll("."+_.active),a=i.prevAll("."+_.active),s=o.length>0?i.nextUntil(o).add(r).add(i):i.prevUntil(a).add(r).add(i);t.shiftKey?(r.removeClass(_.active),s.addClass(_.active)):t.ctrlKey?i.toggleClass(_.active):(r.removeClass(_.active),i.addClass(_.active)),j.onLabelSelect.apply(this,n.filter("."+_.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(_.active)?x.remove.activeLabels():x.remove.activeLabels(t)}},test:{toggle:function(e){var t=x.is.multiple()?x.show:x.toggle;x.is.bubbledLabelClick(e)||x.is.bubbledIconClick(e)||x.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){x.determine.eventOnElement(e,function(){"touchstart"==e.type?x.timer=setTimeout(function(){x.hide()},j.delay.touch):"touchmove"==e.type&&clearTimeout(x.timer)}),e.stopPropagation()},hide:function(e){x.determine.eventInModule(e,x.hide)}},select:{mutation:function(t){x.debug("<select> modified, recreating menu");var i=!1;e.each(t,function(t,n){if(e(n.target).is("select")||e(n.addedNodes).is("select"))return i=!0,!0}),i&&(x.disconnect.selectObserver(),x.refresh(),x.setup.select(),x.set.selected(),x.observe.select())}},menu:{mutation:function(t){var i=t[0],n=e(!!i.addedNodes&&i.addedNodes[0]),r=e(!!i.removedNodes&&i.removedNodes[0]),o=n.add(r),a=o.is(I.addition)||o.closest(I.addition).length>0,s=o.is(I.message)||o.closest(I.message).length>0;a||s?(x.debug("Updating item selector cache"),x.refreshItems()):(x.debug("Menu modified, updating selector cache"),x.refresh())},mousedown:function(){W=!0},mouseup:function(){W=!1}},item:{mouseenter:function(t){var i=e(t.target),n=e(this),r=n.children(I.menu),o=n.siblings(I.item).children(I.menu),a=r.length>0;!(r.find(i).length>0)&&a&&(clearTimeout(x.itemTimer),x.itemTimer=setTimeout(function(){x.verbose("Showing sub-menu",r),e.each(o,function(){x.animate.hide(!1,e(this))}),x.animate.show(!1,r)},j.delay.show),t.preventDefault())},mouseleave:function(t){var i=e(this).children(I.menu);i.length>0&&(clearTimeout(x.itemTimer),x.itemTimer=setTimeout(function(){x.verbose("Hiding sub-menu",i),x.animate.hide(!1,i)},j.delay.hide))},click:function(t,n){var r=e(this),o=e(t?t.target:""),a=r.find(I.menu),s=x.get.choiceText(r),l=x.get.choiceValue(r,s),d=a.length>0,c=a.find(o).length>0;x.has.menuSearch()&&e(i.activeElement).blur(),c||d&&!j.allowCategorySelection||(x.is.searchSelection()&&(j.allowAdditions&&x.remove.userAddition(),x.remove.searchTerm(),x.is.focusedOnSearch()||1==n||x.focusSearch(!0)),j.useLabels||(x.remove.filteredItem(),x.set.scrollPosition(r)),x.determine.selectAction.call(this,s,l))}},document:{keydown:function(e){var t=e.which;if(x.is.inObject(t,S)){var i=P.find(I.label),n=i.filter("."+_.active),r=(n.data(D.value),i.index(n)),o=i.length,a=n.length>0,s=n.length>1,l=0===r,d=r+1==o,c=x.is.searchSelection(),u=x.is.focusedOnSearch(),p=x.is.focused(),f=u&&0===x.get.caretPosition();if(c&&!a&&!u)return;t==S.leftArrow?!p&&!f||a?a&&(e.shiftKey?x.verbose("Adding previous label to selection"):(x.verbose("Selecting previous label"),i.removeClass(_.active)),l&&!s?n.addClass(_.active):n.prev(I.siblingLabel).addClass(_.active).end(),e.preventDefault()):(x.verbose("Selecting previous label"),i.last().addClass(_.active)):t==S.rightArrow?(p&&!a&&i.first().addClass(_.active),a&&(e.shiftKey?x.verbose("Adding next label to selection"):(x.verbose("Selecting next label"),i.removeClass(_.active)),d?c?u?i.removeClass(_.active):x.focusSearch():s?n.next(I.siblingLabel).addClass(_.active):n.addClass(_.active):n.next(I.siblingLabel).addClass(_.active),e.preventDefault())):t==S.deleteKey||t==S.backspace?a?(x.verbose("Removing active labels"),d&&c&&!u&&x.focusSearch(),n.last().next(I.siblingLabel).addClass(_.active),x.remove.activeLabels(n),e.preventDefault()):f&&!a&&t==S.backspace&&(x.verbose("Removing last label on input backspace"),n=i.last().addClass(_.active),x.remove.activeLabels(n)):n.removeClass(_.active)}}},keydown:function(e){var t=e.which;if(x.is.inObject(t,S)){var i,n=B.not(I.unselectable).filter("."+_.selected).eq(0),r=U.children("."+_.active).eq(0),o=n.length>0?n:r,a=o.length>0?o.siblings(":not(."+_.filtered+")").addBack():U.children(":not(."+_.filtered+")"),s=o.children(I.menu),l=o.closest(I.menu),d=l.hasClass(_.visible)||l.hasClass(_.animating)||l.parent(I.menu).length>0,c=s.length>0,u=o.length>0,p=o.not(I.unselectable).length>0,f=t==S.delimiter&&j.allowAdditions&&x.is.multiple();if(j.allowAdditions&&j.hideAdditions&&(t==S.enter||f)&&p&&(x.verbose("Selecting item from keyboard shortcut",o),x.event.item.click.call(o,e),x.is.searchSelection()&&x.remove.searchTerm()),x.is.visible()){if((t==S.enter||f)&&(t==S.enter&&u&&c&&!j.allowCategorySelection?(x.verbose("Pressed enter on unselectable category, opening sub menu"),t=S.rightArrow):p&&(x.verbose("Selecting item from keyboard shortcut",o),x.event.item.click.call(o,e),x.is.searchSelection()&&x.remove.searchTerm()),e.preventDefault()),u&&(t==S.leftArrow&&l[0]!==U[0]&&(x.verbose("Left key pressed, closing sub-menu"),x.animate.hide(!1,l),o.removeClass(_.selected),l.closest(I.item).addClass(_.selected),e.preventDefault()),t==S.rightArrow&&c&&(x.verbose("Right key pressed, opening sub-menu"),x.animate.show(!1,s),o.removeClass(_.selected),s.find(I.item).eq(0).addClass(_.selected),e.preventDefault())),t==S.upArrow){if(i=u&&d?o.prevAll(I.item+":not("+I.unselectable+")").eq(0):B.eq(0),a.index(i)<0)return x.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();x.verbose("Up key pressed, changing active item"),o.removeClass(_.selected),i.addClass(_.selected),x.set.scrollPosition(i),j.selectOnKeydown&&x.is.single()&&x.set.selectedItem(i),e.preventDefault()}if(t==S.downArrow){if(i=u&&d?i=o.nextAll(I.item+":not("+I.unselectable+")").eq(0):B.eq(0),0===i.length)return x.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();x.verbose("Down key pressed, changing active item"),B.removeClass(_.selected),i.addClass(_.selected),x.set.scrollPosition(i),j.selectOnKeydown&&x.is.single()&&x.set.selectedItem(i),e.preventDefault()}t==S.pageUp&&(x.scrollPage("up"),e.preventDefault()),t==S.pageDown&&(x.scrollPage("down"),e.preventDefault()),t==S.escape&&(x.verbose("Escape key pressed, closing dropdown"),x.hide())}else f&&e.preventDefault(),t!=S.downArrow||x.is.visible()||(x.verbose("Down key pressed, showing dropdown"),x.show(),e.preventDefault())}else x.has.search()||x.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=i.createEvent("HTMLEvents"),t=z[0];t&&(x.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,i){x.verbose("Determining action",j.action),e.isFunction(x.action[j.action])?(x.verbose("Triggering preset action",j.action,t,i),x.action[j.action].call(X,t,i,this)):e.isFunction(j.action)?(x.verbose("Triggering user action",j.action,t,i),j.action.call(X,t,i,this)):x.error(F.action,j.action)},eventInModule:function(t,n){var r=e(t.target),o=r.closest(i.documentElement).length>0,a=r.closest(P).length>0;return n=e.isFunction(n)?n:function(){},o&&!a?(x.verbose("Triggering event",n),n(),!0):(x.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,n){var r=e(t.target),o=r.closest(I.siblingLabel),a=i.body.contains(t.target),s=0===P.find(o).length,l=0===r.closest(U).length;return n=e.isFunction(n)?n:function(){},
a&&s&&l?(x.verbose("Triggering event",n),n(),!0):(x.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,i,n){if(i=void 0!==i?i:t,x.can.activate(e(n))){if(x.set.selected(i,e(n)),x.is.multiple()&&!x.is.allFiltered())return;x.hideAndClear()}},select:function(t,i,n){if(i=void 0!==i?i:t,x.can.activate(e(n))){if(x.set.value(i,e(n)),x.is.multiple()&&!x.is.allFiltered())return;x.hideAndClear()}},combo:function(t,i,n){i=void 0!==i?i:t,x.set.selected(i,e(n)),x.hideAndClear()},hide:function(e,t,i){x.set.value(t,e),x.hideAndClear()}},get:{id:function(){return y},defaultText:function(){return P.data(D.defaultText)},defaultValue:function(){return P.data(D.defaultValue)},placeholderText:function(){return"auto"!=j.placeholder&&"string"==typeof j.placeholder?j.placeholder:P.data(D.placeholderText)||""},text:function(){return G.text()},query:function(){return e.trim(N.val())},searchWidth:function(e){return e=void 0!==e?e:N.val(),M.text(e),Math.ceil(M.width()+1)},selectionCount:function(){var t=x.get.values();return x.is.multiple()?e.isArray(t)?t.length:0:""!==x.get.value()?1:0},transition:function(e){return"auto"==j.transition?x.is.upward(e)?"slide up":"slide down":j.transition},userValues:function(){var t=x.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,function(e){return!1===x.get.item(e)}))},uniqueArray:function(t){return e.grep(t,function(i,n){return e.inArray(i,t)===n})},caretPosition:function(){var e,t,n=N.get(0);return"selectionStart"in n?n.selectionStart:i.selection?(n.focus(),e=i.selection.createRange(),t=e.text.length,e.moveStart("character",-n.value.length),e.text.length-t):void 0},value:function(){var t=z.length>0?z.val():P.data(D.value),i=e.isArray(t)&&1===t.length&&""===t[0];return void 0===t||i?"":t},values:function(){var e=x.get.value();return""===e?"":!x.has.selectInput()&&x.is.multiple()?"string"==typeof e?e.split(j.delimiter):"":e},remoteValues:function(){var t=x.get.values(),i=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,function(e,t){var n=x.read.remoteData(t);x.verbose("Restoring value from session data",n,t),n&&(i||(i={}),i[t]=n)})),i},choiceText:function(t,i){if(i=void 0!==i?i:j.preserveHTML,t)return t.find(I.menu).length>0&&(x.verbose("Retrieving text of element with sub-menu"),t=t.clone(),t.find(I.menu).remove(),t.find(I.menuIcon).remove()),void 0!==t.data(D.text)?t.data(D.text):i?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,i){return i=i||x.get.choiceText(t),!!t&&(void 0!==t.data(D.value)?String(t.data(D.value)):"string"==typeof i?e.trim(i.toLowerCase()):String(i))},inputEvent:function(){var e=N[0];return!!e&&(void 0!==e.oninput?"input":void 0!==e.onpropertychange?"propertychange":"keyup")},selectValues:function(){var t={};return t.values=[],P.find("option").each(function(){var i=e(this),n=i.html(),r=i.attr("disabled"),o=void 0!==i.attr("value")?i.attr("value"):n;"auto"===j.placeholder&&""===o?t.placeholder=n:t.values.push({name:n,value:o,disabled:r})}),j.placeholder&&"auto"!==j.placeholder&&(x.debug("Setting placeholder value to",j.placeholder),t.placeholder=j.placeholder),j.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),x.debug("Retrieved and sorted values from select",t)):x.debug("Retrieved values from select",t),t},activeItem:function(){return B.filter("."+_.active)},selectedItem:function(){var e=B.not(I.unselectable).filter("."+_.selected);return e.length>0?e:B.eq(0)},itemWithAdditions:function(e){var t=x.get.item(e),i=x.create.userChoice(e);return i&&i.length>0&&(t=t.length>0?t.add(i):i),t},item:function(t,i){var n,r,o=!1;return t=void 0!==t?t:void 0!==x.get.values()?x.get.values():x.get.text(),n=r?t.length>0:void 0!==t&&null!==t,r=x.is.multiple()&&e.isArray(t),i=""===t||0===t||i||!1,n&&B.each(function(){var n=e(this),a=x.get.choiceText(n),s=x.get.choiceValue(n,a);if(null!==s&&void 0!==s)if(r)-1===e.inArray(String(s),t)&&-1===e.inArray(a,t)||(o=o?o.add(n):n);else if(i){if(x.verbose("Ambiguous dropdown value using strict type check",n,t),s===t||a===t)return o=n,!0}else if(String(s)==String(t)||a==t)return x.verbose("Found select item by value",s,t),o=n,!0}),o}},check:{maxSelections:function(e){return!j.maxSelections||(e=void 0!==e?e:x.get.selectionCount(),e>=j.maxSelections?(x.debug("Maximum selection count reached"),j.useLabels&&(B.addClass(_.filtered),x.add.message(C.maxSelections)),!0):(x.verbose("No longer at maximum selection count"),x.remove.message(),x.remove.filteredItem(),x.is.searchSelection()&&x.filterItems(),!1))}},restore:{defaults:function(){x.clear(),x.restore.defaultText(),x.restore.defaultValue()},defaultText:function(){var e=x.get.defaultText();e===x.get.placeholderText?(x.debug("Restoring default placeholder text",e),x.set.placeholderText(e)):(x.debug("Restoring default text",e),x.set.text(e))},placeholderText:function(){x.set.placeholderText()},defaultValue:function(){var e=x.get.defaultValue();void 0!==e&&(x.debug("Restoring default value",e),""!==e?(x.set.value(e),x.set.selected()):(x.remove.activeItem(),x.remove.selectedItem()))},labels:function(){j.allowAdditions&&(j.useLabels||(x.error(F.labels),j.useLabels=!0),x.debug("Restoring selected values"),x.create.userLabels()),x.check.maxSelections()},selected:function(){x.restore.values(),x.is.multiple()?(x.debug("Restoring previously selected values and labels"),x.restore.labels()):x.debug("Restoring previously selected values")},values:function(){x.set.initialLoad(),j.apiSettings&&j.saveRemoteData&&x.get.remoteValues()?x.restore.remoteValues():x.set.selected(),x.remove.initialLoad()},remoteValues:function(){var t=x.get.remoteValues();x.debug("Recreating selected from session data",t),t&&(x.is.single()?e.each(t,function(e,t){x.set.text(t)}):e.each(t,function(e,t){x.add.label(e,t)}))}},read:{remoteData:function(e){var i;return void 0===t.Storage?void x.error(F.noStorage):void 0!==(i=sessionStorage.getItem(e))&&i}},save:{defaults:function(){x.save.defaultText(),x.save.placeholderText(),x.save.defaultValue()},defaultValue:function(){var e=x.get.value();x.verbose("Saving default value as",e),P.data(D.defaultValue,e)},defaultText:function(){var e=x.get.text();x.verbose("Saving default text as",e),P.data(D.defaultText,e)},placeholderText:function(){var e;!1!==j.placeholder&&G.hasClass(_.placeholder)&&(e=x.get.text(),x.verbose("Saving placeholder text as",e),P.data(D.placeholderText,e))},remoteData:function(e,i){if(void 0===t.Storage)return void x.error(F.noStorage);x.verbose("Saving remote data to session storage",i,e),sessionStorage.setItem(i,e)}},clear:function(){x.is.multiple()&&j.useLabels?x.remove.labels():(x.remove.activeItem(),x.remove.selectedItem()),x.set.placeholderText(),x.clearValue()},clearValue:function(){x.set.value("")},scrollPage:function(e,t){var i,n,r,o=t||x.get.selectedItem(),a=o.closest(I.menu),s=a.outerHeight(),l=a.scrollTop(),d=B.eq(0).outerHeight(),c=Math.floor(s/d),u=(a.prop("scrollHeight"),"up"==e?l-d*c:l+d*c),p=B.not(I.unselectable);r="up"==e?p.index(o)-c:p.index(o)+c,i="up"==e?r>=0:r<p.length,n=i?p.eq(r):"up"==e?p.first():p.last(),n.length>0&&(x.debug("Scrolling page",e,n),o.removeClass(_.selected),n.addClass(_.selected),j.selectOnKeydown&&x.is.single()&&x.set.selectedItem(n),a.scrollTop(u))},set:{filtered:function(){var e=x.is.multiple(),t=x.is.searchSelection(),i=e&&t,n=t?x.get.query():"",r="string"==typeof n&&n.length>0,o=x.get.searchWidth(),a=""!==n;e&&r&&(x.verbose("Adjusting input width",o,j.glyphWidth),N.css("width",o)),r||i&&a?(x.verbose("Hiding placeholder text"),G.addClass(_.filtered)):(!e||i&&!a)&&(x.verbose("Showing placeholder text"),G.removeClass(_.filtered))},empty:function(){P.addClass(_.empty)},loading:function(){P.addClass(_.loading)},placeholderText:function(e){e=e||x.get.placeholderText(),x.debug("Setting placeholder text",e),x.set.text(e),G.addClass(_.placeholder)},tabbable:function(){x.is.searchSelection()?(x.debug("Added tabindex to searchable dropdown"),N.val("").attr("tabindex",0),U.attr("tabindex",-1)):(x.debug("Added tabindex to dropdown"),void 0===P.attr("tabindex")&&(P.attr("tabindex",0),U.attr("tabindex",-1)))},initialLoad:function(){x.verbose("Setting initial load"),g=!0},activeItem:function(e){j.allowAdditions&&e.filter(I.addition).length>0?e.addClass(_.filtered):e.addClass(_.active)},partialSearch:function(e){var t=x.get.query().length;N.val(e.substr(0,t))},scrollPosition:function(e,t){var i,n,r,o,a,s,l,d,c;e=e||x.get.selectedItem(),i=e.closest(I.menu),n=e&&e.length>0,t=void 0!==t&&t,e&&i.length>0&&n&&(o=e.position().top,i.addClass(_.loading),s=i.scrollTop(),a=i.offset().top,o=e.offset().top,r=s-a+o,t||(l=i.height(),c=s+l<r+5,d=r-5<s),x.debug("Scrolling to active item",r),(t||d||c)&&i.scrollTop(r),i.removeClass(_.loading))},text:function(e){"select"!==j.action&&("combo"==j.action?(x.debug("Changing combo button text",e,H),j.preserveHTML?H.html(e):H.text(e)):(e!==x.get.placeholderText()&&G.removeClass(_.placeholder),x.debug("Changing text",e,G),G.removeClass(_.filtered),j.preserveHTML?G.html(e):G.text(e)))},selectedItem:function(e){var t=x.get.choiceValue(e),i=x.get.choiceText(e,!1),n=x.get.choiceText(e,!0);x.debug("Setting user selection to item",e),x.remove.activeItem(),x.set.partialSearch(i),x.set.activeItem(e),x.set.selected(t,e),x.set.text(n)},selectedLetter:function(t){var i,n=B.filter("."+_.selected),r=n.length>0&&x.has.firstLetter(n,t),o=!1;r&&(i=n.nextAll(B).eq(0),x.has.firstLetter(i,t)&&(o=i)),o||B.each(function(){if(x.has.firstLetter(e(this),t))return o=e(this),!1}),o&&(x.verbose("Scrolling to next value with letter",t),x.set.scrollPosition(o),n.removeClass(_.selected),o.addClass(_.selected),j.selectOnKeydown&&x.is.single()&&x.set.selectedItem(o))},direction:function(e){"auto"==j.direction?(x.remove.upward(),x.can.openDownward(e)?x.remove.upward(e):x.set.upward(e),x.is.leftward(e)||x.can.openRightward(e)||x.set.leftward(e)):"upward"==j.direction&&x.set.upward(e)},upward:function(e){(e||P).addClass(_.upward)},leftward:function(e){(e||U).addClass(_.leftward)},value:function(e,t,i){var n=x.escape.value(e),r=z.length>0,o=(x.has.value(e),x.get.values()),a=void 0!==e?String(e):e;if(r){if(!j.allowReselection&&a==o&&(x.verbose("Skipping value update already same value",e,o),!x.is.initialLoad()))return;x.is.single()&&x.has.selectInput()&&x.can.extendSelect()&&(x.debug("Adding user option",e),x.add.optionValue(e)),x.debug("Updating input value",n,o),Q=!0,z.val(n),!1===j.fireOnInit&&x.is.initialLoad()?x.debug("Input native change event ignored on initial load"):x.trigger.change(),Q=!1}else x.verbose("Storing value in metadata",n,z),n!==o&&P.data(D.value,a);!1===j.fireOnInit&&x.is.initialLoad()?x.verbose("No callback on initial load",j.onChange):j.onChange.call(X,e,t,i)},active:function(){P.addClass(_.active)},multiple:function(){P.addClass(_.multiple)},visible:function(){P.addClass(_.visible)},exactly:function(e,t){x.debug("Setting selected to exact values"),x.clear(),x.set.selected(e,t)},selected:function(t,i){var n=x.is.multiple();(i=j.allowAdditions?i||x.get.itemWithAdditions(t):i||x.get.item(t))&&(x.debug("Setting selected menu item to",i),x.is.multiple()&&x.remove.searchWidth(),x.is.single()?(x.remove.activeItem(),x.remove.selectedItem()):j.useLabels&&x.remove.selectedItem(),i.each(function(){var t=e(this),r=x.get.choiceText(t),o=x.get.choiceValue(t,r),a=t.hasClass(_.filtered),s=t.hasClass(_.active),l=t.hasClass(_.addition),d=n&&1==i.length;n?!s||l?(j.apiSettings&&j.saveRemoteData&&x.save.remoteData(r,o),j.useLabels?(x.add.value(o,r,t),x.add.label(o,r,d),x.set.activeItem(t),x.filterActive(),x.select.nextAvailable(i)):(x.add.value(o,r,t),x.set.text(x.add.variables(C.count)),x.set.activeItem(t))):a||(x.debug("Selected active value, removing label"),x.remove.selected(o)):(j.apiSettings&&j.saveRemoteData&&x.save.remoteData(r,o),x.set.text(r),x.set.value(o,r,t),t.addClass(_.active).addClass(_.selected))}))}},add:{label:function(t,i,n){var r,o=x.is.searchSelection()?N:G,a=x.escape.value(t);if(r=e("<a />").addClass(_.label).attr("data-"+D.value,a).html(A.label(a,i)),r=j.onLabelCreate.call(r,a,i),x.has.label(t))return void x.debug("Label already exists, skipping",a);j.label.variation&&r.addClass(j.label.variation),!0===n?(x.debug("Animating in label",r),r.addClass(_.hidden).insertBefore(o).transition(j.label.transition,j.label.duration)):(x.debug("Adding selection label",r),r.insertBefore(o))},message:function(t){var i=U.children(I.message),n=j.templates.message(x.add.variables(t));i.length>0?i.html(n):i=e("<div/>").html(n).addClass(_.message).appendTo(U)},optionValue:function(t){var i=x.escape.value(t);z.find('option[value="'+x.escape.string(i)+'"]').length>0||(x.disconnect.selectObserver(),x.is.single()&&(x.verbose("Removing previous user addition"),z.find("option."+_.addition).remove()),e("<option/>").prop("value",i).addClass(_.addition).html(t).appendTo(z),x.verbose("Adding user addition as an <option>",t),x.observe.select())},userSuggestion:function(e){var t,i=U.children(I.addition),n=x.get.item(e),r=n&&n.not(I.addition).length,o=i.length>0;if(!j.useLabels||!x.has.maxSelections()){if(""===e||r)return void i.remove();o?(i.data(D.value,e).data(D.text,e).attr("data-"+D.value,e).attr("data-"+D.text,e).removeClass(_.filtered),j.hideAdditions||(t=j.templates.addition(x.add.variables(C.addResult,e)),i.html(t)),x.verbose("Replacing user suggestion with new value",i)):(i=x.create.userChoice(e),i.prependTo(U),x.verbose("Adding item choice to menu corresponding with user choice addition",i)),j.hideAdditions&&!x.is.allFiltered()||i.addClass(_.selected).siblings().removeClass(_.selected),x.refreshItems()}},variables:function(e,t){var i,n,r=-1!==e.search("{count}"),o=-1!==e.search("{maxCount}"),a=-1!==e.search("{term}");return x.verbose("Adding templated variables to message",e),r&&(i=x.get.selectionCount(),e=e.replace("{count}",i)),o&&(i=x.get.selectionCount(),e=e.replace("{maxCount}",j.maxSelections)),a&&(n=t||x.get.query(),e=e.replace("{term}",n)),e},value:function(t,i,n){var r,o=x.get.values();if(""===t)return void x.debug("Cannot select blank values from multiselect");e.isArray(o)?(r=o.concat([t]),r=x.get.uniqueArray(r)):r=[t],x.has.selectInput()?x.can.extendSelect()&&(x.debug("Adding value to select",t,r,z),x.add.optionValue(t)):(r=r.join(j.delimiter),x.debug("Setting hidden input to delimited value",r,z)),!1===j.fireOnInit&&x.is.initialLoad()?x.verbose("Skipping onadd callback on initial load",j.onAdd):j.onAdd.call(X,t,i,n),x.set.value(r,t,i,n),x.check.maxSelections()}},remove:{active:function(){P.removeClass(_.active)},activeLabel:function(){P.find(I.label).removeClass(_.active)},empty:function(){P.removeClass(_.empty)},loading:function(){P.removeClass(_.loading)},initialLoad:function(){g=!1},upward:function(e){(e||P).removeClass(_.upward)},leftward:function(e){(e||U).removeClass(_.leftward)},visible:function(){P.removeClass(_.visible)},activeItem:function(){B.removeClass(_.active)},filteredItem:function(){j.useLabels&&x.has.maxSelections()||(j.useLabels&&x.is.multiple()?B.not("."+_.active).removeClass(_.filtered):B.removeClass(_.filtered),x.remove.empty())},optionValue:function(e){var t=x.escape.value(e),i=z.find('option[value="'+x.escape.string(t)+'"]');i.length>0&&i.hasClass(_.addition)&&($&&($.disconnect(),x.verbose("Temporarily disconnecting mutation observer")),i.remove(),x.verbose("Removing user addition as an <option>",t),$&&$.observe(z[0],{childList:!0,subtree:!0}))},message:function(){U.children(I.message).remove()},searchWidth:function(){N.css("width","")},searchTerm:function(){x.verbose("Cleared search term"),N.val(""),x.set.filtered()},userAddition:function(){B.filter(I.addition).remove()},selected:function(t,i){if(!(i=j.allowAdditions?i||x.get.itemWithAdditions(t):i||x.get.item(t)))return!1;i.each(function(){var t=e(this),i=x.get.choiceText(t),n=x.get.choiceValue(t,i);x.is.multiple()?j.useLabels?(x.remove.value(n,i,t),x.remove.label(n)):(x.remove.value(n,i,t),0===x.get.selectionCount()?x.set.placeholderText():x.set.text(x.add.variables(C.count))):x.remove.value(n,i,t),t.removeClass(_.filtered).removeClass(_.active),j.useLabels&&t.removeClass(_.selected)})},selectedItem:function(){B.removeClass(_.selected)},value:function(e,t,i){var n,r=x.get.values();x.has.selectInput()?(x.verbose("Input is <select> removing selected option",e),n=x.remove.arrayValue(e,r),x.remove.optionValue(e)):(x.verbose("Removing from delimited values",e),n=x.remove.arrayValue(e,r),n=n.join(j.delimiter)),!1===j.fireOnInit&&x.is.initialLoad()?x.verbose("No callback on initial load",j.onRemove):j.onRemove.call(X,e,t,i),x.set.value(n,t,i),x.check.maxSelections()},arrayValue:function(t,i){return e.isArray(i)||(i=[i]),i=e.grep(i,function(e){return t!=e}),x.verbose("Removed value from delimited string",t,i),i},label:function(e,t){var i=P.find(I.label),n=i.filter("[data-"+D.value+'="'+x.escape.string(e)+'"]');x.verbose("Removing label",n),n.remove()},activeLabels:function(e){e=e||P.find(I.label).filter("."+_.active),x.verbose("Removing active label selections",e),x.remove.labels(e)},labels:function(t){t=t||P.find(I.label),x.verbose("Removing labels",t),t.each(function(){var t=e(this),i=t.data(D.value),n=void 0!==i?String(i):i,r=x.is.userValue(n);if(!1===j.onLabelRemove.call(t,i))return void x.debug("Label remove callback cancelled removal");x.remove.message(),r?(x.remove.value(n),x.remove.label(n)):x.remove.selected(n)})},tabbable:function(){x.is.searchSelection()?(x.debug("Searchable dropdown initialized"),N.removeAttr("tabindex"),U.removeAttr("tabindex")):(x.debug("Simple selection dropdown initialized"),P.removeAttr("tabindex"),U.removeAttr("tabindex"))}},has:{menuSearch:function(){return x.has.search()&&N.closest(U).length>0},search:function(){return N.length>0},sizer:function(){return M.length>0},selectInput:function(){return z.is("select")},minCharacters:function(e){return!j.minCharacters||(e=void 0!==e?String(e):String(x.get.query()),e.length>=j.minCharacters)},firstLetter:function(e,t){var i,n;return!(!e||0===e.length||"string"!=typeof t)&&(i=x.get.choiceText(e,!1),t=t.toLowerCase(),n=String(i).charAt(0).toLowerCase(),t==n)},input:function(){return z.length>0},items:function(){return B.length>0},menu:function(){return U.length>0},message:function(){return 0!==U.children(I.message).length},label:function(e){var t=x.escape.value(e);return P.find(I.label).filter("[data-"+D.value+'="'+x.escape.string(t)+'"]').length>0},maxSelections:function(){return j.maxSelections&&x.get.selectionCount()>=j.maxSelections},allResultsFiltered:function(){var e=B.not(I.addition);return e.filter(I.unselectable).length===e.length},userSuggestion:function(){return U.children(I.addition).length>0},query:function(){return""!==x.get.query()},value:function(t){var i=x.get.values();return!!(e.isArray(i)?i&&-1!==e.inArray(t,i):i==t)}},is:{active:function(){return P.hasClass(_.active)},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&P.closest("label").length>0},bubbledIconClick:function(t){return e(t.target).closest(L).length>0},alreadySetup:function(){return P.is("select")&&void 0!==P.parent(I.dropdown).data(E)&&0===P.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):U.transition&&U.transition("is animating")},leftward:function(e){return(e||U).hasClass(_.leftward)},disabled:function(){return P.hasClass(_.disabled)},focused:function(){return i.activeElement===P[0]},focusedOnSearch:function(){return i.activeElement===N[0]},allFiltered:function(){return(x.is.multiple()||x.has.search())&&!(0==j.hideAdditions&&x.has.userSuggestion())&&!x.has.message()&&x.has.allResultsFiltered()},hidden:function(e){return!x.is.visible(e)},initialLoad:function(){return g},inObject:function(t,i){var n=!1;return e.each(i,function(e,i){if(i==t)return n=!0,!0}),n},multiple:function(){return P.hasClass(_.multiple)},remote:function(){return j.apiSettings&&x.can.useAPI()},single:function(){return!x.is.multiple()},selectMutation:function(t){var i=!1;return e.each(t,function(t,n){if(n.target&&e(n.target).is("select"))return i=!0,!0}),i},search:function(){return P.hasClass(_.search)},searchSelection:function(){return x.has.search()&&1===N.parent(I.dropdown).length},selection:function(){return P.hasClass(_.selection)},userValue:function(t){return-1!==e.inArray(t,x.get.userValues())},upward:function(e){return(e||P).hasClass(_.upward)},visible:function(e){return e?e.hasClass(_.visible):U.hasClass(_.visible)},verticallyScrollableContext:function(){var e=O.get(0)!==t&&O.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=O.get(0)!==t&&O.css("overflow-X");return"auto"==e||"scroll"==e}},can:{activate:function(e){return!!j.useLabels||!x.has.maxSelections()||!(!x.has.maxSelections()||!e.hasClass(_.active))},openDownward:function(e){var t,i=e||U,n=!0,r={};return i.addClass(_.loading),t={context:{scrollTop:O.scrollTop(),height:O.outerHeight()},menu:{offset:i.offset(),height:i.outerHeight()}},x.is.verticallyScrollableContext()&&(t.menu.offset.top+=t.context.scrollTop),r={above:t.context.scrollTop<=t.menu.offset.top-t.menu.height,below:t.context.scrollTop+t.context.height>=t.menu.offset.top+t.menu.height},r.below?(x.verbose("Dropdown can fit in context downward",r),n=!0):r.below||r.above?(x.verbose("Dropdown cannot fit below, opening upward",r),n=!1):(x.verbose("Dropdown cannot fit in either direction, favoring downward",r),n=!0),i.removeClass(_.loading),n},openRightward:function(e){var t,i=e||U,n=!0,r=!1;return i.addClass(_.loading),t={context:{scrollLeft:O.scrollLeft(),width:O.outerWidth()},menu:{offset:i.offset(),width:i.outerWidth()}},x.is.horizontallyScrollableContext()&&(t.menu.offset.left+=t.context.scrollLeft),r=t.menu.offset.left+t.menu.width>=t.context.scrollLeft+t.context.width,r&&(x.verbose("Dropdown cannot fit in context rightward",r),n=!1),i.removeClass(_.loading),n},click:function(){return l||"click"==j.on},extendSelect:function(){return j.allowAdditions||j.apiSettings},show:function(){return!x.is.disabled()&&(x.has.items()||x.has.message())},useAPI:function(){return void 0!==e.fn.api}},animate:{show:function(t,i){var n,r=i||U,o=i?function(){}:function(){x.hideSubMenus(),x.hideOthers(),x.set.active()};t=e.isFunction(t)?t:function(){},x.verbose("Doing menu show animation",r),x.set.direction(i),n=x.get.transition(i),x.is.selection()&&x.set.scrollPosition(x.get.selectedItem(),!0),(x.is.hidden(r)||x.is.animating(r))&&("none"==n?(o(),r.transition("show"),t.call(X)):void 0!==e.fn.transition&&P.transition("is supported")?r.transition({animation:n+" in",debug:j.debug,verbose:j.verbose,duration:j.duration,queue:!0,onStart:o,onComplete:function(){t.call(X)}}):x.error(F.noTransition,n))},hide:function(t,i){var n=i||U,r=(j.duration,i?function(){}:function(){x.can.click()&&x.unbind.intent(),x.remove.active()}),o=x.get.transition(i);t=e.isFunction(t)?t:function(){},(x.is.visible(n)||x.is.animating(n))&&(x.verbose("Doing menu hide animation",n),"none"==o?(r(),n.transition("hide"),t.call(X)):void 0!==e.fn.transition&&P.transition("is supported")?n.transition({animation:o+" out",duration:j.duration,debug:j.debug,verbose:j.verbose,queue:!0,onStart:r,onComplete:function(){t.call(X)}}):x.error(F.transition))}},hideAndClear:function(){x.remove.searchTerm(),x.has.maxSelections()||(x.has.search()?x.hide(function(){x.remove.filteredItem()}):x.hide())},delay:{show:function(){x.verbose("Delaying show event to ensure user intent"),clearTimeout(x.timer),x.timer=setTimeout(x.show,j.delay.show)},hide:function(){x.verbose("Delaying hide event to ensure user intent"),clearTimeout(x.timer),x.timer=setTimeout(x.hide,j.delay.hide)}},escape:{value:function(t){var i=e.isArray(t),n="string"==typeof t,r=!n&&!i,o=n&&-1!==t.search(T.quote),a=[];return r||!o?t:(x.debug("Encoding quote values for use in select",t),i?(e.each(t,function(e,t){a.push(t.replace(T.quote,"&quot;"))}),a):t.replace(T.quote,"&quot;"))},string:function(e){return e=String(e),e.replace(T.escape,"\\$&")}},setting:function(t,i){if(x.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,j,t);else{if(void 0===i)return j[t];e.isPlainObject(j[t])?e.extend(!0,j[t],i):j[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===i)return x[t];x[t]=i}},debug:function(){!j.silent&&j.debug&&(j.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,j.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!j.silent&&j.verbose&&j.debug&&(j.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,j.name+":"),x.verbose.apply(console,arguments)))},error:function(){j.silent||(x.error=Function.prototype.bind.call(console.error,console,j.name+":"),x.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;j.performance&&(t=(new Date).getTime(),n=d||t,i=t-n,d=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:X,"Execution Time":i})),clearTimeout(x.performance.timer),x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var t=j.name+":",i=0;d=!1,clearTimeout(x.performance.timer),e.each(c,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",s&&(t+=" '"+s+"'"),(void 0!==console.group||void 0!==console.table)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,i,n){var o,a,s,l=Y;return i=i||f,n=X||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(x.error(F.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},p?(void 0===Y&&x.initialize(),x.invoke(u)):(void 0!==Y&&Y.invoke("destroy"),x.initialize())}),void 0!==r?r:o},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,i){},onAdd:function(e,t,i){},onRemove:function(e,t,i){},onLabelSelect:function(e){},onLabelCreate:function(t,i){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var i=t.placeholder||!1,n=(t.values,"");return n+='<i class="dropdown icon"></i>',t.placeholder?n+='<div class="default text">'+i+"</div>":n+='<div class="text"></div>',n+='<div class="menu">',e.each(t.values,function(e,t){n+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),n+="</div>"},menu:function(t,i){var n=t[i.values]||{},r="";return e.each(n,function(e,t){var n=t[i.text]?'data-text="'+t[i.text]+'"':"",o=t[i.disabled]?"disabled ":"";r+='<div class="'+o+'item" data-value="'+t[i.value]+'"'+n+">",r+=t[i.name],r+="</div>"}),r},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.embed=function(i){var n,r=e(this),o=r.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1);return r.each(function(){var u,p=e.isPlainObject(i)?e.extend(!0,{},e.fn.embed.settings,i):e.extend({},e.fn.embed.settings),f=p.selector,h=p.className,g=p.sources,m=p.error,v=p.metadata,b=p.namespace,y=p.templates,$="."+b,w="module-"+b,x=(e(t),e(this)),j=x.find(f.placeholder),_=x.find(f.icon),C=x.find(f.embed),q=this,S=x.data(w);u={initialize:function(){u.debug("Initializing embed"),u.determine.autoplay(),u.create(),u.bind.events(),u.instantiate()},instantiate:function(){u.verbose("Storing instance of module",u),S=u,x.data(w,u)},destroy:function(){u.verbose("Destroying previous instance of embed"),u.reset(),x.removeData(w).off($)},refresh:function(){u.verbose("Refreshing selector cache"),j=x.find(f.placeholder),_=x.find(f.icon),C=x.find(f.embed)},bind:{events:function(){u.has.placeholder()&&(u.debug("Adding placeholder events"),x.on("click"+$,f.placeholder,u.createAndShow).on("click"+$,f.icon,u.createAndShow))}},create:function(){u.get.placeholder()?u.createPlaceholder():u.createAndShow()},createPlaceholder:function(e){var t=u.get.icon(),i=u.get.url();u.generate.embed(i),e=e||u.get.placeholder(),x.html(y.placeholder(e,t)),u.debug("Creating placeholder for embed",e,t)},createEmbed:function(t){u.refresh(),t=t||u.get.url(),C=e("<div/>").addClass(h.embed).html(u.generate.embed(t)).appendTo(x),p.onCreate.call(q,t),u.debug("Creating embed object",C)},changeEmbed:function(e){C.html(u.generate.embed(e))},createAndShow:function(){u.createEmbed(),u.show()},change:function(e,t,i){u.debug("Changing video to ",e,t,i),x.data(v.source,e).data(v.id,t),i?x.data(v.url,i):x.removeData(v.url),u.has.embed()?u.changeEmbed():u.create()},reset:function(){u.debug("Clearing embed and showing placeholder"),u.remove.active(),u.remove.embed(),u.showPlaceholder(),p.onReset.call(q)},show:function(){u.debug("Showing embed"),
u.set.active(),p.onDisplay.call(q)},hide:function(){u.debug("Hiding embed"),u.showPlaceholder()},showPlaceholder:function(){u.debug("Showing placeholder image"),u.remove.active(),p.onPlaceholderDisplay.call(q)},get:{id:function(){return p.id||x.data(v.id)},placeholder:function(){return p.placeholder||x.data(v.placeholder)},icon:function(){return p.icon?p.icon:void 0!==x.data(v.icon)?x.data(v.icon):u.determine.icon()},source:function(e){return p.source?p.source:void 0!==x.data(v.source)?x.data(v.source):u.determine.source()},type:function(){var e=u.get.source();return void 0!==g[e]&&g[e].type},url:function(){return p.url?p.url:void 0!==x.data(v.url)?x.data(v.url):u.determine.url()}},determine:{autoplay:function(){u.should.autoplay()&&(p.autoplay=!0)},source:function(t){var i=!1;return t=t||u.get.url(),t&&e.each(g,function(e,n){if(-1!==t.search(n.domain))return i=e,!1}),i},icon:function(){var e=u.get.source();return void 0!==g[e]&&g[e].icon},url:function(){var e,t=p.id||x.data(v.id),i=p.source||x.data(v.source);return e=void 0!==g[i]&&g[i].url.replace("{id}",t),e&&x.data(v.url,e),e}},set:{active:function(){x.addClass(h.active)}},remove:{active:function(){x.removeClass(h.active)},embed:function(){C.empty()}},encode:{parameters:function(e){var t,i=[];for(t in e)i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return i.join("&amp;")}},generate:{embed:function(e){u.debug("Generating embed html");var t,i,n=u.get.source();return e=u.get.url(e),e?(i=u.generate.parameters(n),t=y.iframe(e,i)):u.error(m.noURL,x),t},parameters:function(t,i){var n=g[t]&&void 0!==g[t].parameters?g[t].parameters(p):{};return i=i||p.parameters,i&&(n=e.extend({},n,i)),n=p.onEmbed(n),u.encode.parameters(n)}},has:{embed:function(){return C.length>0},placeholder:function(){return p.placeholder||x.data(v.placeholder)}},should:{autoplay:function(){return"auto"===p.autoplay?p.placeholder||void 0!==x.data(v.placeholder):p.autoplay}},is:{video:function(){return"video"==u.get.type()}},setting:function(t,i){if(u.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,u,t);else{if(void 0===i)return u[t];u[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,p.name+":"),u.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),u.verbose.apply(console,arguments)))},error:function(){p.silent||(u.error=Function.prototype.bind.call(console.error,console,p.name+":"),u.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:q,"Execution Time":i})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,500)},display:function(){var t=p.name+":",i=0;a=!1,clearTimeout(u.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,r){var o,a,s,l=S;return i=i||c,r=q||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(u.error(m.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},d?(void 0===S&&u.initialize(),u.invoke(l)):(void 0!==S&&S.invoke("destroy"),u.initialize())}),void 0!==n?n:this},e.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.color||void 0,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.color||void 0,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,t){var i=e;return t&&(i+="?"+t),'<iframe src="'+i+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,t){var i="";return t&&(i+='<i class="'+t+' icon"></i>'),e&&(i+='<img class="placeholder" src="'+e+'">'),i}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.modal=function(n){var r,o=e(this),a=e(t),s=e(i),l=e("body"),d=o.selector||"",c=(new Date).getTime(),u=[],p=arguments[0],f="string"==typeof p,h=[].slice.call(arguments,1),g=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var o,m,v,b,y,$,w,x,j,_=e.isPlainObject(n)?e.extend(!0,{},e.fn.modal.settings,n):e.extend({},e.fn.modal.settings),C=_.selector,q=_.className,S=_.namespace,D=_.error,k="."+S,T="module-"+S,I=e(this),F=e(_.context),A=I.find(C.close),R=this,E=I.data(T),P=!1;j={initialize:function(){j.verbose("Initializing dimmer",F),j.create.id(),j.create.dimmer(),j.refreshModals(),j.bind.events(),_.observeChanges&&j.observeChanges(),j.instantiate()},instantiate:function(){j.verbose("Storing instance of modal"),E=j,I.data(T,E)},create:{dimmer:function(){var t={debug:_.debug,dimmerName:"modals"},i=e.extend(!0,t,_.dimmerSettings);if(void 0===e.fn.dimmer)return void j.error(D.dimmer);j.debug("Creating dimmer"),b=F.dimmer(i),_.detachable?(j.verbose("Modal is detachable, moving content into dimmer"),b.dimmer("add content",I)):j.set.undetached(),y=b.dimmer("get dimmer")},id:function(){w=(Math.random().toString(16)+"000000000").substr(2,8),$="."+w,j.verbose("Creating unique id for element",w)}},destroy:function(){j.verbose("Destroying previous modal"),I.removeData(T).off(k),a.off($),y.off($),A.off(k),F.dimmer("destroy")},observeChanges:function(){"MutationObserver"in t&&(x=new MutationObserver(function(e){j.debug("DOM tree modified, refreshing"),j.refresh()}),x.observe(R,{childList:!0,subtree:!0}),j.debug("Setting up mutation observer",x))},refresh:function(){j.remove.scrolling(),j.cacheSizes(),j.set.screenHeight(),j.set.type(),j.set.position()},refreshModals:function(){m=I.siblings(C.modal),o=m.add(I)},attachEvents:function(t,i){var n=e(t);i=e.isFunction(j[i])?j[i]:j.toggle,n.length>0?(j.debug("Attaching modal events to element",t,i),n.off(k).on("click"+k,i)):j.error(D.notFound,t)},bind:{events:function(){j.verbose("Attaching events"),I.on("click"+k,C.close,j.event.close).on("click"+k,C.approve,j.event.approve).on("click"+k,C.deny,j.event.deny),a.on("resize"+$,j.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){if(P||!1===_.onApprove.call(R,e(this)))return void j.verbose("Approve callback returned false cancelling hide");P=!0,j.hide(function(){P=!1})},deny:function(){if(P||!1===_.onDeny.call(R,e(this)))return void j.verbose("Deny callback returned false cancelling hide");P=!0,j.hide(function(){P=!1})},close:function(){j.hide()},click:function(t){var n=e(t.target),r=n.closest(C.modal).length>0,o=e.contains(i.documentElement,t.target);!r&&o&&(j.debug("Dimmer clicked, hiding all modals"),j.is.active()&&(j.remove.clickaway(),_.allowMultiple?j.hide():j.hideAll()))},debounce:function(e,t){clearTimeout(j.timer),j.timer=setTimeout(e,t)},keyboard:function(e){27==e.which&&(_.closable?(j.debug("Escape key pressed hiding modal"),j.hide()):j.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){b.dimmer("is active")&&(j.is.animating()||j.is.active())&&g(j.refresh)}},toggle:function(){j.is.active()||j.is.animating()?j.hide():j.show()},show:function(t){t=e.isFunction(t)?t:function(){},j.refreshModals(),j.set.dimmerSettings(),j.showModal(t)},hide:function(t){t=e.isFunction(t)?t:function(){},j.refreshModals(),j.hideModal(t)},showModal:function(t){t=e.isFunction(t)?t:function(){},j.is.animating()||!j.is.active()?(j.showDimmer(),j.cacheSizes(),j.set.position(),j.set.screenHeight(),j.set.type(),j.set.clickaway(),!_.allowMultiple&&j.others.active()?j.hideOthers(j.showModal):(_.allowMultiple&&_.detachable&&I.detach().appendTo(y),_.onShow.call(R),_.transition&&void 0!==e.fn.transition&&I.transition("is supported")?(j.debug("Showing modal with css animations"),I.transition({debug:_.debug,animation:_.transition+" in",queue:_.queue,duration:_.duration,useFailSafe:!0,onComplete:function(){_.onVisible.apply(R),_.keyboardShortcuts&&j.add.keyboardShortcuts(),j.save.focus(),j.set.active(),_.autofocus&&j.set.autofocus(),t()}})):j.error(D.noTransition))):j.debug("Modal is already visible")},hideModal:function(t,i){if(t=e.isFunction(t)?t:function(){},j.debug("Hiding modal"),!1===_.onHide.call(R,e(this)))return void j.verbose("Hide callback returned false cancelling hide");(j.is.animating()||j.is.active())&&(_.transition&&void 0!==e.fn.transition&&I.transition("is supported")?(j.remove.active(),I.transition({debug:_.debug,animation:_.transition+" out",queue:_.queue,duration:_.duration,useFailSafe:!0,onStart:function(){j.others.active()||i||j.hideDimmer(),_.keyboardShortcuts&&j.remove.keyboardShortcuts()},onComplete:function(){_.onHidden.call(R),j.restore.focus(),t()}})):j.error(D.noTransition))},showDimmer:function(){b.dimmer("is animating")||!b.dimmer("is active")?(j.debug("Showing dimmer"),b.dimmer("show")):j.debug("Dimmer already visible")},hideDimmer:function(){if(!b.dimmer("is animating")&&!b.dimmer("is active"))return void j.debug("Dimmer is not visible cannot hide");b.dimmer("hide",function(){j.remove.clickaway(),j.remove.screenHeight()})},hideAll:function(t){var i=o.filter("."+q.active+", ."+q.animating);t=e.isFunction(t)?t:function(){},i.length>0&&(j.debug("Hiding all visible modals"),j.hideDimmer(),i.modal("hide modal",t))},hideOthers:function(t){var i=m.filter("."+q.active+", ."+q.animating);t=e.isFunction(t)?t:function(){},i.length>0&&(j.debug("Hiding other modals",m),i.modal("hide modal",t,!0))},others:{active:function(){return m.filter("."+q.active).length>0},animating:function(){return m.filter("."+q.animating).length>0}},add:{keyboardShortcuts:function(){j.verbose("Adding keyboard shortcuts"),s.on("keyup"+k,j.event.keyboard)}},save:{focus:function(){v=e(i.activeElement).blur()}},restore:{focus:function(){v&&v.length>0&&v.focus()}},remove:{active:function(){I.removeClass(q.active)},clickaway:function(){_.closable&&y.off("click"+$)},bodyStyle:function(){""===l.attr("style")&&(j.verbose("Removing style attribute"),l.removeAttr("style"))},screenHeight:function(){j.debug("Removing page height"),l.css("height","")},keyboardShortcuts:function(){j.verbose("Removing keyboard shortcuts"),s.off("keyup"+k)},scrolling:function(){b.removeClass(q.scrolling),I.removeClass(q.scrolling)}},cacheSizes:function(){I.addClass(q.loading);var n=I.prop("scrollHeight"),r=I.outerHeight();void 0!==j.cache&&0===r||(j.cache={pageHeight:e(i).outerHeight(),height:r+_.offset,scrollHeight:n+_.offset,contextHeight:"body"==_.context?e(t).height():b.height()},j.cache.topOffset=-j.cache.height/2),I.removeClass(q.loading),j.debug("Caching modal and container sizes",j.cache)},can:{fit:function(){var e=j.cache.contextHeight,t=j.cache.contextHeight/2,i=j.cache.topOffset,n=j.cache.scrollHeight,r=j.cache.height,o=_.padding,a=t+i;return n>r?a+n+o<e:r+2*o<e}},is:{active:function(){return I.hasClass(q.active)},animating:function(){return I.transition("is supported")?I.transition("is animating"):I.is(":visible")},scrolling:function(){return b.hasClass(q.scrolling)},modernBrowser:function(){return!(t.ActiveXObject||"ActiveXObject"in t)}},set:{autofocus:function(){var e=I.find("[tabindex], :input").filter(":visible"),t=e.filter("[autofocus]"),i=t.length>0?t.first():e.first();i.length>0&&i.focus()},clickaway:function(){_.closable&&y.on("click"+$,j.event.click)},dimmerSettings:function(){if(void 0===e.fn.dimmer)return void j.error(D.dimmer);var t={debug:_.debug,dimmerName:"modals",variation:!1,closable:"auto",duration:{show:_.duration,hide:_.duration}},i=e.extend(!0,t,_.dimmerSettings);_.inverted?(i.variation=void 0!==i.variation?i.variation+" inverted":"inverted",y.addClass(q.inverted)):y.removeClass(q.inverted),_.blurring?b.addClass(q.blurring):b.removeClass(q.blurring),F.dimmer("setting",i)},screenHeight:function(){j.can.fit()?l.css("height",""):(j.debug("Modal is taller than page content, resizing page height"),l.css("height",j.cache.height+2*_.padding))},active:function(){I.addClass(q.active)},scrolling:function(){b.addClass(q.scrolling),I.addClass(q.scrolling)},type:function(){j.can.fit()?(j.verbose("Modal fits on screen"),j.others.active()||j.others.animating()||j.remove.scrolling()):(j.verbose("Modal cannot fit on screen setting to scrolling"),j.set.scrolling())},position:function(){j.verbose("Centering modal on page",j.cache),j.can.fit()?I.css({top:"",marginTop:j.cache.topOffset}):I.css({marginTop:"",top:s.scrollTop()})},undetached:function(){b.addClass(q.undetached)}},setting:function(t,i){if(j.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,_,t);else{if(void 0===i)return _[t];e.isPlainObject(_[t])?e.extend(!0,_[t],i):_[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,j,t);else{if(void 0===i)return j[t];j[t]=i}},debug:function(){!_.silent&&_.debug&&(_.performance?j.performance.log(arguments):(j.debug=Function.prototype.bind.call(console.info,console,_.name+":"),j.debug.apply(console,arguments)))},verbose:function(){!_.silent&&_.verbose&&_.debug&&(_.performance?j.performance.log(arguments):(j.verbose=Function.prototype.bind.call(console.info,console,_.name+":"),j.verbose.apply(console,arguments)))},error:function(){_.silent||(j.error=Function.prototype.bind.call(console.error,console,_.name+":"),j.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;_.performance&&(t=(new Date).getTime(),n=c||t,i=t-n,c=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":i})),clearTimeout(j.performance.timer),j.performance.timer=setTimeout(j.performance.display,500)},display:function(){var t=_.name+":",i=0;c=!1,clearTimeout(j.performance.timer),e.each(u,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",d&&(t+=" '"+d+"'"),(void 0!==console.group||void 0!==console.table)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,i,n){var o,a,s,l=E;return i=i||h,n=R||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},f?(void 0===E&&j.initialize(),j.invoke(p)):(void 0!==E&&E.invoke("destroy"),j.initialize())}),void 0!==r?r:this},e.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.nag=function(i){var n,r=e(this),o=r.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1);return r.each(function(){var r,u=e.isPlainObject(i)?e.extend(!0,{},e.fn.nag.settings,i):e.extend({},e.fn.nag.settings),p=(u.className,u.selector),f=u.error,h=u.namespace,g="."+h,m=h+"-module",v=e(this),b=(v.find(p.close),e(u.context?u.context:"body")),y=this,$=v.data(m);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,r={initialize:function(){r.verbose("Initializing element"),v.on("click"+g,p.close,r.dismiss).data(m,r),u.detachable&&v.parent()[0]!==b[0]&&v.detach().prependTo(b),u.displayTime>0&&setTimeout(r.hide,u.displayTime),r.show()},destroy:function(){r.verbose("Destroying instance"),v.removeData(m).off(g)},show:function(){r.should.show()&&!v.is(":visible")&&(r.debug("Showing nag",u.animation.show),"fade"==u.animation.show?v.fadeIn(u.duration,u.easing):v.slideDown(u.duration,u.easing))},hide:function(){r.debug("Showing nag",u.animation.hide),"fade"==u.animation.show?v.fadeIn(u.duration,u.easing):v.slideUp(u.duration,u.easing)},onHide:function(){r.debug("Removing nag",u.animation.hide),v.remove(),u.onHide&&u.onHide()},dismiss:function(e){u.storageMethod&&r.storage.set(u.key,u.value),r.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return u.persist?(r.debug("Persistent nag is set, can show nag"),!0):r.storage.get(u.key)!=u.value.toString()?(r.debug("Stored value is not set, can show nag",r.storage.get(u.key)),!0):(r.debug("Stored value is set, cannot show nag",r.storage.get(u.key)),!1)}},get:{storageOptions:function(){var e={};return u.expires&&(e.expires=u.expires),u.domain&&(e.domain=u.domain),u.path&&(e.path=u.path),e}},clear:function(){r.storage.remove(u.key)},storage:{set:function(i,n){var o=r.get.storageOptions();if("localstorage"==u.storageMethod&&void 0!==t.localStorage)t.localStorage.setItem(i,n),r.debug("Value stored using local storage",i,n);else if("sessionstorage"==u.storageMethod&&void 0!==t.sessionStorage)t.sessionStorage.setItem(i,n),r.debug("Value stored using session storage",i,n);else{if(void 0===e.cookie)return void r.error(f.noCookieStorage);e.cookie(i,n,o),r.debug("Value stored using cookie",i,n,o)}},get:function(i,n){var o;return"localstorage"==u.storageMethod&&void 0!==t.localStorage?o=t.localStorage.getItem(i):"sessionstorage"==u.storageMethod&&void 0!==t.sessionStorage?o=t.sessionStorage.getItem(i):void 0!==e.cookie?o=e.cookie(i):r.error(f.noCookieStorage),"undefined"!=o&&"null"!=o&&void 0!==o&&null!==o||(o=void 0),o},remove:function(i){var n=r.get.storageOptions();"localstorage"==u.storageMethod&&void 0!==t.localStorage?t.localStorage.removeItem(i):"sessionstorage"==u.storageMethod&&void 0!==t.sessionStorage?t.sessionStorage.removeItem(i):void 0!==e.cookie?e.removeCookie(i,n):r.error(f.noStorage)}},setting:function(t,i){if(r.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,u,t);else{if(void 0===i)return u[t];e.isPlainObject(u[t])?e.extend(!0,u[t],i):u[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,r,t);else{if(void 0===i)return r[t];r[t]=i}},debug:function(){!u.silent&&u.debug&&(u.performance?r.performance.log(arguments):(r.debug=Function.prototype.bind.call(console.info,console,u.name+":"),r.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?r.performance.log(arguments):(r.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),r.verbose.apply(console,arguments)))},error:function(){u.silent||(r.error=Function.prototype.bind.call(console.error,console,u.name+":"),r.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;u.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":i})),clearTimeout(r.performance.timer),r.performance.timer=setTimeout(r.performance.display,500)},display:function(){var t=u.name+":",i=0;a=!1,clearTimeout(r.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,o){var a,s,l,d=$;return i=i||c,o=y||o,"string"==typeof t&&void 0!==d&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(i,n){var o=i!=a?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(d[o])&&i!=a)d=d[o];else{if(void 0!==d[o])return s=d[o],!1;if(!e.isPlainObject(d[n])||i==a)return void 0!==d[n]?(s=d[n],!1):(r.error(f.method,t),!1);d=d[n]}})),e.isFunction(s)?l=s.apply(o,i):void 0!==s&&(l=s),e.isArray(n)?n.push(l):void 0!==n?n=[n,l]:void 0!==l&&(n=l),s}},d?(void 0===$&&r.initialize(),r.invoke(l)):(void 0!==$&&$.invoke("destroy"),r.initialize())}),void 0!==n?n:this},e.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}},e.extend(e.easing,{easeOutQuad:function(e,t,i,n,r){return-n*(t/=r)*(t-2)+i}})}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(n){var r,o=e(this),a=e(i),s=e(t),l=e("body"),d=o.selector||"",c=(new Date).getTime(),u=[],p=arguments[0],f="string"==typeof p,h=[].slice.call(arguments,1);return o.each(function(){var o,g,m,v,b,y,$=e.isPlainObject(n)?e.extend(!0,{},e.fn.popup.settings,n):e.extend({},e.fn.popup.settings),w=$.selector,x=$.className,j=$.error,_=$.metadata,C=$.namespace,q="."+$.namespace,S="module-"+C,D=e(this),k=e($.context),T=e($.scrollContext),I=e($.boundary),F=$.target?e($.target):D,A=0,R=!1,E=!1,P=this,O=D.data(S);y={initialize:function(){y.debug("Initializing",D),y.createID(),y.bind.events(),!y.exists()&&$.preserve&&y.create(),$.observeChanges&&y.observeChanges(),y.instantiate()},instantiate:function(){y.verbose("Storing instance",y),O=y,D.data(S,O)},observeChanges:function(){"MutationObserver"in t&&(m=new MutationObserver(y.event.documentChanged),m.observe(i,{childList:!0,subtree:!0}),y.debug("Setting up mutation observer",m))},refresh:function(){$.popup?o=e($.popup).eq(0):$.inline&&(o=F.nextAll(w.popup).eq(0),$.popup=o),$.popup?(o.addClass(x.loading),g=y.get.offsetParent(),o.removeClass(x.loading),$.movePopup&&y.has.popup()&&y.get.offsetParent(o)[0]!==g[0]&&(y.debug("Moving popup to the same offset parent as target"),o.detach().appendTo(g))):g=$.inline?y.get.offsetParent(F):y.has.popup()?y.get.offsetParent(o):l,g.is("html")&&g[0]!==l[0]&&(y.debug("Setting page as offset parent"),g=l),y.get.variation()&&y.set.variation()},reposition:function(){y.refresh(),y.set.position()},destroy:function(){y.debug("Destroying previous module"),m&&m.disconnect(),o&&!$.preserve&&y.removePopup(),clearTimeout(y.hideTimer),clearTimeout(y.showTimer),y.unbind.close(),y.unbind.events(),D.removeData(S)},event:{start:function(t){var i=e.isPlainObject($.delay)?$.delay.show:$.delay;clearTimeout(y.hideTimer),E||(y.showTimer=setTimeout(y.show,i))},end:function(){var t=e.isPlainObject($.delay)?$.delay.hide:$.delay;clearTimeout(y.showTimer),y.hideTimer=setTimeout(y.hide,t)},touchstart:function(e){E=!0,y.show()},resize:function(){y.is.visible()&&y.set.position()},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==P||e(t).find(P).length>0)&&(y.debug("Element removed from DOM, tearing down events"),y.destroy())})})},hideGracefully:function(t){var n=e(t.target),r=e.contains(i.documentElement,t.target),o=n.closest(w.popup).length>0;t&&!o&&r?(y.debug("Click occurred outside popup hiding popup"),y.hide()):y.debug("Click was inside popup, keeping popup open")}},create:function(){var t=y.get.html(),i=y.get.title(),n=y.get.content();t||n||i?(y.debug("Creating pop-up html"),t||(t=$.templates.popup({title:i,content:n})),o=e("<div/>").addClass(x.popup).data(_.activator,D).html(t),$.inline?(y.verbose("Inserting popup element inline",o),o.insertAfter(D)):(y.verbose("Appending popup element to body",o),o.appendTo(k)),y.refresh(),y.set.variation(),$.hoverable&&y.bind.popup(),$.onCreate.call(o,P)):0!==F.next(w.popup).length?(y.verbose("Pre-existing popup found"),$.inline=!0,$.popup=F.next(w.popup).data(_.activator,D),y.refresh(),$.hoverable&&y.bind.popup()):$.popup?(e($.popup).data(_.activator,D),y.verbose("Used popup specified in settings"),y.refresh(),$.hoverable&&y.bind.popup()):y.debug("No content specified skipping display",P)},createID:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),v="."+b,y.verbose("Creating unique id for element",b)},toggle:function(){y.debug("Toggling pop-up"),y.is.hidden()?(y.debug("Popup is hidden, showing pop-up"),y.unbind.close(),y.show()):(y.debug("Popup is visible, hiding pop-up"),y.hide())},show:function(e){if(e=e||function(){},y.debug("Showing pop-up",$.transition),y.is.hidden()&&(!y.is.active()||!y.is.dropdown())){if(y.exists()||y.create(),!1===$.onShow.call(o,P))return void y.debug("onShow callback returned false, cancelling popup animation");$.preserve||$.popup||y.refresh(),o&&y.set.position()&&(y.save.conditions(),$.exclusive&&y.hideAll(),y.animate.show(e))}},hide:function(e){if(e=e||function(){},y.is.visible()||y.is.animating()){if(!1===$.onHide.call(o,P))return void y.debug("onHide callback returned false, cancelling popup animation");y.remove.visible(),y.unbind.close(),y.restore.conditions(),y.animate.hide(e)}},hideAll:function(){e(w.popup).filter("."+x.popupVisible).each(function(){e(this).data(_.activator).popup("hide")})},exists:function(){return!!o&&($.inline||$.popup?y.has.popup():o.closest(k).length>=1)},removePopup:function(){y.has.popup()&&!$.popup&&(y.debug("Removing popup",o),o.remove(),o=void 0,$.onRemove.call(o,P))},save:{conditions:function(){y.cache={title:D.attr("title")},y.cache.title&&D.removeAttr("title"),y.verbose("Saving original attributes",y.cache.title)}},restore:{conditions:function(){return y.cache&&y.cache.title&&(D.attr("title",y.cache.title),y.verbose("Restoring original attributes",y.cache.title)),!0}},supports:{svg:function(){return"undefined"==typeof SVGGraphicsElement}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},$.transition&&void 0!==e.fn.transition&&D.transition("is supported")?(y.set.visible(),o.transition({animation:$.transition+" in",queue:!1,debug:$.debug,verbose:$.verbose,duration:$.duration,onComplete:function(){y.bind.close(),t.call(o,P),$.onVisible.call(o,P)}})):y.error(j.noTransition)},hide:function(t){if(t=e.isFunction(t)?t:function(){},y.debug("Hiding pop-up"),!1===$.onHide.call(o,P))return void y.debug("onHide callback returned false, cancelling popup animation");$.transition&&void 0!==e.fn.transition&&D.transition("is supported")?o.transition({animation:$.transition+" out",queue:!1,duration:$.duration,debug:$.debug,verbose:$.verbose,onComplete:function(){y.reset(),t.call(o,P),$.onHidden.call(o,P)}}):y.error(j.noTransition)}},change:{content:function(e){o.html(e)}},get:{html:function(){return D.removeData(_.html),D.data(_.html)||$.html},title:function(){return D.removeData(_.title),D.data(_.title)||$.title},content:function(){return D.removeData(_.content),D.data(_.content)||D.attr("title")||$.content},variation:function(){return D.removeData(_.variation),D.data(_.variation)||$.variation},popup:function(){return o},popupOffset:function(){return o.offset()},calculations:function(){var e,i=F[0],n=I[0]==t,r=$.inline||$.popup&&$.movePopup?F.position():F.offset(),a=n?{top:0,left:0}:I.offset(),l={},d=n?{top:s.scrollTop(),left:s.scrollLeft()}:{top:0,left:0};return l={target:{element:F[0],width:F.outerWidth(),height:F.outerHeight(),top:r.top,left:r.left,margin:{}},popup:{width:o.outerWidth(),height:o.outerHeight()},parent:{width:g.outerWidth(),height:g.outerHeight()},screen:{top:a.top,left:a.left,scroll:{top:d.top,left:d.left},width:I.width(),height:I.height()}},$.setFluidWidth&&y.is.fluid()&&(l.container={width:o.parent().outerWidth()},l.popup.width=l.container.width),l.target.margin.top=$.inline?parseInt(t.getComputedStyle(i).getPropertyValue("margin-top"),10):0,l.target.margin.left=$.inline?y.is.rtl()?parseInt(t.getComputedStyle(i).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(i).getPropertyValue("margin-left"),10):0,e=l.screen,l.boundary={top:e.top+e.scroll.top,bottom:e.top+e.scroll.top+e.height,left:e.left+e.scroll.left,right:e.left+e.scroll.left+e.width},l},id:function(){return b},startEvent:function(){return"hover"==$.on?"mouseenter":"focus"==$.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==$.on?"mouseleave":"focus"==$.on&&"blur"},distanceFromBoundary:function(e,t){var i,n,r={};return t=t||y.get.calculations(),i=t.popup,n=t.boundary,e&&(r={top:e.top-n.top,left:e.left-n.left,right:n.right-(e.left+i.width),bottom:n.bottom-(e.top+i.height)},y.verbose("Distance from boundaries determined",e,r)),r},offsetParent:function(t){var i=void 0!==t?t[0]:D[0],n=i.parentNode,r=e(n);if(n)for(var o="none"===r.css("transform"),a="static"===r.css("position"),s=r.is("html");n&&!s&&a&&o;)n=n.parentNode,r=e(n),o="none"===r.css("transform"),a="static"===r.css("position"),s=r.is("html");return r&&r.length>0?r:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),i=t[0],n=t[1],r={top:"bottom",bottom:"top",left:"right",right:"left"},o={left:"center",center:"right",right:"left"},a={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"
},s="top"==i||"bottom"==i,l=!1,d=!1,c=!1;return R||(y.verbose("All available positions available"),R=y.get.positions()),y.debug("Recording last position tried",e),R[e]=!0,"opposite"===$.prefer&&(c=[r[i],n],c=c.join(" "),l=!0===R[c],y.debug("Trying opposite strategy",c)),"adjacent"===$.prefer&&s&&(c=[i,o[n]],c=c.join(" "),d=!0===R[c],y.debug("Trying adjacent strategy",c)),(d||l)&&(y.debug("Using backup position",c),c=a[e]),c}},set:{position:function(e,t){if(0===F.length||0===o.length)return void y.error(j.notFound);var i,n,r,a,s,l,d,c;if(t=t||y.get.calculations(),e=e||D.data(_.position)||$.position,i=D.data(_.offset)||$.offset,n=$.distanceAway,r=t.target,a=t.popup,s=t.parent,0===r.width&&0===r.height&&!y.is.svg(r.element))return y.debug("Popup target is hidden, no action taken"),!1;switch($.inline&&(y.debug("Adding margin to calculation",r.margin),"left center"==e||"right center"==e?(i+=r.margin.top,n+=-r.margin.left):"top left"==e||"top center"==e||"top right"==e?(i+=r.margin.left,n-=r.margin.top):(i+=r.margin.left,n+=r.margin.top)),y.debug("Determining popup position from calculations",e,t),y.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),y.debug("RTL: Popup position updated",e)),A==$.maxSearchDepth&&"string"==typeof $.lastResort&&(e=$.lastResort),e){case"top left":l={top:"auto",bottom:s.height-r.top+n,left:r.left+i,right:"auto"};break;case"top center":l={bottom:s.height-r.top+n,left:r.left+r.width/2-a.width/2+i,top:"auto",right:"auto"};break;case"top right":l={bottom:s.height-r.top+n,right:s.width-r.left-r.width-i,top:"auto",left:"auto"};break;case"left center":l={top:r.top+r.height/2-a.height/2+i,right:s.width-r.left+n,left:"auto",bottom:"auto"};break;case"right center":l={top:r.top+r.height/2-a.height/2+i,left:r.left+r.width+n,bottom:"auto",right:"auto"};break;case"bottom left":l={top:r.top+r.height+n,left:r.left+i,bottom:"auto",right:"auto"};break;case"bottom center":l={top:r.top+r.height+n,left:r.left+r.width/2-a.width/2+i,bottom:"auto",right:"auto"};break;case"bottom right":l={top:r.top+r.height+n,right:s.width-r.left-r.width-i,left:"auto",bottom:"auto"}}if(void 0===l&&y.error(j.invalidPosition,e),y.debug("Calculated popup positioning values",l),o.css(l).removeClass(x.position).addClass(e).addClass(x.loading),d=y.get.popupOffset(),c=y.get.distanceFromBoundary(d,t),y.is.offstage(c,e)){if(y.debug("Position is outside viewport",e),A<$.maxSearchDepth)return A++,e=y.get.nextPosition(e),y.debug("Trying new position",e),!!o&&y.set.position(e,t);if(!$.lastResort)return y.debug("Popup could not find a position to display",o),y.error(j.cannotPlace,P),y.remove.attempts(),y.remove.loading(),y.reset(),$.onUnplaceable.call(o,P),!1;y.debug("No position found, showing with last position")}return y.debug("Position is on stage",e),y.remove.attempts(),y.remove.loading(),$.setFluidWidth&&y.is.fluid()&&y.set.fluidWidth(t),!0},fluidWidth:function(e){e=e||y.get.calculations(),y.debug("Automatically setting element width to parent width",e.parent.width),o.css("width",e.container.width)},variation:function(e){(e=e||y.get.variation())&&y.has.popup()&&(y.verbose("Adding variation to popup",e),o.addClass(e))},visible:function(){D.addClass(x.visible)}},remove:{loading:function(){o.removeClass(x.loading)},variation:function(e){(e=e||y.get.variation())&&(y.verbose("Removing variation",e),o.removeClass(e))},visible:function(){D.removeClass(x.visible)},attempts:function(){y.verbose("Resetting all searched positions"),A=0,R=!1}},bind:{events:function(){y.debug("Binding popup events to module"),"click"==$.on&&D.on("click"+q,y.toggle),"hover"==$.on&&D.on("touchstart"+q,y.event.touchstart),y.get.startEvent()&&D.on(y.get.startEvent()+q,y.event.start).on(y.get.endEvent()+q,y.event.end),$.target&&y.debug("Target set to element",F),s.on("resize"+v,y.event.resize)},popup:function(){y.verbose("Allowing hover events on popup to prevent closing"),o&&y.has.popup()&&o.on("mouseenter"+q,y.event.start).on("mouseleave"+q,y.event.end)},close:function(){(!0===$.hideOnScroll||"auto"==$.hideOnScroll&&"click"!=$.on)&&y.bind.closeOnScroll(),"hover"==$.on&&E&&y.bind.touchClose(),"click"==$.on&&$.closable&&y.bind.clickaway()},closeOnScroll:function(){y.verbose("Binding scroll close event to document"),T.one(y.get.scrollEvent()+v,y.event.hideGracefully)},touchClose:function(){y.verbose("Binding popup touchclose event to document"),a.on("touchstart"+v,function(e){y.verbose("Touched away from popup"),y.event.hideGracefully.call(P,e)})},clickaway:function(){y.verbose("Binding popup close event to document"),a.on("click"+v,function(e){y.verbose("Clicked away from popup"),y.event.hideGracefully.call(P,e)})}},unbind:{events:function(){s.off(v),D.off(q)},close:function(){a.off(v),T.off(v)}},has:{popup:function(){return o&&o.length>0}},is:{offstage:function(t,i){var n=[];return e.each(t,function(e,t){t<-$.jitter&&(y.debug("Position exceeds allowable distance from edge",e,t,i),n.push(e))}),n.length>0},svg:function(e){return y.supports.svg()&&e instanceof SVGGraphicsElement},active:function(){return D.hasClass(x.active)},animating:function(){return void 0!==o&&o.hasClass(x.animating)},fluid:function(){return void 0!==o&&o.hasClass(x.fluid)},visible:function(){return void 0!==o&&o.hasClass(x.popupVisible)},dropdown:function(){return D.hasClass(x.dropdown)},hidden:function(){return!y.is.visible()},rtl:function(){return"rtl"==D.css("direction")}},reset:function(){y.remove.visible(),$.preserve?void 0!==e.fn.transition&&o.transition("remove transition"):y.removePopup()},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,$,t);else{if(void 0===i)return $[t];$[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===i)return y[t];y[t]=i}},debug:function(){!$.silent&&$.debug&&($.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,$.name+":"),y.debug.apply(console,arguments)))},verbose:function(){!$.silent&&$.verbose&&$.debug&&($.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,$.name+":"),y.verbose.apply(console,arguments)))},error:function(){$.silent||(y.error=Function.prototype.bind.call(console.error,console,$.name+":"),y.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;$.performance&&(t=(new Date).getTime(),n=c||t,i=t-n,c=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:P,"Execution Time":i})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var t=$.name+":",i=0;c=!1,clearTimeout(y.performance.timer),e.each(u,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",d&&(t+=" '"+d+"'"),(void 0!==console.group||void 0!==console.table)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,i,n){var o,a,s,l=O;return i=i||h,n=P||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},f?(void 0===O&&y.initialize(),y.invoke(p)):(void 0!==O&&O.invoke("destroy"),y.initialize())}),void 0!==r?r:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t=/[&<>"'`]/g,i=/[&<>"'`]/,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=function(e){return n[e]};return i.test(e)?e.replace(t,r):e},popup:function(t){var i="",n=e.fn.popup.settings.templates.escape;return void 0!==typeof t&&(void 0!==typeof t.title&&t.title&&(t.title=n(t.title),i+='<div class="header">'+t.title+"</div>"),void 0!==typeof t.content&&t.content&&(t.content=n(t.content),i+='<div class="content">'+t.content+"</div>")),i}}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),void 0!==t&&t.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")()),e.fn.progress=function(t){var n,r=e(this),o=r.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1);return r.each(function(){var r,u,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),f=p.className,h=p.metadata,g=p.namespace,m=p.selector,v=p.error,b="."+g,y="module-"+g,$=e(this),w=e(this).find(m.bar),x=e(this).find(m.progress),j=e(this).find(m.label),_=this,C=$.data(y),q=!1;u={initialize:function(){u.debug("Initializing progress bar",p),u.set.duration(),u.set.transitionEvent(),u.read.metadata(),u.read.settings(),u.instantiate()},instantiate:function(){u.verbose("Storing instance of progress",u),C=u,$.data(y,u)},destroy:function(){u.verbose("Destroying previous progress for",$),clearInterval(C.interval),u.remove.state(),$.removeData(y),C=void 0},reset:function(){u.remove.nextValue(),u.update.progress(0)},complete:function(){(void 0===u.percent||u.percent<100)&&(u.remove.progressPoll(),u.set.percent(100))},read:{metadata:function(){var e={percent:$.data(h.percent),total:$.data(h.total),value:$.data(h.value)};e.percent&&(u.debug("Current percent value set from metadata",e.percent),u.set.percent(e.percent)),e.total&&(u.debug("Total value set from metadata",e.total),u.set.total(e.total)),e.value&&(u.debug("Current value set from metadata",e.value),u.set.value(e.value),u.set.progress(e.value))},settings:function(){!1!==p.total&&(u.debug("Current total set in settings",p.total),u.set.total(p.total)),!1!==p.value&&(u.debug("Current value set in settings",p.value),u.set.value(p.value),u.set.progress(u.value)),!1!==p.percent&&(u.debug("Current percent set in settings",p.percent),u.set.percent(p.percent))}},bind:{transitionEnd:function(e){var t=u.get.transitionEnd();w.one(t+b,function(t){clearTimeout(u.failSafeTimer),e.call(this,t)}),u.failSafeTimer=setTimeout(function(){w.triggerHandler(t)},p.duration+p.failSafeDelay),u.verbose("Adding fail safe timer",u.timer)}},increment:function(e){var t,i;u.has.total()?(t=u.get.value(),e=e||1,i=t+e):(t=u.get.percent(),e=e||u.get.randomValue(),i=t+e,u.debug("Incrementing percentage by",t,i)),i=u.get.normalizedValue(i),u.set.progress(i)},decrement:function(e){var t,i;u.get.total()?(t=u.get.value(),e=e||1,i=t-e,u.debug("Decrementing value by",e,t)):(t=u.get.percent(),e=e||u.get.randomValue(),i=t-e,u.debug("Decrementing percentage by",e,t)),i=u.get.normalizedValue(i),u.set.progress(i)},has:{progressPoll:function(){return u.progressPoll},total:function(){return!1!==u.get.total()}},get:{text:function(e){var t=u.value||0,i=u.total||0,n=q?u.get.displayPercent():u.percent||0,r=u.total>0?i-t:100-n;return e=e||"",e=e.replace("{value}",t).replace("{total}",i).replace("{left}",r).replace("{percent}",n),u.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return u.debug("Value cannot decrement below 0"),0;if(u.has.total()){if(e>u.total)return u.debug("Value cannot increment above total",u.total),u.total}else if(e>100)return u.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==p.updateInterval?p.duration:p.updateInterval},randomValue:function(){return u.debug("Generating random increment percentage"),Math.floor(Math.random()*p.random.max+p.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=i.createElement("element"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},displayPercent:function(){var e=w.width(),t=$.width(),i=parseInt(w.css("min-width"),10),n=e>i?e/t*100:u.percent;return p.precision>0?Math.round(n*(10*p.precision))/(10*p.precision):Math.round(n)},percent:function(){return u.percent||0},value:function(){return u.nextValue||u.value||0},total:function(){return u.total||!1}},create:{progressPoll:function(){u.progressPoll=setTimeout(function(){u.update.toNextValue(),u.remove.progressPoll()},u.get.updateInterval())}},is:{complete:function(){return u.is.success()||u.is.warning()||u.is.error()},success:function(){return $.hasClass(f.success)},warning:function(){return $.hasClass(f.warning)},error:function(){return $.hasClass(f.error)},active:function(){return $.hasClass(f.active)},visible:function(){return $.is(":visible")}},remove:{progressPoll:function(){u.verbose("Removing progress poll timer"),u.progressPoll&&(clearTimeout(u.progressPoll),delete u.progressPoll)},nextValue:function(){u.verbose("Removing progress value stored for next update"),delete u.nextValue},state:function(){u.verbose("Removing stored state"),delete u.total,delete u.percent,delete u.value},active:function(){u.verbose("Removing active state"),$.removeClass(f.active)},success:function(){u.verbose("Removing success state"),$.removeClass(f.success)},warning:function(){u.verbose("Removing warning state"),$.removeClass(f.warning)},error:function(){u.verbose("Removing error state"),$.removeClass(f.error)}},set:{barWidth:function(e){e>100?u.error(v.tooHigh,e):e<0?u.error(v.tooLow,e):(w.css("width",e+"%"),$.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||p.duration,e="number"==typeof e?e+"ms":e,u.verbose("Setting progress bar transition duration",e),w.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=p.precision>0?Math.round(e*(10*p.precision))/(10*p.precision):Math.round(e),u.percent=e,u.has.total()||(u.value=p.precision>0?Math.round(e/100*u.total*(10*p.precision))/(10*p.precision):Math.round(e/100*u.total*10)/10,p.limitValues&&(u.value=u.value>100?100:u.value<0?0:u.value)),u.set.barWidth(e),u.set.labelInterval(),u.set.labels(),p.onChange.call(_,e,u.value,u.total)},labelInterval:function(){var t=function(){u.verbose("Bar finished animating, removing continuous label updates"),clearInterval(u.interval),q=!1,u.set.labels()};clearInterval(u.interval),u.bind.transitionEnd(t),q=!0,u.interval=setInterval(function(){e.contains(i.documentElement,_)||(clearInterval(u.interval),q=!1),u.set.labels()},p.framerate)},labels:function(){u.verbose("Setting both bar progress and outer label text"),u.set.barLabel(),u.set.state()},label:function(e){(e=e||"")&&(e=u.get.text(e),u.verbose("Setting label to text",e),j.text(e))},state:function(e){e=void 0!==e?e:u.percent,100===e?p.autoSuccess&&!(u.is.warning()||u.is.error()||u.is.success())?(u.set.success(),u.debug("Automatically triggering success at 100%")):(u.verbose("Reached 100% removing active state"),u.remove.active(),u.remove.progressPoll()):e>0?(u.verbose("Adjusting active progress bar label",e),u.set.active()):(u.remove.active(),u.set.label(p.text.active))},barLabel:function(e){void 0!==e?x.text(u.get.text(e)):"ratio"==p.label&&u.total?(u.verbose("Adding ratio to bar label"),x.text(u.get.text(p.text.ratio))):"percent"==p.label&&(u.verbose("Adding percentage to bar label"),x.text(u.get.text(p.text.percent)))},active:function(e){e=e||p.text.active,u.debug("Setting active state"),p.showActivity&&!u.is.active()&&$.addClass(f.active),u.remove.warning(),u.remove.error(),u.remove.success(),e=p.onLabelUpdate("active",e,u.value,u.total),e&&u.set.label(e),u.bind.transitionEnd(function(){p.onActive.call(_,u.value,u.total)})},success:function(e){e=e||p.text.success||p.text.active,u.debug("Setting success state"),$.addClass(f.success),u.remove.active(),u.remove.warning(),u.remove.error(),u.complete(),p.text.success?(e=p.onLabelUpdate("success",e,u.value,u.total),u.set.label(e)):(e=p.onLabelUpdate("active",e,u.value,u.total),u.set.label(e)),u.bind.transitionEnd(function(){p.onSuccess.call(_,u.total)})},warning:function(e){e=e||p.text.warning,u.debug("Setting warning state"),$.addClass(f.warning),u.remove.active(),u.remove.success(),u.remove.error(),u.complete(),e=p.onLabelUpdate("warning",e,u.value,u.total),e&&u.set.label(e),u.bind.transitionEnd(function(){p.onWarning.call(_,u.value,u.total)})},error:function(e){e=e||p.text.error,u.debug("Setting error state"),$.addClass(f.error),u.remove.active(),u.remove.success(),u.remove.warning(),u.complete(),e=p.onLabelUpdate("error",e,u.value,u.total),e&&u.set.label(e),u.bind.transitionEnd(function(){p.onError.call(_,u.value,u.total)})},transitionEvent:function(){r=u.get.transitionEnd()},total:function(e){u.total=e},value:function(e){u.value=e},progress:function(e){u.has.progressPoll()?(u.debug("Updated within interval, setting next update to use new value",e),u.set.nextValue(e)):(u.debug("First update in progress update interval, immediately updating",e),u.update.progress(e),u.create.progressPoll())},nextValue:function(e){u.nextValue=e}},update:{toNextValue:function(){var e=u.nextValue;e&&(u.debug("Update interval complete using last updated value",e),u.update.progress(e),u.remove.nextValue())},progress:function(e){var t;e=u.get.numericValue(e),!1===e&&u.error(v.nonNumeric,e),e=u.get.normalizedValue(e),u.has.total()?(u.set.value(e),t=e/u.total*100,u.debug("Calculating percent complete from total",t),u.set.percent(t)):(t=e,u.debug("Setting value to exact percentage value",t),u.set.percent(t))}},setting:function(t,i){if(u.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,u,t);else{if(void 0===i)return u[t];u[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,p.name+":"),u.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),u.verbose.apply(console,arguments)))},error:function(){p.silent||(u.error=Function.prototype.bind.call(console.error,console,p.name+":"),u.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:_,"Execution Time":i})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,500)},display:function(){var t=p.name+":",i=0;a=!1,clearTimeout(u.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,r){var o,a,s,l=C;return i=i||c,r=_||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(u.error(v.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},d?(void 0===C&&u.initialize(),u.invoke(l)):(void 0!==C&&C.invoke("destroy"),u.initialize())}),void 0!==n?n:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,i,n){return t},onChange:function(e,t,i){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.rating=function(t){var i,n=e(this),r=n.selector||"",o=(new Date).getTime(),a=[],s=arguments[0],l="string"==typeof s,d=[].slice.call(arguments,1);return n.each(function(){var c,u,p=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),f=p.namespace,h=p.className,g=p.metadata,m=p.selector,v=(p.error,"."+f),b="module-"+f,y=this,$=e(this).data(b),w=e(this),x=w.find(m.icon);u={initialize:function(){u.verbose("Initializing rating module",p),0===x.length&&u.setup.layout(),p.interactive?u.enable():u.disable(),u.set.initialLoad(),u.set.rating(u.get.initialRating()),u.remove.initialLoad(),u.instantiate()},instantiate:function(){u.verbose("Instantiating module",p),$=u,w.data(b,u)},destroy:function(){u.verbose("Destroying previous instance",$),u.remove.events(),w.removeData(b)},refresh:function(){x=w.find(m.icon)},setup:{layout:function(){var t=u.get.maxRating(),i=e.fn.rating.settings.templates.icon(t);u.debug("Generating icon html dynamically"),w.html(i),u.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(h.selected),w.addClass(h.selected),t.addClass(h.selected).prevAll().addClass(h.selected)},mouseleave:function(){w.removeClass(h.selected),x.removeClass(h.selected)},click:function(){var t=e(this),i=u.get.rating(),n=x.index(t)+1;("auto"==p.clearable?1===x.length:p.clearable)&&i==n?u.clearRating():u.set.rating(n)}},clearRating:function(){u.debug("Clearing current rating"),u.set.rating(0)},bind:{events:function(){u.verbose("Binding events"),w.on("mouseenter"+v,m.icon,u.event.mouseenter).on("mouseleave"+v,m.icon,u.event.mouseleave).on("click"+v,m.icon,u.event.click)}},remove:{events:function(){u.verbose("Removing events"),w.off(v)},initialLoad:function(){c=!1}},enable:function(){u.debug("Setting rating to interactive mode"),u.bind.events(),w.removeClass(h.disabled)},disable:function(){u.debug("Setting rating to read-only mode"),u.remove.events(),w.addClass(h.disabled)},is:{initialLoad:function(){return c}},get:{initialRating:function(){return void 0!==w.data(g.rating)?(w.removeData(g.rating),w.data(g.rating)):p.initialRating},maxRating:function(){return void 0!==w.data(g.maxRating)?(w.removeData(g.maxRating),w.data(g.maxRating)):p.maxRating},rating:function(){var e=x.filter("."+h.active).length;return u.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,i=x.eq(t);w.removeClass(h.selected),x.removeClass(h.selected).removeClass(h.active),e>0&&(u.verbose("Setting current rating to",e),i.prevAll().addBack().addClass(h.active)),u.is.initialLoad()||p.onRate.call(y,e)},initialLoad:function(){c=!0}},setting:function(t,i){if(u.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,u,t);else{if(void 0===i)return u[t];u[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?u.performance.log(arguments):(u.debug=Function.prototype.bind.call(console.info,console,p.name+":"),u.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?u.performance.log(arguments):(u.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),u.verbose.apply(console,arguments)))},error:function(){p.silent||(u.error=Function.prototype.bind.call(console.error,console,p.name+":"),u.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=o||t,i=t-n,o=t,a.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":i})),clearTimeout(u.performance.timer),u.performance.timer=setTimeout(u.performance.display,500)},display:function(){var t=p.name+":",i=0;o=!1,clearTimeout(u.performance.timer),e.each(a,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",r&&(t+=" '"+r+"'"),n.length>1&&(t+=" ("+n.length+")"),(void 0!==console.group||void 0!==console.table)&&a.length>0&&(console.groupCollapsed(t),console.table?console.table(a):e.each(a,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),a=[]}},invoke:function(t,n,r){var o,a,s,l=$;return n=n||d,r=y||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,n):void 0!==a&&(s=a),e.isArray(i)?i.push(s):void 0!==i?i=[i,s]:void 0!==s&&(i=s),a}},l?(void 0===$&&u.initialize(),u.invoke(s)):(void 0!==$&&$.invoke("destroy"),u.initialize())}),void 0!==i?i:this},e.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,i="";t<=e;)i+='<i class="icon"></i>',t++;return i}}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.search=function(n){var r,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],d=arguments[0],c="string"==typeof d,u=[].slice.call(arguments,1);return e(this).each(function(){var p,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.search.settings,n):e.extend({},e.fn.search.settings),h=f.className,g=f.metadata,m=f.regExp,v=f.fields,b=f.selector,y=f.error,$=f.namespace,w="."+$,x=$+"-module",j=e(this),_=j.find(b.prompt),C=j.find(b.searchButton),q=j.find(b.results),S=j.find(b.result),D=j.find(b.category),k=this,T=j.data(x),I=!1,F=!1;p={initialize:function(){p.verbose("Initializing module"),p.determine.searchFields(),p.bind.events(),p.set.type(),p.create.results(),p.instantiate()},instantiate:function(){p.verbose("Storing instance of module",p),T=p,j.data(x,p)},destroy:function(){p.verbose("Destroying instance"),j.off(w).removeData(x)},refresh:function(){p.debug("Refreshing selector cache"),_=j.find(b.prompt),C=j.find(b.searchButton),D=j.find(b.category),q=j.find(b.results),S=j.find(b.result)},refreshResults:function(){q=j.find(b.results),S=j.find(b.result)},bind:{events:function(){p.verbose("Binding events to search"),f.automatic&&(j.on(p.get.inputEvent()+w,b.prompt,p.event.input),_.attr("autocomplete","off")),j.on("focus"+w,b.prompt,p.event.focus).on("blur"+w,b.prompt,p.event.blur).on("keydown"+w,b.prompt,p.handleKeyboard).on("click"+w,b.searchButton,p.query).on("mousedown"+w,b.results,p.event.result.mousedown).on("mouseup"+w,b.results,p.event.result.mouseup).on("click"+w,b.result,p.event.result.click)}},determine:{searchFields:function(){n&&void 0!==n.searchFields&&(f.searchFields=n.searchFields)}},event:{input:function(){f.searchDelay?(clearTimeout(p.timer),p.timer=setTimeout(function(){p.is.focused()&&p.query()},f.searchDelay)):p.query()},focus:function(){p.set.focus(),f.searchOnFocus&&p.has.minimumCharacters()&&p.query(function(){p.can.show()&&p.showResults()})},blur:function(e){var t=i.activeElement===this,n=function(){p.cancel.query(),p.remove.focus(),p.timer=setTimeout(p.hideResults,f.hideDelay)};t||(F=!1,p.resultsClicked?(p.debug("Determining if user action caused search to close"),j.one("click.close"+w,b.results,function(e){if(p.is.inMessage(e)||I)return void _.focus();I=!1,p.is.animating()||p.is.hidden()||n()})):(p.debug("Input blurred without user action, closing results"),n()))},result:{mousedown:function(){p.resultsClicked=!0},mouseup:function(){p.resultsClicked=!1},click:function(i){p.debug("Search result selected");var n=e(this),r=n.find(b.title).eq(0),o=n.is("a[href]")?n:n.find("a[href]").eq(0),a=o.attr("href")||!1,s=o.attr("target")||!1,l=(r.html(),r.length>0&&r.text()),d=p.get.results(),c=n.data(g.result)||p.get.result(l,d);if(e.isFunction(f.onSelect)&&!1===f.onSelect.call(k,c,d))return p.debug("Custom onSelect callback cancelled default select action"),void(I=!0);p.hideResults(),l&&p.set.value(l),a&&(p.verbose("Opening search link found in result",o),"_blank"==s||i.ctrlKey?t.open(a):t.location.href=a)}}},handleKeyboard:function(e){var t,i=j.find(b.result),n=j.find(b.category),r=i.filter("."+h.active),o=i.index(r),a=i.length,s=r.length>0,l=e.which,d={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(l==d.escape&&(p.verbose("Escape key pressed, blurring search field"),p.hideResults(),F=!0),p.is.visible())if(l==d.enter){if(p.verbose("Enter key pressed, selecting active result"),i.filter("."+h.active).length>0)return p.event.result.click.call(i.filter("."+h.active),e),e.preventDefault(),!1}else l==d.upArrow&&s?(p.verbose("Up key pressed, changing active result"),t=o-1<0?o:o-1,n.removeClass(h.active),i.removeClass(h.active).eq(t).addClass(h.active).closest(n).addClass(h.active),e.preventDefault()):l==d.downArrow&&(p.verbose("Down key pressed, changing active result"),t=o+1>=a?o:o+1,n.removeClass(h.active),i.removeClass(h.active).eq(t).addClass(h.active).closest(n).addClass(h.active),e.preventDefault());else l==d.enter&&(p.verbose("Enter key pressed, executing query"),p.query(),p.set.buttonPressed(),_.one("keyup",p.remove.buttonFocus))},setup:{api:function(t,i){var n={debug:f.debug,on:!1,cache:!0,action:"search",urlData:{query:t},onSuccess:function(e){p.parse.response.call(k,e,t),i()},onFailure:function(){p.displayMessage(y.serverError),i()},onAbort:function(e){},onError:p.error};e.extend(!0,n,f.apiSettings),p.verbose("Setting up API request",n),j.api(n)}},can:{useAPI:function(){return void 0!==e.fn.api},show:function(){return p.is.focused()&&!p.is.visible()&&!p.is.empty()},
transition:function(){return f.transition&&void 0!==e.fn.transition&&j.transition("is supported")}},is:{animating:function(){return q.hasClass(h.animating)},hidden:function(){return q.hasClass(h.hidden)},inMessage:function(t){if(t.target){var n=e(t.target);return e.contains(i.documentElement,t.target)&&n.closest(b.message).length>0}},empty:function(){return""===q.html()},visible:function(){return q.filter(":visible").length>0},focused:function(){return _.filter(":focus").length>0}},get:{inputEvent:function(){var e=_[0];return void 0!==e&&void 0!==e.oninput?"input":void 0!==e&&void 0!==e.onpropertychange?"propertychange":"keyup"},value:function(){return _.val()},results:function(){return j.data(g.results)},result:function(t,i){var n=["title","id"],r=!1;return t=void 0!==t?t:p.get.value(),i=void 0!==i?i:p.get.results(),"category"===f.type?(p.debug("Finding result that matches",t),e.each(i,function(i,o){if(e.isArray(o.results)&&(r=p.search.object(t,o.results,n)[0]))return!1})):(p.debug("Finding result in results object",t),r=p.search.object(t,i,n)[0]),r||!1}},select:{firstResult:function(){p.verbose("Selecting first result"),S.first().addClass(h.active)}},set:{focus:function(){j.addClass(h.focus)},loading:function(){j.addClass(h.loading)},value:function(e){p.verbose("Setting search input value",e),_.val(e)},type:function(e){e=e||f.type,"category"==f.type&&j.addClass(f.type)},buttonPressed:function(){C.addClass(h.pressed)}},remove:{loading:function(){j.removeClass(h.loading)},focus:function(){j.removeClass(h.focus)},buttonPressed:function(){C.removeClass(h.pressed)}},query:function(t){t=e.isFunction(t)?t:function(){};var i=p.get.value(),n=p.read.cache(i);t=t||function(){},p.has.minimumCharacters()?(n?(p.debug("Reading result from cache",i),p.save.results(n.results),p.addResults(n.html),p.inject.id(n.results),t()):(p.debug("Querying for",i),e.isPlainObject(f.source)||e.isArray(f.source)?(p.search.local(i),t()):p.can.useAPI()?p.search.remote(i,t):(p.error(y.source),t())),f.onSearchQuery.call(k,i)):p.hideResults()},search:{local:function(e){var t,i=p.search.object(e,f.content);p.set.loading(),p.save.results(i),p.debug("Returned local search results",i),t=p.generateResults({results:i}),p.remove.loading(),p.addResults(t),p.inject.id(i),p.write.cache(e,{html:t,results:i})},remote:function(t,i){i=e.isFunction(i)?i:function(){},j.api("is loading")&&j.api("abort"),p.setup.api(t,i),j.api("query")},object:function(t,i,n){var r=[],o=[],a=t.toString().replace(m.escape,"\\$&"),s=new RegExp(m.beginsWith+a,"i"),l=function(t,i){var n=-1==e.inArray(i,r),a=-1==e.inArray(i,o);n&&a&&t.push(i)};return i=i||f.source,n=void 0!==n?n:f.searchFields,e.isArray(n)||(n=[n]),void 0===i||!1===i?(p.error(y.source),[]):(e.each(n,function(n,a){e.each(i,function(e,i){"string"==typeof i[a]&&(-1!==i[a].search(s)?l(r,i):f.searchFullText&&p.fuzzySearch(t,i[a])&&l(o,i))})}),e.merge(r,o))}},fuzzySearch:function(e,t){var i=t.length,n=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),n>i)return!1;if(n===i)return e===t;e:for(var r=0,o=0;r<n;r++){for(var a=e.charCodeAt(r);o<i;)if(t.charCodeAt(o++)===a)continue e;return!1}return!0},parse:{response:function(e,t){var i=p.generateResults(e);p.verbose("Parsing server response",e),void 0!==e&&void 0!==t&&void 0!==e[v.results]&&(p.addResults(i),p.inject.id(e[v.results]),p.write.cache(t,{html:i,results:e[v.results]}),p.save.results(e[v.results]))}},cancel:{query:function(){p.can.useAPI()&&j.api("abort")}},has:{minimumCharacters:function(){return p.get.value().length>=f.minCharacters},results:function(){return 0!==q.length&&""!=q.html()}},clear:{cache:function(e){var t=j.data(g.cache);e?e&&t&&t[e]&&(p.debug("Removing value from cache",e),delete t[e],j.data(g.cache,t)):(p.debug("Clearing cache",e),j.removeData(g.cache))}},read:{cache:function(e){var t=j.data(g.cache);return!!f.cache&&(p.verbose("Checking cache for generated html for query",e),"object"==typeof t&&void 0!==t[e]&&t[e])}},create:{id:function(e,t){var i,n,r=e+1;return void 0!==t?(i=String.fromCharCode(97+t),n=i+r,p.verbose("Creating category result id",n)):(n=r,p.verbose("Creating result id",n)),n},results:function(){0===q.length&&(q=e("<div />").addClass(h.results).appendTo(j))}},inject:{result:function(e,t,i){p.verbose("Injecting result into results");var n=void 0!==i?q.children().eq(i).children(b.result).eq(t):q.children(b.result).eq(t);p.verbose("Injecting results metadata",n),n.data(g.result,e)},id:function(t){p.debug("Injecting unique ids into results");var i=0,n=0;return"category"===f.type?e.each(t,function(t,r){n=0,e.each(r.results,function(e,t){var o=r.results[e];void 0===o.id&&(o.id=p.create.id(n,i)),p.inject.result(o,n,i),n++}),i++}):e.each(t,function(e,i){var r=t[e];void 0===r.id&&(r.id=p.create.id(n)),p.inject.result(r,n),n++}),t}},save:{results:function(e){p.verbose("Saving current search results to metadata",e),j.data(g.results,e)}},write:{cache:function(e,t){var i=void 0!==j.data(g.cache)?j.data(g.cache):{};f.cache&&(p.verbose("Writing generated html to cache",e,t),i[e]=t,j.data(g.cache,i))}},addResults:function(t){if(e.isFunction(f.onResultsAdd)&&!1===f.onResultsAdd.call(q,t))return p.debug("onResultsAdd callback cancelled default action"),!1;t?(q.html(t),p.refreshResults(),f.selectFirstResult&&p.select.firstResult(),p.showResults()):p.hideResults(function(){q.empty()})},showResults:function(t){t=e.isFunction(t)?t:function(){},F||!p.is.visible()&&p.has.results()&&(p.can.transition()?(p.debug("Showing results with css animations"),q.transition({animation:f.transition+" in",debug:f.debug,verbose:f.verbose,duration:f.duration,onComplete:function(){t()},queue:!0})):(p.debug("Showing results with javascript"),q.stop().fadeIn(f.duration,f.easing)),f.onResultsOpen.call(q))},hideResults:function(t){t=e.isFunction(t)?t:function(){},p.is.visible()&&(p.can.transition()?(p.debug("Hiding results with css animations"),q.transition({animation:f.transition+" out",debug:f.debug,verbose:f.verbose,duration:f.duration,onComplete:function(){t()},queue:!0})):(p.debug("Hiding results with javascript"),q.stop().fadeOut(f.duration,f.easing)),f.onResultsClose.call(q))},generateResults:function(t){p.debug("Generating html from response",t);var i=f.templates[f.type],n=e.isPlainObject(t[v.results])&&!e.isEmptyObject(t[v.results]),r=e.isArray(t[v.results])&&t[v.results].length>0,o="";return n||r?(f.maxResults>0&&(n?"standard"==f.type&&p.error(y.maxResults):t[v.results]=t[v.results].slice(0,f.maxResults)),e.isFunction(i)?o=i(t,v):p.error(y.noTemplate,!1)):f.showNoResults&&(o=p.displayMessage(y.noResults,"empty")),f.onResults.call(k,t),o},displayMessage:function(e,t){return t=t||"standard",p.debug("Displaying message",e,t),p.addResults(f.templates.message(e,t)),f.templates.message(e,t)},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===i)return f[t];f[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];p[t]=i}},debug:function(){!f.silent&&f.debug&&(f.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,f.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),p.verbose.apply(console,arguments)))},error:function(){f.silent||(p.error=Function.prototype.bind.call(console.error,console,f.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;f.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=f.name+":",i=0;s=!1,clearTimeout(p.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),o.length>1&&(t+=" ("+o.length+")"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,n){var o,a,s,l=T;return i=i||u,n=k||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===T&&p.initialize(),p.invoke(d)):(void 0!==T&&T.invoke("destroy"),p.initialize())}),void 0!==r?r:this},e.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchOnFocus:!0,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t=/[&<>"'`]/g,i=/[&<>"'`]/,n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=function(e){return n[e]};return i.test(e)?e.replace(t,r):e},message:function(e,t){var i="";return void 0!==e&&void 0!==t&&(i+='<div class="message '+t+'">',i+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",i+="</div>"),i},category:function(t,i){var n="";return e.fn.search.settings.templates.escape,void 0!==t[i.categoryResults]&&(e.each(t[i.categoryResults],function(t,r){void 0!==r[i.results]&&r.results.length>0&&(n+='<div class="category">',void 0!==r[i.categoryName]&&(n+='<div class="name">'+r[i.categoryName]+"</div>"),e.each(r.results,function(e,t){t[i.url]?n+='<a class="result" href="'+t[i.url]+'">':n+='<a class="result">',void 0!==t[i.image]&&(n+='<div class="image"> <img src="'+t[i.image]+'"></div>'),n+='<div class="content">',void 0!==t[i.price]&&(n+='<div class="price">'+t[i.price]+"</div>"),void 0!==t[i.title]&&(n+='<div class="title">'+t[i.title]+"</div>"),void 0!==t[i.description]&&(n+='<div class="description">'+t[i.description]+"</div>"),n+="</div>",n+="</a>"}),n+="</div>")}),t[i.action]&&(n+='<a href="'+t[i.action][i.actionURL]+'" class="action">'+t[i.action][i.actionText]+"</a>"),n)},standard:function(t,i){var n="";return void 0!==t[i.results]&&(e.each(t[i.results],function(e,t){t[i.url]?n+='<a class="result" href="'+t[i.url]+'">':n+='<a class="result">',void 0!==t[i.image]&&(n+='<div class="image"> <img src="'+t[i.image]+'"></div>'),n+='<div class="content">',void 0!==t[i.price]&&(n+='<div class="price">'+t[i.price]+"</div>"),void 0!==t[i.title]&&(n+='<div class="title">'+t[i.title]+"</div>"),void 0!==t[i.description]&&(n+='<div class="description">'+t[i.description]+"</div>"),n+="</div>",n+="</a>"}),t[i.action]&&(n+='<a href="'+t[i.action][i.actionURL]+'" class="action">'+t[i.action][i.actionText]+"</a>"),n)}}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.shape=function(n){var r,o=e(this),a=(e("body"),(new Date).getTime()),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1),u=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var t,p,f,h=o.selector||"",g=e.isPlainObject(n)?e.extend(!0,{},e.fn.shape.settings,n):e.extend({},e.fn.shape.settings),m=g.namespace,v=g.selector,b=g.error,y=g.className,$="."+m,w="module-"+m,x=e(this),j=x.find(v.sides),_=x.find(v.side),C=!1,q=this,S=x.data(w);f={initialize:function(){f.verbose("Initializing module for",q),f.set.defaultSide(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),S=f,x.data(w,S)},destroy:function(){f.verbose("Destroying previous module for",q),x.removeData(w).off($)},refresh:function(){f.verbose("Refreshing selector cache for",q),x=e(q),j=e(this).find(v.shape),_=e(this).find(v.side)},repaint:function(){f.verbose("Forcing repaint event"),(j[0]||i.createElement("div")).offsetWidth},animate:function(e,i){f.verbose("Animating box with properties",e),i=i||function(e){f.verbose("Executing animation callback"),void 0!==e&&e.stopPropagation(),f.reset(),f.set.active()},g.beforeChange.call(p[0]),f.get.transitionEvent()?(f.verbose("Starting CSS animation"),x.addClass(y.animating),j.css(e).one(f.get.transitionEvent(),i),f.set.duration(g.duration),u(function(){x.addClass(y.animating),t.addClass(y.hidden)})):i()},queue:function(e){f.debug("Queueing animation of",e),j.one(f.get.transitionEvent(),function(){f.debug("Executing queued animation"),setTimeout(function(){x.shape(e)},0)})},reset:function(){f.verbose("Animating states reset"),x.removeClass(y.animating).attr("style","").removeAttr("style"),j.attr("style","").removeAttr("style"),_.attr("style","").removeAttr("style").removeClass(y.hidden),p.removeClass(y.animating).attr("style","").removeAttr("style")},is:{complete:function(){return _.filter("."+y.active)[0]==p[0]},animating:function(){return x.hasClass(y.animating)}},set:{defaultSide:function(){t=x.find("."+g.className.active),p=t.next(v.side).length>0?t.next(v.side):x.find(v.side).first(),C=!1,f.verbose("Active side set to",t),f.verbose("Next side set to",p)},duration:function(e){e=e||g.duration,e="number"==typeof e?e+"ms":e,f.verbose("Setting animation duration",e),(g.duration||0===g.duration)&&j.add(_).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=x.find("."+g.className.active),t=e.outerWidth(!0),i=e.outerHeight(!0);x.css({width:t,height:i})},stageSize:function(){var e=x.clone().addClass(y.loading),t=e.find("."+g.className.active),i=C?e.find(v.side).eq(C):t.next(v.side).length>0?t.next(v.side):e.find(v.side).first(),n="next"==g.width?i.outerWidth(!0):"initial"==g.width?x.width():g.width,r="next"==g.height?i.outerHeight(!0):"initial"==g.height?x.height():g.height;t.removeClass(y.active),i.addClass(y.active),e.insertAfter(x),e.remove(),"auto"!=g.width&&(x.css("width",n+g.jitter),f.verbose("Specifying width during animation",n)),"auto"!=g.height&&(x.css("height",r+g.jitter),f.verbose("Specifying height during animation",r))},nextSide:function(e){C=e,p=_.filter(e),C=_.index(p),0===p.length&&(f.set.defaultSide(),f.error(b.side)),f.verbose("Next side manually set to",p)},active:function(){f.verbose("Setting new side to active",p),_.removeClass(y.active),p.addClass(y.active),g.onChange.call(p[0]),f.set.defaultSide()}},flip:{up:function(){if(f.is.complete()&&!f.is.animating()&&!g.allowRepeats)return void f.debug("Side already visible",p);if(f.is.animating())f.queue("flip up");else{f.debug("Flipping up",p);var e=f.get.transform.up();f.set.stageSize(),f.stage.above(),f.animate(e)}},down:function(){if(f.is.complete()&&!f.is.animating()&&!g.allowRepeats)return void f.debug("Side already visible",p);if(f.is.animating())f.queue("flip down");else{f.debug("Flipping down",p);var e=f.get.transform.down();f.set.stageSize(),f.stage.below(),f.animate(e)}},left:function(){if(f.is.complete()&&!f.is.animating()&&!g.allowRepeats)return void f.debug("Side already visible",p);if(f.is.animating())f.queue("flip left");else{f.debug("Flipping left",p);var e=f.get.transform.left();f.set.stageSize(),f.stage.left(),f.animate(e)}},right:function(){if(f.is.complete()&&!f.is.animating()&&!g.allowRepeats)return void f.debug("Side already visible",p);if(f.is.animating())f.queue("flip right");else{f.debug("Flipping right",p);var e=f.get.transform.right();f.set.stageSize(),f.stage.right(),f.animate(e)}},over:function(){if(f.is.complete()&&!f.is.animating()&&!g.allowRepeats)return void f.debug("Side already visible",p);f.is.animating()?f.queue("flip over"):(f.debug("Flipping over",p),f.set.stageSize(),f.stage.behind(),f.animate(f.get.transform.over()))},back:function(){if(f.is.complete()&&!f.is.animating()&&!g.allowRepeats)return void f.debug("Side already visible",p);f.is.animating()?f.queue("flip back"):(f.debug("Flipping back",p),f.set.stageSize(),f.stage.behind(),f.animate(f.get.transform.back()))}},get:{transform:{up:function(){var e={y:-(t.outerHeight(!0)-p.outerHeight(!0))/2,z:-t.outerHeight(!0)/2};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-(t.outerHeight(!0)-p.outerHeight(!0))/2,z:-t.outerHeight(!0)/2};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-(t.outerWidth(!0)-p.outerWidth(!0))/2,z:-t.outerWidth(!0)/2};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-(t.outerWidth(!0)-p.outerWidth(!0))/2,z:-t.outerWidth(!0)/2};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+{x:-(t.outerWidth(!0)-p.outerWidth(!0))/2}.x+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+{x:-(t.outerWidth(!0)-p.outerWidth(!0))/2}.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=i.createElement("element"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},nextSide:function(){return t.next(v.side).length>0?t.next(v.side):x.find(v.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-p.outerHeight(!0))/2,depth:{active:p.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};f.verbose("Setting the initial animation position as above",p,e),j.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),p.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-p.outerHeight(!0))/2,depth:{active:p.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};f.verbose("Setting the initial animation position as below",p,e),j.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),p.addClass(y.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={active:t.outerWidth(!0),next:p.outerWidth(!0)},i={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};f.verbose("Setting the initial animation position as left",p,i),j.css({transform:"translateZ(-"+i.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+i.depth.active+"px)"}),p.addClass(y.animating).css({left:i.origin+"px",transform:"rotateY(-90deg) translateZ("+i.depth.next+"px)"})},right:function(){var e={active:t.outerWidth(!0),next:p.outerWidth(!0)},i={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};f.verbose("Setting the initial animation position as left",p,i),j.css({transform:"translateZ(-"+i.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+i.depth.active+"px)"}),p.addClass(y.animating).css({left:i.origin+"px",transform:"rotateY(90deg) translateZ("+i.depth.next+"px)"})},behind:function(){var e={active:t.outerWidth(!0),next:p.outerWidth(!0)},i={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};f.verbose("Setting the initial animation position as behind",p,i),t.css({transform:"rotateY(0deg)"}),p.addClass(y.animating).css({left:i.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,i){if(f.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===i)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],i):g[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(void 0===i)return f[t];f[t]=i}},debug:function(){!g.silent&&g.debug&&(g.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,g.name+":"),f.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),f.verbose.apply(console,arguments)))},error:function(){g.silent||(f.error=Function.prototype.bind.call(console.error,console,g.name+":"),f.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;g.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:q,"Execution Time":i})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=g.name+":",i=0;a=!1,clearTimeout(f.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",h&&(t+=" '"+h+"'"),o.length>1&&(t+=" ("+o.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,n){var o,a,s,l=S;return i=i||c,n=q||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},d?(void 0===S&&f.initialize(),f.invoke(l)):(void 0!==S&&S.invoke("destroy"),f.initialize())}),void 0!==r?r:this},e.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sidebar=function(n){var r,o=e(this),a=e(t),s=e(i),l=e("html"),d=e("head"),c=o.selector||"",u=(new Date).getTime(),p=[],f=arguments[0],h="string"==typeof f,g=[].slice.call(arguments,1),m=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return o.each(function(){var o,v,b,y,$,w,x=e.isPlainObject(n)?e.extend(!0,{},e.fn.sidebar.settings,n):e.extend({},e.fn.sidebar.settings),j=x.selector,_=x.className,C=x.namespace,q=x.regExp,S=x.error,D="."+C,k="module-"+C,T=e(this),I=e(x.context),F=T.children(j.sidebar),A=I.children(j.fixed),R=I.children(j.pusher),E=this,P=T.data(k);w={initialize:function(){w.debug("Initializing sidebar",n),w.create.id(),$=w.get.transitionEvent(),x.delaySetup?m(w.setup.layout):w.setup.layout(),m(function(){w.setup.cache()}),w.instantiate()},instantiate:function(){w.verbose("Storing instance of module",w),P=w,T.data(k,w)},create:{id:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),v="."+b,w.verbose("Creating unique id for element",b)}},destroy:function(){w.verbose("Destroying previous module for",T),T.off(D).removeData(k),w.is.ios()&&w.remove.ios(),I.off(v),a.off(v),s.off(v)},event:{clickaway:function(e){var t=R.find(e.target).length>0||R.is(e.target),i=I.is(e.target);t&&(w.verbose("User clicked on dimmed page"),w.hide()),i&&(w.verbose("User clicked on dimmable context (scaled out page)"),w.hide())},touch:function(e){},containScroll:function(e){E.scrollTop<=0&&(E.scrollTop=1),E.scrollTop+E.offsetHeight>=E.scrollHeight&&(E.scrollTop=E.scrollHeight-E.offsetHeight-1)},scroll:function(t){0===e(t.target).closest(j.sidebar).length&&t.preventDefault()}},bind:{clickaway:function(){w.verbose("Adding clickaway events to context",I),x.closable&&I.on("click"+v,w.event.clickaway).on("touchend"+v,w.event.clickaway)},scrollLock:function(){x.scrollLock&&(w.debug("Disabling page scroll"),a.on("DOMMouseScroll"+v,w.event.scroll)),w.verbose("Adding events to contain sidebar scroll"),s.on("touchmove"+v,w.event.touch),T.on("scroll"+D,w.event.containScroll)}},unbind:{clickaway:function(){w.verbose("Removing clickaway events from context",I),I.off(v)},scrollLock:function(){w.verbose("Removing scroll lock from page"),s.off(v),a.off(v),T.off("scroll"+D)}},add:{inlineCSS:function(){var t,i=w.cache.width||T.outerWidth(),n=w.cache.height||T.outerHeight(),r=w.is.rtl(),a=w.get.direction(),s={left:i,right:-i,top:n,bottom:-n};r&&(w.verbose("RTL detected, flipping widths"),s.left=-i,s.right=i),t="<style>","left"===a||"right"===a?(w.debug("Adding CSS rules for animation distance",i),t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):"top"!==a&&"bottom"!=a||(t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),w.is.ie()&&("left"===a||"right"===a?(w.debug("Adding CSS rules for animation distance",i),t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):"top"!==a&&"bottom"!=a||(t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),t+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),t+="</style>",o=e(t).appendTo(d),w.debug("Adding sizing css to head",o)}},refresh:function(){w.verbose("Refreshing selector cache"),I=e(x.context),F=I.children(j.sidebar),R=I.children(j.pusher),A=I.children(j.fixed),w.clear.cache()},refreshSidebars:function(){w.verbose("Refreshing other sidebars"),F=I.children(j.sidebar)},repaint:function(){w.verbose("Forcing repaint event"),E.style.display="none",E.offsetHeight,E.scrollTop=E.scrollTop,E.style.display=""},setup:{cache:function(){w.cache={width:T.outerWidth(),height:T.outerHeight(),rtl:"rtl"==T.css("direction")}},layout:function(){0===I.children(j.pusher).length&&(w.debug("Adding wrapper element for sidebar"),w.error(S.pusher),R=e('<div class="pusher" />'),I.children().not(j.omitted).not(F).wrapAll(R),w.refresh()),0!==T.nextAll(j.pusher).length&&T.nextAll(j.pusher)[0]===R[0]||(w.debug("Moved sidebar to correct parent element"),w.error(S.movedSidebar,E),T.detach().prependTo(I),w.refresh()),w.clear.cache(),w.set.pushable(),w.set.direction()}},attachEvents:function(t,i){var n=e(t);i=e.isFunction(w[i])?w[i]:w.toggle,n.length>0?(w.debug("Attaching sidebar events to element",t,i),n.on("click"+D,i)):w.error(S.notFound,t)},show:function(t){if(t=e.isFunction(t)?t:function(){},w.is.hidden()){if(w.refreshSidebars(),x.overlay&&(w.error(S.overlay),x.transition="overlay"),w.refresh(),w.othersActive())if(w.debug("Other sidebars currently visible"),x.exclusive){if("overlay"!=x.transition)return void w.hideOthers(w.show);w.hideOthers()}else x.transition="overlay";w.pushPage(function(){t.call(E),x.onShow.call(E)}),x.onChange.call(E),x.onVisible.call(E)}else w.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},(w.is.visible()||w.is.animating())&&(w.debug("Hiding sidebar",t),w.refreshSidebars(),w.pullPage(function(){t.call(E),x.onHidden.call(E)}),x.onChange.call(E),x.onHide.call(E))},othersAnimating:function(){return F.not(T).filter("."+_.animating).length>0},othersVisible:function(){return F.not(T).filter("."+_.visible).length>0},othersActive:function(){return w.othersVisible()||w.othersAnimating()},hideOthers:function(e){var t=F.not(T).filter("."+_.visible),i=t.length,n=0;e=e||function(){},t.sidebar("hide",function(){++n==i&&e()})},toggle:function(){w.verbose("Determining toggled direction"),w.is.hidden()?w.show():w.hide()},pushPage:function(t){var i,n,r,o=w.get.transition(),a="overlay"===o||w.othersActive()?T:R;t=e.isFunction(t)?t:function(){},"scale down"==x.transition&&w.scrollToTop(),w.set.transition(o),w.repaint(),i=function(){w.bind.clickaway(),w.add.inlineCSS(),w.set.animating(),w.set.visible()},n=function(){w.set.dimmed()},r=function(e){e.target==a[0]&&(a.off($+v,r),w.remove.animating(),w.bind.scrollLock(),t.call(E))},a.off($+v),a.on($+v,r),m(i),x.dimPage&&!w.othersVisible()&&m(n)},pullPage:function(t){var i,n,r=w.get.transition(),o="overlay"==r||w.othersActive()?T:R;t=e.isFunction(t)?t:function(){},w.verbose("Removing context push state",w.get.direction()),w.unbind.clickaway(),w.unbind.scrollLock(),i=function(){w.set.transition(r),w.set.animating(),w.remove.visible(),x.dimPage&&!w.othersVisible()&&R.removeClass(_.dimmed)},n=function(e){e.target==o[0]&&(o.off($+v,n),w.remove.animating(),w.remove.transition(),w.remove.inlineCSS(),("scale down"==r||x.returnScroll&&w.is.mobile())&&w.scrollBack(),t.call(E))},o.off($+v),o.on($+v,n),m(i)},scrollToTop:function(){w.verbose("Scrolling to top of page to avoid animation issues"),y=e(t).scrollTop(),T.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){w.verbose("Scrolling back to original page position"),t.scrollTo(0,y)},clear:{cache:function(){w.verbose("Clearing cached dimensions"),w.cache={}}},set:{ios:function(){l.addClass(_.ios)},pushed:function(){I.addClass(_.pushed)},pushable:function(){I.addClass(_.pushable)},dimmed:function(){R.addClass(_.dimmed)},active:function(){T.addClass(_.active)},animating:function(){T.addClass(_.animating)},transition:function(e){e=e||w.get.transition(),T.addClass(e)},direction:function(e){e=e||w.get.direction(),T.addClass(_[e])},visible:function(){T.addClass(_.visible)},overlay:function(){T.addClass(_.overlay)}},remove:{inlineCSS:function(){w.debug("Removing inline css styles",o),o&&o.length>0&&o.remove()},ios:function(){l.removeClass(_.ios)},pushed:function(){I.removeClass(_.pushed)},pushable:function(){I.removeClass(_.pushable)},active:function(){T.removeClass(_.active)},animating:function(){T.removeClass(_.animating)},transition:function(e){
e=e||w.get.transition(),T.removeClass(e)},direction:function(e){e=e||w.get.direction(),T.removeClass(_[e])},visible:function(){T.removeClass(_.visible)},overlay:function(){T.removeClass(_.overlay)}},get:{direction:function(){return T.hasClass(_.top)?_.top:T.hasClass(_.right)?_.right:T.hasClass(_.bottom)?_.bottom:_.left},transition:function(){var e,t=w.get.direction();return e=w.is.mobile()?"auto"==x.mobileTransition?x.defaultTransition.mobile[t]:x.mobileTransition:"auto"==x.transition?x.defaultTransition.computer[t]:x.transition,w.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=i.createElement("element"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}},is:{ie:function(){var e=!t.ActiveXObject&&"ActiveXObject"in t,i="ActiveXObject"in t;return e||i},ios:function(){var e=navigator.userAgent,t=e.match(q.ios),i=e.match(q.mobileChrome);return!(!t||i||(w.verbose("Browser was found to be iOS",e),0))},mobile:function(){var e=navigator.userAgent;return e.match(q.mobile)?(w.verbose("Browser was found to be mobile",e),!0):(w.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!w.is.visible()},visible:function(){return T.hasClass(_.visible)},open:function(){return w.is.visible()},closed:function(){return w.is.hidden()},vertical:function(){return T.hasClass(_.top)},animating:function(){return I.hasClass(_.animating)},rtl:function(){return void 0===w.cache.rtl&&(w.cache.rtl="rtl"==T.css("direction")),w.cache.rtl}},setting:function(t,i){if(w.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===i)return x[t];e.isPlainObject(x[t])?e.extend(!0,x[t],i):x[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===i)return w[t];w[t]=i}},debug:function(){!x.silent&&x.debug&&(x.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,x.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!x.silent&&x.verbose&&x.debug&&(x.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),w.verbose.apply(console,arguments)))},error:function(){x.silent||(w.error=Function.prototype.bind.call(console.error,console,x.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;x.performance&&(t=(new Date).getTime(),n=u||t,i=t-n,u=t,p.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:E,"Execution Time":i})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=x.name+":",i=0;u=!1,clearTimeout(w.performance.timer),e.each(p,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",c&&(t+=" '"+c+"'"),(void 0!==console.group||void 0!==console.table)&&p.length>0&&(console.groupCollapsed(t),console.table?console.table(p):e.each(p,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),p=[]}},invoke:function(t,i,n){var o,a,s,l=P;return i=i||g,n=E||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(w.error(S.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},h?(void 0===P&&w.initialize(),w.invoke(f)):(void 0!==P&&w.invoke("destroy"),w.initialize())}),void 0!==r?r:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.sticky=function(n){var r,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],d=arguments[0],c="string"==typeof d,u=[].slice.call(arguments,1);return o.each(function(){var o,p,f,h,g,m=e.isPlainObject(n)?e.extend(!0,{},e.fn.sticky.settings,n):e.extend({},e.fn.sticky.settings),v=m.className,b=m.namespace,y=m.error,$="."+b,w="module-"+b,x=e(this),j=e(t),_=e(m.scrollContext),C=(x.selector,x.data(w)),q=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},S=this;g={initialize:function(){g.determineContainer(),g.determineContext(),g.verbose("Initializing sticky",m,o),g.save.positions(),g.checkErrors(),g.bind.events(),m.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),C=g,x.data(w,g)},destroy:function(){g.verbose("Destroying previous instance"),g.reset(),f&&f.disconnect(),h&&h.disconnect(),j.off("load"+$,g.event.load).off("resize"+$,g.event.resize),_.off("scrollchange"+$,g.event.scrollchange),x.removeData(w)},observeChanges:function(){"MutationObserver"in t&&(f=new MutationObserver(g.event.documentChanged),h=new MutationObserver(g.event.changed),f.observe(i,{childList:!0,subtree:!0}),h.observe(S,{childList:!0,subtree:!0}),h.observe(p[0],{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",h))},determineContainer:function(){o=m.container?e(m.container):x.offsetParent()},determineContext:function(){if(p=m.context?e(m.context):o,0===p.length)return void g.error(y.invalidContext,m.context,x)},checkErrors:function(){if(g.is.hidden()&&g.error(y.visible,x),g.cache.element.height>g.cache.context.height)return g.reset(),void g.error(y.elementSize,x)},bind:{events:function(){j.on("load"+$,g.event.load).on("resize"+$,g.event.resize),_.off("scroll"+$).on("scroll"+$,g.event.scroll).on("scrollchange"+$,g.event.scrollchange)}},event:{changed:function(e){clearTimeout(g.timer),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu",e),g.refresh()},100)},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==S||e(t).find(S).length>0)&&(g.debug("Element removed from DOM, tearing down events"),g.destroy())})})},load:function(){g.verbose("Page contents finished loading"),q(g.refresh)},resize:function(){g.verbose("Window resized"),q(g.refresh)},scroll:function(){q(function(){_.triggerHandler("scrollchange"+$,_.scrollTop())})},scrollchange:function(e,t){g.stick(t),m.onScroll.call(S)}},refresh:function(e){g.reset(),m.context||g.determineContext(),e&&g.determineContainer(),g.save.positions(),g.stick(),m.onReposition.call(S)},supports:{sticky:function(){var t=e("<div/>");return t[0],t.addClass(v.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){g.lastScroll=e},elementScroll:function(e){g.elementScroll=e},positions:function(){var e={height:_.height()},t={margin:{top:parseInt(x.css("margin-top"),10),bottom:parseInt(x.css("margin-bottom"),10)},offset:x.offset(),width:x.outerWidth(),height:x.outerHeight()},i={offset:p.offset(),height:p.outerHeight()};o.outerHeight(),g.is.standardScroll()||(g.debug("Non-standard scroll. Removing scroll offset from element offset"),e.top=_.scrollTop(),e.left=_.scrollLeft(),t.offset.top+=e.top,i.offset.top+=e.top,t.offset.left+=e.left,i.offset.left+=e.left),g.cache={fits:t.height+m.offset<=e.height,sameHeight:t.height==i.height,scrollContext:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:i.offset.top,height:i.height,bottom:i.offset.top+i.height}},g.set.containerSize(),g.stick(),g.debug("Caching element positions",g.cache)}},get:{direction:function(e){var t="down";return e=e||_.scrollTop(),void 0!==g.lastScroll&&(g.lastScroll<e?t="down":g.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||_.scrollTop(),g.lastScroll?e-g.lastScroll:0},currentElementScroll:function(){return g.elementScroll?g.elementScroll:g.is.top()?Math.abs(parseInt(x.css("top"),10))||0:Math.abs(parseInt(x.css("bottom"),10))||0},elementScroll:function(e){e=e||_.scrollTop();var t=g.cache.element,i=g.cache.scrollContext,n=g.get.scrollChange(e),r=t.height-i.height+m.offset,o=g.get.currentElementScroll(),a=o+n;return o=g.cache.fits||a<0?0:a>r?r:a}},remove:{lastScroll:function(){delete g.lastScroll},elementScroll:function(e){delete g.elementScroll},minimumSize:function(){o.css("min-height","")},offset:function(){x.css("margin-top","")}},set:{offset:function(){g.verbose("Setting offset on element",m.offset),x.css("margin-top",m.offset)},containerSize:function(){var e=o.get(0).tagName;"HTML"===e||"body"==e?g.determineContainer():Math.abs(o.outerHeight()-g.cache.context.height)>m.jitter&&(g.debug("Context has padding, specifying exact height for container",g.cache.context.height),o.css({height:g.cache.context.height}))},minimumSize:function(){var e=g.cache.element;o.css("min-height",e.height)},scroll:function(e){g.debug("Setting scroll on element",e),g.elementScroll!=e&&(g.is.top()&&x.css("bottom","").css("top",-e),g.is.bottom()&&x.css("top","").css("bottom",e))},size:function(){0!==g.cache.element.height&&0!==g.cache.element.width&&(S.style.setProperty("width",g.cache.element.width+"px","important"),S.style.setProperty("height",g.cache.element.height+"px","important"))}},is:{standardScroll:function(){return _[0]==t},top:function(){return x.hasClass(v.top)},bottom:function(){return x.hasClass(v.bottom)},initialPosition:function(){return!g.is.fixed()&&!g.is.bound()},hidden:function(){return!x.is(":visible")},bound:function(){return x.hasClass(v.bound)},fixed:function(){return x.hasClass(v.fixed)}},stick:function(e){var t=e||_.scrollTop(),i=g.cache,n=i.fits,r=i.sameHeight,o=i.element,a=i.scrollContext,s=i.context,l=g.is.bottom()&&m.pushing?m.bottomOffset:m.offset,e={top:t+l,bottom:t+l+a.height},d=(g.get.direction(e.top),n?0:g.get.elementScroll(e.top)),c=!n;0!==o.height&&!r&&(g.is.initialPosition()?e.top>=s.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):e.top>o.top&&(o.height+e.top-d>=s.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):(g.debug("Initial element position is fixed"),g.fixTop())):g.is.fixed()?g.is.top()?e.top<=o.top?(g.debug("Fixed element reached top of container"),g.setInitialPosition()):o.height+e.top-d>=s.bottom?(g.debug("Fixed element reached bottom of container"),g.bindBottom()):c&&(g.set.scroll(d),g.save.lastScroll(e.top),g.save.elementScroll(d)):g.is.bottom()&&(e.bottom-o.height<=o.top?(g.debug("Bottom fixed rail has reached top of container"),g.setInitialPosition()):e.bottom>=s.bottom?(g.debug("Bottom fixed rail has reached bottom of container"),g.bindBottom()):c&&(g.set.scroll(d),g.save.lastScroll(e.top),g.save.elementScroll(d))):g.is.bottom()&&(e.top<=o.top?(g.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),g.setInitialPosition()):m.pushing?g.is.bound()&&e.bottom<=s.bottom&&(g.debug("Fixing bottom attached element to bottom of browser."),g.fixBottom()):g.is.bound()&&e.top<=s.bottom-o.height&&(g.debug("Fixing bottom attached element to top of browser."),g.fixTop())))},bindTop:function(){g.debug("Binding element to top of parent container"),g.remove.offset(),x.css({left:"",top:"",marginBottom:""}).removeClass(v.fixed).removeClass(v.bottom).addClass(v.bound).addClass(v.top),m.onTop.call(S),m.onUnstick.call(S)},bindBottom:function(){g.debug("Binding element to bottom of parent container"),g.remove.offset(),x.css({left:"",top:""}).removeClass(v.fixed).removeClass(v.top).addClass(v.bound).addClass(v.bottom),m.onBottom.call(S),m.onUnstick.call(S)},setInitialPosition:function(){g.debug("Returning to initial position"),g.unfix(),g.unbind()},fixTop:function(){g.debug("Fixing element to top of page"),m.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),x.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.bottom).addClass(v.fixed).addClass(v.top),m.onStick.call(S)},fixBottom:function(){g.debug("Sticking element to bottom of page"),m.setSize&&g.set.size(),g.set.minimumSize(),g.set.offset(),x.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.top).addClass(v.fixed).addClass(v.bottom),m.onStick.call(S)},unbind:function(){g.is.bound()&&(g.debug("Removing container bound position on element"),g.remove.offset(),x.removeClass(v.bound).removeClass(v.top).removeClass(v.bottom))},unfix:function(){g.is.fixed()&&(g.debug("Removing fixed position on element"),g.remove.minimumSize(),g.remove.offset(),x.removeClass(v.fixed).removeClass(v.top).removeClass(v.bottom),m.onUnstick.call(S))},reset:function(){g.debug("Resetting elements position"),g.unbind(),g.unfix(),g.resetCSS(),g.remove.offset(),g.remove.lastScroll()},resetCSS:function(){x.css({width:"",height:""}),o.css({height:""})},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===i)return m[t];m[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===i)return g[t];g[t]=i}},debug:function(){!m.silent&&m.debug&&(m.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,m.name+":"),g.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),g.verbose.apply(console,arguments)))},error:function(){m.silent||(g.error=Function.prototype.bind.call(console.error,console,m.name+":"),g.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;m.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":i})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,0)},display:function(){var t=m.name+":",i=0;s=!1,clearTimeout(g.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,n){var o,a,s,l=C;return i=i||u,n=S||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===C&&g.initialize(),g.invoke(d)):(void 0!==C&&C.invoke("destroy"),g.initialize())}),void 0!==r?r:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,container:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,setSize:!0,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.tab=function(n){var r,o=e(e.isFunction(this)?t:this),a=o.selector||"",s=(new Date).getTime(),l=[],d=arguments[0],c="string"==typeof d,u=[].slice.call(arguments,1),p=!1;return o.each(function(){var f,h,g,m,v,b,y=e.isPlainObject(n)?e.extend(!0,{},e.fn.tab.settings,n):e.extend({},e.fn.tab.settings),$=y.className,w=y.metadata,x=y.selector,j=y.error,_="."+y.namespace,C="module-"+y.namespace,q=e(this),S={},D=!0,k=0,T=this,I=q.data(C);v={initialize:function(){v.debug("Initializing tab menu item",q),v.fix.callbacks(),v.determineTabs(),v.debug("Determining tabs",y.context,h),y.auto&&v.set.auto(),v.bind.events(),y.history&&!p&&(v.initializeHistory(),p=!0),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),I=v,q.data(C,v)},destroy:function(){v.debug("Destroying tabs",q),q.removeData(C).off(_)},bind:{events:function(){e.isWindow(T)||(v.debug("Attaching tab activation events to element",q),q.on("click"+_,v.event.click))}},determineTabs:function(){var t;"parent"===y.context?(q.closest(x.ui).length>0?(t=q.closest(x.ui),v.verbose("Using closest UI element as parent",t)):t=q,f=t.parent(),v.verbose("Determined parent element for creating context",f)):y.context?(f=e(y.context),v.verbose("Using selector for tab context",y.context,f)):f=e("body"),y.childrenOnly?(h=f.children(x.tabs),v.debug("Searching tab context children for tabs",f,h)):(h=f.find(x.tabs),v.debug("Searching tab context for tabs",f,h))},fix:{callbacks:function(){e.isPlainObject(n)&&(n.onTabLoad||n.onTabInit)&&(n.onTabLoad&&(n.onLoad=n.onTabLoad,delete n.onTabLoad,v.error(j.legacyLoad,n.onLoad)),n.onTabInit&&(n.onFirstLoad=n.onTabInit,delete n.onTabInit,v.error(j.legacyInit,n.onFirstLoad)),y=e.extend(!0,{},e.fn.tab.settings,n))}},initializeHistory:function(){if(v.debug("Initializing page state"),void 0===e.address)return v.error(j.state),!1;if("state"==y.historyType){if(v.debug("Using HTML5 to manage state"),!1===y.path)return v.error(j.path),!1;e.address.history(!0).state(y.path)}e.address.bind("change",v.event.history.change)},event:{click:function(t){var i=e(this).data(w.tab);void 0!==i?(y.history?(v.verbose("Updating page state",t),e.address.value(i)):(v.verbose("Changing tab",t),v.changeTab(i)),t.preventDefault()):v.debug("No tab specified")},history:{change:function(t){var i=t.pathNames.join("/")||v.get.initialPath(),n=y.templates.determineTitle(i)||!1;v.performance.display(),v.debug("History change event",i,t),b=t,void 0!==i&&v.changeTab(i),n&&e.address.title(n)}}},refresh:function(){g&&(v.debug("Refreshing tab",g),v.changeTab(g))},cache:{read:function(e){return void 0!==e&&S[e]},add:function(e,t){e=e||g,v.debug("Adding cached content for",e),S[e]=t},remove:function(e){e=e||g,v.debug("Removing cached content for",e),delete S[e]}},set:{auto:function(){var t="string"==typeof y.path?y.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";v.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(y.apiSettings)?y.apiSettings.url=t:y.apiSettings={url:t}},loading:function(e){var t=v.get.tabElement(e);t.hasClass($.loading)||(v.verbose("Setting loading state for",t),t.addClass($.loading).siblings(h).removeClass($.active+" "+$.loading),t.length>0&&y.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(i){var n=t.history&&t.history.pushState,r=n&&y.ignoreFirstLoad&&D,o=y.auto||e.isPlainObject(y.apiSettings),a=o&&!r?v.utilities.pathToArray(i):v.get.defaultPathArray(i);i=v.utilities.arrayToPath(a),e.each(a,function(t,n){var s,l,d,c,u=a.slice(0,t+1),p=v.utilities.arrayToPath(u),h=v.is.tab(p),x=t+1==a.length,_=v.get.tabElement(p);if(v.verbose("Looking for tab",n),h){if(v.verbose("Tab was found",n),g=p,m=v.utilities.filterArray(a,u),x?c=!0:(l=a.slice(0,t+2),d=v.utilities.arrayToPath(l),(c=!v.is.tab(d))&&v.verbose("Tab parameters found",l)),c&&o)return r?(v.debug("Ignoring remote content on first tab load",p),D=!1,v.cache.add(i,_.html()),v.activate.all(p),y.onFirstLoad.call(_[0],p,m,b),y.onLoad.call(_[0],p,m,b)):(v.activate.navigation(p),v.fetch.content(p,i)),!1;v.debug("Opened local tab",p),v.activate.all(p),v.cache.read(p)||(v.cache.add(p,!0),v.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(_[0],p,m,b)),y.onLoad.call(_[0],p,m,b)}else{if(-1!=i.search("/")||""===i)return v.error(j.missingTab,q,f,p),!1;if(s=e("#"+i+', a[name="'+i+'"]'),p=s.closest("[data-tab]").data(w.tab),_=v.get.tabElement(p),s&&s.length>0&&p)return v.debug("Anchor link used, opening parent tab",_,s),_.hasClass($.active)||setTimeout(function(){v.scrollTo(s)},0),v.activate.all(p),v.cache.read(p)||(v.cache.add(p,!0),v.debug("First time tab loaded calling tab init"),y.onFirstLoad.call(_[0],p,m,b)),y.onLoad.call(_[0],p,m,b),!1}})},scrollTo:function(t){var n=!!(t&&t.length>0)&&t.offset().top;!1!==n&&(v.debug("Forcing scroll to an in-page link in a hidden tab",n,t),e(i).scrollTop(n))},update:{content:function(t,i,n){var r=v.get.tabElement(t),o=r[0];n=void 0!==n?n:y.evaluateScripts,"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&"string"!=typeof i?r.empty().append(e(i).clone(!0)):n?(v.debug("Updating HTML and evaluating inline scripts",t,i),r.html(i)):(v.debug("Updating HTML",t,i),o.innerHTML=i)}},fetch:{content:function(t,i){var n,r,o=v.get.tabElement(t),a={dataType:"html",encodeParameters:!1,on:"now",cache:y.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==y.cacheType&&v.cache.add(i,e),v.update.content(t,e),t==g?(v.debug("Content loaded",t),v.activate.tab(t)):v.debug("Content loaded in background",t),y.onFirstLoad.call(o[0],t,m,b),y.onLoad.call(o[0],t,m,b),y.loadOnce?v.cache.add(i,!0):"string"==typeof y.cacheType&&"dom"==y.cacheType.toLowerCase()&&o.children().length>0?setTimeout(function(){var e=o.children().clone(!0);e=e.not("script"),v.cache.add(i,e)},0):v.cache.add(i,o.html())},urlData:{tab:i}},s=o.api("get request")||!1,l=s&&"pending"===s.state();i=i||t,r=v.cache.read(i),y.cache&&r?(v.activate.tab(t),v.debug("Adding cached content",i),y.loadOnce||("once"==y.evaluateScripts?v.update.content(t,r,!1):v.update.content(t,r)),y.onLoad.call(o[0],t,m,b)):l?(v.set.loading(t),v.debug("Content is already loading",i)):void 0!==e.api?(n=e.extend(!0,{},y.apiSettings,a),v.debug("Retrieving remote content",i,n),v.set.loading(t),o.api(n)):v.error(j.api)}},activate:{all:function(e){v.activate.tab(e),v.activate.navigation(e)},tab:function(e){var t=v.get.tabElement(e),i="siblings"==y.deactivate?t.siblings(h):h.not(t),n=t.hasClass($.active);v.verbose("Showing tab content for",t),n||(t.addClass($.active),i.removeClass($.active+" "+$.loading),t.length>0&&y.onVisible.call(t[0],e))},navigation:function(e){var t=v.get.navElement(e),i="siblings"==y.deactivate?t.siblings(o):o.not(t),n=t.hasClass($.active);v.verbose("Activating tab navigation for",t,e),n||(t.addClass($.active),i.removeClass($.active+" "+$.loading))}},deactivate:{all:function(){v.deactivate.navigation(),v.deactivate.tabs()},navigation:function(){o.removeClass($.active)},tabs:function(){h.removeClass($.active+" "+$.loading)}},is:{tab:function(e){return void 0!==e&&v.get.tabElement(e).length>0}},get:{initialPath:function(){return o.eq(0).data(w.tab)||h.eq(0).data(w.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return v.utilities.pathToArray(v.get.defaultPath(e))},defaultPath:function(e){var t=o.filter("[data-"+w.tab+'^="'+e+'/"]').eq(0),i=t.data(w.tab)||!1;if(i){if(v.debug("Found default tab",i),k<y.maxDepth)return k++,v.get.defaultPath(i);v.error(j.recursion)}else v.debug("No default tabs found for",e,h);return k=0,e},navElement:function(e){return e=e||g,o.filter("[data-"+w.tab+'="'+e+'"]')},tabElement:function(e){var t,i,n,r;return e=e||g,n=v.utilities.pathToArray(e),r=v.utilities.last(n),t=h.filter("[data-"+w.tab+'="'+e+'"]'),i=h.filter("[data-"+w.tab+'="'+r+'"]'),t.length>0?t:i},tab:function(){return g}},utilities:{filterArray:function(t,i){return e.grep(t,function(t){return-1==e.inArray(t,i)})},last:function(t){return!!e.isArray(t)&&t[t.length-1]},pathToArray:function(e){return void 0===e&&(e=g),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return!!e.isArray(t)&&t.join("/")}},setting:function(t,i){if(v.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,y,t);else{if(void 0===i)return y[t];e.isPlainObject(y[t])?e.extend(!0,y[t],i):y[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===i)return v[t];v[t]=i}},debug:function(){!y.silent&&y.debug&&(y.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,y.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!y.silent&&y.verbose&&y.debug&&(y.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,y.name+":"),v.verbose.apply(console,arguments)))},error:function(){y.silent||(v.error=Function.prototype.bind.call(console.error,console,y.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;y.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":i})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=y.name+":",i=0;s=!1,clearTimeout(v.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,n){var o,a,s,l=I;return i=i||u,n=T||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(v.error(j.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===I&&v.initialize(),v.invoke(d)):(void 0!==I&&I.invoke("destroy"),v.initialize())}),void 0!==r?r:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,i){},onLoad:function(e,t,i){},onVisible:function(e,t,i){},onRequest:function(e,t,i){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.transition=function(){var n,r=e(this),o=r.selector||"",a=(new Date).getTime(),s=[],l=arguments,d=l[0],c=[].slice.call(arguments,1),u="string"==typeof d;return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,r.each(function(t){var p,f,h,g,m,v,b,y,$,w=e(this),x=this;$={initialize:function(){p=$.get.settings.apply(x,l),g=p.className,h=p.error,m=p.metadata,y="."+p.namespace,b="module-"+p.namespace,f=w.data(b)||$,v=$.get.animationEndEvent(),u&&(u=$.invoke(d)),!1===u&&($.verbose("Converted arguments into settings object",p),p.interval?$.delay(p.animate):$.animate(),$.instantiate())},instantiate:function(){$.verbose("Storing instance of module",$),f=$,w.data(b,f)},destroy:function(){$.verbose("Destroying previous module for",x),w.removeData(b)},refresh:function(){$.verbose("Refreshing display type on next animation"),delete $.displayType},forceRepaint:function(){$.verbose("Forcing element repaint");var e=w.parent(),t=w.next();0===t.length?w.detach().appendTo(e):w.detach().insertBefore(t)},repaint:function(){$.verbose("Repainting element"),x.offsetWidth},delay:function(e){var i,n,o=$.get.animationDirection();o||(o=$.can.transition()?$.get.direction():"static"),e=void 0!==e?e:p.interval,i="auto"==p.reverse&&o==g.outward,n=i||1==p.reverse?(r.length-t)*p.interval:t*p.interval,$.debug("Delaying animation by",n),setTimeout($.animate,n)},animate:function(e){if(p=e||p,!$.is.supported())return $.error(h.support),!1;if($.debug("Preparing animation",p.animation),$.is.animating()){if(p.queue)return!p.allowRepeats&&$.has.direction()&&$.is.occurring()&&!0!==$.queuing?$.debug("Animation is currently occurring, preventing queueing same animation",p.animation):$.queue(p.animation),!1;if(!p.allowRepeats&&$.is.occurring())return $.debug("Animation is already occurring, will not execute repeated animation",p.animation),!1;$.debug("New animation started, completing previous early",p.animation),f.complete()}$.can.animate()?$.set.animating(p.animation):$.error(h.noAnimation,p.animation,x)},reset:function(){$.debug("Resetting animation to beginning conditions"),$.remove.animationCallbacks(),$.restore.conditions(),$.remove.animating()},queue:function(e){$.debug("Queueing animation of",e),$.queuing=!0,w.one(v+".queue"+y,function(){$.queuing=!1,$.repaint(),$.animate.apply(this,p)})},complete:function(e){$.debug("Animation complete",p.animation),$.remove.completeCallback(),$.remove.failSafe(),$.is.looping()||($.is.outward()?($.verbose("Animation is outward, hiding element"),$.restore.conditions(),$.hide()):$.is.inward()?($.verbose("Animation is outward, showing element"),$.restore.conditions(),$.show()):($.verbose("Static animation completed"),$.restore.conditions(),p.onComplete.call(x)))},force:{visible:function(){var e=w.attr("style"),t=$.get.userStyle(),i=$.get.displayType(),n=t+"display: "+i+" !important;",r=w.css("display"),o=void 0===e||""===e;r!==i?($.verbose("Overriding default display to show element",i),w.attr("style",n)):o&&w.removeAttr("style")},hidden:function(){
var e=w.attr("style"),t=w.css("display"),i=void 0===e||""===e;"none"===t||$.is.hidden()?i&&w.removeAttr("style"):($.verbose("Overriding default display to hide element"),w.css("display","none"))}},has:{direction:function(t){var i=!1;return t=t||p.animation,"string"==typeof t&&(t=t.split(" "),e.each(t,function(e,t){t!==g.inward&&t!==g.outward||(i=!0)})),i},inlineDisplay:function(){var t=w.attr("style")||"";return e.isArray(t.match(/display.*?;/,""))}},set:{animating:function(e){var t;$.remove.completeCallback(),e=e||p.animation,t=$.get.animationClass(e),$.save.animation(t),$.force.visible(),$.remove.hidden(),$.remove.direction(),$.start.animation(t)},duration:function(e,t){t=t||p.duration,((t="number"==typeof t?t+"ms":t)||0===t)&&($.verbose("Setting animation duration",t),w.css({"animation-duration":t}))},direction:function(e){e=e||$.get.direction(),e==g.inward?$.set.inward():$.set.outward()},looping:function(){$.debug("Transition set to loop"),w.addClass(g.looping)},hidden:function(){w.addClass(g.transition).addClass(g.hidden)},inward:function(){$.debug("Setting direction to inward"),w.removeClass(g.outward).addClass(g.inward)},outward:function(){$.debug("Setting direction to outward"),w.removeClass(g.inward).addClass(g.outward)},visible:function(){w.addClass(g.transition).addClass(g.visible)}},start:{animation:function(e){e=e||$.get.animationClass(),$.debug("Starting tween",e),w.addClass(e).one(v+".complete"+y,$.complete),p.useFailSafe&&$.add.failSafe(),$.set.duration(p.duration),p.onStart.call(x)}},save:{animation:function(e){$.cache||($.cache={}),$.cache.animation=e},displayType:function(e){"none"!==e&&w.data(m.displayType,e)},transitionExists:function(t,i){e.fn.transition.exists[t]=i,$.verbose("Saving existence of transition",t,i)}},restore:{conditions:function(){var e=$.get.currentAnimation();e&&(w.removeClass(e),$.verbose("Removing animation class",$.cache)),$.remove.duration()}},add:{failSafe:function(){var e=$.get.duration();$.timer=setTimeout(function(){w.triggerHandler(v)},e+p.failSafeDelay),$.verbose("Adding fail safe timer",$.timer)}},remove:{animating:function(){w.removeClass(g.animating)},animationCallbacks:function(){$.remove.queueCallback(),$.remove.completeCallback()},queueCallback:function(){w.off(".queue"+y)},completeCallback:function(){w.off(".complete"+y)},display:function(){w.css("display","")},direction:function(){w.removeClass(g.inward).removeClass(g.outward)},duration:function(){w.css("animation-duration","")},failSafe:function(){$.verbose("Removing fail safe timer",$.timer),$.timer&&clearTimeout($.timer)},hidden:function(){w.removeClass(g.hidden)},visible:function(){w.removeClass(g.visible)},looping:function(){$.debug("Transitions are no longer looping"),$.is.looping()&&($.reset(),w.removeClass(g.looping))},transition:function(){w.removeClass(g.visible).removeClass(g.hidden)}},get:{settings:function(t,i,n){return"object"==typeof t?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,onComplete:n,duration:i}):"string"==typeof i||"number"==typeof i?e.extend({},e.fn.transition.settings,{animation:t,duration:i}):"object"==typeof i?e.extend({},e.fn.transition.settings,i,{animation:t}):"function"==typeof i?e.extend({},e.fn.transition.settings,{animation:t,onComplete:i}):e.extend({},e.fn.transition.settings,{animation:t})},animationClass:function(e){var t=e||p.animation,i=$.can.transition()&&!$.has.direction()?$.get.direction()+" ":"";return g.animating+" "+g.transition+" "+i+t},currentAnimation:function(){return!(!$.cache||void 0===$.cache.animation)&&$.cache.animation},currentDirection:function(){return $.is.inward()?g.inward:g.outward},direction:function(){return $.is.hidden()||!$.is.visible()?g.inward:g.outward},animationDirection:function(t){var i;return t=t||p.animation,"string"==typeof t&&(t=t.split(" "),e.each(t,function(e,t){t===g.inward?i=g.inward:t===g.outward&&(i=g.outward)})),i||!1},duration:function(e){return e=e||p.duration,!1===e&&(e=w.css("animation-duration")||0),"string"==typeof e?e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e):e},displayType:function(e){return e=void 0===e||e,p.displayType?p.displayType:(e&&void 0===w.data(m.displayType)&&$.can.transition(!0),w.data(m.displayType))},userStyle:function(e){return e=e||w.attr("style")||"",e.replace(/display.*?;/,"")},transitionExists:function(t){return e.fn.transition.exists[t]},animationStartEvent:function(){var e,t=i.createElement("div"),n={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in n)if(void 0!==t.style[e])return n[e];return!1},animationEndEvent:function(){var e,t=i.createElement("div"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e];return!1}},can:{transition:function(t){var i,n,r,o,a,s,l=p.animation,d=$.get.transitionExists(l),c=$.get.displayType(!1);if(void 0===d||t){if($.verbose("Determining whether animation exists"),i=w.attr("class"),n=w.prop("tagName"),r=e("<"+n+" />").addClass(i).insertAfter(w),o=r.addClass(l).removeClass(g.inward).removeClass(g.outward).addClass(g.animating).addClass(g.transition).css("animationName"),a=r.addClass(g.inward).css("animationName"),c||(c=r.attr("class",i).removeAttr("style").removeClass(g.hidden).removeClass(g.visible).show().css("display"),$.verbose("Determining final display state",c),$.save.displayType(c)),r.remove(),o!=a)$.debug("Direction exists for animation",l),s=!0;else{if("none"==o||!o)return void $.debug("No animation defined in css",l);$.debug("Static animation found",l,c),s=!1}$.save.transitionExists(l,s)}return void 0!==d?d:s},animate:function(){return void 0!==$.can.transition()}},is:{animating:function(){return w.hasClass(g.animating)},inward:function(){return w.hasClass(g.inward)},outward:function(){return w.hasClass(g.outward)},looping:function(){return w.hasClass(g.looping)},occurring:function(e){return e=e||p.animation,e="."+e.replace(" ","."),w.filter(e).length>0},visible:function(){return w.is(":visible")},hidden:function(){return"hidden"===w.css("visibility")},supported:function(){return!1!==v}},hide:function(){$.verbose("Hiding element"),$.is.animating()&&$.reset(),x.blur(),$.remove.display(),$.remove.visible(),$.set.hidden(),$.force.hidden(),p.onHide.call(x),p.onComplete.call(x)},show:function(e){$.verbose("Showing element",e),$.remove.hidden(),$.set.visible(),$.force.visible(),p.onShow.call(x),p.onComplete.call(x)},toggle:function(){$.is.visible()?$.hide():$.show()},stop:function(){$.debug("Stopping current animation"),w.triggerHandler(v)},stopAll:function(){$.debug("Stopping all animation"),$.remove.queueCallback(),w.triggerHandler(v)},clear:{queue:function(){$.debug("Clearing animation queue"),$.remove.queueCallback()}},enable:function(){$.verbose("Starting animation"),w.removeClass(g.disabled)},disable:function(){$.debug("Stopping animation"),w.addClass(g.disabled)},setting:function(t,i){if($.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];e.isPlainObject(p[t])?e.extend(!0,p[t],i):p[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,$,t);else{if(void 0===i)return $[t];$[t]=i}},debug:function(){!p.silent&&p.debug&&(p.performance?$.performance.log(arguments):($.debug=Function.prototype.bind.call(console.info,console,p.name+":"),$.debug.apply(console,arguments)))},verbose:function(){!p.silent&&p.verbose&&p.debug&&(p.performance?$.performance.log(arguments):($.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),$.verbose.apply(console,arguments)))},error:function(){p.silent||($.error=Function.prototype.bind.call(console.error,console,p.name+":"),$.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;p.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":i})),clearTimeout($.performance.timer),$.performance.timer=setTimeout($.performance.display,500)},display:function(){var t=p.name+":",i=0;a=!1,clearTimeout($.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),r.length>1&&(t+=" ("+r.length+")"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,r){var o,a,s,l=f;return i=i||c,r=x||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]&&(a=l[n],!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),void 0!==a&&a}},$.initialize()}),void 0!==n?n:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),function(e,t,i,n){"use strict";var t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();e.api=e.fn.api=function(i){var n,r=e(e.isFunction(this)?t:this),o=r.selector||"",a=(new Date).getTime(),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1);return r.each(function(){var r,u,p,f,h,g=e.isPlainObject(i)?e.extend(!0,{},e.fn.api.settings,i):e.extend({},e.fn.api.settings),m=g.namespace,v=g.metadata,b=g.selector,y=g.error,$=g.className,w="."+m,x="module-"+m,j=e(this),_=j.closest(b.form),C=g.stateContext?e(g.stateContext):j,q=this,S=C[0],D=j.data(x);h={initialize:function(){d||h.bind.events(),h.instantiate()},instantiate:function(){h.verbose("Storing instance of module",h),D=h,j.data(x,D)},destroy:function(){h.verbose("Destroying previous module for",q),j.removeData(x).off(w)},bind:{events:function(){var e=h.get.event();e?(h.verbose("Attaching API events to element",e),j.on(e+w,h.event.trigger)):"now"==g.on&&(h.debug("Querying API endpoint immediately"),h.query())}},decode:{json:function(e){if(void 0!==e&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}},read:{cachedResponse:function(e){var i;return void 0===t.Storage?void h.error(y.noStorage):(i=sessionStorage.getItem(e),h.debug("Using cached response",e,i),i=h.decode.json(i))}},write:{cachedResponse:function(i,n){return n&&""===n?void h.debug("Response empty, not caching",n):void 0===t.Storage?void h.error(y.noStorage):(e.isPlainObject(n)&&(n=JSON.stringify(n)),sessionStorage.setItem(i,n),void h.verbose("Storing cached response for url",i,n))}},query:function(){if(h.is.disabled())return void h.debug("Element is disabled API request aborted");if(h.is.loading()){if(!g.interruptRequests)return void h.debug("Cancelling request, previous request is still pending");h.debug("Interrupting previous request"),h.abort()}if(g.defaultData&&e.extend(!0,g.urlData,h.get.defaultData()),g.serializeForm&&(g.data=h.add.formData(g.data)),!1===(u=h.get.settings()))return h.cancelled=!0,void h.error(y.beforeSend);if(h.cancelled=!1,!(p=h.get.templatedURL())&&!h.is.mocked())return void h.error(y.missingURL);if((p=h.add.urlData(p))||h.is.mocked()){if(u.url=g.base+p,r=e.extend(!0,{},g,{type:g.method||g.type,data:void 0,url:g.base+p,beforeSend:g.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),h.debug("Querying URL",r.url),h.verbose("Using AJAX settings",r),"local"===g.cache&&h.read.cachedResponse(p))return h.debug("Response returned from local cache"),h.request=h.create.request(),void h.request.resolveWith(S,[h.read.cachedResponse(p)]);g.throttle?g.throttleFirstRequest||h.timer?(h.debug("Throttling request",g.throttle),clearTimeout(h.timer),h.timer=setTimeout(function(){h.timer&&delete h.timer,h.debug("Sending throttled request",void 0,r.method),h.send.request()},g.throttle)):(h.debug("Sending request",void 0,r.method),h.send.request(),h.timer=setTimeout(function(){},g.throttle)):(h.debug("Sending request",void 0,r.method),h.send.request())}},should:{removeError:function(){return!0===g.hideError||"auto"===g.hideError&&!h.is.form()}},is:{disabled:function(){return j.filter(b.disabled).length>0},expectingJSON:function(){return"json"===g.dataType||"jsonp"===g.dataType},form:function(){return j.is("form")||C.is("form")},mocked:function(){return g.mockResponse||g.mockResponseAsync||g.response||g.responseAsync},input:function(){return j.is("input")},loading:function(){return!!h.request&&"pending"==h.request.state()},abortedRequest:function(e){return e&&void 0!==e.readyState&&0===e.readyState?(h.verbose("XHR request determined to be aborted"),!0):(h.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return h.is.expectingJSON()&&e.isFunction(g.successTest)?(h.debug("Checking JSON returned success",g.successTest,t),g.successTest(t)?(h.debug("Response passed success test",t),!0):(h.debug("Response failed success test",t),!1)):(h.verbose("Response is not JSON, skipping validation",g.successTest,t),!0)}},was:{cancelled:function(){return h.cancelled||!1},succesful:function(){return h.request&&"resolved"==h.request.state()},failure:function(){return h.request&&"rejected"==h.request.state()},complete:function(){return h.request&&("resolved"==h.request.state()||"rejected"==h.request.state())}},add:{urlData:function(t,i){var n,r;return t&&(n=t.match(g.regExp.required),r=t.match(g.regExp.optional),i=i||g.urlData,n&&(h.debug("Looking for required URL variables",n),e.each(n,function(n,r){var o=-1!==r.indexOf("$")?r.substr(2,r.length-3):r.substr(1,r.length-2),a=e.isPlainObject(i)&&void 0!==i[o]?i[o]:void 0!==j.data(o)?j.data(o):void 0!==C.data(o)?C.data(o):i[o];if(void 0===a)return h.error(y.requiredParameter,o,t),t=!1,!1;h.verbose("Found required variable",o,a),a=g.encodeParameters?h.get.urlEncodedValue(a):a,t=t.replace(r,a)})),r&&(h.debug("Looking for optional URL variables",n),e.each(r,function(n,r){var o=-1!==r.indexOf("$")?r.substr(3,r.length-4):r.substr(2,r.length-3),a=e.isPlainObject(i)&&void 0!==i[o]?i[o]:void 0!==j.data(o)?j.data(o):void 0!==C.data(o)?C.data(o):i[o];void 0!==a?(h.verbose("Optional variable Found",o,a),t=t.replace(r,a)):(h.verbose("Optional variable not found",o),t=-1!==t.indexOf("/"+r)?t.replace("/"+r,""):t.replace(r,""))}))),t},formData:function(t){var i,n=void 0!==e.fn.serializeObject,r=n?_.serializeObject():_.serialize();return t=t||g.data,i=e.isPlainObject(t),i?n?(h.debug("Extending existing data with form data",t,r),t=e.extend(!0,{},t,r)):(h.error(y.missingSerialize),h.debug("Cant extend data. Replacing data with form data",t,r),t=r):(h.debug("Adding form data",r),t=r),t}},send:{request:function(){h.set.loading(),h.request=h.create.request(),h.is.mocked()?h.mockedXHR=h.create.mockedXHR():h.xhr=h.create.xhr(),g.onRequest.call(S,h.request,h.xhr)}},event:{trigger:function(e){h.query(),"submit"!=e.type&&"click"!=e.type||e.preventDefault()},xhr:{always:function(){},done:function(t,i,n){var r=this,o=(new Date).getTime()-f,a=g.loadingDuration-o,s=!!e.isFunction(g.onResponse)&&(h.is.expectingJSON()?g.onResponse.call(r,e.extend(!0,{},t)):g.onResponse.call(r,t));a=a>0?a:0,s&&(h.debug("Modified API response in onResponse callback",g.onResponse,s,t),t=s),a>0&&h.debug("Response completed early delaying state change by",a),setTimeout(function(){h.is.validResponse(t)?h.request.resolveWith(r,[t,n]):h.request.rejectWith(r,[n,"invalid"])},a)},fail:function(e,t,i){var n=this,r=(new Date).getTime()-f,o=g.loadingDuration-r;o=o>0?o:0,o>0&&h.debug("Response completed early delaying state change by",o),setTimeout(function(){h.is.abortedRequest(e)?h.request.rejectWith(n,[e,"aborted",i]):h.request.rejectWith(n,[e,"error",t,i])},o)}},request:{done:function(e,t){h.debug("Successful API Response",e),"local"===g.cache&&p&&(h.write.cachedResponse(p,e),h.debug("Saving server response locally",h.cache)),g.onSuccess.call(S,e,j,t)},complete:function(e,t){var i,n;h.was.succesful()?(n=e,i=t):(i=e,n=h.get.responseFromXHR(i)),h.remove.loading(),g.onComplete.call(S,n,j,i)},fail:function(e,t,i){var n=h.get.responseFromXHR(e),o=h.get.errorFromRequest(n,t,i);if("aborted"==t)return h.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,i),g.onAbort.call(S,t,j,e),!0;"invalid"==t?h.debug("JSON did not pass success test. A server-side error has most likely occurred",n):"error"==t&&void 0!==e&&(h.debug("XHR produced a server error",t,i),200!=e.status&&void 0!==i&&""!==i&&h.error(y.statusMessage+i,r.url),g.onError.call(S,o,j,e)),g.errorDuration&&"aborted"!==t&&(h.debug("Adding error state"),h.set.error(),h.should.removeError()&&setTimeout(h.remove.error,g.errorDuration)),h.debug("API Request failed",o,e),g.onFailure.call(S,n,j,e)}}},create:{request:function(){return e.Deferred().always(h.event.request.complete).done(h.event.request.done).fail(h.event.request.fail)},mockedXHR:function(){var t,i,n,r=g.mockResponse||g.response,o=g.mockResponseAsync||g.responseAsync;return n=e.Deferred().always(h.event.xhr.complete).done(h.event.xhr.done).fail(h.event.xhr.fail),r?(e.isFunction(r)?(h.debug("Using specified synchronous callback",r),i=r.call(S,u)):(h.debug("Using settings specified response",r),i=r),n.resolveWith(S,[i,!1,{responseText:i}])):e.isFunction(o)&&(t=function(e){h.debug("Async callback returned response",e),e?n.resolveWith(S,[e,!1,{responseText:e}]):n.rejectWith(S,[{responseText:e},!1,!1])},h.debug("Using specified async response callback",o),o.call(S,u,t)),n},xhr:function(){var t;return t=e.ajax(r).always(h.event.xhr.always).done(h.event.xhr.done).fail(h.event.xhr.fail),h.verbose("Created server request",t,r),t}},set:{error:function(){h.verbose("Adding error state to element",C),C.addClass($.error)},loading:function(){h.verbose("Adding loading state to element",C),C.addClass($.loading),f=(new Date).getTime()}},remove:{error:function(){h.verbose("Removing error state from element",C),C.removeClass($.error)},loading:function(){h.verbose("Removing loading state from element",C),C.removeClass($.loading)}},get:{responseFromXHR:function(t){return!!e.isPlainObject(t)&&(h.is.expectingJSON()?h.decode.json(t.responseText):t.responseText)},errorFromRequest:function(t,i,n){return e.isPlainObject(t)&&void 0!==t.error?t.error:void 0!==g.error[i]?g.error[i]:n},request:function(){return h.request||!1},xhr:function(){return h.xhr||!1},settings:function(){var t;return t=g.beforeSend.call(S,g),t&&(void 0!==t.success&&(h.debug("Legacy success callback detected",t),h.error(y.legacyParameters,t.success),t.onSuccess=t.success),void 0!==t.failure&&(h.debug("Legacy failure callback detected",t),h.error(y.legacyParameters,t.failure),t.onFailure=t.failure),void 0!==t.complete&&(h.debug("Legacy complete callback detected",t),h.error(y.legacyParameters,t.complete),t.onComplete=t.complete)),void 0===t&&h.error(y.noReturnedValue),!1===t?t:void 0!==t?e.extend(!0,{},t):e.extend(!0,{},g)},urlEncodedValue:function(e){var i=t.decodeURIComponent(e),n=t.encodeURIComponent(e);return i!==e?(h.debug("URL value is already encoded, avoiding double encoding",e),e):(h.verbose("Encoding value using encodeURIComponent",e,n),n)},defaultData:function(){var t={};return e.isWindow(q)||(h.is.input()?t.value=j.val():h.is.form()||(t.text=j.text())),t},event:function(){return e.isWindow(q)||"now"==g.on?(h.debug("API called without element, no events attached"),!1):"auto"==g.on?j.is("input")?void 0!==q.oninput?"input":void 0!==q.onpropertychange?"propertychange":"keyup":j.is("form")?"submit":"click":g.on},templatedURL:function(e){if(e=e||j.data(v.action)||g.action||!1,p=j.data(v.url)||g.url||!1)return h.debug("Using specified url",p),p;if(e){if(h.debug("Looking up url for action",e,g.api),void 0===g.api[e]&&!h.is.mocked())return void h.error(y.missingAction,g.action,g.api);p=g.api[e]}else h.is.form()&&(p=j.attr("action")||C.attr("action")||!1,h.debug("No url or action specified, defaulting to form action",p));return p}},abort:function(){var e=h.get.xhr();e&&"resolved"!==e.state()&&(h.debug("Cancelling API request"),e.abort())},reset:function(){h.remove.error(),h.remove.loading()},setting:function(t,i){if(h.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,g,t);else{if(void 0===i)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],i):g[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===i)return h[t];h[t]=i}},debug:function(){!g.silent&&g.debug&&(g.performance?h.performance.log(arguments):(h.debug=Function.prototype.bind.call(console.info,console,g.name+":"),h.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?h.performance.log(arguments):(h.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),h.verbose.apply(console,arguments)))},error:function(){g.silent||(h.error=Function.prototype.bind.call(console.error,console,g.name+":"),h.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;g.performance&&(t=(new Date).getTime(),n=a||t,i=t-n,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":i})),clearTimeout(h.performance.timer),h.performance.timer=setTimeout(h.performance.display,500)},display:function(){var t=g.name+":",i=0;a=!1,clearTimeout(h.performance.timer),e.each(s,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,i,r){var o,a,s,l=D;return i=i||c,r=q||r,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(h.error(y.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(r,i):void 0!==a&&(s=a),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),a}},d?(void 0===D&&h.initialize(),h.invoke(l)):(void 0!==D&&D.invoke("destroy"),h.initialize())}),void 0!==n?n:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.state=function(t){var n,r=e(this),o=r.selector||"",a=(i.documentElement,(new Date).getTime()),s=[],l=arguments[0],d="string"==typeof l,c=[].slice.call(arguments,1);return r.each(function(){var i,u=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),p=u.error,f=u.metadata,h=u.className,g=u.namespace,m=u.states,v=u.text,b="."+g,y=g+"-module",$=e(this),w=this,x=$.data(y);i={initialize:function(){i.verbose("Initializing module"),u.automatic&&i.add.defaults(),u.context&&""!==o?e(u.context).on(o,"mouseenter"+b,i.change.text).on(o,"mouseleave"+b,i.reset.text).on(o,"click"+b,i.toggle.state):$.on("mouseenter"+b,i.change.text).on("mouseleave"+b,i.reset.text).on("click"+b,i.toggle.state),i.instantiate()},instantiate:function(){i.verbose("Storing instance of module",i),x=i,$.data(y,i)},destroy:function(){i.verbose("Destroying previous module",x),$.off(b).removeData(y)},refresh:function(){i.verbose("Refreshing selector cache"),$=e(w)},add:{defaults:function(){var n=t&&e.isPlainObject(t.states)?t.states:{};e.each(u.defaults,function(t,r){void 0!==i.is[t]&&i.is[t]()&&(i.verbose("Adding default states",t,w),e.extend(u.states,r,n))})}},is:{active:function(){return $.hasClass(h.active)},loading:function(){return $.hasClass(h.loading)},inactive:function(){return!$.hasClass(h.active)},state:function(e){return void 0!==h[e]&&$.hasClass(h[e])},enabled:function(){return!$.is(u.filter.active)},disabled:function(){return $.is(u.filter.active)},textEnabled:function(){return!$.is(u.filter.text)},button:function(){return $.is(".button:not(a, .submit)")},input:function(){return $.is("input")},progress:function(){return $.is(".ui.progress")}},allow:function(e){i.debug("Now allowing state",e),m[e]=!0},disallow:function(e){i.debug("No longer allowing",e),m[e]=!1},allows:function(e){return m[e]||!1},enable:function(){$.removeClass(h.disabled)},disable:function(){$.addClass(h.disabled)},setState:function(e){i.allows(e)&&$.addClass(h[e])},removeState:function(e){i.allows(e)&&$.removeClass(h[e])},toggle:{state:function(){var t;if(i.allows("active")&&i.is.enabled()){if(i.refresh(),void 0!==e.fn.api)if(t=$.api("get request"),$.api("was cancelled"))i.debug("API Request cancelled by beforesend"),u.activateTest=function(){return!1},u.deactivateTest=function(){return!1};else if(t)return void i.listenTo(t);i.change.state()}}},listenTo:function(t){i.debug("API request detected, waiting for state signal",t),t&&(v.loading&&i.update.text(v.loading),e.when(t).then(function(){"resolved"==t.state()?(i.debug("API request succeeded"),u.activateTest=function(){return!0},u.deactivateTest=function(){return!0}):(i.debug("API request failed"),u.activateTest=function(){return!1},u.deactivateTest=function(){return!1}),i.change.state()}))},change:{state:function(){i.debug("Determining state change direction"),i.is.inactive()?i.activate():i.deactivate(),u.sync&&i.sync(),u.onChange.call(w)},text:function(){i.is.textEnabled()&&(i.is.disabled()?(i.verbose("Changing text to disabled text",v.hover),i.update.text(v.disabled)):i.is.active()?v.hover?(i.verbose("Changing text to hover text",v.hover),i.update.text(v.hover)):v.deactivate&&(i.verbose("Changing text to deactivating text",v.deactivate),i.update.text(v.deactivate)):v.hover?(i.verbose("Changing text to hover text",v.hover),i.update.text(v.hover)):v.activate&&(i.verbose("Changing text to activating text",v.activate),i.update.text(v.activate)))}},activate:function(){u.activateTest.call(w)&&(i.debug("Setting state to active"),$.addClass(h.active),i.update.text(v.active),u.onActivate.call(w))},deactivate:function(){u.deactivateTest.call(w)&&(i.debug("Setting state to inactive"),$.removeClass(h.active),i.update.text(v.inactive),u.onDeactivate.call(w))},sync:function(){i.verbose("Syncing other buttons to current state"),i.is.active()?r.not($).state("activate"):r.not($).state("deactivate")},get:{text:function(){return u.selector.text?$.find(u.selector.text).text():$.html()},textFor:function(e){return v[e]||!1}},flash:{text:function(e,t,n){var r=i.get.text();i.debug("Flashing text message",e,t),e=e||u.text.flash,t=t||u.flashDuration,n=n||function(){},i.update.text(e),setTimeout(function(){i.update.text(r),n.call(w)},t)}},reset:{text:function(){var e=v.active||$.data(f.storedText),t=v.inactive||$.data(f.storedText);i.is.textEnabled()&&(i.is.active()&&e?(i.verbose("Resetting active text",e),i.update.text(e)):t&&(i.verbose("Resetting inactive text",e),i.update.text(t)))}},update:{text:function(e){var t=i.get.text();e&&e!==t?(i.debug("Updating text",e),u.selector.text?$.data(f.storedText,e).find(u.selector.text).text(e):$.data(f.storedText,e).html(e)):i.debug("Text is already set, ignoring update",e)}},setting:function(t,n){if(i.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,u,t);else{if(void 0===n)return u[t];e.isPlainObject(u[t])?e.extend(!0,u[t],n):u[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,i,t);else{if(void 0===n)return i[t];i[t]=n}},debug:function(){!u.silent&&u.debug&&(u.performance?i.performance.log(arguments):(i.debug=Function.prototype.bind.call(console.info,console,u.name+":"),i.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?i.performance.log(arguments):(i.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),i.verbose.apply(console,arguments)))},error:function(){u.silent||(i.error=Function.prototype.bind.call(console.error,console,u.name+":"),i.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;u.performance&&(t=(new Date).getTime(),r=a||t,n=t-r,a=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":n})),clearTimeout(i.performance.timer),i.performance.timer=setTimeout(i.performance.display,500)},display:function(){var t=u.name+":",n=0;a=!1,clearTimeout(i.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",o&&(t+=" '"+o+"'"),(void 0!==console.group||void 0!==console.table)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,r,o){var a,s,l,d=x;return r=r||c,o=w||o,"string"==typeof t&&void 0!==d&&(t=t.split(/[\. ]/),a=t.length-1,e.each(t,function(n,r){var o=n!=a?r+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(d[o])&&n!=a)d=d[o];else{if(void 0!==d[o])return s=d[o],!1;if(!e.isPlainObject(d[r])||n==a)return void 0!==d[r]?(s=d[r],!1):(i.error(p.method,t),!1);d=d[r]}})),e.isFunction(s)?l=s.apply(o,r):void 0!==s&&(l=s),e.isArray(n)?n.push(l):void 0!==n?n=[n,l]:void 0!==l&&(n=l),s}},d?(void 0===x&&i.initialize(),i.invoke(l)):(void 0!==x&&x.invoke("destroy"),i.initialize())}),void 0!==n?n:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,
flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(jQuery,window,document),function(e,t,i,n){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.visibility=function(n){var r,o=e(this),a=o.selector||"",s=(new Date).getTime(),l=[],d=arguments[0],c="string"==typeof d,u=[].slice.call(arguments,1),p=o.length,f=0;return o.each(function(){var o,h,g,m,v=e.isPlainObject(n)?e.extend(!0,{},e.fn.visibility.settings,n):e.extend({},e.fn.visibility.settings),b=v.className,y=v.namespace,$=v.error,w=v.metadata,x="."+y,j="module-"+y,_=e(t),C=e(this),q=e(v.context),S=(C.selector,C.data(j)),D=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},k=this,T=!1;m={initialize:function(){m.debug("Initializing",v),m.setup.cache(),m.should.trackChanges()&&("image"==v.type&&m.setup.image(),"fixed"==v.type&&m.setup.fixed(),v.observeChanges&&m.observeChanges(),m.bind.events()),m.save.position(),m.is.visible()||m.error($.visible,C),v.initialCheck&&m.checkVisibility(),m.instantiate()},instantiate:function(){m.debug("Storing instance",m),C.data(j,m),S=m},destroy:function(){m.verbose("Destroying previous module"),g&&g.disconnect(),h&&h.disconnect(),_.off("load"+x,m.event.load).off("resize"+x,m.event.resize),q.off("scroll"+x,m.event.scroll).off("scrollchange"+x,m.event.scrollchange),"fixed"==v.type&&(m.resetFixed(),m.remove.placeholder()),C.off(x).removeData(j)},observeChanges:function(){"MutationObserver"in t&&(h=new MutationObserver(m.event.contextChanged),g=new MutationObserver(m.event.changed),h.observe(i,{childList:!0,subtree:!0}),g.observe(k,{childList:!0,subtree:!0}),m.debug("Setting up mutation observer",g))},bind:{events:function(){m.verbose("Binding visibility events to scroll and resize"),v.refreshOnLoad&&_.on("load"+x,m.event.load),_.on("resize"+x,m.event.resize),q.off("scroll"+x).on("scroll"+x,m.event.scroll).on("scrollchange"+x,m.event.scrollchange)}},event:{changed:function(e){m.verbose("DOM tree modified, updating visibility calculations"),m.timer=setTimeout(function(){m.verbose("DOM tree modified, updating sticky menu"),m.refresh()},100)},contextChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==k||e(t).find(k).length>0)&&(m.debug("Element removed from DOM, tearing down events"),m.destroy())})})},resize:function(){m.debug("Window resized"),v.refreshOnResize&&D(m.refresh)},load:function(){m.debug("Page finished loading"),D(m.refresh)},scroll:function(){v.throttle?(clearTimeout(m.timer),m.timer=setTimeout(function(){q.triggerHandler("scrollchange"+x,[q.scrollTop()])},v.throttle)):D(function(){q.triggerHandler("scrollchange"+x,[q.scrollTop()])})},scrollchange:function(e,t){m.checkVisibility(t)}},precache:function(t,n){t instanceof Array||(t=[t]);for(var r=t.length,o=0,a=[],s=i.createElement("img"),l=function(){++o>=t.length&&e.isFunction(n)&&n()};r--;)s=i.createElement("img"),s.onload=l,s.onerror=l,s.src=t[r],a.push(s)},enableCallbacks:function(){m.debug("Allowing callbacks to occur"),T=!1},disableCallbacks:function(){m.debug("Disabling all callbacks temporarily"),T=!0},should:{trackChanges:function(){return c?(m.debug("One time query, no need to bind events"),!1):(m.debug("Callbacks being attached"),!0)}},setup:{cache:function(){m.cache={occurred:{},screen:{},element:{}}},image:function(){var e=C.data(w.src);e&&(m.verbose("Lazy loading image",e),v.once=!0,v.observeChanges=!1,v.onOnScreen=function(){m.debug("Image on screen",k),m.precache(e,function(){m.set.image(e,function(){f++,f==p&&v.onAllLoaded.call(this),v.onLoad.call(this)})})})},fixed:function(){m.debug("Setting up fixed"),v.once=!1,v.observeChanges=!1,v.initialCheck=!0,v.refreshOnLoad=!0,n.transition||(v.transition=!1),m.create.placeholder(),m.debug("Added placeholder",o),v.onTopPassed=function(){m.debug("Element passed, adding fixed position",C),m.show.placeholder(),m.set.fixed(),v.transition&&void 0!==e.fn.transition&&C.transition(v.transition,v.duration)},v.onTopPassedReverse=function(){m.debug("Element returned to position, removing fixed",C),m.hide.placeholder(),m.remove.fixed()}}},create:{placeholder:function(){m.verbose("Creating fixed position placeholder"),o=C.clone(!1).css("display","none").addClass(b.placeholder).insertAfter(C)}},show:{placeholder:function(){m.verbose("Showing placeholder"),o.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){m.verbose("Hiding placeholder"),o.css("display","none").css("visibility","")}},set:{fixed:function(){m.verbose("Setting element to fixed position"),C.addClass(b.fixed).css({position:"fixed",top:v.offset+"px",left:"auto",zIndex:v.zIndex}),v.onFixed.call(k)},image:function(t,i){if(C.attr("src",t),v.transition)if(void 0!==e.fn.transition){if(C.hasClass(b.visible))return void m.debug("Transition already occurred on this image, skipping animation");C.transition(v.transition,v.duration,i)}else C.fadeIn(v.duration,i);else C.show()}},is:{onScreen:function(){return m.get.elementCalculations().onScreen},offScreen:function(){return m.get.elementCalculations().offScreen},visible:function(){return!(!m.cache||!m.cache.element||0===m.cache.element.width&&0===m.cache.element.offset.top)},verticallyScrollableContext:function(){var e=q.get(0)!==t&&q.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=q.get(0)!==t&&q.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){m.debug("Refreshing constants (width/height)"),"fixed"==v.type&&m.resetFixed(),m.reset(),m.save.position(),v.checkOnRefresh&&m.checkVisibility(),v.onRefresh.call(k)},resetFixed:function(){m.remove.fixed(),m.remove.occurred()},reset:function(){m.verbose("Resetting all cached values"),e.isPlainObject(m.cache)&&(m.cache.screen={},m.cache.element={})},checkVisibility:function(e){m.verbose("Checking visibility of element",m.cache.element),!T&&m.is.visible()&&(m.save.scroll(e),m.save.calculations(),m.passed(),m.passingReverse(),m.topVisibleReverse(),m.bottomVisibleReverse(),m.topPassedReverse(),m.bottomPassedReverse(),m.onScreen(),m.offScreen(),m.passing(),m.topVisible(),m.bottomVisible(),m.topPassed(),m.bottomPassed(),v.onUpdate&&v.onUpdate.call(k,m.get.elementCalculations()))},passed:function(t,i){var n=m.get.elementCalculations();if(t&&i)v.onPassed[t]=i;else{if(void 0!==t)return m.get.pixelsPassed(t)>n.pixelsPassed;n.passing&&e.each(v.onPassed,function(e,t){n.bottomVisible||n.pixelsPassed>m.get.pixelsPassed(e)?m.execute(t,e):v.once||m.remove.occurred(t)})}},onScreen:function(e){var t=m.get.elementCalculations(),i=e||v.onOnScreen;if(e&&(m.debug("Adding callback for onScreen",e),v.onOnScreen=e),t.onScreen?m.execute(i,"onScreen"):v.once||m.remove.occurred("onScreen"),void 0!==e)return t.onOnScreen},offScreen:function(e){var t=m.get.elementCalculations(),i=e||v.onOffScreen;if(e&&(m.debug("Adding callback for offScreen",e),v.onOffScreen=e),t.offScreen?m.execute(i,"offScreen"):v.once||m.remove.occurred("offScreen"),void 0!==e)return t.onOffScreen},passing:function(e){var t=m.get.elementCalculations(),i=e||v.onPassing;if(e&&(m.debug("Adding callback for passing",e),v.onPassing=e),t.passing?m.execute(i,"passing"):v.once||m.remove.occurred("passing"),void 0!==e)return t.passing},topVisible:function(e){var t=m.get.elementCalculations(),i=e||v.onTopVisible;if(e&&(m.debug("Adding callback for top visible",e),v.onTopVisible=e),t.topVisible?m.execute(i,"topVisible"):v.once||m.remove.occurred("topVisible"),void 0===e)return t.topVisible},bottomVisible:function(e){var t=m.get.elementCalculations(),i=e||v.onBottomVisible;if(e&&(m.debug("Adding callback for bottom visible",e),v.onBottomVisible=e),t.bottomVisible?m.execute(i,"bottomVisible"):v.once||m.remove.occurred("bottomVisible"),void 0===e)return t.bottomVisible},topPassed:function(e){var t=m.get.elementCalculations(),i=e||v.onTopPassed;if(e&&(m.debug("Adding callback for top passed",e),v.onTopPassed=e),t.topPassed?m.execute(i,"topPassed"):v.once||m.remove.occurred("topPassed"),void 0===e)return t.topPassed},bottomPassed:function(e){var t=m.get.elementCalculations(),i=e||v.onBottomPassed;if(e&&(m.debug("Adding callback for bottom passed",e),v.onBottomPassed=e),t.bottomPassed?m.execute(i,"bottomPassed"):v.once||m.remove.occurred("bottomPassed"),void 0===e)return t.bottomPassed},passingReverse:function(e){var t=m.get.elementCalculations(),i=e||v.onPassingReverse;if(e&&(m.debug("Adding callback for passing reverse",e),v.onPassingReverse=e),t.passing?v.once||m.remove.occurred("passingReverse"):m.get.occurred("passing")&&m.execute(i,"passingReverse"),void 0!==e)return!t.passing},topVisibleReverse:function(e){var t=m.get.elementCalculations(),i=e||v.onTopVisibleReverse;if(e&&(m.debug("Adding callback for top visible reverse",e),v.onTopVisibleReverse=e),t.topVisible?v.once||m.remove.occurred("topVisibleReverse"):m.get.occurred("topVisible")&&m.execute(i,"topVisibleReverse"),void 0===e)return!t.topVisible},bottomVisibleReverse:function(e){var t=m.get.elementCalculations(),i=e||v.onBottomVisibleReverse;if(e&&(m.debug("Adding callback for bottom visible reverse",e),v.onBottomVisibleReverse=e),t.bottomVisible?v.once||m.remove.occurred("bottomVisibleReverse"):m.get.occurred("bottomVisible")&&m.execute(i,"bottomVisibleReverse"),void 0===e)return!t.bottomVisible},topPassedReverse:function(e){var t=m.get.elementCalculations(),i=e||v.onTopPassedReverse;if(e&&(m.debug("Adding callback for top passed reverse",e),v.onTopPassedReverse=e),t.topPassed?v.once||m.remove.occurred("topPassedReverse"):m.get.occurred("topPassed")&&m.execute(i,"topPassedReverse"),void 0===e)return!t.onTopPassed},bottomPassedReverse:function(e){var t=m.get.elementCalculations(),i=e||v.onBottomPassedReverse;if(e&&(m.debug("Adding callback for bottom passed reverse",e),v.onBottomPassedReverse=e),t.bottomPassed?v.once||m.remove.occurred("bottomPassedReverse"):m.get.occurred("bottomPassed")&&m.execute(i,"bottomPassedReverse"),void 0===e)return!t.bottomPassed},execute:function(e,t){var i=m.get.elementCalculations(),n=m.get.screenCalculations();e=e||!1,e&&(v.continuous?(m.debug("Callback being called continuously",t,i),e.call(k,i,n)):m.get.occurred(t)||(m.debug("Conditions met",t,i),e.call(k,i,n))),m.save.occurred(t)},remove:{fixed:function(){m.debug("Removing fixed position"),C.removeClass(b.fixed).css({position:"",top:"",left:"",zIndex:""}),v.onUnfixed.call(k)},placeholder:function(){m.debug("Removing placeholder content"),o&&o.remove()},occurred:function(e){if(e){var t=m.cache.occurred;void 0!==t[e]&&!0===t[e]&&(m.debug("Callback can now be called again",e),m.cache.occurred[e]=!1)}else m.cache.occurred={}}},save:{calculations:function(){m.verbose("Saving all calculations necessary to determine positioning"),m.save.direction(),m.save.screenCalculations(),m.save.elementCalculations()},occurred:function(e){e&&(void 0!==m.cache.occurred[e]&&!0===m.cache.occurred[e]||(m.verbose("Saving callback occurred",e),m.cache.occurred[e]=!0))},scroll:function(e){e=e+v.offset||q.scrollTop()+v.offset,m.cache.scroll=e},direction:function(){var e,t=m.get.scroll(),i=m.get.lastScroll();return e=t>i&&i?"down":t<i&&i?"up":"static",m.cache.direction=e,m.cache.direction},elementPosition:function(){var e=m.cache.element,t=m.get.screenSize();return m.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=C.offset(),e.width=C.outerWidth(),e.height=C.outerHeight(),m.is.verticallyScrollableContext()&&(e.offset.top+=q.scrollTop()-q.offset().top),m.is.horizontallyScrollableContext()&&(e.offset.left+=q.scrollLeft-q.offset().left),m.cache.element=e,e},elementCalculations:function(){var e=m.get.screenCalculations(),t=m.get.elementPosition();return v.includeMargin?(t.margin={},t.margin.top=parseInt(C.css("margin-top"),10),t.margin.bottom=parseInt(C.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topPassed=e.top>=t.top,t.bottomPassed=e.top>=t.bottom,t.topVisible=e.bottom>=t.top&&!t.bottomPassed,t.bottomVisible=e.bottom>=t.bottom&&!t.topPassed,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=t.topVisible&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),m.cache.element=t,m.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=m.get.scroll();return m.save.direction(),m.cache.screen.top=e,m.cache.screen.bottom=e+m.cache.screen.height,m.cache.screen},screenSize:function(){m.verbose("Saving window position"),m.cache.screen={height:q.height()}},position:function(){m.save.screenSize(),m.save.elementPosition()}},get:{pixelsPassed:function(e){var t=m.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return void 0!==m.cache.occurred&&(m.cache.occurred[e]||!1)},direction:function(){return void 0===m.cache.direction&&m.save.direction(),m.cache.direction},elementPosition:function(){return void 0===m.cache.element&&m.save.elementPosition(),m.cache.element},elementCalculations:function(){return void 0===m.cache.element&&m.save.elementCalculations(),m.cache.element},screenCalculations:function(){return void 0===m.cache.screen&&m.save.screenCalculations(),m.cache.screen},screenSize:function(){return void 0===m.cache.screen&&m.save.screenSize(),m.cache.screen},scroll:function(){return void 0===m.cache.scroll&&m.save.scroll(),m.cache.scroll},lastScroll:function(){return void 0===m.cache.screen?(m.debug("First scroll event, no last scroll could be found"),!1):m.cache.screen.top}},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(void 0===i)return v[t];v[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(void 0===i)return m[t];m[t]=i}},debug:function(){!v.silent&&v.debug&&(v.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,v.name+":"),m.debug.apply(console,arguments)))},verbose:function(){!v.silent&&v.verbose&&v.debug&&(v.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),m.verbose.apply(console,arguments)))},error:function(){v.silent||(m.error=Function.prototype.bind.call(console.error,console,v.name+":"),m.error.apply(console,arguments))},performance:{log:function(e){var t,i,n;v.performance&&(t=(new Date).getTime(),n=s||t,i=t-n,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":i})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=v.name+":",i=0;s=!1,clearTimeout(m.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",a&&(t+=" '"+a+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,n){var o,a,s,l=S;return i=i||u,n=k||n,"string"==typeof t&&void 0!==l&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,n){var r=i!=o?n+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(l[r])&&i!=o)l=l[r];else{if(void 0!==l[r])return a=l[r],!1;if(!e.isPlainObject(l[n])||i==o)return void 0!==l[n]?(a=l[n],!1):(m.error($.method,t),!1);l=l[n]}})),e.isFunction(a)?s=a.apply(n,i):void 0!==a&&(s=a),e.isArray(r)?r.push(s):void 0!==r?r=[r,s]:void 0!==s&&(r=s),a}},c?(void 0===S&&m.initialize(),S.save.scroll(),S.save.calculations(),m.invoke(d)):(void 0!==S&&S.invoke("destroy"),m.initialize())}),void 0!==r?r:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","../grid.base"],e):e(jQuery)}(function(e){e.jgrid=e.jgrid||{},e.jgrid.hasOwnProperty("regional")||(e.jgrid.regional=[]),e.jgrid.regional.cn={defaults:{recordtext:"第{0}到第{1}条　共 {2} 条",emptyrecords:"没有记录！",loadtext:"读取中...",savetext:"保存中...",pgtext:"第{0}页　共{1}页",pgfirst:"第一页",pglast:"最后一页",pgnext:"下一页",pgprev:"上一页",pgrecs:"每页记录数",showhide:"切换 展开 折叠 表格",pagerCaption:"表格::页面设置",pageText:"Page:",recordPage:"每页记录数",nomorerecs:"没有更多记录...",scrollPullup:"加载更多...",scrollPulldown:"刷新...",scrollRefresh:"滚动刷新..."},search:{caption:"搜索...",Find:"查找",Reset:"重置",odata:[{oper:"eq",text:"等于　　"},{oper:"ne",text:"不等于　"},{oper:"lt",text:"小于　　"},{oper:"le",text:"小于等于"},{oper:"gt",text:"大于　　"},{oper:"ge",text:"大于等于"},{oper:"bw",text:"开头是"},{oper:"bn",text:"开头不是"},{oper:"in",text:"属于　　"},{oper:"ni",text:"不属于"},{oper:"ew",text:"结尾是"},{oper:"en",text:"结尾不是"},{oper:"cn",text:"包含　　"},{oper:"nc",text:"不包含"},{oper:"nu",text:"为空"},{oper:"nn",text:"不为空"},{oper:"bt",text:"区间"}],groupOps:[{op:"AND",text:"满足所有条件"},{op:"OR",text:"满足任一条件"}],operandTitle:"单击进行搜索。",resetTitle:"重置搜索条件",addsubgrup:"添加条件组",addrule:"添加条件",delgroup:"删除条件组",delrule:"删除条件"},edit:{addCaption:"添加记录",editCaption:"编辑记录",bSubmit:"提交",bCancel:"取消",bClose:"关闭",saveData:"数据已修改，是否保存？",bYes:"是",bNo:"否",bExit:"取消",msg:{required:"此字段必需",number:"请输入有效数字",minValue:"输值必须大于等于 ",maxValue:"输值必须小于等于 ",email:"这不是有效的e-mail地址",integer:"请输入有效整数",date:"请输入有效时间",url:"无效网址。前缀必须为 ('http://' 或 'https://')",nodefined:" 未定义！",novalue:" 需要返回值！",customarray:"自定义函数需要返回数组！",customfcheck:"必须有自定义函数!"}},view:{caption:"查看记录",bClose:"关闭"},del:{caption:"删除",msg:"删除所选记录？",bSubmit:"删除",bCancel:"取消"},nav:{edittext:"",edittitle:"编辑所选记录",addtext:"",addtitle:"添加新记录",deltext:"",deltitle:"删除所选记录",searchtext:"",searchtitle:"查找",refreshtext:"",refreshtitle:"刷新表格",alertcap:"注意",alerttext:"请选择记录",viewtext:"",viewtitle:"查看所选记录",savetext:"",savetitle:"保存记录",canceltext:"",canceltitle:"取消编辑记录",selectcaption:"操作..."},col:{caption:"选择列",bSubmit:"确定",bCancel:"取消"},errors:{errcap:"错误",nourl:"没有设置url",norecords:"没有需要处理的记录",model:"colNames 和 colModel 长度不等！"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["日","一","二","三","四","五","六","星期日","星期一","星期二","星期三","星期四","星期五","星期六"],monthNames:["一","二","三","四","五","六","七","八","九","十","十一","十二","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],AmPm:["am","pm","上午","下午"],S:function(e){return e<11||e>13?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"Y-m-d",parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:!1,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id"},colmenu:{sortasc:"升序排序",sortdesc:"降序排序",columns:"列",filter:"筛选",grouping:"分类",ungrouping:"取消分类",searchTitle:"查找:",freeze:"冻结",unfreeze:"取消冻结",reorder:"重新排序"}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function($){"use strict";function _pivotfilter(e,t){var i,n,r,o=[];if(!this||"function"!=typeof e||e instanceof RegExp)throw new TypeError;for(r=this.length,i=0;i<r;i++)if(this.hasOwnProperty(i)&&(n=this[i],e.call(t,n,i,this))){o.push(n);break}return o}$.jgrid=$.jgrid||{},$.jgrid.hasOwnProperty("defaults")||($.jgrid.defaults={}),$.extend($.jgrid,{version:"5.1.1",htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},template:function(e){var t,i=$.makeArray(arguments).slice(1),n=i.length;return null==e&&(e=""),e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,r){if(!isNaN(parseInt(r,10)))return i[parseInt(r,10)];for(t=0;t<n;t++)if($.isArray(i[t]))for(var o=i[t],a=o.length;a--;)if(r===o[a].nm)return o[a].v})},msie:function(){return $.jgrid.msiever()>0},msiever:function(){var e=0,t=window.navigator.userAgent,i=t.indexOf("MSIE");return i>0?e=parseInt(t.substring(i+5,t.indexOf(".",i))):navigator.userAgent.match(/Trident\/7\./)&&(e=11),e},getCellIndex:function(e){var t=$(e);return t.is("tr")?-1:(t=(t.is("td")||t.is("th")?t:t.closest("td,th"))[0],$.jgrid.msie()?$.inArray(t,t.parentNode.cells):t.cellIndex)},stripHtml:function(e){e=String(e);var t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return e?(e=e.replace(t,""),e&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):""):e},stripPref:function(e,t){var i=$.type(e);return"string"!==i&&"number"!==i||(e=String(e),t=""!==e?String(t).replace(String(e),""):t),t},useJSON:!0,parse:function(jsonString){var js=jsonString;return"while(1);"===js.substr(0,9)&&(js=js.substr(9)),"/*"===js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),!0===$.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(e,t,i,n){var r,o,a,s=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,l=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,c=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),u="string"==typeof t?t.match(c):null,p=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h=0,g=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t},m=0;if(void 0===n&&(n=$.jgrid.getRegional(this,"formatter.date")),void 0===n.parseRe&&(n.parseRe=/[#%\\\/:_;.,\t\s-]/),n.masks.hasOwnProperty(e)&&(e=n.masks[e]),t&&null!=t)if(isNaN(t-0)||"u"!==String(e).toLowerCase())if(t.constructor===Date)h=t;else if(null!==u)h=new Date(parseInt(u[1],10)),u[3]&&(m=60*Number(u[5])+Number(u[6]),m*="-"===u[4]?1:-1,m-=h.getTimezoneOffset(),h.setTime(Number(Number(h)+60*m*1e3)));else{for("ISO8601Long"===n.srcformat&&"Z"===t.charAt(t.length-1)&&(m-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(n.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(n.parseRe),o=0,a=e.length;o<a;o++){switch(e[o]){case"M":r=$.inArray(t[o],n.monthNames),-1!==r&&r<12&&(t[o]=r+1,f.m=t[o]);break;case"F":r=$.inArray(t[o],n.monthNames,12),-1!==r&&r>11&&(t[o]=r+1-12,f.m=t[o]);break;case"n":e[o]="m";break;case"j":e[o]="d";break;case"a":r=$.inArray(t[o],n.AmPm),-1!==r&&r<2&&t[o]===n.AmPm[r]&&(t[o]=r,f.h=g(t[o],f.h));break;case"A":r=$.inArray(t[o],n.AmPm),-1!==r&&r>1&&t[o]===n.AmPm[r]&&(t[o]=r-2,f.h=g(t[o],f.h));break;case"g":f.h=parseInt(t[o],10)}void 0!==t[o]&&(f[e[o].toLowerCase()]=parseInt(t[o],10))}if(f.f&&(f.m=f.f),0===f.m&&0===f.y&&0===f.d)return"&#160;";f.m=parseInt(f.m,10)-1;var v=f.y;v>=70&&v<=99?f.y=1900+f.y:v>=0&&v<=69&&(f.y=2e3+f.y),h=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u),m>0&&h.setTime(Number(Number(h)+60*m*1e3))}else h=new Date(1e3*parseFloat(t));else h=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u);if(n.userLocalTime&&0===m&&(m-=(new Date).getTimezoneOffset())>0&&h.setTime(Number(Number(h)+60*m*1e3)),void 0===i)return h;n.masks.hasOwnProperty(i)?i=n.masks[i]:i||(i="Y-m-d");var b=h.getHours(),y=h.getMinutes(),w=h.getDate(),x=h.getMonth()+1,j=h.getTimezoneOffset(),_=h.getSeconds(),C=h.getMilliseconds(),q=h.getDay(),S=h.getFullYear(),D=(q+6)%7+1,k=(new Date(S,x-1,w)-new Date(S,0,1))/864e5,T={d:p(w),D:n.dayNames[q],j:w,l:n.dayNames[q+7],N:D,S:n.S(w),w:q,z:k,W:D<5?Math.floor((k+D-1)/7)+1:Math.floor((k+D-1)/7)||((new Date(S-1,0,1).getDay()+6)%7<4?53:52),F:n.monthNames[x-1+12],m:p(x),M:n.monthNames[x-1],n:x,t:"?",L:"?",o:"?",Y:S,y:String(S).substring(2),a:b<12?n.AmPm[0]:n.AmPm[1],A:b<12?n.AmPm[2]:n.AmPm[3],B:"?",g:b%12||12,G:b,h:p(b%12||12),H:p(b),i:p(y),s:p(_),u:C,e:"?",I:"?",O:(j>0?"-":"+")+p(100*Math.floor(Math.abs(j)/60)+Math.abs(j)%60,4),P:"?",T:(String(h).match(l)||[""]).pop().replace(d,""),Z:"?",c:"?",r:"?",U:Math.floor(h/1e3)};return i.replace(s,function(e){return T.hasOwnProperty(e)?T[e]:e.substring(1)})},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(e,t){var i,n,r,o=[];if("function"==typeof t)return t(e);if(void 0===(i=e[t]))try{if("string"==typeof t&&(o=t.split(".")),r=o.length)for(i=e;i&&r--;)n=o.shift(),i=i[n]}catch(e){}return i},getXmlData:function(e,t,i){var n,r="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof t?t(e):r&&r[2]?r[1]?$(r[1],e).attr(r[2]):$(e).attr(r[2]):(n=$(t,e),i?n:n.length>0?$(n).text():void 0)},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),t=e.appendTo("body").find("td").width();return e.remove(),Math.abs(t-5)>.1},isLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},getRegional:function(e,t,i){var n;return void 0!==i?i:(e.p&&e.p.regional&&$.jgrid.regional&&(n=$.jgrid.getAccessor($.jgrid.regional[e.p.regional]||{},t)),void 0===n&&(n=$.jgrid.getAccessor($.jgrid,t)),n)},isMobile:function(){try{return!!/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}},cell_width:!0,ajaxOptions:{},from:function(source){var $t=this,QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"==typeof d[0]),this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+")"),_trim&&t.push(")"),_usecase||t.push(".toLowerCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?e:e.toLowerCase()},this._funcLoop=function(e){var t=[];return $.each(_data,function(i,n){t.push(e(n))}),t},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_useProperties?_lastCommand(_lastField,e):_lastCommand(e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,i){var n=Object.prototype.toString;return void 0===i&&(i=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===n.call(e)&&"[object Date]"===n.call(t)?e<t?-i:e>t?i:0:(_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-i:e>t?i:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var i=_sorting[t].by,n=_sorting[t].dir,r=_sorting[t].type,o=_sorting[t].datefmt,a=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,i,n,r,o,a);t++;var s,l,d,c=self._getGroup(e,i,n,r,o),u=[];for(s=0;s<c.length;s++)for(d=self._doSort(c[s].items,t),l=0;l<d.length;l++)u.push(d[l]);return u},this._getOrder=function(e,t,i,n,r,o){var a,s,l,d,c=[],u=[],p="a"===i?1:-1;void 0===n&&(n="text"),d="float"===n||"number"===n||"currency"===n||"numeric"===n?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===n||"integer"===n?function(e){return e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===n||"datetime"===n?function(e){return $.jgrid.parseDate.call($t,r,e).getTime()}:$.isFunction(n)?n:function(e){return e=e?$.trim(String(e)):"",_usecase?e:e.toLowerCase()},$.each(e,function(e,i){s=""!==t?$.jgrid.getAccessor(i,t):i,void 0===s&&(s=""),s=d(s,i),u.push({vSort:s,index:e})}),$.isFunction(o)?u.sort(function(e,t){return o.call(this,e.vSort,t.vSort,p,e,t)}):u.sort(function(e,t){return self._compare(e.vSort,t.vSort,p)}),l=0;for(var f=e.length;l<f;)a=u[l].index,c.push(e[a]),l++;return c},this._getGroup=function(e,t,i,n,r){var o,a=[],s=null,l=null;return $.each(self._getOrder(e,t,i,n,r),function(e,i){o=$.jgrid.getAccessor(i,t),null==o&&(o=""),self._equals(l,o)||(l=o,null!==s&&a.push(s),s=self._group(t,o)),s.items.push(i)}),null!==s&&a.push(s),a},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(e){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(e)){var t=[];return $.each(_data,function(i,n){t.push(e(n))}),t}return _data},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),_data.length>0)},this.andNot=function(e,t,i){return _negate=!_negate,self.and(e,t,i)},this.orNot=function(e,t,i){return _negate=!_negate,self.or(e,t,i)},this.not=function(e,t,i){return self.andNot(e,t,i)},this.and=function(e,t,i){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,i)},this.or=function(e,t,i){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,i)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},
this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,i,n,r){var o;o=_useProperties?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",void 0===i&&(i=null);var a=i,s=void 0===r.stype?"text":r.stype;if(null!==i)switch(s){case"int":case"integer":a=isNaN(Number(a))||""===a?"0":a,o="parseInt("+o+",10)",a="parseInt("+a+",10)";break;case"float":case"number":case"numeric":a=String(a).replace(_stripNum,""),a=isNaN(Number(a))||""===a?"0":a,o="parseFloat("+o+")",a="parseFloat("+a+")";break;case"date":case"datetime":a=String($.jgrid.parseDate.call($t,r.srcfmt||"Y-m-d",a).getTime()),o='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID($t.p.id)+'")[0],"'+r.srcfmt+'",'+o+").getTime()";break;default:o=self._getStr(o),a=self._getStr('"'+self._toStr(a)+'"')}return self._append(o+" "+n+" "+a),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,i){return self._compareValues(self.equals,e,t,"==",i)},this.notEquals=function(e,t,i){return self._compareValues(self.equals,e,t,"!==",i)},this.isNull=function(e,t,i){return self._compareValues(self.equals,e,null,"===",i)},this.greater=function(e,t,i){return self._compareValues(self.greater,e,t,">",i)},this.less=function(e,t,i){return self._compareValues(self.less,e,t,"<",i)},this.greaterOrEquals=function(e,t,i){return self._compareValues(self.greaterOrEquals,e,t,">=",i)},this.lessOrEquals=function(e,t,i){return self._compareValues(self.lessOrEquals,e,t,"<=",i)},this.startsWith=function(e,t){var i=null==t?e:t,n=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+n+") == "+self._getStr('"'+self._toStr(t)+'"')):(null!=t&&(n=_trim?$.trim(t.toString()).length:t.toString().length),self._append(self._getStr("this")+".substr(0,"+n+") == "+self._getStr('"'+self._toStr(e)+'"'))),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var i=null==t?e:t,n=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+n+","+n+') == "'+self._toStr(t)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(e)+'".length,"'+self._toStr(e)+'".length) == "'+self._toStr(e)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+self._toStr(t)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(e)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,i,n){return self._hasData()?self._getGroup(_data,e,t,i,n):null},this.orderBy=function(e,t,i,n,r){return t=null==t?"a":$.trim(t.toString().toLowerCase()),null==i&&(i="text"),null==n&&(n="Y-m-d"),null==r&&(r=!1),"desc"!==t&&"descending"!==t||(t="d"),"asc"!==t&&"ascending"!==t||(t="a"),_sorting.push({by:e,dir:t,type:i,datefmt:n,sfunc:r}),self},self};return new QueryObject(source,null)},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)},clearBeforeUnload:function(e){var t,i=$("#"+$.jgrid.jqID(e))[0];if(i.grid){t=i.grid,$.isFunction(t.emptyRows)&&t.emptyRows.call(i,!0,!0),$(document).off("mouseup.jqGrid"+i.p.id),$(t.hDiv).off("mousemove"),$(i).off();var n,r=t.headers.length,o=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p"];for(n=0;n<r;n++)t.headers[n].el=null;for(n in t)t.hasOwnProperty(n)&&(t[n]=null);for(n in i.p)i.p.hasOwnProperty(n)&&(i.p[n]=$.isArray(i.p[n])?[]:null);for(r=o.length,n=0;n<r;n++)i.hasOwnProperty(o[n])&&(i[o[n]]=null,delete i[o[n]])}},gridUnload:function(e){if(e){e=$.trim(e),0===e.indexOf("#")&&(e=e.substring(1));var t=$("#"+$.jgrid.jqID(e))[0];if(t.grid){var i={id:$(t).attr("id"),cl:$(t).attr("class")};t.p.pager&&$(t.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var n=document.createElement("table");n.className=i.cl;var r=$.jgrid.jqID(t.id);$(n).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+r),1===$(t.p.pager).parents("#gbox_"+r).length&&$(t.p.pager).insertBefore("#gbox_"+r),$.jgrid.clearBeforeUnload(e),$("#gbox_"+r).remove(),$(n).attr({id:i.id}),$("#alertmod_"+$.jgrid.jqID(e)).remove()}}},gridDestroy:function(e){if(e){e=$.trim(e),0===e.indexOf("#")&&(e=e.substring(1));var t=$("#"+$.jgrid.jqID(e))[0];if(t.grid){t.p.pager&&$(t.p.pager).remove();try{$.jgrid.clearBeforeUnload(e),$("#gbox_"+$.jgrid.jqID(e)).remove()}catch(e){}}}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control",filter_input:"form-control",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",icon_move:"glyphicon-move"}}}}),$.fn.jqGrid=function(e){if("string"==typeof e){var t=$.jgrid.getMethod(e);if(!t)throw"jqGrid - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}return this.each(function(){if(!this.grid){var t;null!=e&&void 0!==e.data&&(t=e.data,e.data=[]);var i=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[10,20,50,100,500],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",responsive:!1,restoreCellonFail:!0,colFilters:{},colMenu:!1},$.jgrid.defaults,e);void 0!==t&&(i.data=t,e.data=t);var n=this,r={headers:[],cols:[],footers:[],dragStart:function(e,t,r){var o=$(this.bDiv).offset().left;this.resizing={idx:e,startX:t.pageX,sOL:t.pageX-o},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(i.id),"#gbox_"+$.jgrid.jqID(i.id)),this.curGbox.css({display:"block",left:t.pageX-o,top:r[1],height:r[2]}),$(n).triggerHandler("jqGridResizeStart",[t,e]),$.isFunction(i.resizeStart)&&i.resizeStart.call(n,t,e),document.onselectstart=function(){return!1}},dragMove:function(e){if(this.resizing){var t,n,r=e.pageX-this.resizing.startX,o=this.headers[this.resizing.idx],a="ltr"===i.direction?o.width+r:o.width-r;a>33&&(this.curGbox.css({left:this.resizing.sOL+r}),!0===i.forceFit?(t=this.headers[this.resizing.idx+i.nv],(n="ltr"===i.direction?t.width-r:t.width+r)>i.minColWidth&&(o.newWidth=a,t.newWidth=n)):(this.newWidth="ltr"===i.direction?i.tblwidth+r:i.tblwidth-r,o.newWidth=a))}},dragEnd:function(e){if(this.hDiv.style.cursor="default",this.resizing){var t=this.resizing.idx,r=this.headers[t].newWidth||this.headers[t].width;r=parseInt(r,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(i.id)).css("display","none"),i.colModel[t].width=r,this.headers[t].width=r,this.headers[t].el.style.width=r+"px",this.cols[t].style.width=r+"px",this.footers.length>0&&(this.footers[t].style.width=r+"px"),!0===i.forceFit?(r=this.headers[t+i.nv].newWidth||this.headers[t+i.nv].width,this.headers[t+i.nv].width=r,this.headers[t+i.nv].el.style.width=r+"px",this.cols[t+i.nv].style.width=r+"px",this.footers.length>0&&(this.footers[t+i.nv].style.width=r+"px"),i.colModel[t+i.nv].width=r):(i.tblwidth=this.newWidth||i.tblwidth,$("table:first",this.bDiv).css("width",i.tblwidth+"px"),$("table:first",this.hDiv).css("width",i.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,i.footerrow&&($("table:first",this.sDiv).css("width",i.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),e&&($(n).triggerHandler("jqGridResizeStop",[r,t]),$.isFunction(i.resizeStop)&&i.resizeStop.call(n,r,t))}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){r.timer&&clearTimeout(r.timer),r.timer=null;var e=$(r.bDiv).height();if(e){var t,o,a=$("table:first",r.bDiv);if(a[0].rows.length)try{t=a[0].rows[1],o=t?$(t).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(e){o=r.prevRowHeight}if(o){r.prevRowHeight=o;var s,l,d,c=i.rowNum,u=r.scrollTop=r.bDiv.scrollTop,p=Math.round(a.position().top)-u,f=p+a.height(),h=o*c;if(f<e&&p<=0&&(void 0===i.lastpage||(parseInt((f+u+h-1)/h,10)||0)<=i.lastpage)&&(l=parseInt((e-f+h-1)/h,10)||1,f>=0||l<2||!0===i.scroll?(s=(Math.round((f+u)/h)||0)+1,p=-1):p=1),p>0&&(s=(parseInt(u/h,10)||0)+1,l=(parseInt((u+e)/h,10)||0)+2-s,d=!0),l){if(i.lastpage&&(s>i.lastpage||1===i.lastpage||s===i.page&&s===i.lastpage))return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,i.scrollTimeout):(i.page=s,d&&(r.selectionPreserver(a[0]),r.emptyRows.call(a[0],!1,!1)),r.populate(l)),i.scrollPopUp&&null!=i.lastpage&&($("#scroll_g"+i.id).show().html($.jgrid.template($.jgrid.getRegional(n,"defaults.pgtext",i.pgtext),i.page,i.lastpage)).css({top:i.scrollTopOffset+u*((parseInt(i.height,10)-45)/(parseInt(o,10)*parseInt(i.records,10)))+"px",left:i.scrollLeftOffset}),$(this).mouseout(function(){$("#scroll_g"+i.id).hide()}))}}}},scrollGrid:function(e){if(i.scroll){var t=r.bDiv.scrollTop;void 0===r.scrollTop&&(r.scrollTop=0),t!==r.scrollTop&&(r.scrollTop=t,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,i.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft,i.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft),i.frozenColumns&&$(r.fbDiv).scrollTop(r.bDiv.scrollTop),e&&e.stopPropagation()},selectionPreserver:function(e){var t=e.p,i=t.selrow,n=t.selarrrow?$.makeArray(t.selarrrow):null,r=e.grid.bDiv.scrollLeft,o=function(){var a;if(t.selrow=null,t.selarrrow=[],t.multiselect&&n&&n.length>0)for(a=0;a<n.length;a++)n[a]!==i&&$(e).jqGrid("setSelection",n[a],!1,null);i&&$(e).jqGrid("setSelection",i,!1,null),e.grid.bDiv.scrollLeft=r,$(e).off(".selectionPreserver",o)};$(e).on("jqGridGridComplete.selectionPreserver",o)}};if("TABLE"!==this.tagName.toUpperCase()||null==this.id)return void alert("Element is not a table or has no id!");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");var o,a,s,l=0;for(a in $.jgrid.regional)$.jgrid.regional.hasOwnProperty(a)&&(0===l&&(o=a),l++);if(1===l&&o!==i.regional&&(i.regional=o),$(this).empty().attr("tabindex","0"),this.p=i,this.p.useProp=!!$.fn.prop,0===this.p.colNames.length)for(l=0;l<this.p.colModel.length;l++)this.p.colNames[l]=this.p.colModel[l].label||this.p.colModel[l].name;if(this.p.colNames.length!==this.p.colModel.length)return void alert($.jgrid.getRegional(this,"errors.model"));var d,c=$.jgrid.getMethod("getStyleUI"),u=n.p.styleUI+".common",p=c(u,"disabled",!0),f=c(u,"highlight",!0),h=c(u,"hover",!0),g=c(u,"cornerall",!0),m=c(u,"icon_base",!0),v=$.jgrid.styleUI[n.p.styleUI||"jQueryUI"].colmenu,b=$.jgrid.msie(),y=[],w=[],x=[];u=n.p.styleUI+".base",d=$("<div "+c(u,"viewBox",!1,"ui-jqgrid-view")+" role='grid'></div>"),n.p.direction=$.trim(n.p.direction.toLowerCase()),n.p._ald=!1,-1===$.inArray(n.p.direction,["ltr","rtl"])&&(n.p.direction="ltr"),s=n.p.direction,$(d).insertBefore(this),$(this).appendTo(d);var j=$("<div "+c(u,"entrieBox",!1,"ui-jqgrid")+"></div>");$(j).attr({id:"gbox_"+this.id,dir:s}).insertBefore(d),$(d).attr("id","gview_"+this.id).appendTo(j),$("<div "+c(n.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(d),$("<div "+c(u,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(n,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(d),$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var _,C=["shiftKey","altKey","ctrlKey"],q=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},S=function(e,t,i,o,a,s){var l,d,c=n.p.colModel[e],u=c.align,p='style="',f=c.classes,h=c.name,g=[];return u&&(p+="text-align:"+u+";"),!0===c.hidden&&(p+="display:none;"),0===t?p+="width: "+r.headers[e].width+"px;":($.isFunction(c.cellattr)||"string"==typeof c.cellattr&&null!=$.jgrid.cellattr&&$.isFunction($.jgrid.cellattr[c.cellattr]))&&(l=$.isFunction(c.cellattr)?c.cellattr:$.jgrid.cellattr[c.cellattr],(d=l.call(n,a,i,o,c,s))&&"string"==typeof d&&(d=d.replace(/style/i,"style").replace(/title/i,"title"),d.indexOf("title")>-1&&(c.title=!1),d.indexOf("class")>-1&&(f=void 0),g=d.replace(/\-style/g,"-sti").split(/style/),2===g.length?(g[1]=$.trim(g[1].replace(/\-sti/g,"-style").replace("=","")),0!==g[1].indexOf("'")&&0!==g[1].indexOf('"')||(g[1]=g[1].substring(1)),p+=g[1].replace(/'/gi,'"')):p+='"')),g.length||(g[0]="",p+='"'),p+=(void 0!==f?' class="'+f+'"':"")+(c.title&&i?' title="'+$.jgrid.stripHtml(i)+'"':""),(p+=' aria-describedby="'+n.p.id+"_"+h+'"')+g[0]},D=function(e){return null==e||""===e?"&#160;":n.p.autoencode?$.jgrid.htmlEncode(e):String(e)},k=function(e,t,i,r,o){var a,s=n.p.colModel[i];if(void 0!==s.formatter){e=""!==String(n.p.idPrefix)?$.jgrid.stripPref(n.p.idPrefix,e):e;var l={rowId:e,colModel:s,gid:n.p.id,pos:i,styleUI:n.p.styleUI};a=$.isFunction(s.formatter)?s.formatter.call(n,t,l,r,o):$.fmatter?$.fn.fmatter.call(n,s.formatter,t,l,r,o):D(t)}else a=D(t);return a},T=function(e,t,i,n,r,o){var a;return a=k(e,t,i,r,"add"),'<td role="gridcell" '+S(i,n,a,r,e,o)+">"+a+"</td>"},I=function(e,t,i,r,o){var a='<input role="checkbox" type="checkbox" id="jqg_'+n.p.id+"_"+e+'" '+o+' name="jqg_'+n.p.id+"_"+e+'"'+(r?'checked="checked"':"")+"/>";return'<td role="gridcell" '+S(t,i,"",null,e,!0)+">"+a+"</td>"},F=function(e,t,i,n,r){var o=(parseInt(i,10)-1)*parseInt(n,10)+1+t;return'<td role="gridcell" '+r+" "+S(e,t,o,null,t,!0)+">"+o+"</td>"},A=function(e){var t,i,r=[],o=0;for(i=0;i<n.p.colModel.length;i++)t=n.p.colModel[i],"cb"!==t.name&&"subgrid"!==t.name&&"rn"!==t.name&&(r[o]="local"===e?t.name:"xml"===e||"xmlstring"===e?t.xmlmap||t.name:t.jsonmap||t.name,!1!==n.p.keyName&&!0===t.key&&(n.p.keyName=r[o]),o++);return r},R=function(e){var t=n.p.remapColumns;return t&&t.length||(t=$.map(n.p.colModel,function(e,t){return t})),e&&(t=$.map(t,function(t){return t<e?null:t-e})),t},E=function(e,t){var i;this.p.deepempty?$(this.rows).slice(1).remove():(i=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(i)),e&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),!0===t&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},P=function(){var e,t,i,r,o,a,s,l,d,c,u,p=n.p,f=p.data,h=f.length,g=p.localReader,m=p.colModel,v=g.cell,b=(!0===p.multiselect?1:0)+(!0===p.subGrid?1:0)+(!0===p.rownumbers?1:0),y=p.scroll?$.jgrid.randId():1;if("local"===p.datatype&&!0===g.repeatitems)for(d=R(b),c=A("local"),r=!1===p.keyIndex?$.isFunction(g.id)?g.id.call(n,f):g.id:p.keyIndex,e=0;e<h;e++){for(i=f[e],o=$.jgrid.getAccessor(i,r),void 0===o&&("number"==typeof r&&null!=m[r+b]&&(o=$.jgrid.getAccessor(i,m[r+b].name)),void 0===o&&(o=y+e,v&&(a=$.jgrid.getAccessor(i,v)||i,o=null!=a&&void 0!==a[r]?a[r]:o,a=null))),l={},l[g.id]=o,v&&(i=$.jgrid.getAccessor(i,v)||i),u=$.isArray(i)?d:c,t=0;t<u.length;t++)s=$.jgrid.getAccessor(i,u[t]),l[m[t+b].name]=s;$.extend(!0,f[e],l)}},O=function(){var e,t,i,r=n.p.data.length;for(e=!1===n.p.keyName||!0===n.p.loadonce?n.p.localReader.id:n.p.keyName,n.p._index=[],t=0;t<r;t++)i=$.jgrid.getAccessor(n.p.data[t],e),void 0===i&&(i=String(t+1)),n.p._index[i]=t},G=function(e,t,i,r,o){var a,s="-1",l="",d=t?"display:none;":"",c=$(n).triggerHandler("jqGridRowAttr",[r,o,e]);if("object"!=typeof c&&(c=$.isFunction(n.p.rowattr)?n.p.rowattr.call(n,r,o,e):"string"==typeof n.p.rowattr&&null!=$.jgrid.rowattr&&$.isFunction($.jgrid.rowattr[n.p.rowattr])?$.jgrid.rowattr[n.p.rowattr].call(n,r,o,e):{}),!$.isEmptyObject(c)){c.hasOwnProperty("id")&&(e=c.id,delete c.id),c.hasOwnProperty("tabindex")&&(s=c.tabindex,delete c.tabindex),c.hasOwnProperty("style")&&(d+=c.style,delete c.style),c.hasOwnProperty("class")&&(i+=" "+c.class,delete c.class);try{delete c.role}catch(e){}for(a in c)c.hasOwnProperty(a)&&(l+=" "+a+"="+c[a])}return'<tr role="row" id="'+e+'" tabindex="'+s+'" class="'+i+'"'+(""===d?"":' style="'+d+'"')+l+">"},N=function(e,t,i,r){var o=new Date,a="local"!==n.p.datatype&&n.p.loadonce||"xmlstring"===n.p.datatype,s=n.p.xmlReader,l="local"===n.p.datatype?"local":"xml";if(a&&(n.p.data=[],n.p._index={},n.p.localReader.id="_id_"),n.p.reccount=0,$.isXMLDoc(e)){-1!==n.p.treeANode||n.p.scroll?t=t>1?t:1:(E.call(n,!1,!0),t=1);var d,p,f,h,g,m,v,b,y,w,x=$(n),j=0,_=!0===n.p.multiselect?1:0,C=0,S=!0===n.p.rownumbers?1:0,D=[],k={},P=[],O=!0===n.p.altRows?n.p.altclass:"",N=c(u,"rowBox",!0,"jqgrow ui-row-"+n.p.direction);!0===n.p.subGrid&&(C=1,h=$.jgrid.getMethod("addSubGridCell")),s.repeatitems||(D=A(l)),g=!1===n.p.keyName?$.isFunction(s.id)?s.id.call(n,e):s.id:n.p.keyName,m=-1===String(g).indexOf("[")?D.length?function(e,t){return $(g,e).text()||t}:function(e,t){return $(s.cell,e).eq(g).text()||t}:function(e,t){return e.getAttribute(g.replace(/[\[\]]/g,""))||t},n.p.userData={},n.p.page=q($.jgrid.getXmlData(e,s.page),n.p.page),n.p.lastpage=q($.jgrid.getXmlData(e,s.total),1),n.p.records=q($.jgrid.getXmlData(e,s.records)),$.isFunction(s.userdata)?n.p.userData=s.userdata.call(n,e)||{}:$.jgrid.getXmlData(e,s.userdata,!0).each(function(){n.p.userData[this.getAttribute("name")]=$(this).text()});var M=$.jgrid.getXmlData(e,s.root,!0);M=$.jgrid.getXmlData(M,s.row,!0),M||(M=[]);var z,L=M.length,H=0,U=[],B=parseInt(n.p.rowNum,10),V=n.p.scroll?$.jgrid.randId():1,W=$("#"+$.jgrid.jqID(n.p.id)+" tbody:first");if(L>0&&n.p.page<=0&&(n.p.page=1),M&&L){r&&(B*=r+1);var Q,X=$.isFunction(n.p.afterInsertRow),Y=!1,K=S?c(u,"rownumBox",!1,"jqgrid-rownum"):"",J=_?c(u,"multiBox",!1,"cbox"):"";for(n.p.grouping&&(Y=!0===n.p.groupingView.groupCollapse,Q=$.jgrid.getMethod("groupingPrepare"));H<L;){b=M[H],y=m(b,V+H),y=n.p.idPrefix+y,z=0===t?0:t+1,w=N+((z+H)%2==1?" "+O:"");var Z=P.length;if(P.push(""),S&&P.push(F(0,H,n.p.page,n.p.rowNum,K)),_&&P.push(I(y,S,H,!1,J)),C&&P.push(h.call(x,_+S,H+t)),s.repeatitems){v||(v=R(_+C+S));var ee=$.jgrid.getXmlData(b,s.cell,!0);$.each(v,function(e){var i=ee[this];if(!i)return!1;f=i.textContent||i.text,k[n.p.colModel[e+_+C+S].name]=f,P.push(T(y,f,e+_+C+S,H+t,b,k))})}else for(d=0;d<D.length;d++)f=$.jgrid.getXmlData(b,D[d]),k[n.p.colModel[d+_+C+S].name]=f,P.push(T(y,f,d+_+C+S,H+t,b,k));if(P[Z]=G(y,Y,w,k,b),P.push("</tr>"),n.p.grouping&&(U.push(P),n.p.groupingView._locgr||Q.call(x,k,H),P=[]),(a||!0===n.p.treeGrid&&!n.p._ald)&&(k._id_=$.jgrid.stripPref(n.p.idPrefix,y),n.p.data.push(k),n.p._index[k._id_]=n.p.data.length-1),!1===n.p.gridview&&(W.append(P.join("")),x.triggerHandler("jqGridAfterInsertRow",[y,k,b]),X&&n.p.afterInsertRow.call(n,y,k,b),P=[]),k={},j++,H++,j===B)break}}if(!0===n.p.gridview&&(p=n.p.treeANode>-1?n.p.treeANode:0,n.p.grouping?a||(x.jqGrid("groupingRender",U,n.p.colModel.length,n.p.page,B),U=null):!0===n.p.treeGrid&&p>0?$(n.rows[p]).after(P.join("")):(W.append(P.join("")),n.grid.cols=n.rows[0].cells)),n.p.totaltime=new Date-o,P=null,!0===n.p.subGrid)try{x.jqGrid("addSubGrid",_+S)}catch(e){}if(j>0&&0===n.p.records&&(n.p.records=L),!0===n.p.treeGrid)try{x.jqGrid("setTreeNode",p+1,j+p+1)}catch(e){}if(n.p.reccount=j,n.p.treeANode=-1,n.p.userDataOnFooter&&x.jqGrid("footerData","set",n.p.userData,!0),a&&(n.p.records=L,n.p.lastpage=Math.ceil(L/B)),i||n.updatepager(!1,!0),a){for(;j<L;){if(b=M[j],y=m(b,j+V),y=n.p.idPrefix+y,s.repeatitems){v||(v=R(_+C+S));var te=$.jgrid.getXmlData(b,s.cell,!0);$.each(v,function(e){var t=te[this];if(!t)return!1;f=t.textContent||t.text,k[n.p.colModel[e+_+C+S].name]=f})}else for(d=0;d<D.length;d++)f=$.jgrid.getXmlData(b,D[d]),k[n.p.colModel[d+_+C+S].name]=f;k._id_=$.jgrid.stripPref(n.p.idPrefix,y),n.p.grouping&&Q.call(x,k,j),n.p.data.push(k),n.p._index[k._id_]=n.p.data.length-1,k={},j++}n.p.grouping&&(n.p.groupingView._locgr=!0,x.jqGrid("groupingRender",U,n.p.colModel.length,n.p.page,B),U=null)}}},M=function(e,t,i,r){var o=new Date;if(e){-1!==n.p.treeANode||n.p.scroll?t=t>1?t:1:(E.call(n,!1,!0),t=1);var a,s,l="local"!==n.p.datatype&&n.p.loadonce||"jsonstring"===n.p.datatype;l&&(n.p.data=[],n.p._index={},n.p.localReader.id="_id_"),n.p.reccount=0,"local"===n.p.datatype?(a=n.p.localReader,s="local"):(a=n.p.jsonReader,s="json");var d,p,h,g,m,v,b,y,w,x,j,_,C=$(n),S=0,D=[],k=n.p.multiselect?1:0,P=!0===n.p.subGrid?1:0,O=!0===n.p.rownumbers?1:0,N=R(k+P+O),M=A(s),z={},L=[],H=!0===n.p.altRows?n.p.altclass:"",U=c(u,"rowBox",!0,"jqgrow ui-row-"+n.p.direction);n.p.page=q($.jgrid.getAccessor(e,a.page),n.p.page),n.p.lastpage=q($.jgrid.getAccessor(e,a.total),1),n.p.records=q($.jgrid.getAccessor(e,a.records)),n.p.userData=$.jgrid.getAccessor(e,a.userdata)||{},P&&(m=$.jgrid.getMethod("addSubGridCell")),w=!1===n.p.keyName?$.isFunction(a.id)?a.id.call(n,e):a.id:n.p.keyName,y=$.jgrid.getAccessor(e,a.root),null==y&&$.isArray(e)&&(y=e),y||(y=[]),b=y.length,p=0,b>0&&n.p.page<=0&&(n.p.page=1);var B,V,W=parseInt(n.p.rowNum,10),Q=n.p.scroll?$.jgrid.randId():1,X=!1;r&&(W*=r+1),"local"!==n.p.datatype||n.p.deselectAfterSort||(X=!0);var Y,K=$.isFunction(n.p.afterInsertRow),J=[],Z=!1,ee=$("#"+$.jgrid.jqID(n.p.id)+" tbody:first"),te=O?c(u,"rownumBox",!1,"jqgrid-rownum"):"",ie=k?c(u,"multiBox",!1,"cbox"):"";for(n.p.grouping&&(Z=!0===n.p.groupingView.groupCollapse,Y=$.jgrid.getMethod("groupingPrepare"));p<b;){if(g=y[p],void 0===(j=$.jgrid.getAccessor(g,w))&&("number"==typeof w&&null!=n.p.colModel[w+k+P+O]&&(j=$.jgrid.getAccessor(g,n.p.colModel[w+k+P+O].name)),void 0===j&&(j=Q+p,0===D.length&&a.cell))){var ne=$.jgrid.getAccessor(g,a.cell)||g;j=null!=ne&&void 0!==ne[w]?ne[w]:j,ne=null}j=n.p.idPrefix+j,B=1===t?0:t,_=U+((B+p)%2==1?" "+H:""),X&&(V=n.p.multiselect?-1!==$.inArray(j,n.p.selarrrow):j===n.p.selrow);var re=L.length;for(L.push(""),O&&L.push(F(0,p,n.p.page,n.p.rowNum,te)),k&&L.push(I(j,O,p,V,ie)),P&&L.push(m.call(C,k+O,p+t)),v=M,a.repeatitems&&(a.cell&&(g=$.jgrid.getAccessor(g,a.cell)||g),$.isArray(g)&&(v=N)),h=0;h<v.length;h++)d=$.jgrid.getAccessor(g,v[h]),z[n.p.colModel[h+k+P+O].name]=d,L.push(T(j,d,h+k+P+O,p+t,g,z));if(_+=V?" "+f:"",L[re]=G(j,Z,_,z,g),L.push("</tr>"),n.p.grouping&&(J.push(L),n.p.groupingView._locgr||Y.call(C,z,p),L=[]),(l||!0===n.p.treeGrid&&!n.p._ald)&&(z._id_=$.jgrid.stripPref(n.p.idPrefix,j),n.p.data.push(z),n.p._index[z._id_]=n.p.data.length-1),!1===n.p.gridview&&(ee.append(L.join("")),C.triggerHandler("jqGridAfterInsertRow",[j,z,g]),K&&n.p.afterInsertRow.call(n,j,z,g),L=[]),z={},S++,p++,S===W)break}if(!0===n.p.gridview&&(x=n.p.treeANode>-1?n.p.treeANode:0,n.p.grouping?l||(C.jqGrid("groupingRender",J,n.p.colModel.length,n.p.page,W),J=null):!0===n.p.treeGrid&&x>0?$(n.rows[x]).after(L.join("")):(ee.append(L.join("")),n.grid.cols=n.rows[0].cells)),n.p.totaltime=new Date-o,L=null,!0===n.p.subGrid)try{C.jqGrid("addSubGrid",k+O)}catch(e){}if(S>0&&0===n.p.records&&(n.p.records=b),!0===n.p.treeGrid)try{C.jqGrid("setTreeNode",x+1,S+x+1)}catch(e){}if(n.p.reccount=S,n.p.treeANode=-1,n.p.userDataOnFooter&&C.jqGrid("footerData","set",n.p.userData,!0),l&&(n.p.records=b,n.p.lastpage=Math.ceil(b/W)),i||n.updatepager(!1,!0),l){for(;S<b&&y[S];){if(g=y[S],void 0===(j=$.jgrid.getAccessor(g,w))&&("number"==typeof w&&null!=n.p.colModel[w+k+P+O]&&(j=$.jgrid.getAccessor(g,n.p.colModel[w+k+P+O].name)),void 0===j&&(j=Q+S,0===D.length&&a.cell))){var oe=$.jgrid.getAccessor(g,a.cell)||g;j=null!=oe&&void 0!==oe[w]?oe[w]:j,oe=null}if(g){for(j=n.p.idPrefix+j,v=M,a.repeatitems&&(a.cell&&(g=$.jgrid.getAccessor(g,a.cell)||g),$.isArray(g)&&(v=N)),h=0;h<v.length;h++)z[n.p.colModel[h+k+P+O].name]=$.jgrid.getAccessor(g,v[h]);z._id_=$.jgrid.stripPref(n.p.idPrefix,j),n.p.grouping&&Y.call(C,z,S),n.p.data.push(z),n.p._index[z._id_]=n.p.data.length-1,z={}}S++}n.p.grouping&&(n.p.groupingView._locgr=!0,C.jqGrid("groupingRender",J,n.p.colModel.length,n.p.page,W),J=null)}}},z=function(){function e(t){var i,r,o,a,s,l,c=0;if(null!=t.groups){for(r=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase(),r&&v.orBegin(),
i=0;i<t.groups.length;i++){c>0&&r&&v.or();try{e(t.groups[i])}catch(e){alert(e)}c++}r&&v.orEnd()}if(null!=t.rules)try{for(o=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase(),o&&v.orBegin(),i=0;i<t.rules.length;i++)s=t.rules[i],a=t.groupOp.toString().toUpperCase(),m[s.op]&&s.field&&(c>0&&a&&"OR"===a&&(v=v.or()),l=d[s.field],"date"===l.stype&&l.srcfmt&&l.newfmt&&l.srcfmt!==l.newfmt&&(s.data=$.jgrid.parseDate.call(n,l.newfmt,s.data,l.srcfmt)),v=m[s.op](v,a)(s.field,s.data,d[s.field])),c++;o&&v.orEnd()}catch(e){alert(e)}}var t,i,r,o,a=n.p.multiSort?[]:"",s=[],l=!1,d={},c=[],u=[];if($.isArray(n.p.data)){var p,f,h,g=!!n.p.grouping&&n.p.groupingView;if($.each(n.p.colModel,function(){if(i=this.sorttype||"text",h=this.index||this.name,"date"===i||"datetime"===i?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(t=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.getRegional(n,"formatter.date.srcformat"),r=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.getRegional(n,"formatter.date.newformat")):t=r=this.datefmt||"Y-m-d",d[h]={stype:i,srcfmt:t,newfmt:r,sfunc:this.sortfunc||null}):d[h]={stype:i,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},n.p.grouping)for(f=0,p=g.groupField.length;f<p;f++)this.name===g.groupField[f]&&(c[f]=d[h],u[f]=h);n.p.multiSort||l||h!==n.p.sortname||(a=h,l=!0)}),n.p.multiSort&&(a=y,s=w),n.p.treeGrid&&n.p._sort)return void $(n).jqGrid("SortTree",a,n.p.sortorder,d[a].stype||"text",d[a].srcfmt||"");var m={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().equals:e.andNot().equals},in:function(e){return e.equals},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},v=$.jgrid.from.call(n,n.p.data);if(n.p.ignoreCase&&(v=v.ignoreCase()),!0===n.p.search){var b=n.p.postData.filters;if(b)"string"==typeof b&&(b=$.jgrid.parse(b)),e(b);else try{o=d[n.p.postData.searchField],"date"===o.stype&&o.srcfmt&&o.newfmt&&o.srcfmt!==o.newfmt&&(n.p.postData.searchString=$.jgrid.parseDate.call(n,o.newfmt,n.p.postData.searchString,o.srcfmt)),v=m[n.p.postData.searchOper](v)(n.p.postData.searchField,n.p.postData.searchString,d[n.p.postData.searchField])}catch(e){}}else n.p.treeGrid&&"nested"===n.p.treeGridModel&&v.orderBy(n.p.treeReader.left_field,"asc","integer","",null);if(n.p.treeGrid&&"adjacency"===n.p.treeGridModel&&(p=0,a=null),n.p.grouping)for(f=0;f<p;f++)v.orderBy(u[f],g.groupOrder[f],c[f].stype,c[f].srcfmt);n.p.multiSort?$.each(a,function(e){v.orderBy(this,s[e],d[this].stype,d[this].srcfmt,d[this].sfunc)}):a&&n.p.sortorder&&l&&("DESC"===n.p.sortorder.toUpperCase()?v.orderBy(n.p.sortname,"d",d[a].stype,d[a].srcfmt,d[a].sfunc):v.orderBy(n.p.sortname,"a",d[a].stype,d[a].srcfmt,d[a].sfunc));var x=v.select(),j=parseInt(n.p.rowNum,10),_=x.length,C=parseInt(n.p.page,10),q=Math.ceil(_/j),S={};if((n.p.search||n.p.resetsearch)&&n.p.grouping&&n.p.groupingView._locgr){n.p.groupingView.groups=[];var D,k,T,I=$.jgrid.getMethod("groupingPrepare");if(n.p.footerrow&&n.p.userDataOnFooter){for(k in n.p.userData)n.p.userData.hasOwnProperty(k)&&(n.p.userData[k]=0);T=!0}for(D=0;D<_;D++){if(T)for(k in n.p.userData)n.p.userData.hasOwnProperty(k)&&(n.p.userData[k]+=parseFloat(x[D][k]||0));I.call($(n),x[D],D,j)}}return x=n.p.treeGrid&&n.p.search?$(n).jqGrid("searchTree",x):x.slice((C-1)*j,C*j),v=null,d=null,S[n.p.localReader.total]=q,S[n.p.localReader.page]=C,S[n.p.localReader.records]=_,S[n.p.localReader.root]=x,S[n.p.localReader.userdata]=n.p.userData,x=null,S}},L=function(e,t){var i,r,o,a,s,l,d,f,g="",m=n.p.pager?$.jgrid.jqID(n.p.pager.substr(1)):"",v=m?"_"+m:"",b=n.p.toppager?"_"+n.p.toppager.substr(1):"";if(o=parseInt(n.p.page,10)-1,o<0&&(o=0),o*=parseInt(n.p.rowNum,10),s=o+n.p.reccount,n.p.scroll){var y=$("tbody:first > tr:gt(0)",n.grid.bDiv);s>n.p.records&&(s=n.p.records),o=s-y.length,n.p.reccount=y.length;var w=y.outerHeight()||n.grid.prevRowHeight;if(w){var x=o*w,j=parseInt(n.p.records,10)*w;$(">div:first",n.grid.bDiv).css({height:j}).children("div:first").css({height:x,display:x?"":"none"}),0===n.grid.bDiv.scrollTop&&n.p.page>1&&(n.grid.bDiv.scrollTop=n.p.rowNum*(n.p.page-1)*w)}n.grid.bDiv.scrollLeft=n.grid.hDiv.scrollLeft}if(g=n.p.pager||"",g+=n.p.toppager?g?","+n.p.toppager:n.p.toppager:""){if(d=$.jgrid.getRegional(n,"formatter.integer"),i=q(n.p.page),r=q(n.p.lastpage),$(".selbox",g)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===n.p.pginput&&($("#input"+v).html($.jgrid.template($.jgrid.getRegional(n,"defaults.pgtext",n.p.pgtext)||"","<input "+c(u,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(m)+"'></span>")),n.p.toppager&&$("#input_t"+b).html($.jgrid.template($.jgrid.getRegional(n,"defaults.pgtext",n.p.pgtext)||"","<input "+c(u,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(m)+"_toppager'></span>")),$(".ui-pg-input",g).val(n.p.page),f=n.p.toppager?"#sp_1"+v+",#sp_1"+v+"_toppager":"#sp_1"+v,$(f).html($.fmatter?$.fmatter.util.NumberFormat(n.p.lastpage,d):n.p.lastpage)),n.p.viewrecords)if(0===n.p.reccount)$(".ui-paging-info",g).html($.jgrid.getRegional(n,"defaults.emptyrecords",n.p.emptyrecords));else{a=o+1,l=n.p.records,$.fmatter&&(a=$.fmatter.util.NumberFormat(a,d),s=$.fmatter.util.NumberFormat(s,d),l=$.fmatter.util.NumberFormat(l,d));var _=$.jgrid.getRegional(n,"defaults.recordtext",n.p.recordtext);$(".ui-paging-info",g).html($.jgrid.template(_,a,s,l))}!0===n.p.pgbuttons&&(i<=0&&(i=r=0),1===i||0===i?($("#first"+v+", #prev"+v).addClass(p).removeClass(h),n.p.toppager&&$("#first_t"+b+", #prev_t"+b).addClass(p).removeClass(h)):($("#first"+v+", #prev"+v).removeClass(p),n.p.toppager&&$("#first_t"+b+", #prev_t"+b).removeClass(p)),i===r||0===i?($("#next"+v+", #last"+v).addClass(p).removeClass(h),n.p.toppager&&$("#next_t"+b+", #last_t"+b).addClass(p).removeClass(h)):($("#next"+v+", #last"+v).removeClass(p),n.p.toppager&&$("#next_t"+b+", #last_t"+b).removeClass(p)))}!0===e&&!0===n.p.rownumbers&&$(">td.jqgrid-rownum",n.rows).each(function(e){$(this).html(o+1+e)}),t&&n.p.jqgdnd&&$(n).jqGrid("gridDnD","updateDnD"),$(n).triggerHandler("jqGridGridComplete"),$.isFunction(n.p.gridComplete)&&n.p.gridComplete.call(n),$(n).triggerHandler("jqGridAfterGridComplete")},H=function(){n.grid.hDiv.loading=!0,n.p.hiddengrid||$(n).jqGrid("progressBar",{method:"show",loadtype:n.p.loadui,htmlcontent:$.jgrid.getRegional(n,"defaults.loadtext",n.p.loadtext)})},U=function(){n.grid.hDiv.loading=!1,$(n).jqGrid("progressBar",{method:"hide",loadtype:n.p.loadui})},B=function(e){if(!n.grid.hDiv.loading){var t,i,r=n.p.scroll&&!1===e,o={},a=n.p.prmNames;n.p.page<=0&&(n.p.page=Math.min(1,n.p.lastpage)),null!==a.search&&(o[a.search]=n.p.search),null!==a.nd&&(o[a.nd]=(new Date).getTime()),null!==a.rows&&(o[a.rows]=n.p.rowNum),null!==a.page&&(o[a.page]=n.p.page),null!==a.sort&&(o[a.sort]=n.p.sortname),null!==a.order&&(o[a.order]=n.p.sortorder),null!==n.p.rowTotal&&null!==a.totalrows&&(o[a.totalrows]=n.p.rowTotal);var s=$.isFunction(n.p.loadComplete),l=s?n.p.loadComplete:null,d=0;if(e=e||1,e>1?null!==a.npage?(o[a.npage]=e,d=e-1,e=1):l=function(t){n.p.page++,n.grid.hDiv.loading=!1,s&&n.p.loadComplete.call(n,t),B(e-1)}:null!==a.npage&&delete n.p.postData[a.npage],n.p.grouping){$(n).jqGrid("groupingSetup");var c,u=n.p.groupingView,p="";for(c=0;c<u.groupField.length;c++){var f=u.groupField[c];$.each(n.p.colModel,function(e,t){t.name===f&&t.index&&(f=t.index)}),p+=f+" "+u.groupOrder[c]+", "}o[a.sort]=p+o[a.sort]}$.extend(n.p.postData,o);var h=n.p.scroll?n.rows.length-1:1,g=$(n).triggerHandler("jqGridBeforeRequest");if(!1===g||"stop"===g)return;if($.isFunction(n.p.datatype))return void n.p.datatype.call(n,n.p.postData,"load_"+n.p.id,h,e,d);if($.isFunction(n.p.beforeRequest)&&(g=n.p.beforeRequest.call(n),void 0===g&&(g=!0),!1===g))return;switch(t=n.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:n.p.url,type:n.p.mtype,dataType:t,data:$.isFunction(n.p.serializeGridData)?n.p.serializeGridData.call(n,n.p.postData):n.p.postData,success:function(i,o,a){if($.isFunction(n.p.beforeProcessing)&&!1===n.p.beforeProcessing.call(n,i,o,a))return void U();"xml"===t?N(i,h,e>1,d):M(i,h,e>1,d),$(n).triggerHandler("jqGridLoadComplete",[i]),l&&l.call(n,i),$(n).triggerHandler("jqGridAfterLoadComplete",[i]),r&&n.grid.populateVisible(),(n.p.loadonce||n.p.treeGrid)&&(n.p.datatype="local"),i=null,1===e&&U()},error:function(t,i,r){$.isFunction(n.p.loadError)&&n.p.loadError.call(n,t,i,r),1===e&&U(),t=null},beforeSend:function(e,t){var i=!0;if($.isFunction(n.p.loadBeforeSend)&&(i=n.p.loadBeforeSend.call(n,e,t)),void 0===i&&(i=!0),!1===i)return!1;H()}},$.jgrid.ajaxOptions,n.p.ajaxGridOptions));break;case"xmlstring":H(),i="string"!=typeof n.p.datastr?n.p.datastr:$.parseXML(n.p.datastr),N(i),$(n).triggerHandler("jqGridLoadComplete",[i]),s&&n.p.loadComplete.call(n,i),$(n).triggerHandler("jqGridAfterLoadComplete",[i]),n.p.datatype="local",n.p.datastr=null,U();break;case"jsonstring":H(),i="string"==typeof n.p.datastr?$.jgrid.parse(n.p.datastr):n.p.datastr,M(i),$(n).triggerHandler("jqGridLoadComplete",[i]),s&&n.p.loadComplete.call(n,i),$(n).triggerHandler("jqGridAfterLoadComplete",[i]),n.p.datatype="local",n.p.datastr=null,U();break;case"local":case"clientside":H(),n.p.datatype="local",n.p._ald=!0;var m=z();M(m,h,e>1,d),$(n).triggerHandler("jqGridLoadComplete",[m]),l&&l.call(n,m),$(n).triggerHandler("jqGridAfterLoadComplete",[m]),r&&n.grid.populateVisible(),U(),n.p._ald=!1}n.p._sort=!1}},V=function(e){$("#cb_"+$.jgrid.jqID(n.p.id),n.grid.hDiv)[n.p.useProp?"prop":"attr"]("checked",e),(n.p.frozenColumns?n.p.id+"_frozen":"")&&$("#cb_"+$.jgrid.jqID(n.p.id),n.grid.fhDiv)[n.p.useProp?"prop":"attr"]("checked",e)},W=function(e,t){var i,r,o,a,l,d,f,g="<td class='ui-pg-button "+p+"'><span class='ui-separator'></span></td>",v="",b="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",y="",w=function(e,t){var i;return $.isFunction(n.p.onPaging)&&(i=n.p.onPaging.call(n,e,t)),"stop"!==i&&(n.p.selrow=null,n.p.multiselect&&(n.p.selarrrow=[],V(!1)),n.p.savedRow=[],!0)};if(e=e.substr(1),t+="_"+e,i="pg_"+e,r=e+"_left",o=e+"_center",a=e+"_right",$("#"+$.jgrid.jqID(e)).append("<div id='"+i+"' class='ui-pager-control' role='group'><table "+c(u,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+r+"' align='left'></td><td id='"+o+"' align='center' style='white-space:pre;'></td><td id='"+a+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),n.p.rowList.length>0){y='<td dir="'+s+'">',y+="<select "+c(u,"pgSelectBox",!1,"ui-pg-selbox")+' role="listbox" title="'+($.jgrid.getRegional(n,"defaults.pgrecs",n.p.pgrecs)||"")+'">';var x;for(f=0;f<n.p.rowList.length;f++)x=n.p.rowList[f].toString().split(":"),1===x.length&&(x[1]=x[0]),y+='<option role="option" value="'+x[0]+'"'+(q(n.p.rowNum,0)===q(x[0],0)?' selected="selected"':"")+">"+x[1]+"</option>";y+="</select></td>"}if("rtl"===s&&(b+=y),!0===n.p.pginput&&(v="<td id='input"+t+"' dir='"+s+"'>"+$.jgrid.template($.jgrid.getRegional(n,"defaults.pgtext",n.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(e)+"'></span>")+"</td>"),!0===n.p.pgbuttons){var j=["first"+t,"prev"+t,"next"+t,"last"+t],_=c(u,"pgButtonBox",!0,"ui-pg-button"),C=[$.jgrid.getRegional(n,"defaults.pgfirst",n.p.pgfirst)||"",$.jgrid.getRegional(n,"defaults.pgprev",n.p.pgprev)||"",$.jgrid.getRegional(n,"defaults.pgnext",n.p.pgnext)||"",$.jgrid.getRegional(n,"defaults.pglast",n.p.pglast)||""];"rtl"===s&&(j.reverse(),C.reverse()),b+="<td id='"+j[0]+"' class='"+_+"' title='"+C[0]+"'><span "+c(u,"icon_first",!1,m)+"></span></td>",b+="<td id='"+j[1]+"' class='"+_+"'  title='"+C[1]+"'><span "+c(u,"icon_prev",!1,m)+"></span></td>",b+=""!==v?g+v+g:"",b+="<td id='"+j[2]+"' class='"+_+"' title='"+C[2]+"'><span "+c(u,"icon_next",!1,m)+"></span></td>",b+="<td id='"+j[3]+"' class='"+_+"' title='"+C[3]+"'><span "+c(u,"icon_end",!1,m)+"></span></td>"}else""!==v&&(b+=v);"ltr"===s&&(b+=y),b+="</tr></tbody></table>",!0===n.p.viewrecords&&$("td#"+e+"_"+n.p.recordpos,"#"+i).append("<div dir='"+s+"' style='text-align:"+n.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+e+"_"+n.p.pagerpos,"#"+i).append(b),d=$("#gbox_"+$.jgrid.jqID(n.p.id)).css("font-size")||"11px",$("#gbox_"+$.jgrid.jqID(n.p.id)).append("<div id='testpg' "+c(u,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+d+";visibility:hidden;' ></div>"),l=$(b).clone().appendTo("#testpg").width(),$("#testpg").remove(),l>0&&(""!==v&&(l+=50),$("td#"+e+"_"+n.p.pagerpos,"#"+i).width(l)),n.p._nvtd=[],n.p._nvtd[0]=l?Math.floor((n.p.width-l)/2):Math.floor(n.p.width/3),n.p._nvtd[1]=0,b=null,$(".ui-pg-selbox","#"+i).on("change",function(){return!!w("records",this)&&(n.p.page=Math.round(n.p.rowNum*(n.p.page-1)/this.value-.5)+1,n.p.rowNum=this.value,n.p.pager&&$(".ui-pg-selbox",n.p.pager).val(this.value),n.p.toppager&&$(".ui-pg-selbox",n.p.toppager).val(this.value),B(),!1)}),!0===n.p.pgbuttons&&($(".ui-pg-button","#"+i).hover(function(){$(this).hasClass(p)?this.style.cursor="default":($(this).addClass(h),this.style.cursor="pointer")},function(){$(this).hasClass(p)||($(this).removeClass(h),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(t)+", #prev"+$.jgrid.jqID(t)+", #next"+$.jgrid.jqID(t)+", #last"+$.jgrid.jqID(t)).click(function(){if($(this).hasClass(p))return!1;var e=q(n.p.page,1),i=q(n.p.lastpage,1),r=!1,o=!0,a=!0,s=!0,l=!0;return 0===i||1===i?(o=!1,a=!1,s=!1,l=!1):i>1&&e>=1?1===e?(o=!1,a=!1):e===i&&(s=!1,l=!1):i>1&&0===e&&(s=!1,l=!1,e=i-1),!!w(this.id.split("_")[0],this)&&(this.id==="first"+t&&o&&(n.p.page=1,r=!0),this.id==="prev"+t&&a&&(n.p.page=e-1,r=!0),this.id==="next"+t&&s&&(n.p.page=e+1,r=!0),this.id==="last"+t&&l&&(n.p.page=i,r=!0),r&&B(),!1)})),!0===n.p.pginput&&$("#"+i).on("keypress","input.ui-pg-input",function(e){return 13===(e.charCode||e.keyCode||0)?!!w("user",this)&&($(this).val(q($(this).val(),1)),n.p.page=$(this).val()>0?$(this).val():n.p.page,B(),!1):this})},Q=function(e,t,i){var r,o=n.p.colModel,a=n.p.frozenColumns?t:n.grid.headers[e].el,s="";$("span.ui-grid-ico-sort",a).addClass(p),$(a).attr("aria-selected","false"),r=o[e].index||o[e].name,void 0===i?o[e].lso?"asc"===o[e].lso?(o[e].lso+="-desc",s="desc"):"desc"===o[e].lso?(o[e].lso+="-asc",s="asc"):"asc-desc"!==o[e].lso&&"desc-asc"!==o[e].lso||(o[e].lso=""):o[e].lso=s=o[e].firstsortorder||"asc":o[e].lso=s=i,s?($("span.s-ico",a).show(),$("span.ui-icon-"+s,a).removeClass(p),$(a).attr("aria-selected","true")):n.p.viewsortcols[0]||$("span.s-ico",a).hide();var l=y.indexOf(r);-1===l?(y.push(r),w.push(s)):s?w[l]=s:(w.splice(l,1),y.splice(l,1)),n.p.sortorder="",n.p.sortname="";for(var d=0,c=y.length;d<c;d++)d>0&&(n.p.sortname+=", "),n.p.sortname+=y[d],d!==c-1&&(n.p.sortname+=" "+w[d]);n.p.sortorder=w[c-1]},X=function(e,t,i,r,o){if(n.p.colModel[t].sortable&&!(n.p.savedRow.length>0)){if(i||(n.p.lastsort===t&&""!==n.p.sortname?"asc"===n.p.sortorder?n.p.sortorder="desc":"desc"===n.p.sortorder&&(n.p.sortorder="asc"):n.p.sortorder=n.p.colModel[t].firstsortorder||"asc",n.p.page=1),n.p.multiSort)Q(t,o,r);else{if(r){if(n.p.lastsort===t&&n.p.sortorder===r&&!i)return;n.p.sortorder=r}var a,s=n.grid.headers[n.p.lastsort]?n.grid.headers[n.p.lastsort].el:null,l=n.p.frozenColumns?o:n.grid.headers[t].el,d="single"===n.p.viewsortcols[1];a=$(s).find("span.ui-grid-ico-sort"),a.addClass(p),d&&$(a).css("display","none"),$(s).attr("aria-selected","false"),n.p.frozenColumns&&(a=n.grid.fhDiv.find("span.ui-grid-ico-sort"),a.addClass(p),d&&a.css("display","none"),n.grid.fhDiv.find("th").attr("aria-selected","false")),a=$(l).find("span.ui-icon-"+n.p.sortorder),a.removeClass(p),d&&a.css("display",""),$(l).attr("aria-selected","true"),n.p.viewsortcols[0]||(n.p.lastsort!==t?(n.p.frozenColumns&&n.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",s).hide(),$("span.s-ico",l).show()):""===n.p.sortname&&$("span.s-ico",l).show()),e=e.substring(5+n.p.id.length+1),n.p.sortname=n.p.colModel[t].index||e}if("stop"===$(n).triggerHandler("jqGridSortCol",[n.p.sortname,t,n.p.sortorder]))return void(n.p.lastsort=t);if($.isFunction(n.p.onSortCol)&&"stop"===n.p.onSortCol.call(n,n.p.sortname,t,n.p.sortorder))return void(n.p.lastsort=t);if("local"===n.p.datatype?n.p.deselectAfterSort&&$(n).jqGrid("resetSelection"):(n.p.selrow=null,n.p.multiselect&&V(!1),n.p.selarrrow=[],n.p.savedRow=[]),n.p.scroll){var c=n.grid.bDiv.scrollLeft;E.call(n,!0,!1),n.grid.hDiv.scrollLeft=c}n.p.subGrid&&"local"===n.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(n.p.id)).each(function(){$(this).trigger("click")}),n.p._sort=!0,B(),n.p.lastsort=t,n.p.sortname!==e&&t&&(n.p.lastsort=t)}},Y=function(e){var t,i=e,r=e;for(t=e+1;t<n.p.colModel.length;t++)if(!0!==n.p.colModel[t].hidden){r=t;break}return r-i},K=function(e){var t=$(n.grid.headers[e].el),i=[t.position().left+t.outerWidth()];return"rtl"===n.p.direction&&(i[0]=n.p.width-i[0]),i[0]-=n.grid.bDiv.scrollLeft,i.push($(n.grid.hDiv).position().top),i.push($(n.grid.bDiv).offset().top-$(n.grid.hDiv).offset().top+$(n.grid.bDiv).height()),i},J=function(e){var t,i=n.grid.headers,r=$.jgrid.getCellIndex(e);for(t=0;t<i.length;t++)if(e===i[t].el){r=t;break}return r},Z=function(e,t,i){var r,o,a=n.p.colModel,s=a.length,l=[],d=$.jgrid.getRegional(n,"colmenu"),c='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+t+"px;top:"+e+'px;">';for(r=0;r<s;r++){var u=a[r].hidden?"":"checked",p=a[r].name,f=n.p.colNames[r];o="cb"===p||"subgrid"===p||"rn"===p||a[r].hidedlg?"style='display:none'":"",c+="<li "+o+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+d.reorder+'"><span class="'+m+" "+v.icon_move+' notclick"></span></td><td class="menu_icon"><input class="'+v.input_checkbox+'" type="checkbox" name="'+p+'" '+u+'></td><td class="menu_text">'+f+"</td></tr></table></a></li>",l.push(r)}c+="</ul>",$(i).append(c),$("#col_menu").addClass("ui-menu "+v.menu_widget),$.fn.html5sortable()&&$("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:!0}).on("sortupdate",function(e,t){for(l.splice(t.startindex,1),l.splice(t.endindex,0,t.startindex),$(n).jqGrid("destroyFrozenColumns"),$(n).jqGrid("remapColumns",l,!0),$(n).jqGrid("setFrozenColumns"),r=0;r<s;r++)l[r]=r}),$("#col_menu > li > a").on("click",function(e){var t;$(e.target).hasClass("notclick")||($(e.target).is(":input")?t=$(e.target).is(":checked"):(t=!$("input",this).is(":checked"),$("input",this).prop("checked",t)),t?($(n).jqGrid("showCol",$("input",this).attr("name")),$(this).parent().attr("draggable","true")):($(n).jqGrid("hideCol",$("input",this).attr("name")),$(this).parent().attr("draggable","false")))}).hover(function(){$(this).addClass(h)},function(){$(this).removeClass(h)})},ee=function(e,t,i,r){var o,a,s,l,d,c=n.p.colModel[e],u="",p="",f="",g="",m="",b="",y=["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],w=["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],x=$.jgrid.getRegional(n,"search"),j=$.jgrid.styleUI[n.p.styleUI||"jQueryUI"].common;if(c){o=!(!n.p.colFilters||!n.p.colFilters[c.name])&&n.p.colFilters[c.name],o&&!$.isEmptyObject(o)&&(u=o.oper1,p=o.value1,f=o.rule,g=o.oper2,m=o.value2),c.searchoptions||(c.searchoptions={}),a=c.searchoptions.sopt?c.searchoptions.sopt:"text"===c.sorttype?w:y,s=c.searchoptions.operands?c.searchoptions.operands:x.groupOps,d=$("<form></form>");var _="<div>"+$.jgrid.getRegional(n,"colmenu.searchTitle")+"</div>";_+='<div><select id="oper1" class="'+v.filter_select+'">',$.each(x.odata,function(e,t){l=t.oper===u?'selected="selected"':"",-1!==$.inArray(t.oper,a)&&(b+='<option value="'+t.oper+'" '+l+">"+t.text+"</option>")}),_+=b,_+="</select></div>",d.append(_);var C="";c.searchoptions.defaultValue&&(C=$.isFunction(c.searchoptions.defaultValue)?c.searchoptions.defaultValue.call(n):c.searchoptions.defaultValue),p&&(C=p);var q=$.extend(c.searchoptions,{name:c.index||c.name,id:"sval1_"+n.p.idPrefix+c.name,oper:"search"}),S=$.jgrid.createEl.call(n,c.stype,q,C,!1,$.extend({},$.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{}));$(S).addClass(v.filter_input),_=$("<div></div>").append(S),d.append(_),_='<div><select id="operand" class="'+v.filter_select+'">',$.each(s,function(e,t){l=t.op===f?'selected="selected"':"",_+="<option value='"+t.op+"' "+l+">"+t.text+"</option>"}),_+="</select></div>",d.append(_),b="",$.each(x.odata,function(e,t){l=t.oper===g?'selected="selected"':"",-1!==$.inArray(t.oper,a)&&(b+='<option value="'+t.oper+'" '+l+">"+t.text+"</option>")}),_='<div><select id="oper2" class="'+v.filter_select+'">'+b+"</select></div>",d.append(_),C=m||"",q=$.extend(c.searchoptions,{name:c.index||c.name,id:"sval2_"+n.p.idPrefix+c.name,oper:"search"}),S=$.jgrid.createEl.call(n,c.stype,q,C,!1,$.extend({},$.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{})),$(S).addClass(v.filter_input),_=$("<div></div>").append(S),d.append(_),_="<div>",_+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+j.button+" ui-reset'>"+x.Reset+"</a></div>",_+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+j.button+" ui-search'>"+x.Find+"</a></div>",_+="</div>",d.append(_),d=$('<li class="ui-menu-item" role="presentation"></li>').append(d),d=$('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+i+"px;top:"+t+'px;"></ul>').append(d),$(r).append(d),$("#search_menu").addClass("ui-menu "+v.menu_widget),$("#bs_reset, #bs_search","#search_menu").hover(function(){$(this).addClass(h)},function(){$(this).removeClass(h)}),$(d).find("#bs_reset").click(function(e){return n.p.colFilters[c.name]={},n.p.postData.filters=te(),n.p.search=!0,$(n).trigger("reloadGrid"),$("#column_menu").remove(),!1}),$(d).find("#bs_search").click(function(e){return n.p.colFilters[c.name]={oper1:$("#oper1","#search_menu").val(),value1:$("#sval1_"+n.p.idPrefix+c.name,"#search_menu").val(),rule:$("#operand","#search_menu").val(),oper2:$("#oper2","#search_menu").val(),value2:$("#sval2_"+n.p.idPrefix+c.name,"#search_menu").val()},n.p.postData.filters=te(),n.p.search=!0,$(n).trigger("reloadGrid"),$("#column_menu").remove(),!1})}},te=function(){var e='{"groupOp":"AND","rules":[], "groups" : [',t=0;for(var i in n.p.colFilters)if(n.p.colFilters.hasOwnProperty(i)){var r=n.p.colFilters[i];$.isEmptyObject(r)||(t>0&&(e+=","),e+='{"groupOp": "'+r.rule+'", "rules" : [',e+='{"field":"'+i+'",',e+='"op":"'+r.oper1+'",',r.value1+="",e+='"data":"'+r.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',r.value2&&(e+=',{"field":"'+i+'",',e+='"op":"'+r.oper2+'",',r.value2+="",e+='"data":"'+r.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'),e+="]}",t++)}return e+="]}"},ie=function(e,t){var i=n.p.colModel[e],r=n.p.groupingView;-1!==t?r.groupField.splice(t,1):r.groupField.push(i.name),$(n).jqGrid("groupingGroupBy",r.groupField),n.p.frozenColumns&&($(n).jqGrid("destroyFrozenColumns"),$(n).jqGrid("setFrozenColumns"))},ne=function(e,t){var i,r=[],o=n.p.colModel.length,a=-1,s=n.p.colModel;for(i=0;i<o;i++)s[i].frozen&&(a=i),r.push(i);r.splice(e,1),r.splice(a+(t?1:0),0,e),s[e].frozen=t,$(n).jqGrid("destroyFrozenColumns"),$(n).jqGrid("remapColumns",r,!0),$(n).jqGrid("setFrozenColumns")},re=function(e,t,i){t=parseInt(t,10),i=parseInt(i,10)+25;var r,o,a=$(".ui-jqgrid-view").css("font-size")||"11px",s='<ul id="column_menu" class="ui-search-menu modal-content column-menu" role="menu" tabindex="0" style="font-size:'+a+";left:"+t+"px;top:"+i+'px;">',l=n.p.colModel[e],d=$.extend({sorting:!0,columns:!0,filtering:!0,seraching:!0,grouping:!0,freeze:!0},l.coloptions),c=$.jgrid.getRegional(n,"colmenu");if(d.sorting&&(s+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+m+" "+v.icon_sort_asc+'"></span></td><td class="menu_text">'+c.sortasc+"</td></tr></table></a></li>",s+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+m+" "+v.icon_sort_desc+'"></span></td><td class="menu_text">'+c.sortdesc+"</td></tr></table></a></li>"),d.columns&&(s+='<li class="ui-menu-item divider" role="separator"></li>',s+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+m+" "+v.icon_columns+'"></span></td><td class="menu_text">'+c.columns+"</td></tr></table></a></li>"),d.filtering&&(s+='<li class="ui-menu-item divider" role="separator"></li>',s+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+m+" "+v.icon_filter+'"></span></td><td class="menu_text">'+c.filter+" "+(l.label||l.name)+"</td></tr></table></a></li>"),d.grouping&&(r=$.inArray(l.name,n.p.groupingView.groupField),s+='<li class="ui-menu-item divider" role="separator"></li>',s+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+m+" "+v.icon_group+'"></span></td><td class="menu_text">'+(-1!==r?c.ungrouping:c.grouping+" "+(l.label||l.name))+"</td></tr></table></a></li>"),d.freeze&&(o=!l.frozen||!n.p.frozenColumns,s+='<li class="ui-menu-item divider" role="separator"></li>',s+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+m+" "+v.icon_freeze+'"></span></td><td class="menu_text">'+(o?c.freeze+" "+(l.label||l.name):c.unfreeze)+"</td></tr></table></a></li>"),s+="</ul>",$("body").append(s),$("#column_menu").addClass("ui-menu "+v.menu_widget),"ltr"===n.p.direction){var u=$("#column_menu").width()+26;$("#column_menu").css("left",t-u)}$("#column_menu > li > a").hover(function(){$("#col_menu").remove(),$("#search_menu").remove();var t,i;"columns"===$(this).attr("value")&&(t=$(this).parent().width()+18,i=$(this).parent().position().top-5,Z(i,t,$(this).parent())),"filtering"===$(this).attr("value")&&(t=$(this).parent().width()+18,i=$(this).parent().position().top-5,ee(e,i,t,$(this).parent())),$(this).addClass(h)},function(){$(this).removeClass(h)}).click(function(){var t=$(this).attr("value"),i=n.grid.headers[e].el;"sortasc"===t?X("jqgh_"+n.p.id+"_"+l.name,e,!0,"asc",i):"sortdesc"===t?X("jqgh_"+n.p.id+"_"+l.name,e,!0,"desc",i):"grouping"===t?ie(e,r):"freeze"===t&&ne(e,o),-1===t.indexOf("sort")&&"grouping"!==t&&"freeze"!==t||$(this).remove()})};for(n.p.colMenu&&$("body").on("click",function(e){$(e.target).closest(".column-menu").length||$("#column_menu").remove()}),this.p.id=this.id,-1===$.inArray(n.p.multikey,C)&&(n.p.multikey=!1),n.p.keyName=!1,l=0;l<n.p.colModel.length;l++)_="string"==typeof n.p.colModel[l].template?null!=$.jgrid.cmTemplate&&"object"==typeof $.jgrid.cmTemplate[n.p.colModel[l].template]?$.jgrid.cmTemplate[n.p.colModel[l].template]:{}:n.p.colModel[l].template,n.p.colModel[l]=$.extend(!0,{},n.p.cmTemplate,_||{},n.p.colModel[l]),!1===n.p.keyName&&!0===n.p.colModel[l].key&&(n.p.keyName=n.p.colModel[l].name);if(n.p.sortorder=n.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),!0===n.p.grouping&&(n.p.scroll=!1,n.p.rownumbers=!1,n.p.treeGrid=!1,n.p.gridview=!0),!0===this.p.treeGrid){try{$(this).jqGrid("setTreeGrid")}catch(e){}"local"!==n.p.datatype&&(n.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(n).jqGrid("setSubGrid")}catch(e){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?n.p.multiselectWidth+n.p.cellLayout:n.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:n.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),n.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},n.p.xmlReader),n.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},n.p.jsonReader),n.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},n.p.localReader),n.p.scroll&&(n.p.pgbuttons=!1,n.p.pginput=!1,n.p.rowList=[]),n.p.data.length&&(P(),O());var oe,ae,se,le,de,ce,ue,pe,fe,he="<thead><tr class='ui-jqgrid-labels' role='row'>",ge="",me="",ve="";if(!0===n.p.shrinkToFit&&!0===n.p.forceFit)for(l=n.p.colModel.length-1;l>=0;l--)if(!n.p.colModel[l].hidden){n.p.colModel[l].resizable=!1;break}if("horizontal"===n.p.viewsortcols[1]?(me=" ui-i-asc",ve=" ui-i-desc"):"single"===n.p.viewsortcols[1]&&(me=" ui-single-sort-asc",ve=" ui-single-sort-desc",ge=" style='display:none'",n.p.viewsortcols[0]=!1),oe=b?"class='ui-th-div-ie'":"",pe="<span class='s-ico' style='display:none'>",pe+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+me+" ui-sort-"+s+" "+p+" "+m+" "+c(u,"icon_asc",!0)+"'"+ge+"></span>",pe+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ve+" ui-sort-"+s+" "+p+" "+m+" "+c(u,"icon_desc",!0)+"'"+ge+"></span></span>",n.p.multiSort&&n.p.sortname)for(y=n.p.sortname.split(","),l=0;l<y.length;l++)x=$.trim(y[l]).split(" "),y[l]=$.trim(x[0]),w[l]=x[1]?$.trim(x[1]):n.p.sortorder||"asc";for(l=0;l<this.p.colNames.length;l++){var be=n.p.headertitles?' title="'+$.jgrid.stripHtml(n.p.colNames[l])+'"':"";fe=n.p.colModel[l],fe.hasOwnProperty("colmenu")||(fe.colmenu="rn"!==fe.name&&"cb"!==fe.name&&"subgrid"!==fe.name),he+="<th id='"+n.p.id+"_"+fe.name+"' role='columnheader' "+c(u,"headerBox",!1,"ui-th-column ui-th-"+s)+" "+be+">",ae=fe.index||fe.name,he+="<div class='ui-th-div' id='jqgh_"+n.p.id+"_"+fe.name+"' "+oe+">"+n.p.colNames[l],fe.width?fe.width=parseInt(fe.width,10):fe.width=150,"boolean"!=typeof fe.title&&(fe.title=!0),fe.lso="",ae===n.p.sortname&&(n.p.lastsort=l),n.p.multiSort&&-1!==(x=$.inArray(ae,y))&&(fe.lso=w[x]),he+=pe,n.p.colMenu&&fe.colmenu&&(he+="<a class='colmenu' href='#/'><span class='colmenuspan "+m+" "+v.icon_menu+"'></span></a>"),he+="</div></th>"}if(he+="</tr></thead>",pe=null,fe=null,$(this).append(he),$("thead tr:first th",this).hover(function(){$(this).addClass(h)},function(){$(this).removeClass(h)}),this.p.multiselect){var ye,$e=[];$("#cb_"+$.jgrid.jqID(n.p.id),this).on("click",function(){n.p.selarrrow=[];var e=!0===n.p.frozenColumns?n.p.id+"_frozen":"";this.checked?($(n.rows).each(function(t){
t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(p)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(this.id))[n.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass(f).attr("aria-selected","true"),n.p.selarrrow.push(this.id),n.p.selrow=this.id,e&&($("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(this.id),n.grid.fbDiv)[n.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),n.grid.fbDiv).addClass(f))))}),ye=!0,$e=[]):($(n.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(p)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(this.id))[n.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass(f).attr("aria-selected","false"),$e.push(this.id),e&&($("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(this.id),n.grid.fbDiv)[n.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),n.grid.fbDiv).removeClass(f))))}),n.p.selrow=null,ye=!1),$(n).triggerHandler("jqGridSelectAll",[ye?n.p.selarrrow:$e,ye]),$.isFunction(n.p.onSelectAll)&&n.p.onSelectAll.call(n,ye?n.p.selarrrow:$e,ye)})}if(!0===n.p.autowidth){var we=$(j).innerWidth();n.p.width=we>0?we:"nw"}!function(){var e,t,i,o,a=0,s=$.jgrid.cell_width?0:q(n.p.cellLayout,0),l=0,d=q(n.p.scrollOffset,0),c=!1,u=0;$.each(n.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),n.p.grouping&&n.p.autowidth){var e=$.inArray(this.name,n.p.groupingView.groupField);e>=0&&n.p.groupingView.groupColumnShow.length>e&&(this.hidden=!n.p.groupingView.groupColumnShow[e])}this.widthOrg=t=q(this.width,0),!1===this.hidden&&(a+=t+s,this.fixed?u+=t+s:l++)}),isNaN(n.p.width)&&(n.p.width=a+(!1!==n.p.shrinkToFit||isNaN(n.p.height)?0:d)),r.width=parseInt(n.p.width,10),n.p.tblwidth=a,!1===n.p.shrinkToFit&&!0===n.p.forceFit&&(n.p.forceFit=!1),!0===n.p.shrinkToFit&&l>0&&(i=r.width-s*l-u,isNaN(n.p.height)||(i-=d,c=!0),a=0,$.each(n.p.colModel,function(r){!1!==this.hidden||this.fixed||(t=Math.round(i*this.width/(n.p.tblwidth-s*l-u)),this.width=t,a+=t,e=r)}),o=0,c?r.width-u-(a+s*l)!==d&&(o=r.width-u-(a+s*l)-d):c||1===Math.abs(r.width-u-(a+s*l))||(o=r.width-u-(a+s*l)),n.p.colModel[e].width+=o,n.p.tblwidth=a+o+s*l+u,n.p.tblwidth>n.p.width&&(n.p.colModel[e].width-=n.p.tblwidth-parseInt(n.p.width,10),n.p.tblwidth=n.p.width))}(),$(j).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+n.p.id+"'>&#160;</div>"),n.p.scrollPopUp&&$(j).append("<div "+c(u,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+n.p.id+"'></div>"),$(d).css("width",r.width+"px"),he=$("thead:first",n).get(0);var xe="";n.p.footerrow&&(xe+="<table role='presentation' style='width:"+n.p.tblwidth+"px' "+c(u,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+c(u,"footerBox",!1,"footrow footrow-"+s)+">");var je=$("tr:first",he),_e="<tr class='jqgfirstrow' role='row'>";if(n.p.disableClick=!1,$("th",je).each(function(e){fe=n.p.colModel[e],se=fe.width,void 0===fe.resizable&&(fe.resizable=!0),fe.resizable?(le=document.createElement("span"),$(le).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+s).css("cursor","col-resize"),$(this).addClass(n.p.resizeclass)):le="",$(this).css("width",se+"px").prepend(le),le=null;var t="";fe.hidden&&($(this).css("display","none"),t="display:none;"),_e+="<td role='gridcell' style='height:0px;width:"+se+"px;"+t+"'></td>",r.headers[e]={width:se,el:this},"boolean"!=typeof(ge=fe.sortable)&&(fe.sortable=!0,ge=!0);var i=fe.name;"cb"!==i&&"subgrid"!==i&&"rn"!==i&&n.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),ge&&(n.p.multiSort?n.p.viewsortcols[0]?($("div span.s-ico",this).show(),n.p.colModel[e].lso&&$("div span.ui-icon-"+fe.lso,this).removeClass(p).css("display","")):n.p.colModel[e].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+fe.lso,this).removeClass(p).css("display","")):n.p.viewsortcols[0]?($("div span.s-ico",this).show(),e===n.p.lastsort&&$("div span.ui-icon-"+n.p.sortorder,this).removeClass(p).css("display","")):e===n.p.lastsort&&""!==n.p.sortname&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+n.p.sortorder,this).removeClass(p).css("display",""))),n.p.footerrow&&(xe+="<td role='gridcell' "+S(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length){var t=J(this);return!0===n.p.forceFit&&(n.p.nv=Y(t)),r.dragStart(t,e,K(t)),!1}}).click(function(e){if(n.p.disableClick)return n.p.disableClick=!1,!1;var t,i,r="th>div.ui-jqgrid-sortable";n.p.viewsortcols[2]||(r="th>div>span>span.ui-grid-ico-sort");var o=$(e.target).closest(r);if(1===o.length){var a;if(n.p.frozenColumns){var s=$(this)[0].id.substring(n.p.id.length+1);$(n.p.colModel).each(function(e){if(this.name===s)return a=e,!1})}else a=J(this);if($(e.target).hasClass("colmenuspan")){null!=$("#column_menu")[0]&&$("#column_menu").remove();var l=$.jgrid.getCellIndex(e.target);if(-1===l)return;var d=$(this).offset(),c=d.left,u=d.top;return"ltr"===n.p.direction&&(c+=$(this).outerWidth()),re(l,c,u),void e.stopPropagation()}return n.p.viewsortcols[2]||(t=!0,i=o.attr("sort")),null!=a&&X($("div",this)[0].id,a,t,i,this),!1}}),fe=null,n.p.sortable&&$.fn.sortable)try{$(n).jqGrid("sortableColumns",je)}catch(e){}n.p.footerrow&&(xe+="</tr></tbody></table>"),_e+="</tr>",ue=document.createElement("tbody"),this.appendChild(ue),$(this).addClass(c(u,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(_e),_e=null;var Ce=$("<table "+c(u,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+n.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'></table>").append(he),qe=!(!n.p.caption||!0!==n.p.hiddengrid),Se=$("<div class='ui-jqgrid-hbox"+("rtl"===s?"-rtl":"")+"'></div>"),De="Bootstrap"!==n.p.styleUI||isNaN(n.p.height)?0:2;he=null,r.hDiv=document.createElement("div"),r.hDiv.style.width=r.width-De+"px",r.hDiv.className=c(u,"headerDiv",!0,"ui-jqgrid-hdiv"),$(r.hDiv).append(Se),$(Se).append(Ce),Ce=null,qe&&$(r.hDiv).hide(),n.p.pager&&("string"==typeof n.p.pager?"#"!==n.p.pager.substr(0,1)&&(n.p.pager="#"+n.p.pager):n.p.pager="#"+$(n.p.pager).attr("id"),$(n.p.pager).css({width:r.width+"px"}).addClass(c(u,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(j),qe&&$(n.p.pager).hide(),W(n.p.pager,"")),!1===n.p.cellEdit&&!0===n.p.hoverrows&&$(n).on({mouseover:function(e){ce=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(ce).attr("class")&&$(ce).addClass(h)},mouseout:function(e){ce=$(e.target).closest("tr.jqgrow"),$(ce).removeClass(h)}});var ke,Te,Ie;$(n).before(r.hDiv).on({click:function(e){if(de=e.target,ce=$(de,n.rows).closest("tr.jqgrow"),0===$(ce).length||ce[0].className.indexOf(p)>-1||($(de,n).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==n.id)return this;var t=$(de).filter(":enabled").hasClass("cbox"),i=$(n).triggerHandler("jqGridBeforeSelectRow",[ce[0].id,e]);if(i=!1!==i&&"stop"!==i,$.isFunction(n.p.beforeSelectRow)){var r=n.p.beforeSelectRow.call(n,ce[0].id,e);!1!==r&&"stop"!==r||(i=!1)}if("A"!==de.tagName&&("INPUT"!==de.tagName&&"TEXTAREA"!==de.tagName&&"OPTION"!==de.tagName&&"SELECT"!==de.tagName||t))if(ke=ce[0].id,de=$(de).closest("tr.jqgrow>td"),de.length>0&&(Te=$.jgrid.getCellIndex(de),Ie=$(de).closest("td,th").html(),$(n).triggerHandler("jqGridCellSelect",[ke,Te,Ie,e]),$.isFunction(n.p.onCellSelect)&&n.p.onCellSelect.call(n,ke,Te,Ie,e)),!0!==n.p.cellEdit){if(i)if(n.p.multikey)e[n.p.multikey]?$(n).jqGrid("setSelection",ke,!0,e):n.p.multiselect&&t&&(t=$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+ke).is(":checked"),$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+ke)[n.p.useProp?"prop":"attr"]("checked",!t));else if(n.p.multiselect&&n.p.multiboxonly)if(t)$(n).jqGrid("setSelection",ke,!0,e);else{var o=n.p.frozenColumns?n.p.id+"_frozen":"";$(n.p.selarrrow).each(function(e,t){var i=$(n).jqGrid("getGridRowById",t);i&&$(i).removeClass(f),$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(t))[n.p.useProp?"prop":"attr"]("checked",!1),o&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o)).removeClass(f),$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(o))[n.p.useProp?"prop":"attr"]("checked",!1))}),n.p.selarrrow=[],$(n).jqGrid("setSelection",ke,!0,e)}else $(n).jqGrid("setSelection",ke,!0,e)}else if(n.p.multiselect&&t&&i)$(n).jqGrid("setSelection",ke,!0,e);else if(de.length>0)try{$(n).jqGrid("editCell",ce[0].rowIndex,Te,!0)}catch(e){}},reloadGrid:function(e,t){if(!0===n.p.treeGrid&&(n.p.datatype=n.p.treedatatype),t=t||{},t.current&&n.grid.selectionPreserver(n),"local"===n.p.datatype?($(n).jqGrid("resetSelection"),n.p.data.length&&(P(),O())):n.p.treeGrid||(n.p.selrow=null,n.p.multiselect&&(n.p.selarrrow=[],V(!1)),n.p.savedRow=[]),n.p.scroll&&E.call(n,!0,!1),t.page){var i=t.page;i>n.p.lastpage&&(i=n.p.lastpage),i<1&&(i=1),n.p.page=i,n.grid.prevRowHeight?n.grid.bDiv.scrollTop=(i-1)*n.grid.prevRowHeight*n.p.rowNum:n.grid.bDiv.scrollTop=0}return n.grid.prevRowHeight&&n.p.scroll&&void 0===t.page?(delete n.p.lastpage,n.grid.populateVisible()):n.grid.populate(),!0===n.p.inlineNav&&$(n).jqGrid("showAddEditButtons"),!1},dblclick:function(e){if(de=e.target,ce=$(de,n.rows).closest("tr.jqgrow"),0!==$(ce).length){ke=ce[0].rowIndex,Te=$.jgrid.getCellIndex(de);var t=$(n).triggerHandler("jqGridDblClickRow",[$(ce).attr("id"),ke,Te,e]);return null!=t?t:$.isFunction(n.p.ondblClickRow)&&null!=(t=n.p.ondblClickRow.call(n,$(ce).attr("id"),ke,Te,e))?t:void 0}},contextmenu:function(e){if(de=e.target,ce=$(de,n.rows).closest("tr.jqgrow"),0!==$(ce).length){n.p.multiselect||$(n).jqGrid("setSelection",ce[0].id,!0,e),ke=ce[0].rowIndex,Te=$.jgrid.getCellIndex(de);var t=$(n).triggerHandler("jqGridRightClickRow",[$(ce).attr("id"),ke,Te,e]);return null!=t?t:$.isFunction(n.p.onRightClickRow)&&null!=(t=n.p.onRightClickRow.call(n,$(ce).attr("id"),ke,Te,e))?t:void 0}}}),r.bDiv=document.createElement("div"),b&&"auto"===String(n.p.height).toLowerCase()&&(n.p.height="100%"),$(r.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:n.p.height+(isNaN(n.p.height)?"":"px"),width:r.width-De+"px"}).scroll(r.scrollGrid),$("table:first",r.bDiv).css({width:n.p.tblwidth+"px"}),$.support.tbody||2===$("tbody",this).length&&$("tbody:gt(0)",this).remove(),n.p.multikey&&($.jgrid.msie()?$(r.bDiv).on("selectstart",function(){return!1}):$(r.bDiv).on("mousedown",function(){return!1})),qe&&$(r.bDiv).hide();var Fe=m+" "+c(u,"icon_caption_open",!0),Ae=m+" "+c(u,"icon_caption_close",!0);r.cDiv=document.createElement("div");var Re=!0===n.p.hidegrid?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+g+"' title='"+($.jgrid.getRegional(n,"defaults.showhide",n.p.showhide)||"")+"' />").hover(function(){Re.addClass(h)},function(){Re.removeClass(h)}).append("<span class='ui-jqgrid-headlink "+Fe+"'></span>").css("rtl"===s?"left":"right","0px"):"";if($(r.cDiv).append(Re).append("<span class='ui-jqgrid-title'>"+n.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===s?"-rtl":"")+" "+c(u,"gridtitleBox",!0)),$(r.cDiv).insertBefore(r.hDiv),n.p.toolbar[0]){var Ee=c(u,"customtoolbarBox",!0,"ui-userdata");r.uDiv=document.createElement("div"),"top"===n.p.toolbar[1]?$(r.uDiv).insertBefore(r.hDiv):"bottom"===n.p.toolbar[1]&&$(r.uDiv).insertAfter(r.hDiv),"both"===n.p.toolbar[1]?(r.ubDiv=document.createElement("div"),$(r.uDiv).addClass(Ee+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(r.hDiv).width(r.width-De),$(r.ubDiv).addClass(Ee+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(r.hDiv).width(r.width-De),qe&&$(r.ubDiv).hide()):$(r.uDiv).width(r.width-De).addClass(Ee+" ui-userdata-top").attr("id","t_"+this.id),qe&&$(r.uDiv).hide()}if(n.p.toppager&&(n.p.toppager=$.jgrid.jqID(n.p.id)+"_toppager",r.topDiv=$("<div id='"+n.p.toppager+"'></div>")[0],n.p.toppager="#"+n.p.toppager,$(r.topDiv).addClass(c(u,"toppagerBox",!0,"ui-jqgrid-toppager")).width(r.width-De).insertBefore(r.hDiv),W(n.p.toppager,"_t")),n.p.footerrow&&(r.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],Se=$("<div class='ui-jqgrid-hbox"+("rtl"===s?"-rtl":"")+"'></div>"),$(r.sDiv).append(Se).width(r.width-De).insertAfter(r.hDiv),$(Se).append(xe),r.footers=$(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,n.p.rownumbers&&(r.footers[0].className=c(u,"rownumBox",!0,"jqgrid-rownum")),qe&&$(r.sDiv).hide()),Se=null,n.p.caption){var Pe=n.p.datatype;!0===n.p.hidegrid&&($(".ui-jqgrid-titlebar-close",r.cDiv).click(function(e){var t,i=$.isFunction(n.p.onHeaderClick),o=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",a=this;return!0===n.p.toolbar[0]&&("both"===n.p.toolbar[1]&&(o+=", #"+$(r.ubDiv).attr("id")),o+=", #"+$(r.uDiv).attr("id")),t=$(o,"#gview_"+$.jgrid.jqID(n.p.id)).length,"visible"===n.p.gridstate?$(o,"#gbox_"+$.jgrid.jqID(n.p.id)).slideUp("fast",function(){0===--t&&($("span",a).removeClass(Fe).addClass(Ae),n.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(n.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(n.p.id)).hide(),$(n).triggerHandler("jqGridHeaderClick",[n.p.gridstate,e]),i&&(qe||n.p.onHeaderClick.call(n,n.p.gridstate,e)))}):"hidden"===n.p.gridstate&&$(o,"#gbox_"+$.jgrid.jqID(n.p.id)).slideDown("fast",function(){0===--t&&($("span",a).removeClass(Ae).addClass(Fe),qe&&(n.p.datatype=Pe,B(),qe=!1),n.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(n.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(n.p.id)).show(),$(n).triggerHandler("jqGridHeaderClick",[n.p.gridstate,e]),i&&(qe||n.p.onHeaderClick.call(n,n.p.gridstate,e)))}),!1}),qe&&(n.p.datatype="local",$(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))}else $(r.cDiv).hide(),n.p.toppager||$(r.hDiv).addClass(c(n.p.styleUI+".common","cornertop",!0));if($(r.hDiv).after(r.bDiv).mousemove(function(e){if(r.resizing)return r.dragMove(e),!1}),$(".ui-jqgrid-labels",r.hDiv).on("selectstart",function(){return!1}),$(document).on("mouseup.jqGrid"+n.p.id,function(){return!r.resizing||(r.dragEnd(!0),!1)}),"rtl"===n.p.direction&&$(n).on("jqGridAfterGridComplete.setRTLPadding",function(){var e=r.bDiv.offsetWidth-r.bDiv.clientWidth;n.p.scrollOffset=e,$("div:first",r.hDiv).css({paddingLeft:e+"px"}),r.hDiv.scrollLeft=r.bDiv.scrollLeft}),n.formatCol=S,n.sortData=X,n.updatepager=L,n.refreshIndex=O,n.setHeadCheckBox=V,n.constructTr=G,n.formatter=function(e,t,i,n,r){return k(e,t,i,n,r)},$.extend(r,{populate:B,emptyRows:E,beginReq:H,endReq:U}),this.grid=r,n.addXmlData=function(e){N(e)},n.addJSONData=function(e){M(e)},this.grid.cols=this.rows[0].cells,$(n).triggerHandler("jqGridInitGrid"),$.isFunction(n.p.onInitGrid)&&n.p.onInitGrid.call(n),B(),n.p.hiddengrid=!1,n.p.responsive){var Oe="onorientationchange"in window,Ge=Oe?"orientationchange":"resize";$(window).on(Ge,function(){$(n).jqGrid("resizeGrid")})}}})},$.jgrid.extend({getGridParam:function(e,t){var i,n=this[0];if(n&&n.grid){if(void 0===t&&"string"!=typeof t&&(t="jqGrid"),i=n.p,"jqGrid"!==t)try{i=$(n).data(t)}catch(e){i=n.p}return e?void 0!==i[e]?i[e]:null:i}},setGridParam:function(e,t){return this.each(function(){if(null==t&&(t=!1),this.grid&&"object"==typeof e)if(!0===t){var i=$.extend({},this.p,e);this.p=i}else $.extend(!0,this.p,e)})},getGridRowById:function(e){var t;return this.each(function(){try{for(var i=this.rows.length;i--;)if(e.toString()===this.rows[i].id){t=this.rows[i];break}}catch(i){t=$(this.grid.bDiv).find("#"+$.jgrid.jqID(e))}}),t},getDataIDs:function(){var e,t=[],i=0,n=0;return this.each(function(){if((e=this.rows.length)&&e>0)for(;i<e;)$(this.rows[i]).hasClass("jqgrow")&&(t[n]=this.rows[i].id,n++),i++}),t},setSelection:function(e,t,i){return this.each(function(){var n,r,o,a,s,l,d,c=this,u=$.jgrid.getMethod("getStyleUI"),p=u(c.p.styleUI+".common","highlight",!0),f=u(c.p.styleUI+".common","disabled",!0);void 0!==e&&(t=!1!==t,!(r=$(c).jqGrid("getGridRowById",e))||!r.className||r.className.indexOf(f)>-1||(!0===c.p.scrollrows&&(o=$(c).jqGrid("getGridRowById",e).rowIndex)>=0&&function(e){var t=$(c.grid.bDiv)[0].clientHeight,i=$(c.grid.bDiv)[0].scrollTop,n=$(c.rows[e]).position().top,r=c.rows[e].clientHeight;n+r>=t+i?$(c.grid.bDiv)[0].scrollTop=n-(t+i)+r+i:n<t+i&&n<i&&($(c.grid.bDiv)[0].scrollTop=n)}(o),!0===c.p.frozenColumns&&(l=c.p.id+"_frozen"),c.p.multiselect?(c.setHeadCheckBox(!1),c.p.selrow=r.id,a=$.inArray(c.p.selrow,c.p.selarrrow),-1===a?("ui-subgrid"!==r.className&&$(r).addClass(p).attr("aria-selected","true"),n=!0,c.p.selarrrow.push(c.p.selrow)):("ui-subgrid"!==r.className&&$(r).removeClass(p).attr("aria-selected","false"),n=!1,c.p.selarrrow.splice(a,1),s=c.p.selarrrow[0],c.p.selrow=void 0===s?null:s),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(r.id))[c.p.useProp?"prop":"attr"]("checked",n),l&&(-1===a?$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l)).addClass(p):$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l)).removeClass(p),$("#jqg_"+$.jgrid.jqID(c.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l))[c.p.useProp?"prop":"attr"]("checked",n)),t&&($(c).triggerHandler("jqGridSelectRow",[r.id,n,i]),c.p.onSelectRow&&c.p.onSelectRow.call(c,r.id,n,i))):"ui-subgrid"!==r.className&&(c.p.selrow!==r.id?(d=$(c).jqGrid("getGridRowById",c.p.selrow),d&&$(d).removeClass(p).attr({"aria-selected":"false",tabindex:"-1"}),$(r).addClass(p).attr({"aria-selected":"true",tabindex:"0"}),l&&($("#"+$.jgrid.jqID(c.p.selrow),"#"+$.jgrid.jqID(l)).removeClass(p),$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(l)).addClass(p)),n=!0):n=!1,c.p.selrow=r.id,t&&($(c).triggerHandler("jqGridSelectRow",[r.id,n,i]),c.p.onSelectRow&&c.p.onSelectRow.call(c,r.id,n,i)))))})},resetSelection:function(e){return this.each(function(){var t,i,n=this,r=$.jgrid.getMethod("getStyleUI"),o=r(n.p.styleUI+".common","highlight",!0),a=r(n.p.styleUI+".common","hover",!0);if(!0===n.p.frozenColumns&&(i=n.p.id+"_frozen"),void 0!==e){if(t=e===n.p.selrow?n.p.selrow:e,$("#"+$.jgrid.jqID(n.p.id)+" tbody:first tr#"+$.jgrid.jqID(t)).removeClass(o).attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i)).removeClass(o),n.p.multiselect){$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(n.p.id))[n.p.useProp?"prop":"attr"]("checked",!1),i&&$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i))[n.p.useProp?"prop":"attr"]("checked",!1),n.setHeadCheckBox(!1);var s=$.inArray($.jgrid.jqID(t),n.p.selarrrow);-1!==s&&n.p.selarrrow.splice(s,1)}n.p.onUnSelectRow&&n.p.onUnSelectRow.call(n,t),t=null}else n.p.multiselect?($(n.p.selarrrow).each(function(e,t){$($(n).jqGrid("getGridRowById",t)).removeClass(o).attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(t))[n.p.useProp?"prop":"attr"]("checked",!1),i&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i)).removeClass(o),$("#jqg_"+$.jgrid.jqID(n.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(i))[n.p.useProp?"prop":"attr"]("checked",!1)),n.p.onUnSelectRow&&n.p.onUnSelectRow.call(n,t)}),n.setHeadCheckBox(!1),n.p.selarrrow=[],n.p.selrow=null):n.p.selrow&&($("#"+$.jgrid.jqID(n.p.id)+" tbody:first tr#"+$.jgrid.jqID(n.p.selrow)).removeClass(o).attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(n.p.selrow),"#"+$.jgrid.jqID(i)).removeClass(o),n.p.onUnSelectRow&&n.p.onUnSelectRow.call(n,n.p.selrow),n.p.selrow=null);!0===n.p.cellEdit&&parseInt(n.p.iCol,10)>=0&&parseInt(n.p.iRow,10)>=0&&($("td:eq("+n.p.iCol+")",n.rows[n.p.iRow]).removeClass("edit-cell "+o),$(n.rows[n.p.iRow]).removeClass("selected-row "+a)),n.p.savedRow=[]})},getRowData:function(e,t){var i,n,r={},o=!1,a=0;return this.each(function(){var s,l,d=this;if(null==e)o=!0,i=[],n=d.rows.length-1;else{if(!(l=$(d).jqGrid("getGridRowById",e)))return r;n=1}for(t&&!0===t&&d.p.data.length>0||(t=!1);a<n;)o&&(l=d.rows[a]),$(l).hasClass("jqgrow")&&(t?r=d.p.data[d.p._index[l.id]]:$('td[role="gridcell"]',l).each(function(e){if("cb"!==(s=d.p.colModel[e].name)&&"subgrid"!==s&&"rn"!==s)if(!0===d.p.treeGrid&&s===d.p.ExpandColumn)r[s]=$.jgrid.htmlDecode($("span:first",this).html());else try{r[s]=$.unformat.call(d,this,{rowId:l.id,colModel:d.p.colModel[e]},e)}catch(e){r[s]=$.jgrid.htmlDecode($(this).html())}}),o&&(i.push(r),r={})),a++}),i||r},delRowData:function(e){var t,i,n,r=!1;return this.each(function(){var o=this;if(!(t=$(o).jqGrid("getGridRowById",e)))return!1;if(o.p.subGrid&&(n=$(t).next(),n.hasClass("ui-subgrid")&&n.remove()),$(t).remove(),o.p.records--,o.p.reccount--,o.updatepager(!0,!1),r=!0,o.p.multiselect&&-1!==(i=$.inArray(e,o.p.selarrrow))&&o.p.selarrrow.splice(i,1),o.p.multiselect&&o.p.selarrrow.length>0?o.p.selrow=o.p.selarrrow[o.p.selarrrow.length-1]:o.p.selrow===e&&(o.p.selrow=null),"local"===o.p.datatype){var a=$.jgrid.stripPref(o.p.idPrefix,e),s=o.p._index[a];void 0!==s&&(o.p.data.splice(s,1),o.refreshIndex())}if(!0===o.p.altRows&&r){var l=o.p.altclass;$(o.rows).each(function(e){e%2==1?$(this).addClass(l):$(this).removeClass(l)})}}),r},setRowData:function(e,t,i){var n,r,o=!0;return this.each(function(){if(!this.grid)return!1;var a,s,l=this,d=typeof i,c={};if(!(s=$(this).jqGrid("getGridRowById",e)))return!1;if(t)try{if($(this.p.colModel).each(function(i){n=this.name;var o=$.jgrid.getAccessor(t,n);void 0!==o&&(c[n]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?$.unformat.date.call(l,o,this):o,a=l.formatter(e,c[n],i,t,"edit"),r=this.title?{title:$.jgrid.stripHtml(a)}:{},!0===l.p.treeGrid&&n===l.p.ExpandColumn?$("td[role='gridcell']:eq("+i+") > span:first",s).html(a).attr(r):$("td[role='gridcell']:eq("+i+")",s).html(a).attr(r))}),"local"===l.p.datatype){var u,p=$.jgrid.stripPref(l.p.idPrefix,e),f=l.p._index[p];if(l.p.treeGrid)for(u in l.p.treeReader)l.p.treeReader.hasOwnProperty(u)&&delete c[l.p.treeReader[u]];void 0!==f&&(l.p.data[f]=$.extend(!0,l.p.data[f],c)),c=null}}catch(e){o=!1}o&&("string"===d?$(s).addClass(i):null!==i&&"object"===d&&$(s).css(i),$(l).triggerHandler("jqGridAfterGridComplete"))}),o},addRowData:function(e,t,i,n){-1===$.inArray(i,["first","last","before","after"])&&(i="last");var r,o,a,s,l,d,c,u,p,f,h,g,m,v,b=!1,y="",w="",x="";return t&&($.isArray(t)?(p=!0,f=e):(t=[t],p=!1),this.each(function(){var j=this,_=t.length;l=!0===j.p.rownumbers?1:0,a=!0===j.p.multiselect?1:0,s=!0===j.p.subGrid?1:0,p||(void 0!==e?e=String(e):(e=$.jgrid.randId(),!1!==j.p.keyName&&(f=j.p.keyName,void 0!==t[0][f]&&(e=t[0][f])))),h=j.p.altclass;var C,q=0,S=$(j).jqGrid("getStyleUI",j.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+j.p.direction),D={},k=!!$.isFunction(j.p.afterInsertRow);for(l&&(y=$(j).jqGrid("getStyleUI",j.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),a&&(w=$(j).jqGrid("getStyleUI",j.p.styleUI+".base","multiBox",!1,"cbox"));q<_;){if(g=t[q],o=[],C=S,p){try{e=g[f],void 0===e&&(e=$.jgrid.randId())}catch(t){e=$.jgrid.randId()}C+=!0===j.p.altRows&&(j.rows.length-1)%2==0?" "+h:""}for(v=e,e=j.p.idPrefix+e,l&&(x=j.formatCol(0,1,"",null,e,!0),o[o.length]='<td role="gridcell" '+y+" "+x+">0</td>"),a&&(u='<input role="checkbox" type="checkbox" id="jqg_'+j.p.id+"_"+e+'" '+w+"/>",x=j.formatCol(l,1,"",null,e,!0),o[o.length]='<td role="gridcell" '+x+">"+u+"</td>"),s&&(o[o.length]=$(j).jqGrid("addSubGridCell",a+l,1)),c=a+s+l;c<j.p.colModel.length;c++)m=j.p.colModel[c],r=m.name,D[r]=g[r],u=j.formatter(e,$.jgrid.getAccessor(g,r),c,g),x=j.formatCol(c,1,u,g,e,D),o[o.length]='<td role="gridcell" '+x+">"+u+"</td>";if(o.unshift(j.constructTr(e,!1,C,D,g)),o[o.length]="</tr>",0===j.rows.length)$("table:first",j.grid.bDiv).append(o.join(""));else switch(i){case"last":$(j.rows[j.rows.length-1]).after(o.join("")),d=j.rows.length-1;break;case"first":$(j.rows[0]).after(o.join("")),d=1;break;case"after":d=$(j).jqGrid("getGridRowById",n),d&&($(j.rows[d.rowIndex+1]).hasClass("ui-subgrid")?$(j.rows[d.rowIndex+1]).after(o):$(d).after(o.join("")),d=d.rowIndex+1);break;case"before":d=$(j).jqGrid("getGridRowById",n),d&&($(d).before(o.join("")),d=d.rowIndex-1)}!0===j.p.subGrid&&$(j).jqGrid("addSubGrid",a+l,d),j.p.records++,j.p.reccount++,$(j).triggerHandler("jqGridAfterInsertRow",[e,g,g]),k&&j.p.afterInsertRow.call(j,e,g,g),q++,"local"===j.p.datatype&&(D[j.p.localReader.id]=v,j.p._index[v]=j.p.data.length,j.p.data.push(D),D={})}!0!==j.p.altRows||p||("last"===i?(j.rows.length-1)%2==0&&$(j.rows[j.rows.length-1]).addClass(h):$(j.rows).each(function(e){e%2==0?$(this).addClass(h):$(this).removeClass(h)})),j.updatepager(!0,!0),b=!0})),b},footerData:function(e,t,i){function n(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}var r,o,a=!1,s={};return void 0===e&&(e="get"),"boolean"!=typeof i&&(i=!0),e=e.toLowerCase(),this.each(function(){var l,d=this;return!(!d.grid||!d.p.footerrow)&&(("set"!==e||!n(t))&&(a=!0,void $(this.p.colModel).each(function(n){r=this.name,"set"===e?void 0!==t[r]&&(l=i?d.formatter("",t[r],n,t,"edit"):t[r],o=this.title?{title:$.jgrid.stripHtml(l)}:{},$("tr.footrow td:eq("+n+")",d.grid.sDiv).html(l).attr(o),a=!0):"get"===e&&(s[r]=$("tr.footrow td:eq("+n+")",d.grid.sDiv).html())})))}),"get"===e?s:a},showHideCol:function(e,t){return this.each(function(){var i,n=this,r=!1,o=$.jgrid.cell_width?0:n.p.cellLayout;if(n.grid){"string"==typeof e&&(e=[e]),t="none"!==t?"":"none";var a=""===t,s=n.p.groupHeader&&($.isArray(n.p.groupHeader)||$.isFunction(n.p.groupHeader));if(s&&$(n).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(s){if(-1!==$.inArray(this.name,e)&&this.hidden===a){if(!0===n.p.frozenColumns&&!0===this.frozen)return!0;$("tr[role=row]",n.grid.hDiv).each(function(){$(this.cells[s]).css("display",t)}),$(n.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[s]).css("display",t)}),n.p.footerrow&&$("tr.footrow td:eq("+s+")",n.grid.sDiv).css("display",t),i=parseInt(this.width,10),"none"===t?n.p.tblwidth-=i+o:n.p.tblwidth+=i+o,this.hidden=!a,r=!0,$(n).triggerHandler("jqGridShowHideCol",[a,this.name,s])}}),!0===r&&(!0!==n.p.shrinkToFit||isNaN(n.p.height)||(n.p.tblwidth+=parseInt(n.p.scrollOffset,10)),$(n).jqGrid("setGridWidth",!0===n.p.shrinkToFit?n.p.tblwidth:n.p.width)),s){var l=$.extend([],n.p.groupHeader);n.p.groupHeader=null;for(var d=0;d<l.length;d++)$(n).jqGrid("setGroupHeaders",l[d])}}})},hideCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,t,i){function n(t){var i;i=t.length?$.makeArray(t):$.extend({},t),$.each(e,function(e){t[e]=i[this]})}function r(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(e,function(){var e=i[this];e&&t.appendChild(e)})})}var o=this.get(0);n(o.p.colModel),n(o.p.colNames),n(o.grid.headers),r($("thead:first",o.grid.hDiv),i&&":not(.ui-jqgrid-labels)"),t&&r($("#"+$.jgrid.jqID(o.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),o.p.footerrow&&r($("tbody:first",o.grid.sDiv)),o.p.remapColumns&&(o.p.remapColumns.length?n(o.p.remapColumns):o.p.remapColumns=$.makeArray(e)),o.p.lastsort=$.inArray(o.p.lastsort,e),o.p.treeGrid&&(o.p.expColInd=$.inArray(o.p.expColInd,e)),$(o).triggerHandler("jqGridRemapColumns",[e,t,i])},setGridWidth:function(e,t){return this.each(function(){if(this.grid){var i,n,r,o,a=this,s=0,l=$.jgrid.cell_width?0:a.p.cellLayout,d=0,c=!1,u=a.p.scrollOffset,p=0,f="Bootstrap"===a.p.styleUI?2:0;if("boolean"!=typeof t&&(t=a.p.shrinkToFit),!isNaN(e)){if(e=parseInt(e,10),a.grid.width=a.p.width=e,$("#gbox_"+$.jgrid.jqID(a.p.id)).css("width",e+"px"),$("#gview_"+$.jgrid.jqID(a.p.id)).css("width",e+"px"),$(a.grid.bDiv).css("width",e-f+"px"),$(a.grid.hDiv).css("width",e-f+"px"),a.p.pager&&$(a.p.pager).css("width",e+"px"),a.p.toppager&&$(a.p.toppager).css("width",e-f+"px"),!0===a.p.toolbar[0]&&($(a.grid.uDiv).css("width",e-f+"px"),"both"===a.p.toolbar[1]&&$(a.grid.ubDiv).css("width",e-f+"px")),a.p.footerrow&&$(a.grid.sDiv).css("width",e-f+"px"),!1===t&&!0===a.p.forceFit&&(a.p.forceFit=!1),!0===t){if($.each(a.p.colModel,function(){!1===this.hidden&&(i=this.widthOrg,s+=i+l,this.fixed?p+=i+l:d++)}),0===d)return;a.p.tblwidth=s,r=e-l*d-p,isNaN(a.p.height)||($(a.grid.bDiv)[0].clientHeight<$(a.grid.bDiv)[0].scrollHeight||1===a.rows.length)&&(c=!0,r-=u),s=0;var h=a.grid.cols.length>0;if($.each(a.p.colModel,function(e){if(!1===this.hidden&&!this.fixed){if(i=this.widthOrg,(i=Math.round(r*i/(a.p.tblwidth-l*d-p)))<0)return;this.width=i,s+=i,a.grid.headers[e].width=i,a.grid.headers[e].el.style.width=i+"px",a.p.footerrow&&(a.grid.footers[e].style.width=i+"px"),h&&(a.grid.cols[e].style.width=i+"px"),n=e}}),!n)return;if(o=0,c?e-p-(s+l*d)!==u&&(o=e-p-(s+l*d)-u):1!==Math.abs(e-p-(s+l*d))&&(o=e-p-(s+l*d)),a.p.colModel[n].width+=o,a.p.tblwidth=s+o+l*d+p,a.p.tblwidth>e){var g=a.p.tblwidth-parseInt(e,10);a.p.tblwidth=e,i=a.p.colModel[n].width=a.p.colModel[n].width-g}else i=a.p.colModel[n].width;a.grid.headers[n].width=i,a.grid.headers[n].el.style.width=i+"px",h&&(a.grid.cols[n].style.width=i+"px"),a.p.footerrow&&(a.grid.footers[n].style.width=i+"px")}a.p.tblwidth&&($("table:first",a.grid.bDiv).css("width",a.p.tblwidth+"px"),$("table:first",a.grid.hDiv).css("width",a.p.tblwidth+"px"),a.grid.hDiv.scrollLeft=a.grid.bDiv.scrollLeft,a.p.footerrow&&$("table:first",a.grid.sDiv).css("width",a.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){var t=this;if(t.grid){var i=$(t.grid.bDiv);i.css({height:e+(isNaN(e)?"":"px")}),!0===t.p.frozenColumns&&$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(i.height()-16),t.p.height=e,t.p.scroll&&t.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){var t=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=e,$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(e),$(this.grid.cDiv).show(),$(this.grid.hDiv).removeClass(t)})},setLabel:function(e,t,i,n){return this.each(function(){var r=this,o=-1;if(r.grid&&null!=e&&(isNaN(e)?$(r.p.colModel).each(function(t){if(this.name===e)return o=t,!1}):o=parseInt(e,10),o>=0)){var a=$("tr.ui-jqgrid-labels th:eq("+o+")",r.grid.hDiv);if(t){var s=$(".s-ico",a);$("[id^=jqgh_]",a).empty().html(t).append(s),r.p.colNames[o]=t}i&&("string"==typeof i?$(a).addClass(i):$(a).css(i)),"object"==typeof n&&$(a).attr(n)}})},setSortIcon:function(e,t){return this.each(function(){var i=this,n=-1;if(i.grid&&null!=e&&(isNaN(e)?$(i.p.colModel).each(function(t){if(this.name===e)return n=t,!1}):n=parseInt(e,10),n>=0)){var r=$("tr.ui-jqgrid-labels th:eq("+n+")",i.grid.hDiv);"left"===t?r.find(".s-ico").css("float","left"):r.find(".s-ico").css("float","none")}})},setCell:function(e,t,i,n,r,o){return this.each(function(){var a,s,l=this,d=-1;if(l.grid&&(isNaN(t)?$(l.p.colModel).each(function(e){if(this.name===t)return d=e,!1}):d=parseInt(t,10),d>=0)){var c=$(l).jqGrid("getGridRowById",e);if(c){var u=$("td:eq("+d+")",c),p=0,f=[];if(""!==i||!0===o){if(void 0!==c.cells)for(;p<c.cells.length;)f.push(c.cells[p].innerHTML),p++;if(a=l.formatter(e,i,d,f,"edit"),s=l.p.colModel[d].title?{title:$.jgrid.stripHtml(a)}:{},l.p.treeGrid&&$(".tree-wrap",$(u)).length>0?$("span",$(u)).html(a).attr(s):$(u).html(a).attr(s),"local"===l.p.datatype){var h,g=l.p.colModel[d];i=g.formatter&&"string"==typeof g.formatter&&"date"===g.formatter?$.unformat.date.call(l,i,g):i,h=l.p._index[$.jgrid.stripPref(l.p.idPrefix,e)],void 0!==h&&(l.p.data[h][g.name]=i)}}"string"==typeof n?$(u).addClass(n):n&&$(u).css(n),"object"==typeof r&&$(u).attr(r)}}})},getCell:function(e,t){var i=!1;return this.each(function(){var n,r,o=this,a=-1;if(o.grid&&(n=t,isNaN(t)?$(o.p.colModel).each(function(e){if(this.name===t)return n=this.name,a=e,!1}):a=parseInt(t,10),a>=0)){if(r=$(o).jqGrid("getGridRowById",e))try{i=$.unformat.call(o,$("td:eq("+a+")",r),{rowId:r.id,colModel:o.p.colModel[a]},a)}catch(e){i=$.jgrid.htmlDecode($("td:eq("+a+")",r).html())}o.p.treeGrid&&i&&o.p.ExpandColumn===n&&(i=$("<div>"+i+"</div>").find("span:first").html())}}),i},getCol:function(e,t,i){var n,r,o,a,s=[],l=0;return t="boolean"==typeof t&&t,void 0===i&&(i=!1),this.each(function(){var d=this,c=-1;if(d.grid&&(isNaN(e)?$(d.p.colModel).each(function(t){if(this.name===e)return c=t,!1}):c=parseInt(e,10),c>=0)){
var u=d.rows.length,p=0,f=0;if(u&&u>0){for(;p<u;){if($(d.rows[p]).hasClass("jqgrow")){try{n=$.unformat.call(d,$(d.rows[p].cells[c]),{rowId:d.rows[p].id,colModel:d.p.colModel[c]},c)}catch(e){n=$.jgrid.htmlDecode(d.rows[p].cells[c].innerHTML)}i?(a=parseFloat(n),isNaN(a)||(l+=a,void 0===o&&(o=r=a),r=Math.min(r,a),o=Math.max(o,a),f++)):t?s.push({id:d.rows[p].id,value:n}):s.push(n)}p++}if(i)switch(i.toLowerCase()){case"sum":s=l;break;case"avg":s=l/f;break;case"count":s=u-1;break;case"min":s=r;break;case"max":s=o}}}}),s},clearGridData:function(e){return this.each(function(){var t=this;if(t.grid){if("boolean"!=typeof e&&(e=!1),t.p.deepempty)$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove();else{var i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)}t.p.footerrow&&e&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1)}})},getInd:function(e,t){var i,n=!1;return this.each(function(){(i=$(this).jqGrid("getGridRowById",e))&&(n=!0===t?i:i.rowIndex)}),n},bindKeys:function(e){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var e=this;$("body").is("[role]")||$("body").attr("role","application"),e.p.scrollrows=t.scrollingRows,$(e).keydown(function(i){var n,r,o,a=$(e).find("tr[tabindex=0]")[0],s=e.p.treeReader.expanded_field;if(a)if(o=e.p._index[$.jgrid.stripPref(e.p.idPrefix,a.id)],37===i.keyCode||38===i.keyCode||39===i.keyCode||40===i.keyCode){if(38===i.keyCode){if(r=a.previousSibling,n="",r)if($(r).is(":hidden")){for(;r;)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){n=r.id;break}}else n=r.id;$(e).jqGrid("setSelection",n,!0,i),i.preventDefault()}if(40===i.keyCode){if(r=a.nextSibling,n="",r)if($(r).is(":hidden")){for(;r;)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){n=r.id;break}}else n=r.id;$(e).jqGrid("setSelection",n,!0,i),i.preventDefault()}37===i.keyCode&&(e.p.treeGrid&&e.p.data[o][s]&&$(a).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyLeft",[e.p.selrow]),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(e,e.p.selrow)),39===i.keyCode&&(e.p.treeGrid&&!e.p.data[o][s]&&$(a).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyRight",[e.p.selrow]),$.isFunction(t.onRightKey)&&t.onRightKey.call(e,e.p.selrow))}else 13===i.keyCode?($(e).triggerHandler("jqGridKeyEnter",[e.p.selrow]),$.isFunction(t.onEnter)&&t.onEnter.call(e,e.p.selrow)):32===i.keyCode&&($(e).triggerHandler("jqGridKeySpace",[e.p.selrow]),$.isFunction(t.onSpace)&&t.onSpace.call(e,e.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown")})},getLocalRow:function(e){var t,i=!1;return this.each(function(){void 0!==e&&(t=this.p._index[$.jgrid.stripPref(this.p.idPrefix,e)])>=0&&(i=this.p.data[t])}),i},progressBar:function(e){return e=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},e||{}),this.each(function(){var t,i,n="show"===e.method,r=$("#load_"+$.jgrid.jqID(this.p.id)),o=$(window).scrollTop();switch(""!==e.htmlcontent&&r.html(e.htmlcontent),e.loadtype){case"disable":break;case"enable":r.toggle(n);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(n),r.toggle(n)}r.is(":visible")&&(t=r.offsetParent(),r.css("top",""),r.offset().top<o&&(i=Math.min(10+o-t.offset().top,t.height()-r.height()),r.css("top",i+"px")))})},getColProp:function(e){var t={},i=this[0];if(!i.grid)return!1;var n,r=i.p.colModel;for(n=0;n<r.length;n++)if(r[n].name===e){t=r[n];break}return t},setColProp:function(e,t){return this.each(function(){if(this.grid&&t){var i,n=this.p.colModel;for(i=0;i<n.length;i++)if(n[i].name===e){$.extend(!0,this.p.colModel[i],t);break}}})},sortGrid:function(e,t,i){return this.each(function(){var n,r=this,o=-1,a=!1;if(r.grid){for(e||(e=r.p.sortname),n=0;n<r.p.colModel.length;n++)if(r.p.colModel[n].index===e||r.p.colModel[n].name===e){o=n,!0===r.p.frozenColumns&&!0===r.p.colModel[n].frozen&&(a=r.grid.fhDiv.find("#"+r.p.id+"_"+e));break}if(-1!==o){var s=r.p.colModel[o].sortable;a||(a=r.grid.headers[o].el),"boolean"!=typeof s&&(s=!0),"boolean"!=typeof t&&(t=!1),s&&r.sortData("jqgh_"+r.p.id+"_"+e,o,t,i,a)}}})},setGridState:function(e){return this.each(function(){if(this.grid){var t=this,i=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),n=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===e?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideUp("fast"),t.p.pager&&$(t.p.pager).slideUp("fast"),t.p.toppager&&$(t.p.toppager).slideUp("fast"),!0===t.p.toolbar[0]&&("both"===t.p.toolbar[1]&&$(t.grid.ubDiv).slideUp("fast"),$(t.grid.uDiv).slideUp("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast"),$(".ui-jqgrid-headlink",t.grid.cDiv).removeClass(i).addClass(n),t.p.gridstate="hidden"):"visible"===e&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideDown("fast"),t.p.pager&&$(t.p.pager).slideDown("fast"),t.p.toppager&&$(t.p.toppager).slideDown("fast"),!0===t.p.toolbar[0]&&("both"===t.p.toolbar[1]&&$(t.grid.ubDiv).slideDown("fast"),$(t.grid.uDiv).slideDown("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast"),$(".ui-jqgrid-headlink",t.grid.cDiv).removeClass(n).addClass(i),t.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var e=this,t=e.p.colModel,i=0,n=t.length,r=-1,o=!1,a=$(e).jqGrid("getStyleUI",e.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),s=$(e).jqGrid("getStyleUI",e.p.styleUI+".common","hover",!0);if(!0!==e.p.subGrid&&!0!==e.p.treeGrid&&!0!==e.p.cellEdit&&!e.p.sortable&&!e.p.scroll){for(e.p.rownumbers&&i++,e.p.multiselect&&i++;i<n&&!0===t[i].frozen;)o=!0,r=i,i++;if(r>=0&&o){var l=e.p.caption?$(e.grid.cDiv).outerHeight():0,d=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(e.p.id)).height();e.p.toppager&&(l+=$(e.grid.topDiv).outerHeight()),!0===e.p.toolbar[0]&&"bottom"!==e.p.toolbar[1]&&(l+=$(e.grid.uDiv).outerHeight()),e.grid.fhDiv=$('<div style="position:absolute;'+("rtl"===e.p.direction?"right:0;":"left:0;")+"top:"+l+"px;height:"+d+'px;" class="frozen-div '+a+'"></div>'),e.grid.fbDiv=$('<div style="position:absolute;'+("rtl"===e.p.direction?"right:0;":"left:0;")+"top:"+(parseInt(l,10)+parseInt(d,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fhDiv);var c=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(e.p.id)).clone(!0);if(e.p.groupHeader){$("tr.jqg-first-row-header, tr.jqg-third-row-header",c).each(function(){$("th:gt("+r+")",this).remove()});var u,p,f=-1,h=-1;$("tr.jqg-second-row-header th",c).each(function(){if(u=parseInt($(this).attr("colspan"),10),p=parseInt($(this).attr("rowspan"),10),p&&(f++,h++),u&&(f+=u,h++),f===r)return h=r,!1}),f!==r&&(h=r),$("tr.jqg-second-row-header",c).each(function(){$("th:gt("+h+")",this).remove()})}else $("tr",c).each(function(){$("th:gt("+r+")",this).remove()});if($(c).width(1),$.jgrid.msie()||$(c).css("height","100%"),$(e.grid.fhDiv).append(c).mousemove(function(t){if(e.grid.resizing)return e.grid.dragMove(t),!1}),e.p.footerrow){var g=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(e.p.id)).height();e.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(l,10)+parseInt(d,10)+parseInt(g,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fsDiv);var m=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(e.p.id)).clone(!0);$("tr",m).each(function(){$("td:gt("+r+")",this).remove()}),$(m).width(1),$(e.grid.fsDiv).append(m)}$(e).on("jqGridResizeStop.setFrozenColumns",function(t,i,n){var r=$(".ui-jqgrid-htable",e.grid.fhDiv);$("th:eq("+n+")",r).width(i);var o=$(".ui-jqgrid-btable",e.grid.fbDiv);if($("tr:first td:eq("+n+")",o).width(i),e.p.footerrow){var a=$(".ui-jqgrid-ftable",e.grid.fsDiv);$("tr:first td:eq("+n+")",a).width(i)}}),$("#gview_"+$.jgrid.jqID(e.p.id)).append(e.grid.fbDiv),$(e.grid.fbDiv).on("mousewheel DOMMouseScroll",function(t){var i=$(e.grid.bDiv).scrollTop();t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?$(e.grid.bDiv).scrollTop(i-25):$(e.grid.bDiv).scrollTop(i+25),t.preventDefault()}),!0===e.p.hoverrows&&$("#"+$.jgrid.jqID(e.p.id)).off("mouseover mouseout"),$(e).on("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(e.p.id)+"_frozen").remove(),$(e.grid.fbDiv).height($(e.grid.bDiv).height()-14);var t=[];$("#"+$.jgrid.jqID(e.p.id)+" tr[role=row].jqgrow").each(function(){t.push($("td:visible:first",this).height())});var i=$("#"+$.jgrid.jqID(e.p.id)).clone(!0);$("tr[role=row]",i).each(function(){$("td[role=gridcell]:gt("+r+")",this).remove()}),$(i).width(1).attr("id",e.p.id+"_frozen"),$(e.grid.fbDiv).append(i),$("tr[role=row].jqgrow",i).each(function(e,i){$("td:not(.jqgrid-rownum):visible:first",this).height(t[e])}),!0===e.p.hoverrows&&($("tr.jqgrow",i).hover(function(){$(this).addClass(s),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)).addClass(s)},function(){$(this).removeClass(s),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)).removeClass(s)}),$("tr.jqgrow","#"+$.jgrid.jqID(e.p.id)).hover(function(){$(this).addClass(s),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)+"_frozen").addClass(s)},function(){$(this).removeClass(s),$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(e.p.id)+"_frozen").removeClass(s)})),i=null}),e.grid.hDiv.loading||$(e).triggerHandler("jqGridAfterGridComplete"),e.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){var e=this,t=$(e).jqGrid("getStyleUI",e.p.styleUI+".common","hover",!0);if($(e.grid.fhDiv).remove(),$(e.grid.fbDiv).remove(),e.grid.fhDiv=null,e.grid.fbDiv=null,e.p.footerrow&&($(e.grid.fsDiv).remove(),e.grid.fsDiv=null),$(this).off(".setFrozenColumns"),!0===e.p.hoverrows){var i;$("#"+$.jgrid.jqID(e.p.id)).on({mouseover:function(e){i=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(i).attr("class")&&$(i).addClass(t)},mouseout:function(e){i=$(e.target).closest("tr.jqgrow"),$(i).removeClass(t)}})}this.p.frozenColumns=!1}})},resizeColumn:function(e,t){return this.each(function(){var i,n,r=this.grid,o=this.p,a=o.colModel,s=a.length;if("string"==typeof e){for(i=0;i<s;i++)if(a[i].name===e){e=i;break}}else e=parseInt(e,10);if(t=parseInt(t,10),!("number"!=typeof e||e<0||e>a.length-1||"number"!=typeof t||t<o.minColWidth)){if(o.forceFit)for(o.nv=0,i=e+1;i<s;i++)if(!0!==a[i].hidden){o.nv=i-e;break}if(r.resizing={idx:e},n=t-r.headers[e].width,o.forceFit){if(r.headers[e+o.nv].width-n<o.minColWidth)return;r.headers[e+o.nv].newWidth=r.headers[e+o.nv].width-n}r.newWidth=o.tblwidth+n,r.headers[e].newWidth=t,r.dragEnd(!1)}})},getStyleUI:function(e,t,i,n){var r="",o="";try{var a=e.split(".");switch(i||(r="class=",o='"'),null==n&&(n=""),a.length){case 1:r+=o+$.trim(n+" "+$.jgrid.styleUI[a[0]][t]+o);break;case 2:r+=o+$.trim(n+" "+$.jgrid.styleUI[a[0]][a[1]][t]+o)}}catch(e){r=""}return r},resizeGrid:function(e){return this.each(function(){var t=this;void 0===e&&(e=500),setTimeout(function(){try{var e=$(window).width(),i=$("#gbox_"+$.jgrid.jqID(t.p.id)).parent().width(),n=t.p.width;n=e-i>3?i:e,$("#"+$.jgrid.jqID(t.p.id)).jqGrid("setGridWidth",n)}catch(e){}},e)})}}),$.jgrid.extend({editCell:function(e,t,i){return this.each(function(){var n,r,o,a,s=this,l=$(this).jqGrid("getStyleUI",s.p.styleUI+".common","highlight",!0),d=$(this).jqGrid("getStyleUI",s.p.styleUI+".common","hover",!0),c=$(this).jqGrid("getStyleUI",s.p.styleUI+".celledit","inputClass",!0);if(s.grid&&!0===s.p.cellEdit){if(t=parseInt(t,10),s.p.selrow=s.rows[e].id,s.p.knv||$(s).jqGrid("GridNav"),s.p.savedRow.length>0){if(!0===i&&e==s.p.iRow&&t==s.p.iCol)return;$(s).jqGrid("saveCell",s.p.savedRow[0].id,s.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID(s.p.knv)).attr("tabindex","-1").focus()},1);if(a=s.p.colModel[t],"subgrid"!==(n=a.name)&&"cb"!==n&&"rn"!==n){try{o=s.rows[e].cells[t]}catch(i){o=$("td:eq("+t+")",s.rows[e])}if(!0!==a.editable||!0!==i||o.hasClass("not-editable-cell")||$.isFunction(s.p.isCellEditable)&&!s.p.isCellEditable.call(s,n,e,t))parseInt(s.p.iCol,10)>=0&&parseInt(s.p.iRow,10)>=0&&$(s.rows[s.p.iRow]).removeClass("selected-row "+d).find("td:eq("+s.p.iCol+")").removeClass("edit-cell "+l),o.addClass("edit-cell "+l),$(s.rows[e]).addClass("selected-row "+d),r=o.html().replace(/\&#160\;/gi,""),$(s).triggerHandler("jqGridSelectCell",[s.rows[e].id,n,r,e,t]),$.isFunction(s.p.onSelectCell)&&s.p.onSelectCell.call(s,s.rows[e].id,n,r,e,t);else{parseInt(s.p.iCol,10)>=0&&parseInt(s.p.iRow,10)>=0&&$(s.rows[s.p.iRow]).removeClass("selected-row "+d).find("td:eq("+s.p.iCol+")").removeClass("edit-cell "+l),$(o).addClass("edit-cell "+l),$(s.rows[e]).addClass("selected-row "+d);try{r=$.unformat.call(s,o,{rowId:s.rows[e].id,colModel:a},t)}catch(e){r=a.edittype&&"textarea"===a.edittype?$(o).text():$(o).html()}if(s.p.autoencode&&(r=$.jgrid.htmlDecode(r)),a.edittype||(a.edittype="text"),s.p.savedRow.push({id:e,ic:t,name:n,v:r}),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),$.isFunction(s.p.formatCell)){var u=s.p.formatCell.call(s,s.rows[e].id,n,r,e,t);void 0!==u&&(r=u)}$(s).triggerHandler("jqGridBeforeEditCell",[s.rows[e].id,n,r,e,t]),$.isFunction(s.p.beforeEditCell)&&s.p.beforeEditCell.call(s,s.rows[e].id,n,r,e,t);var p=$.extend({},a.editoptions||{},{id:e+"_"+n,name:n,rowId:s.rows[e].id,oper:"edit"}),f=$.jgrid.createEl.call(s,a.edittype,p,r,!0,$.extend({},$.jgrid.ajaxOptions,s.p.ajaxSelectOptions||{}));$.inArray(a.edittype,["text","textarea","password","select"])>-1&&$(f).addClass(c),$(o).html("").append(f).attr("tabindex","0"),$.jgrid.bindEv.call(s,f,p),window.setTimeout(function(){$(f).focus()},1),$("input, select, textarea",o).on("keydown",function(i){if(27===i.keyCode&&($("input.hasDatepicker",o).length>0?$(".ui-datepicker").is(":hidden")?$(s).jqGrid("restoreCell",e,t):$("input.hasDatepicker",o).datepicker("hide"):$(s).jqGrid("restoreCell",e,t)),13===i.keyCode&&!i.shiftKey)return $(s).jqGrid("saveCell",e,t),!1;if(9===i.keyCode){if(s.grid.hDiv.loading)return!1;i.shiftKey?$(s).jqGrid("prevCell",e,t):$(s).jqGrid("nextCell",e,t)}i.stopPropagation()}),$(s).triggerHandler("jqGridAfterEditCell",[s.rows[e].id,n,r,e,t]),$.isFunction(s.p.afterEditCell)&&s.p.afterEditCell.call(s,s.rows[e].id,n,r,e,t)}s.p.iCol=t,s.p.iRow=e}}})},saveCell:function(e,t){return this.each(function(){var i,n=this,r=$.jgrid.getRegional(this,"errors"),o=$.jgrid.getRegional(this,"edit");if(n.grid&&!0===n.p.cellEdit){if(null!==(i=n.p.savedRow.length>=1?0:null)){var a,s,l=$("td:eq("+t+")",n.rows[e]),d=n.p.colModel[t],c=d.name,u=$.jgrid.jqID(c),p=$(l).offset();switch(d.edittype){case"select":if(d.editoptions.multiple){var f=$("#"+e+"_"+u,n.rows[e]),h=[];a=$(f).val(),a?a.join(","):a="",$("option:selected",f).each(function(e,t){h[e]=$(t).text()}),s=h.join(",")}else a=$("#"+e+"_"+u+" option:selected",n.rows[e]).val(),s=$("#"+e+"_"+u+" option:selected",n.rows[e]).text();d.formatter&&(s=a);break;case"checkbox":var g=["Yes","No"];d.editoptions&&(g=d.editoptions.value.split(":")),a=$("#"+e+"_"+u,n.rows[e]).is(":checked")?g[0]:g[1],s=a;break;case"password":case"text":case"textarea":case"button":a=$("#"+e+"_"+u,n.rows[e]).val(),s=a;break;case"custom":try{if(!d.editoptions||!$.isFunction(d.editoptions.custom_value))throw"e1";if(void 0===(a=d.editoptions.custom_value.call(n,$(".customelement",l),"get")))throw"e2";s=a}catch(e){"e1"===e?$.jgrid.info_dialog(r.errcap,"function 'custom_value' "+o.msg.nodefined,o.bClose,{styleUI:n.p.styleUI}):"e2"===e?$.jgrid.info_dialog(r.errcap,"function 'custom_value' "+o.msg.novalue,o.bClose,{styleUI:n.p.styleUI}):$.jgrid.info_dialog(r.errcap,e.message,o.bClose,{styleUI:n.p.styleUI})}}if(s!==n.p.savedRow[i].v){var m=$(n).triggerHandler("jqGridBeforeSaveCell",[n.rows[e].id,c,a,e,t]);if(m&&(a=m,s=m),$.isFunction(n.p.beforeSaveCell)){var v=n.p.beforeSaveCell.call(n,n.rows[e].id,c,a,e,t);v&&(a=v,s=v)}var b=$.jgrid.checkValues.call(n,a,t),y=!1;if(!0===b[0]){var w=$(n).triggerHandler("jqGridBeforeSubmitCell",[n.rows[e].id,c,a,e,t])||{};if($.isFunction(n.p.beforeSubmitCell)&&((w=n.p.beforeSubmitCell.call(n,n.rows[e].id,c,a,e,t))||(w={})),$("input.hasDatepicker",l).length>0&&$("input.hasDatepicker",l).datepicker("hide"),"remote"===n.p.cellsubmit)if(n.p.cellurl){var x={};n.p.autoencode&&(a=$.jgrid.htmlEncode(a)),d.editoptions&&d.editoptions.NullIfEmpty&&""===a&&(a="null",y=!0),x[c]=a;var j,_,C;C=n.p.prmNames,j=C.id,_=C.oper,x[j]=$.jgrid.stripPref(n.p.idPrefix,n.rows[e].id),x[_]=C.editoper,x=$.extend(w,x),$(n).jqGrid("progressBar",{method:"show",loadtype:n.p.loadui,htmlcontent:$.jgrid.getRegional(n,"defaults.savetext")}),n.grid.hDiv.loading=!0,$.ajax($.extend({url:n.p.cellurl,data:$.isFunction(n.p.serializeCellData)?n.p.serializeCellData.call(n,x,c):x,type:"POST",complete:function(i,d){if($(n).jqGrid("progressBar",{method:"hide",loadtype:n.p.loadui}),n.grid.hDiv.loading=!1,"success"===d){var f=$(n).triggerHandler("jqGridAfterSubmitCell",[n,i,x.id,c,a,e,t])||[!0,""];!0===f[0]&&$.isFunction(n.p.afterSubmitCell)&&(f=n.p.afterSubmitCell.call(n,i,x.id,c,a,e,t)),!0===f[0]?(y&&(a=""),$(l).empty(),$(n).jqGrid("setCell",n.rows[e].id,t,s,!1,!1,!0),$(l).addClass("dirty-cell"),$(n.rows[e]).addClass("edited"),$(n).triggerHandler("jqGridAfterSaveCell",[n.rows[e].id,c,a,e,t]),$.isFunction(n.p.afterSaveCell)&&n.p.afterSaveCell.call(n,n.rows[e].id,c,a,e,t),n.p.savedRow.splice(0,1)):($.isFunction(n.p.errorCell)?n.p.errorCell.call(n,i,d):$.jgrid.info_dialog(r.errcap,f[1],o.bClose,{styleUI:n.p.styleUI,top:p.top+30,left:p.left,onClose:function(){n.p.restoreCellonFail||$("#"+e+"_"+u,n.rows[e]).focus()}}),n.p.restoreCellonFail&&$(n).jqGrid("restoreCell",e,t))}},error:function(i,a,s){$("#lui_"+$.jgrid.jqID(n.p.id)).hide(),n.grid.hDiv.loading=!1,$(n).triggerHandler("jqGridErrorCell",[i,a,s]),$.isFunction(n.p.errorCell)?n.p.errorCell.call(n,i,a,s):$.jgrid.info_dialog(r.errcap,i.status+" : "+i.statusText+"<br/>"+a,o.bClose,{styleUI:n.p.styleUI,top:p.top+30,left:p.left,onClose:function(){n.p.restoreCellonFail||$("#"+e+"_"+u,n.rows[e]).focus()}}),n.p.restoreCellonFail&&$(n).jqGrid("restoreCell",e,t)}},$.jgrid.ajaxOptions,n.p.ajaxCellOptions||{}))}else try{$.jgrid.info_dialog(r.errcap,r.nourl,o.bClose,{styleUI:n.p.styleUI}),n.p.restoreCellonFail&&$(n).jqGrid("restoreCell",e,t)}catch(e){}"clientArray"===n.p.cellsubmit&&($(l).empty(),$(n).jqGrid("setCell",n.rows[e].id,t,s,!1,!1,!0),$(l).addClass("dirty-cell"),$(n.rows[e]).addClass("edited"),$(n).triggerHandler("jqGridAfterSaveCell",[n.rows[e].id,c,a,e,t]),$.isFunction(n.p.afterSaveCell)&&n.p.afterSaveCell.call(n,n.rows[e].id,c,a,e,t),n.p.savedRow.splice(0,1))}else try{$.isFunction(n.p.validationCell)?n.p.validationCell.call(n,$("#"+e+"_"+u,n.rows[e]),b[1],e,t):(window.setTimeout(function(){$.jgrid.info_dialog(r.errcap,a+" "+b[1],o.bClose,{styleUI:n.p.styleUI,top:p.top+30,left:p.left,onClose:function(){n.p.restoreCellonFail||$("#"+e+"_"+u,n.rows[e]).focus()}})},50),n.p.restoreCellonFail&&$(n).jqGrid("restoreCell",e,t))}catch(e){alert(b[1])}}else $(n).jqGrid("restoreCell",e,t)}window.setTimeout(function(){$("#"+$.jgrid.jqID(n.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(e,t){return this.each(function(){var i,n=this;if(n.grid&&!0===n.p.cellEdit){if(null!==(i=n.p.savedRow.length>=1?0:null)){var r=$("td:eq("+t+")",n.rows[e]);if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",r).datepicker("hide")}catch(e){}$(r).empty().attr("tabindex","-1"),$(n).jqGrid("setCell",n.rows[e].id,t,n.p.savedRow[i].v,!1,!1,!0),$(n).triggerHandler("jqGridAfterRestoreCell",[n.rows[e].id,n.p.savedRow[i].v,e,t]),$.isFunction(n.p.afterRestoreCell)&&n.p.afterRestoreCell.call(n,n.rows[e].id,n.p.savedRow[i].v,e,t),n.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+n.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(e,t){return this.each(function(){var i,n=this,r=!1;if(n.grid&&!0===n.p.cellEdit){for(i=t+1;i<n.p.colModel.length;i++)if(!0===n.p.colModel[i].editable&&(!$.isFunction(n.p.isCellEditable)||n.p.isCellEditable.call(n,n.p.colModel[i].name,e,i))){r=i;break}!1!==r?$(n).jqGrid("editCell",e,r,!0):n.p.savedRow.length>0&&$(n).jqGrid("saveCell",e,t)}})},prevCell:function(e,t){return this.each(function(){var i,n=this,r=!1;if(n.grid&&!0===n.p.cellEdit){for(i=t-1;i>=0;i--)if(!0===n.p.colModel[i].editable&&(!$.isFunction(n.p.isCellEditable)||n.p.isCellEditable.call(n,n.p.colModel[i].name,e,i))){r=i;break}!1!==r?$(n).jqGrid("editCell",e,r,!0):n.p.savedRow.length>0&&$(n).jqGrid("saveCell",e,t)}})},GridNav:function(){return this.each(function(){function e(e,t,n){if("v"===n.substr(0,1)){var r=$(i.grid.bDiv)[0].clientHeight,o=$(i.grid.bDiv)[0].scrollTop,a=i.rows[e].offsetTop+i.rows[e].clientHeight,s=i.rows[e].offsetTop;"vd"===n&&a>=r&&($(i.grid.bDiv)[0].scrollTop=$(i.grid.bDiv)[0].scrollTop+i.rows[e].clientHeight),"vu"===n&&s<o&&($(i.grid.bDiv)[0].scrollTop=$(i.grid.bDiv)[0].scrollTop-i.rows[e].clientHeight)}if("h"===n){var l=$(i.grid.bDiv)[0].clientWidth,d=$(i.grid.bDiv)[0].scrollLeft,c=i.rows[e].cells[t].offsetLeft+i.rows[e].cells[t].clientWidth,u=i.rows[e].cells[t].offsetLeft;c>=l+parseInt(d,10)?$(i.grid.bDiv)[0].scrollLeft=$(i.grid.bDiv)[0].scrollLeft+i.rows[e].cells[t].clientWidth:u<d&&($(i.grid.bDiv)[0].scrollLeft=$(i.grid.bDiv)[0].scrollLeft-i.rows[e].cells[t].clientWidth)}}function t(e,t){var n,r;if("lft"===t)for(n=e+1,r=e;r>=0;r--)if(!0!==i.p.colModel[r].hidden){n=r;break}if("rgt"===t)for(n=e-1,r=e;r<i.p.colModel.length;r++)if(!0!==i.p.colModel[r].hidden){n=r;break}return n}var i=this;if(i.grid&&!0===i.p.cellEdit){i.p.knv=i.p.id+"_kn";var n,r,o=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+i.p.knv+"'></div></div>");$(o).insertBefore(i.grid.cDiv),$("#"+i.p.knv).focus().keydown(function(o){switch(r=o.keyCode,"rtl"===i.p.direction&&(37===r?r=39:39===r&&(r=37)),r){case 38:i.p.iRow-1>0&&(e(i.p.iRow-1,i.p.iCol,"vu"),$(i).jqGrid("editCell",i.p.iRow-1,i.p.iCol,!1));break;case 40:i.p.iRow+1<=i.rows.length-1&&(e(i.p.iRow+1,i.p.iCol,"vd"),$(i).jqGrid("editCell",i.p.iRow+1,i.p.iCol,!1));break;case 37:i.p.iCol-1>=0&&(n=t(i.p.iCol-1,"lft"),e(i.p.iRow,n,"h"),$(i).jqGrid("editCell",i.p.iRow,n,!1));break;case 39:i.p.iCol+1<=i.p.colModel.length-1&&(n=t(i.p.iCol+1,"rgt"),e(i.p.iRow,n,"h"),$(i).jqGrid("editCell",i.p.iRow,n,!1));break;case 13:parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&$(i).jqGrid("editCell",i.p.iRow,i.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(e){var t=[];return e||(e="all"),this.each(function(){var i,n=this;n.grid&&!0===n.p.cellEdit&&$(n.rows).each(function(r){var o={};$(this).hasClass("edited")&&($("td",this).each(function(t){if("cb"!==(i=n.p.colModel[t].name)&&"subgrid"!==i)if("dirty"===e){if($(this).hasClass("dirty-cell"))try{o[i]=$.unformat.call(n,this,{rowId:n.rows[r].id,colModel:n.p.colModel[t]},t)}catch(e){o[i]=$.jgrid.htmlDecode($(this).html())}}else try{o[i]=$.unformat.call(n,this,{rowId:n.rows[r].id,colModel:n.p.colModel[t]},t)}catch(e){o[i]=$.jgrid.htmlDecode($(this).html())}}),o.id=this.id,t.push(o))})}),t}}),$.extend($.jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){t=$.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},t||{});var i=!(!t.gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&$("#"+t.gb.substr(6))[0];if(t.onClose){var n=i?t.onClose.call(i,e):t.onClose(e);if("boolean"==typeof n&&!n)return}if(t.formprop&&i&&t.form){var r=$(e)[0].style.height,o=$(e)[0].style.width;r.indexOf("px")>-1&&(r=parseFloat(r)),o.indexOf("px")>-1&&(o=parseFloat(o));var a,s;"edit"===t.form?(a="#"+$.jgrid.jqID("FrmGrid_"+t.gb.substr(6)),s="formProp"):"view"===t.form&&(a="#"+$.jgrid.jqID("ViewGrid_"+t.gb.substr(6)),s="viewProp"),$(i).data(s,{top:parseFloat($(e).css("top")),left:parseFloat($(e).css("left")),width:o,height:r,dataheight:$(a).height(),datawidth:$(a).width()})}if($.fn.jqm&&!0===t.jqm)$(e).attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{$(".jqgrid-overlay:first",t.gb).hide()}catch(e){}$(e).hide().attr("aria-hidden","true")}t.removemodal&&$(e).remove()},findPos:function(e){var t=$(e).offset();return[t.left,t.top]},createModal:function(e,t,i,n,r,o,a){i=$.extend(!0,{},$.jgrid.jqModal||{},i);var s=this,l="rtl"===$(i.gbox).attr("dir"),d=$.jgrid.styleUI[i.styleUI||"jQueryUI"].modal,c=$.jgrid.styleUI[i.styleUI||"jQueryUI"].common,u=document.createElement("div");a=$.extend({},a||{}),u.className="ui-jqdialog "+d.modal,u.id=e.themodal;var p=document.createElement("div");p.className="ui-jqdialog-titlebar "+d.header,p.id=e.modalhead,$(p).append("<span class='ui-jqdialog-title'>"+i.caption+"</span>");var f=$("<a class='ui-jqdialog-titlebar-close "+c.cornerall+"'></a>").hover(function(){f.addClass(c.hover)},function(){f.removeClass(c.hover)}).append("<span class='"+c.icon_base+" "+d.icon_close+"'></span>");$(p).append(f),l?(u.dir="rtl",$(".ui-jqdialog-title",p).css("float","right"),$(".ui-jqdialog-titlebar-close",p).css("left","0.3em")):(u.dir="ltr",$(".ui-jqdialog-title",p).css("float","left"),$(".ui-jqdialog-titlebar-close",p).css("right","0.3em"));var h=document.createElement("div");$(h).addClass("ui-jqdialog-content "+d.content).attr("id",e.modalcontent),$(h).append(t),u.appendChild(h),$(u).prepend(p),!0===o?$("body").append(u):"string"==typeof o?$(o).append(u):$(u).insertBefore(n),$(u).css(a),void 0===i.jqModal&&(i.jqModal=!0);var g={};if($.fn.jqm&&!0===i.jqModal){if(0===i.left&&0===i.top&&i.overlay){var m=[];m=$.jgrid.findPos(r),i.left=m[0]+4,i.top=m[1]+4}g.top=i.top+"px",g.left=i.left}else 0===i.left&&0===i.top||(g.left=i.left,g.top=i.top+"px");if($("a.ui-jqdialog-titlebar-close",p).click(function(){var t=$("#"+$.jgrid.jqID(e.themodal)).data("onClose")||i.onClose,n=$("#"+$.jgrid.jqID(e.themodal)).data("gbox")||i.gbox;return s.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:n,jqm:i.jqModal,onClose:t,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""}),!1}),0!==i.width&&i.width||(i.width=300),0!==i.height&&i.height||(i.height=200),!i.zIndex){var v=$(n).parents("*[role=dialog]").filter(":first").css("z-index");i.zIndex=v?parseInt(v,10)+2:950}var b=0;if(l&&g.left&&!o&&(b=$(i.gbox).width()-(isNaN(i.width)?0:parseInt(i.width,10))-8,g.left=parseInt(g.left,10)+parseInt(b,10)),g.left&&(g.left+="px"),$(u).css($.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},g)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),void 0===i.drag&&(i.drag=!0),void 0===i.resize&&(i.resize=!0),i.drag)if($(p).css("cursor","move"),$.fn.tinyDraggable)$(u).tinyDraggable({handle:"#"+$.jgrid.jqID(p.id)});else try{$(u).draggable({handle:$("#"+$.jgrid.jqID(p.id))})}catch(e){}if(i.resize)if($.fn.jqResize)$(u).append("<div class='jqResize "+d.resizable+" "+c.icon_base+" "+d.icon_resizable+"'></div>"),$("#"+$.jgrid.jqID(e.themodal)).jqResize(".jqResize",!!e.scrollelm&&"#"+$.jgrid.jqID(e.scrollelm));else try{$(u).resizable({handles:"se, sw",alsoResize:!!e.scrollelm&&"#"+$.jgrid.jqID(e.scrollelm)})}catch(e){}!0===i.closeOnEscape&&$(u).keydown(function(t){if(27===t.which){var n=$("#"+$.jgrid.jqID(e.themodal)).data("onClose")||i.onClose;s.hideModal("#"+$.jgrid.jqID(e.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:n,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""})}})},viewModal:function(e,t){if(t=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},t||{}),void 0===t.focusField&&(t.focusField=0),"number"==typeof t.focusField&&t.focusField>=0?t.focusField=parseInt(t.focusField,10):"boolean"!=typeof t.focusField||t.focusField?t.focusField=0:t.focusField=!1,$.fn.jqm&&!0===t.jqm)t.jqM?$(e).attr("aria-hidden","false").jqm(t).jqmShow():$(e).attr("aria-hidden","false").jqmShow();else if(""!==t.gbox&&($(".jqgrid-overlay:first",t.gbox).show(),$(e).data("gbox",t.gbox)),$(e).show().attr("aria-hidden","false"),t.focusField>=0)try{$(":input:visible",e)[parseInt(t.focusField,10)].focus()}catch(e){}},info_dialog:function(e,t,i,n){var r={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};$.extend(!0,r,$.jgrid.jqModal||{},{caption:"<b>"+e+"</b>"},n||{});var o=r.jqModal,a=this,s=$.jgrid.styleUI[r.styleUI||"jQueryUI"].modal,l=$.jgrid.styleUI[r.styleUI||"jQueryUI"].common;$.fn.jqm&&!o&&(o=!1);var d,c="";if(r.buttons.length>0)for(d=0;d<r.buttons.length;d++)void 0===r.buttons[d].id&&(r.buttons[d].id="info_button_"+d),c+="<a id='"+r.buttons[d].id+"' class='fm-button "+l.button+"'>"+r.buttons[d].text+"</a>";var u=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px",p="text-align:"+r.align+";",f="<div id='info_id'>";f+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+u+";"+p+"'>"+t+"</div>",f+=i?"<div class='"+s.content+"' style='text-align:"+r.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+l.button+"'>"+i+"</a>"+c+"</div>":""!==c?"<div class='"+s.content+"' style='text-align:"+r.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+c+"</div>":"",f+="</div>";try{"false"===$("#info_dialog").attr("aria-hidden")&&$.jgrid.hideModal("#info_dialog",{jqm:o}),$("#info_dialog").remove()}catch(e){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},f,r,"","",!0),c&&$.each(r.buttons,function(e){$("#"+$.jgrid.jqID(this.id),"#info_id").on("click",function(){return r.buttons[e].onClick.call($("#info_dialog")),!1})}),$("#closedialog","#info_id").on("click",function(){return a.hideModal("#info_dialog",{jqm:o,onClose:$("#info_dialog").data("onClose")||r.onClose,gb:$("#info_dialog").data("gbox")||r.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(l.hover)},function(){$(this).removeClass(l.hover)}),$.isFunction(r.beforeOpen)&&r.beforeOpen(),$.jgrid.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:r.modal,jqm:o}),$.isFunction(r.afterOpen)&&r.afterOpen();try{$("#info_dialog").focus()}catch(e){}},bindEv:function(e,t){var i=this;$.isFunction(t.dataInit)&&t.dataInit.call(i,e,t),t.dataEvents&&$.each(t.dataEvents,function(){void 0!==this.data?$(e).on(this.type,this.data,this.fn):$(e).on(this.type,this.fn)})},createEl:function(e,t,i,n,r){function o(e,t,i){var n=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];void 0!==i&&$.isArray(i)&&$.merge(n,i),$.each(t,function(t,i){-1===$.inArray(t,n)&&$(e).attr(t,i)}),t.hasOwnProperty("id")||$(e).attr("id",$.jgrid.randId())}var a="",s=this;switch(e){case"textarea":a=document.createElement("textarea"),n?t.cols||$(a).css({width:"98%"}):t.cols||(t.cols=20),t.rows||(t.rows=2),("&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i=""),a.value=i,o(a,t),$(a).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(a=document.createElement("input"),a.type="checkbox",t.value){var l=t.value.split(":");i===l[0]&&(a.checked=!0,a.defaultChecked=!0),a.value=l[0],$(a).attr("offval",l[1])}else{var d=(i+"").toLowerCase();d.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==d?(a.checked=!0,a.defaultChecked=!0,a.value=i):a.value="on",$(a).attr("offval","off")}o(a,t,["value"]),$(a).attr("role","checkbox");break;case"select":
a=document.createElement("select"),a.setAttribute("role","select");var c,u=[];if(!0===t.multiple?(c=!0,a.multiple="multiple",$(a).attr("aria-multiselectable","true")):c=!1,null!=t.dataUrl){var p=null,f=t.postData||r.postData;try{p=t.rowId}catch(e){}s.p&&s.p.idPrefix&&(p=$.jgrid.stripPref(s.p.idPrefix,p)),$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(s,p,i,String(t.name)):t.dataUrl,type:"GET",dataType:"html",data:$.isFunction(f)?f.call(s,p,i,String(t.name)):f,context:{elem:a,options:t,vl:i},success:function(e){var t,i=[],n=this.elem,r=this.vl,a=$.extend({},this.options),l=!0===a.multiple,d=!0===a.cacheUrlData,c="",u=$.isFunction(a.buildSelect)?a.buildSelect.call(s,e):e;if("string"==typeof u&&(u=$($.trim(u)).html()),u){if($(n).append(u),o(n,a,f?["postData"]:void 0),void 0===a.size&&(a.size=l?3:1),l?(i=r.split(","),i=$.map(i,function(e){return $.trim(e)})):i[0]=$.trim(r),$("option",n).each(function(e){t=$(this).text(),r=$(this).val(),d&&(c+=(0!==e?";":"")+r+":"+t),0===e&&n.multiple&&(this.selected=!1),$(this).attr("role","option"),($.inArray($.trim(t),i)>-1||$.inArray($.trim(r),i)>-1)&&(this.selected="selected")}),d)if("edit"===a.oper)$(s).jqGrid("setColProp",a.name,{editoptions:{buildSelect:null,dataUrl:null,value:c}});else if("search"===a.oper)$(s).jqGrid("setColProp",a.name,{searchoptions:{dataUrl:null,value:c}});else if("filter"===a.oper&&$("#fbox_"+s.p.id)[0].p){var p,h=$("#fbox_"+s.p.id)[0].p.columns;$.each(h,function(e){if(p=this.index||this.name,a.name===p)return this.searchoptions.dataUrl=null,this.searchoptions.value=c,!1})}$(s).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[n])}}},r||{}))}else if(t.value){var h;void 0===t.size&&(t.size=c?3:1),c&&(u=i.split(","),u=$.map(u,function(e){return $.trim(e)})),"function"==typeof t.value&&(t.value=t.value());var g,m,v,b,y,w,x=void 0===t.separator?":":t.separator,j=void 0===t.delimiter?";":t.delimiter;if("string"==typeof t.value)for(g=t.value.split(j),h=0;h<g.length;h++)m=g[h].split(x),m.length>2&&(m[1]=$.map(m,function(e,t){if(t>0)return e}).join(x)),v=document.createElement("option"),v.setAttribute("role","option"),v.value=m[0],v.innerHTML=m[1],a.appendChild(v),c||$.trim(m[0])!==$.trim(i)&&$.trim(m[1])!==$.trim(i)||(v.selected="selected"),c&&($.inArray($.trim(m[1]),u)>-1||$.inArray($.trim(m[0]),u)>-1)&&(v.selected="selected");else if("[object Array]"===Object.prototype.toString.call(t.value))for(b=t.value,h=0;h<b.length;h++)2===b[h].length&&(y=b[h][0],w=b[h][1],v=document.createElement("option"),v.setAttribute("role","option"),v.value=y,v.innerHTML=w,a.appendChild(v),c||$.trim(y)!==$.trim(i)&&$.trim(w)!==$.trim(i)||(v.selected="selected"),c&&($.inArray($.trim(w),u)>-1||$.inArray($.trim(y),u)>-1)&&(v.selected="selected"));else if("object"==typeof t.value){b=t.value;for(y in b)b.hasOwnProperty(y)&&(v=document.createElement("option"),v.setAttribute("role","option"),v.value=y,v.innerHTML=b[y],a.appendChild(v),c||$.trim(y)!==$.trim(i)&&$.trim(b[y])!==$.trim(i)||(v.selected="selected"),c&&($.inArray($.trim(b[y]),u)>-1||$.inArray($.trim(y),u)>-1)&&(v.selected="selected"))}o(a,t,["value"])}break;case"image":case"file":a=document.createElement("input"),a.type=e,o(a,t);break;case"custom":a=document.createElement("span");try{if(!$.isFunction(t.custom_element))throw"e1";var _=t.custom_element.call(s,i,t);if(!_)throw"e2";_=$(_).addClass("customelement").attr({id:t.id,name:t.name}),$(a).empty().append(_)}catch(e){var C=$.jgrid.getRegional(s,"errors"),q=$.jgrid.getRegional(s,"edit");"e1"===e?$.jgrid.info_dialog(C.errcap,"function 'custom_element' "+q.msg.nodefined,q.bClose,{styleUI:s.p.styleUI}):"e2"===e?$.jgrid.info_dialog(C.errcap,"function 'custom_element' "+q.msg.novalue,q.bClose,{styleUI:s.p.styleUI}):$.jgrid.info_dialog(C.errcap,"string"==typeof e?e:e.message,q.bClose,{styleUI:s.p.styleUI})}break;default:var S;S="button"===e?"button":"textbox",a=document.createElement("input"),a.type=e,a.value=i,o(a,t),"button"!==e&&(n?t.size||$(a).css({width:"96%"}):t.size||(t.size=20)),$(a).attr("role",S)}return a},checkDate:function(e,t){var i,n={};if(e=e.toLowerCase(),i=-1!==e.indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(i),t=t.split(i),3!==t.length)return!1;var r,o,a=-1,s=-1,l=-1;for(o=0;o<e.length;o++){var d=isNaN(t[o])?0:parseInt(t[o],10);n[e[o]]=d,r=e[o],-1!==r.indexOf("y")&&(a=o),-1!==r.indexOf("m")&&(l=o),-1!==r.indexOf("d")&&(s=o)}r="y"===e[a]||"yyyy"===e[a]?4:"yy"===e[a]?2:-1;var c,u=[0,31,29,31,30,31,30,31,31,30,31,30,31];return-1!==a&&(c=n[e[a]].toString(),2===r&&1===c.length&&(r=1),c.length===r&&(0!==n[e[a]]||"00"===t[a])&&(-1!==l&&(c=n[e[l]].toString(),!(c.length<1||n[e[l]]<1||n[e[l]]>12)&&(-1!==s&&(c=n[e[s]].toString(),!(c.length<1||n[e[s]]<1||n[e[s]]>31||2===n[e[l]]&&n[e[s]]>function(e){return e%4!=0||e%100==0&&e%400!=0?28:29}(n[e[a]])||n[e[s]]>u[n[e[l]]]))))))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t,i=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!$.jgrid.isEmpty(e)){if(!(t=e.match(i)))return!1;if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}return!0},checkValues:function(e,t,i,n){var r,o,a,s,l,d,c=this,u=c.p.colModel,p=$.jgrid.getRegional(this,"edit.msg");if(void 0===i)if("string"==typeof t){for(o=0,l=u.length;o<l;o++)if(u[o].name===t){r=u[o].editrules,t=o,null!=u[o].formoptions&&(a=u[o].formoptions.label);break}}else t>=0&&(r=u[t].editrules);else r=i,a=void 0===n?"_":n;if(r){if(a||(a=null!=c.p.colNames?c.p.colNames[t]:u[t].label),!0===r.required&&$.jgrid.isEmpty(e))return[!1,a+": "+p.required,""];var f=!1!==r.required;if(!0===r.number&&(!1!==f||!$.jgrid.isEmpty(e))&&isNaN(e))return[!1,a+": "+p.number,""];if(void 0!==r.minValue&&!isNaN(r.minValue)&&parseFloat(e)<parseFloat(r.minValue))return[!1,a+": "+p.minValue+" "+r.minValue,""];if(void 0!==r.maxValue&&!isNaN(r.maxValue)&&parseFloat(e)>parseFloat(r.maxValue))return[!1,a+": "+p.maxValue+" "+r.maxValue,""];var h;if(!0===r.email&&!(!1===f&&$.jgrid.isEmpty(e)||(h=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,h.test(e))))return[!1,a+": "+p.email,""];if(!0===r.integer&&(!1!==f||!$.jgrid.isEmpty(e))){if(isNaN(e))return[!1,a+": "+p.integer,""];if(e%1!=0||-1!==e.indexOf("."))return[!1,a+": "+p.integer,""]}if(!0===r.date&&!(!1===f&&$.jgrid.isEmpty(e)||(u[t].formatoptions&&u[t].formatoptions.newformat?(s=u[t].formatoptions.newformat,(d=$.jgrid.getRegional(c,"formatter.date.masks"))&&d.hasOwnProperty(s)&&(s=d[s])):s=u[t].datefmt||"Y-m-d",$.jgrid.checkDate(s,e))))return[!1,a+": "+p.date+" - "+s,""];if(!0===r.time&&!(!1===f&&$.jgrid.isEmpty(e)||$.jgrid.checkTime(e)))return[!1,a+": "+p.date+" - hh:mm (am/pm)",""];if(!0===r.url&&!(!1===f&&$.jgrid.isEmpty(e)||(h=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,h.test(e))))return[!1,a+": "+p.url,""];if(!0===r.custom&&(!1!==f||!$.jgrid.isEmpty(e))){if($.isFunction(r.custom_func)){var g=r.custom_func.call(c,e,a,t);return $.isArray(g)?g:[!1,p.customarray,""]}return[!1,p.customfcheck,""]}}return[!0,"",""]}}),$.fn.jqFilter=function(e){if("string"==typeof e){var t=$.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}var n=$.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule"},$.jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=n,null!==this.p.filter&&void 0!==this.p.filter||(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),null!=this.p.sortStrategy&&$.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy);var e,t,i=this.p.columns.length,r=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=$.extend(!0,{},this.p.filter),i){for(e=0;e<i;e++)t=this.p.columns[e],t.stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={}),void 0===t.search?t.inlist=!0:t.inlist=t.search;var o=function(){return $("#"+$.jgrid.jqID(n.id))[0]||null},a=o(),s=$.jgrid.styleUI[a.p.styleUI||"jQueryUI"].filter,l=$.jgrid.styleUI[a.p.styleUI||"jQueryUI"].common;this.p.showQuery&&$(this).append("<table class='queryresult "+s.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var d=function(e,t){var i=[!0,""],r=o();if($.isFunction(t.searchrules))i=t.searchrules.call(r,e,t);else if($.jgrid&&$.jgrid.checkValues)try{i=$.jgrid.checkValues.call(r,e,-1,t.searchrules,t.label)}catch(e){}i&&i.length&&!1===i[0]&&(n.error=!i[0],n.errmsg=i[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",!!$.isFunction(this.p.onChange)&&this.p.onChange.call(this,this.p)},this.reDraw=function(){$("table.group:first",this).remove();var e=this.createTableForGroup(n.filter,null);$(this).append(e),$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(e,t){var i,r=this,o=$("<table class='group "+s.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),a="left";"rtl"===this.p.direction&&(a="right",o.attr("dir","rtl")),null===t&&o.append("<tr class='error' style='display:none;'><th colspan='5' class='"+l.error+"' align='"+a+"'></th></tr>");var d=$("<tr></tr>");o.append(d);var c=$("<th colspan='5' align='"+a+"'></th>");if(d.append(c),!0===this.p.ruleButtons){var u=$("<select class='opsel "+s.srSelect+"'></select>");c.append(u);var p,f="";for(i=0;i<n.groupOps.length;i++)p=e.groupOp===r.p.groupOps[i].op?" selected='selected'":"",f+="<option value='"+r.p.groupOps[i].op+"'"+p+">"+r.p.groupOps[i].text+"</option>";u.append(f).on("change",function(){e.groupOp=$(u).val(),r.onchange()})}var h="<span></span>";if(this.p.groupButton&&(h=$("<input type='button' value='+ {}' title='"+r.p.subgroup+"' class='add-group "+l.button+"'/>"),h.on("click",function(){return void 0===e.groups&&(e.groups=[]),e.groups.push({groupOp:n.groupOps[0].op,rules:[],groups:[]}),r.reDraw(),r.onchange(),!1})),c.append(h),!0===this.p.ruleButtons){var g,m=$("<input type='button' value='+' title='"+r.p.addrule+"' class='add-rule ui-add "+l.button+"'/>");m.on("click",function(){for(void 0===e.rules&&(e.rules=[]),i=0;i<r.p.columns.length;i++){var t=void 0===r.p.columns[i].search||r.p.columns[i].search,n=!0===r.p.columns[i].hidden;if(!0===r.p.columns[i].searchoptions.searchhidden&&t||t&&!n){g=r.p.columns[i];break}}if(!g)return!1;var o;return o=g.searchoptions.sopt?g.searchoptions.sopt:r.p.sopt?r.p.sopt:-1!==$.inArray(g.searchtype,r.p.strarr)?r.p.stropts:r.p.numopts,e.rules.push({field:g.name,op:o[0],data:""}),r.reDraw(),!1}),c.append(m)}if(null!==t){var v=$("<input type='button' value='-' title='"+r.p.delgroup+"' class='delete-group "+l.button+"'/>");c.append(v),v.on("click",function(){for(i=0;i<t.groups.length;i++)if(t.groups[i]===e){t.groups.splice(i,1);break}return r.reDraw(),r.onchange(),!1})}if(void 0!==e.groups)for(i=0;i<e.groups.length;i++){var b=$("<tr></tr>");o.append(b);var y=$("<td class='first'></td>");b.append(y);var w=$("<td colspan='4'></td>");w.append(this.createTableForGroup(e.groups[i],e)),b.append(w)}void 0===e.groupOp&&(e.groupOp=r.p.groupOps[0].op);var x=r.p.ruleButtons&&r.p.uniqueSearchFields;if(x)for(var j=0;j<r.p.columns.length;j++)r.p.columns[j].inlist&&(r.p.columns[j].search=!0);if(void 0!==e.rules)for(i=0;i<e.rules.length;i++)if(o.append(this.createTableRowForRule(e.rules[i],e)),x)for(var _=e.rules[i].field,j=0;j<r.p.columns.length;j++)if(_===r.p.columns[j].name){r.p.columns[j].search=!1;break}return o},this.createTableRowForRule=function(e,t){var i,a,d,c,u,p=this,f=o(),h=$("<tr></tr>"),g="";h.append("<td class='first'></td>");var m=$("<td class='columns'></td>");h.append(m);var v,b=$("<select class='"+s.srSelect+"'></select>"),y=[];m.append(b),b.on("change",function(){if(p.p.ruleButtons&&p.p.uniqueSearchFields){var t=parseInt($(this).data("curr"),10),n=this.selectedIndex;t>=0&&(p.p.columns[t].search=!0,$(this).data("curr",n),p.p.columns[n].search=!1)}for(e.field=$(b).val(),d=$(this).parents("tr:first"),$(".data",d).empty(),i=0;i<p.p.columns.length;i++)if(p.p.columns[i].name===e.field){c=p.p.columns[i];break}if(c){c.searchoptions.id=$.jgrid.randId(),c.searchoptions.name=e.field,c.searchoptions.oper="filter",r&&"text"===c.inputtype&&(c.searchoptions.size||(c.searchoptions.size=10));var o=$.jgrid.createEl.call(f,c.inputtype,c.searchoptions,"",!0,p.p.ajaxSelectOptions||{},!0);$(o).addClass("input-elm "+s.srInput),a=c.searchoptions.sopt?c.searchoptions.sopt:p.p.sopt?p.p.sopt:-1!==$.inArray(c.searchtype,p.p.strarr)?p.p.stropts:p.p.numopts;var l="",u=0;for(y=[],$.each(p.p.ops,function(){y.push(this.oper)}),i=0;i<a.length;i++)-1!==(v=$.inArray(a[i],y))&&(0===u&&(e.op=p.p.ops[v].oper),l+="<option value='"+p.p.ops[v].oper+"'>"+p.p.ops[v].text+"</option>",u++);if($(".selectopts",d).empty().append(l),$(".selectopts",d)[0].selectedIndex=0,$.jgrid.msie()&&$.jgrid.msiever()<9){var h=parseInt($("select.selectopts",d)[0].offsetWidth,10)+1;$(".selectopts",d).width(h),$(".selectopts",d).css("width","auto")}$(".data",d).append(o),$.jgrid.bindEv.call(f,o,c.searchoptions),$(".input-elm",d).on("change",function(t){var i=t.target;e.data="SPAN"===i.nodeName.toUpperCase()&&c.searchoptions&&$.isFunction(c.searchoptions.custom_value)?c.searchoptions.custom_value.call(f,$(i).children(".customelement:first"),"get"):i.value,p.onchange()}),setTimeout(function(){e.data=$(o).val(),p.onchange()},0)}});var w=0;for(i=0;i<p.p.columns.length;i++){var x=void 0===p.p.columns[i].search||p.p.columns[i].search,j=!0===p.p.columns[i].hidden;(!0===p.p.columns[i].searchoptions.searchhidden&&x||x&&!j)&&(u="",e.field===p.p.columns[i].name&&(u=" selected='selected'",w=i),g+="<option value='"+p.p.columns[i].name+"'"+u+">"+p.p.columns[i].label+"</option>")}b.append(g),b.data("curr",w);var _=$("<td class='operators'></td>");h.append(_),c=n.columns[w],c.searchoptions.id=$.jgrid.randId(),r&&"text"===c.inputtype&&(c.searchoptions.size||(c.searchoptions.size=10)),c.searchoptions.name=e.field,c.searchoptions.oper="filter";var C=$.jgrid.createEl.call(f,c.inputtype,c.searchoptions,e.data,!0,p.p.ajaxSelectOptions||{},!0);"nu"!==e.op&&"nn"!==e.op||($(C).attr("readonly","true"),$(C).attr("disabled","true"));var q=$("<select class='selectopts "+s.srSelect+"'></select>");for(_.append(q),q.on("change",function(){e.op=$(q).val(),d=$(this).parents("tr:first");var t=$(".input-elm",d)[0];"nu"===e.op||"nn"===e.op?(e.data="","SELECT"!==t.tagName.toUpperCase()&&(t.value=""),t.setAttribute("readonly","true"),t.setAttribute("disabled","true")):("SELECT"===t.tagName.toUpperCase()&&(e.data=t.value),t.removeAttribute("readonly"),t.removeAttribute("disabled")),p.onchange()}),a=c.searchoptions.sopt?c.searchoptions.sopt:p.p.sopt?p.p.sopt:-1!==$.inArray(c.searchtype,p.p.strarr)?p.p.stropts:p.p.numopts,g="",$.each(p.p.ops,function(){y.push(this.oper)}),i=0;i<a.length;i++)-1!==(v=$.inArray(a[i],y))&&(u=e.op===p.p.ops[v].oper?" selected='selected'":"",g+="<option value='"+p.p.ops[v].oper+"'"+u+">"+p.p.ops[v].text+"</option>");q.append(g);var S=$("<td class='data'></td>");h.append(S),S.append(C),$.jgrid.bindEv.call(f,C,c.searchoptions),$(C).addClass("input-elm "+s.srInput).on("change",function(){e.data="custom"===c.inputtype?c.searchoptions.custom_value.call(f,$(this).children(".customelement:first"),"get"):$(this).val(),p.onchange()});var D=$("<td></td>");if(h.append(D),!0===this.p.ruleButtons){var k=$("<input type='button' value='-' title='"+p.p.delrule+"' class='delete-rule ui-del "+l.button+"'/>");D.append(k),k.on("click",function(){for(i=0;i<t.rules.length;i++)if(t.rules[i]===e){t.rules.splice(i,1);break}return p.reDraw(),p.onchange(),!1})}return h},this.getStringForGroup=function(e){var t,i="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){i.length>1&&(i+=" "+e.groupOp+" ");try{i+=this.getStringForGroup(e.groups[t])}catch(e){alert(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)i.length>1&&(i+=" "+e.groupOp+" "),i+=this.getStringForRule(e.rules[t])}catch(e){alert(e)}return i+=")","()"===i?"":i},this.getStringForRule=function(e){var t,i,r,o="",a="",s=["int","integer","float","number","currency"];for(t=0;t<this.p.ops.length;t++)if(this.p.ops[t].oper===e.op){o=this.p.operands.hasOwnProperty(e.op)?this.p.operands[e.op]:"",a=this.p.ops[t].oper;break}for(t=0;t<this.p.columns.length;t++)if(this.p.columns[t].name===e.field){i=this.p.columns[t];break}return void 0===i?"":(r=e.data,"bw"!==a&&"bn"!==a||(r+="%"),"ew"!==a&&"en"!==a||(r="%"+r),"cn"!==a&&"nc"!==a||(r="%"+r+"%"),"in"!==a&&"ni"!==a||(r=" ("+r+")"),n.errorcheck&&d(e.data,i),-1!==$.inArray(i.searchtype,s)||"nn"===a||"nu"===a?e.field+" "+o+" "+r:e.field+" "+o+' "'+r+'"')},this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+l.error,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+l.error,this).html(this.p.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(n.filter)},this.toString=function(){function e(e){if(i.p.errorcheck){var t,n;for(t=0;t<i.p.columns.length;t++)if(i.p.columns[t].name===e.field){n=i.p.columns[t];break}n&&d(e.data,n)}return e.op+"(item."+e.field+",'"+e.data+"')"}function t(i){var n,r="(";if(void 0!==i.groups)for(n=0;n<i.groups.length;n++)r.length>1&&("OR"===i.groupOp?r+=" || ":r+=" && "),r+=t(i.groups[n]);if(void 0!==i.rules)for(n=0;n<i.rules.length;n++)r.length>1&&("OR"===i.groupOp?r+=" || ":r+=" && "),r+=e(i.rules[n]);return r+=")","()"===r?"":r}var i=this;return t(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=$.jgrid.parse(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}}),$.jgrid.extend({filterToolbar:function(e){var t=$.jgrid.getRegional(this[0],"search");return e=$.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},t,e||{}),this.each(function(){var i=this;if(!i.p.filterToolbar){$(i).data("filterToolbar")||$(i).data("filterToolbar",e),i.p.force_regional&&(e=$.extend(e,t));var n,r,o,a=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,s=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,l=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].base,d=function(){var t,n,r,o,a={},s=0,l={},d=!1,c=[],u=!1;$.each(i.p.colModel,function(){var p=$("#gs_"+i.p.idPrefix+$.jgrid.jqID(this.name),!0===this.frozen&&!0===i.p.frozenColumns?i.grid.fhDiv:i.grid.hDiv);if(n=this.index||this.name,o=this.searchoptions||{},r=e.searchOperators&&o.searchOperMenu?p.parent().prev().children("a").attr("soper")||e.defaultSearch:o.sopt?o.sopt[0]:"select"===this.stype?"eq":e.defaultSearch,t="custom"===this.stype&&$.isFunction(o.custom_value)&&p.length>0&&"SPAN"===p[0].nodeName.toUpperCase()?o.custom_value.call(i,p.children(".customelement:first"),"get"):p.val(),"select"===this.stype&&o.multiple&&$.isArray(t)&&t.length&&(d=!0,c.push(n),t=1===t.length?t[0]:t),"bt"===r&&(u=!0),t||"nu"===r||"nn"===r)a[n]=t,l[n]=r,s++;else try{delete i.p.postData[n]}catch(e){}});var p=s>0;if(!0===e.stringResult||"local"===i.p.datatype||!0===e.searchOperators){var f='{"groupOp":"'+e.groupOp+'","rules":[',h=0;$.each(a,function(e,t){h>0&&(f+=","),f+='{"field":"'+e+'",',f+='"op":"'+l[e]+'",',t+="",f+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',h++}),f+="]}";var g,m,v,b,y,w,x;if(d&&(g=$.jgrid.parse(f),g.rules&&g.rules.length))for(m=g.rules,v=0;v<m.length;v++)y=m[v],$.inArray(y.filed,c)&&(w=y.data.split(e.splitSelect),w.length>1&&(void 0===g.groups&&(g.groups=[]),x={groupOp:e.groupOpSelect,groups:[],rules:[]},g.groups.push(x),$.each(w,function(e){(b=w[e])&&x.rules.push({data:w[e],op:y.op,field:y.field})}),m.splice(v,1),v--));if(u&&($.isPlainObject(g)||(g=$.jgrid.parse(f)),g.rules&&g.rules.length))for(m=g.rules,v=0;v<m.length;v++)y=m[v],"bt"===y.op&&(w=y.data.split("..."),w.length>1&&(void 0===g.groups&&(g.groups=[]),x={groupOp:"AND",groups:[],rules:[]},g.groups.push(x),$.each(w,function(e){var t=0===e?"ge":"le";(b=w[e])&&x.rules.push({data:w[e],op:t,field:y.field})}),m.splice(v,1),v--));(u||d)&&(f=JSON.stringify(g)),$.extend(i.p.postData,{filters:f}),$.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})}else $.extend(i.p.postData,a);var j;i.p.searchurl&&(j=i.p.url,$(i).jqGrid("setGridParam",{url:i.p.searchurl}));var _="stop"===$(i).triggerHandler("jqGridToolbarBeforeSearch");!_&&$.isFunction(e.beforeSearch)&&(_=e.beforeSearch.call(i)),_||$(i).jqGrid("setGridParam",{search:p}).trigger("reloadGrid",[{page:1}]),j&&$(i).jqGrid("setGridParam",{url:j}),$(i).triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(e.afterSearch)&&e.afterSearch.call(i)},c=function(t){var n,r={},o=0;t="boolean"!=typeof t||t,$.each(i.p.colModel,function(){var e,t=$("#gs_"+i.p.idPrefix+$.jgrid.jqID(this.name),!0===this.frozen&&!0===i.p.frozenColumns?i.grid.fhDiv:i.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(e=this.searchoptions.defaultValue),n=this.index||this.name,this.stype){case"select":if(t.find("option").each(function(t){if(0===t&&(this.selected=!0),$(this).val()===e)return this.selected=!0,!1}),void 0!==e)r[n]=e,o++;else try{delete i.p.postData[n]}catch(e){}break;case"text":if(t.val(e||""),void 0!==e)r[n]=e,o++;else try{delete i.p.postData[n]}catch(e){}break;case"custom":$.isFunction(this.searchoptions.custom_value)&&t.length>0&&"SPAN"===t[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(i,t.children(".customelement:first"),"set",e||"")}});var a=o>0;if(i.p.resetsearch=!0,!0===e.stringResult||"local"===i.p.datatype){var s='{"groupOp":"'+e.groupOp+'","rules":[',l=0;$.each(r,function(e,t){l>0&&(s+=","),s+='{"field":"'+e+'",',s+='"op":"eq",',t+="",s+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),s+="]}",$.extend(i.p.postData,{filters:s}),$.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})}else $.extend(i.p.postData,r);var d;i.p.searchurl&&(d=i.p.url,$(i).jqGrid("setGridParam",{url:i.p.searchurl}));var c="stop"===$(i).triggerHandler("jqGridToolbarBeforeClear");!c&&$.isFunction(e.beforeClear)&&(c=e.beforeClear.call(i)),c||t&&$(i).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]),d&&$(i).jqGrid("setGridParam",{url:d}),$(i).triggerHandler("jqGridToolbarAfterClear"),$.isFunction(e.afterClear)&&e.afterClear()},u=function(){var e=$("tr.ui-search-toolbar",i.grid.hDiv),t=!0===i.p.frozenColumns&&$("tr.ui-search-toolbar",i.grid.fhDiv);"none"===e.css("display")?(e.show(),t&&t.show()):(e.hide(),t&&t.hide())},p=function(t,n,r){$("#sopt_menu").remove(),n=parseInt(n,10),r=parseInt(r,10)+18;for(var o,l,c=$(".ui-jqgrid-view").css("font-size")||"11px",u='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+c+";left:"+n+"px;top:"+r+'px;">',p=$(t).attr("soper"),f=[],h=0,g=$(t).attr("colname"),m=i.p.colModel.length;h<m&&i.p.colModel[h].name!==g;)h++;var v=i.p.colModel[h],b=$.extend({},v.searchoptions);for(b.sopt||(b.sopt=[],b.sopt[0]="select"===v.stype?"eq":e.defaultSearch),$.each(e.odata,function(){f.push(this.oper)}),h=0;h<b.sopt.length;h++)-1!==(l=$.inArray(b.sopt[h],f))&&(o=p===e.odata[l].oper?s.highlight:"",u+='<li class="ui-menu-item '+o+'" role="presentation"><a class="'+s.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+e.odata[l].oper+'" oper="'+e.operands[e.odata[l].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+e.operands[e.odata[l].oper]+"</td><td>"+e.odata[l].text+"</td></tr></table></a></li>");u+="</ul>",$("body").append(u),$("#sopt_menu").addClass("ui-menu "+a.menu_widget),$("#sopt_menu > li > a").hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)}).click(function(){var n=$(this).attr("value"),r=$(this).attr("oper");if($(i).triggerHandler("jqGridToolbarSelectOper",[n,r,t]),$("#sopt_menu").hide(),$(t).text(r).attr("soper",n),!0===e.autosearch){var o=$(t).parent().next().children()[0];($(o).val()||"nu"===n||"nn"===n)&&d()}})},f=$("<tr class='ui-search-toolbar' role='row'></tr>");e.restoreFromFilters&&(o=i.p.postData.filters)&&("string"==typeof o&&(o=$.jgrid.parse(o)),r=!!o.rules.length&&o.rules),$.each(i.p.colModel,function(t){var o,s,c,u,p,h,g,m,v=this,b="",y="=",w=$("<th role='columnheader' class='"+l.headerBox+" ui-th-"+i.p.direction+"' id='gsh_"+i.p.id+"_"+v.name+"' ></th>"),x=$("<div></div>"),j=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(!0===this.hidden&&$(w).css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),this.searchoptions=this.searchoptions||{},void 0===this.searchoptions.searchOperMenu&&(this.searchoptions.searchOperMenu=!0),o=$.extend({},this.searchoptions,{name:v.index||v.name,id:"gs_"+i.p.idPrefix+v.name,oper:"search"}),this.search){if(e.restoreFromFilters&&r){m=!1;for(var _=0;_<r.length;_++)if(r[_].field){var C=v.index||v.name;if(C===r[_].field){m=r[_];break}}}if(e.searchOperators){for(s=o.sopt?o.sopt[0]:"select"===v.stype?"eq":e.defaultSearch,e.restoreFromFilters&&m&&(s=m.op),c=0;c<e.odata.length;c++)if(e.odata[c].oper===s){y=e.operands[s]||"";break}u=null!=o.searchtitle?o.searchtitle:e.operandTitle,b=this.searchoptions.searchOperMenu?"<a title='"+u+"' style='padding-right: 0.5em;' soper='"+s+"' class='soptclass' colname='"+this.name+"'>"+y+"</a>":""}switch($("td:eq(0)",j).attr("colindex",t).append(b),void 0===o.clearSearch&&(o.clearSearch=!0),o.clearSearch?(p=e.resetTitle||"Clear Search Value",$("td:eq(2)",j).append("<a title='"+p+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+e.resetIcon+"</a>")):$("td:eq(2)",j).hide(),this.surl&&(o.dataUrl=this.surl),h="",o.defaultValue&&(h=$.isFunction(o.defaultValue)?o.defaultValue.call(i):o.defaultValue),e.restoreFromFilters&&m&&(h=m.data),g=$.jgrid.createEl.call(i,this.stype,o,h,!1,$.extend({},$.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),$(g).addClass(a.srInput),$("td:eq(1)",j).append(g),$(x).append(j),null==o.dataEvents&&(o.dataEvents=[]),this.stype){case"select":!0===e.autosearch&&o.dataEvents.push({type:"change",fn:function(){return d(),!1}});break;case"text":!0===e.autosearch&&(e.searchOnEnter?o.dataEvents.push({type:"keypress",fn:function(e){return 13===(e.charCode||e.keyCode||0)?(d(),!1):this}}):o.dataEvents.push({type:"keydown",fn:function(t){switch(t.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:n&&clearTimeout(n),n=setTimeout(function(){d()},e.autosearchDelay)}}}))}$.jgrid.bindEv.call(i,g,o)}$(w).append(x),$(f).append(w),e.searchOperators&&""!==b||$("td:eq(0)",j).hide()}),$("table thead",i.grid.hDiv).append(f),e.searchOperators&&($(".soptclass",f).click(function(e){var t=$(this).offset(),i=t.left,n=t.top;p(this,i,n),e.stopPropagation()}),$("body").on("click",function(e){"soptclass"!==e.target.className&&$("#sopt_menu").remove()})),$(".clearsearchclass",f).click(function(){var t,n=$(this).parents("tr:first"),r=parseInt($("td.ui-search-oper",n).attr("colindex"),10),o=$.extend({},i.p.colModel[r].searchoptions||{}),a=o.defaultValue?o.defaultValue:"";"select"===i.p.colModel[r].stype?(t=$("td.ui-search-input select",n),a?t.val(a):t[0].selectedIndex=0):(t=$("td.ui-search-input input",n),t.val(a)),$(i).triggerHandler("jqGridToolbarClearVal",[t[0],r,o,a]),$.isFunction(e.onClearSearchValue)&&e.onClearSearchValue.call(i,t[0],r,o,a),!0===e.autosearch&&d()}),this.p.filterToolbar=!0,this.triggerToolbar=d,this.clearToolbar=c,this.toggleToolbar=u}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},refreshFilterToolbar:function(e){return e=$.extend(!0,{filters:"",onClearVal:null,onSetVal:null},e||{}),this.each(function(){function t(r){if(r&&r.rules){for(o=r.rules,c=o.length,i=0;i<c;i++)a=o[i],-1!==(s=$.inArray(a.field,u))&&(n=$("#gs_"+l.p.idPrefix+$.jgrid.jqID(d[s].name)),n.length>0&&("select"===d[s].stype?n.find("option[value='"+$.jgrid.jqID(a.data)+"']").prop("selected",!0):"text"===d[s].stype&&n.val(a.data),$.isFunction(e.onSetVal)&&e.onSetVal.call(l,n,d[s].name)));if(r.groups)for(var p=0;p<r.groups.length;p++)t(r.groups[p])}}var i,n,r,o,a,s,l=this,d=l.p.colModel,c=l.p.colModel.length,u=[];if(l.p.filterToolbar){for(i=0;i<c;i++){switch(u.push(d[i].name),n=$("#gs_"+l.p.idPrefix+$.jgrid.jqID(d[i].name)),d[i].stype){case"select":case"text":n.val("")}$.isFunction(e.onClearVal)&&e.onClearVal.call(l,n,d[i].name)}"string"==typeof e.filters&&e.filters.length&&(r=$.jgrid.parse(e.filters)),$.isPlainObject(r)&&t(r)}})},searchGrid:function(e){var t=$.jgrid.getRegional(this[0],"search");return e=$.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",
gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},t,e||{}),this.each(function(){function t(t){o=$(i).triggerHandler("jqGridFilterBeforeShow",[t]),void 0===o&&(o=!0),o&&$.isFunction(e.beforeShowSearch)&&(o=e.beforeShowSearch.call(i,t)),o&&($.jgrid.viewModal("#"+$.jgrid.jqID(s.themodal),{gbox:"#gbox_"+$.jgrid.jqID(r),jqm:e.jqModal,modal:e.modal,overlay:e.overlay,toTop:e.toTop}),$(i).triggerHandler("jqGridFilterAfterShow",[t]),$.isFunction(e.afterShowSearch)&&e.afterShowSearch.call(i,t))}var i=this;if(i.grid){var n,r="fbox_"+i.p.id,o=!0,a=!0,s={themodal:"searchmod"+r,modalhead:"searchhd"+r,modalcontent:"searchcnt"+r,scrollelm:r},l=i.p.postData[e.sFilter],d=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,c=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common;if(e.styleUI=i.p.styleUI,"string"==typeof l&&(l=$.jgrid.parse(l)),!0===e.recreateFilter&&$("#"+$.jgrid.jqID(s.themodal)).remove(),void 0!==$("#"+$.jgrid.jqID(s.themodal))[0])t($("#fbox_"+$.jgrid.jqID(i.p.id)));else{var u=$("<div><div id='"+r+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+$.jgrid.jqID(i.p.id)),p="left",f="";"rtl"===i.p.direction&&(p="right",f=" style='text-align:left'",u.attr("dir","rtl"));var h,g,m=$.extend([],i.p.colModel),v="<a id='"+r+"_search' class='fm-button "+c.button+" fm-button-icon-right ui-search'><span class='"+c.icon_base+" "+d.icon_search+"'></span>"+e.Find+"</a>",b="<a id='"+r+"_reset' class='fm-button "+c.button+" fm-button-icon-left ui-reset'><span class='"+c.icon_base+" "+d.icon_reset+"'></span>"+e.Reset+"</a>",y="",w="",x=!1,j=-1;if(e.showQuery&&(y="<a id='"+r+"_query' class='fm-button "+c.button+" fm-button-icon-left'><span class='"+c.icon_base+" "+d.icon_query+"'></span>Query</a>"),e.columns.length?(m=e.columns,j=0,h=m[0].index||m[0].name):$.each(m,function(e,t){if(t.label||(t.label=i.p.colNames[e]),!x){var n=void 0===t.search||t.search,r=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&n||n&&!r)&&(x=!0,h=t.index||t.name,j=e)}}),!l&&h||!1===e.multipleSearch){var _="eq";j>=0&&m[j].searchoptions&&m[j].searchoptions.sopt?_=m[j].searchoptions.sopt[0]:e.sopt&&e.sopt.length&&(_=e.sopt[0]),l={groupOp:"AND",rules:[{field:h,op:_,data:""}]}}x=!1,e.tmplNames&&e.tmplNames.length&&(x=!0,w="<tr><td class='ui-search-label'>"+e.tmplLabel+"</td>",w+="<td><select class='ui-template "+d.srSelect+"'>",w+="<option value='default'>Default</option>",$.each(e.tmplNames,function(e,t){w+="<option value='"+e+"'>"+t+"</option>"}),w+="</select></td></tr>"),g="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+r+"_2'><tbody><tr><td colspan='2'><hr class='"+c.content+"' style='margin:1px'/></td></tr>"+w+"<tr><td class='EditButton' style='text-align:"+p+"'>"+b+"</td><td class='EditButton' "+f+">"+y+v+"</td></tr></tbody></table>",r=$.jgrid.jqID(r),$("#"+r).jqFilter({columns:m,sortStrategy:e.sortStrategy,filter:e.loadDefaults?l:null,showQuery:e.showQuery,errorcheck:e.errorcheck,sopt:e.sopt,groupButton:e.multipleGroup,ruleButtons:e.multipleSearch,uniqueSearchFields:e.uniqueSearchFields,afterRedraw:e.afterRedraw,ops:e.odata,operands:e.operands,ajaxSelectOptions:i.p.ajaxSelectOptions,groupOps:e.groupOps,addsubgrup:e.addsubgrup,addrule:e.addrule,delgroup:e.delgroup,delrule:e.delrule,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString()),$.isFunction(e.afterChange)&&e.afterChange.call(i,$("#"+r),e)},direction:i.p.direction,id:i.p.id}),u.append(g),x&&e.tmplFilters&&e.tmplFilters.length&&$(".ui-template",u).on("change",function(){var t=$(this).val();return"default"===t?$("#"+r).jqFilter("addFilter",l):$("#"+r).jqFilter("addFilter",e.tmplFilters[parseInt(t,10)]),!1}),!0===e.multipleGroup&&(e.multipleSearch=!0),$(i).triggerHandler("jqGridFilterInitialize",[$("#"+r)]),$.isFunction(e.onInitializeSearch)&&e.onInitializeSearch.call(i,$("#"+r)),e.gbox="#gbox_"+r,e.layer?$.jgrid.createModal(s,u,e,"#gview_"+$.jgrid.jqID(i.p.id),$("#gbox_"+$.jgrid.jqID(i.p.id))[0],"#"+$.jgrid.jqID(e.layer),{position:"relative"}):$.jgrid.createModal(s,u,e,"#gview_"+$.jgrid.jqID(i.p.id),$("#gbox_"+$.jgrid.jqID(i.p.id))[0]),(e.searchOnEnter||e.closeOnEscape)&&$("#"+$.jgrid.jqID(s.themodal)).keydown(function(t){var i=$(t.target);return!e.searchOnEnter||13!==t.which||i.hasClass("add-group")||i.hasClass("add-rule")||i.hasClass("delete-group")||i.hasClass("delete-rule")||i.hasClass("fm-button")&&i.is("[id$=_query]")?e.closeOnEscape&&27===t.which?($("#"+$.jgrid.jqID(s.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($("#"+r+"_search").click(),!1)}),y&&$("#"+r+"_query").on("click",function(){return $(".queryresult",u).toggle(),!1}),void 0===e.stringResult&&(e.stringResult=e.multipleSearch),$("#"+r+"_search").on("click",function(){var t,o,l={};if(n=$("#"+r),n.find(".input-elm:focus").change(),o=n.jqFilter("filterData"),e.errorcheck&&(n[0].hideError(),e.showQuery||n.jqFilter("toSQLString"),n[0].p.error))return n[0].showError(),!1;if(e.stringResult){try{t=JSON.stringify(o)}catch(e){}"string"==typeof t&&(l[e.sFilter]=t,$.each([e.sField,e.sValue,e.sOper],function(){l[this]=""}))}else e.multipleSearch?(l[e.sFilter]=o,$.each([e.sField,e.sValue,e.sOper],function(){l[this]=""})):(l[e.sField]=o.rules[0].field,l[e.sValue]=o.rules[0].data,l[e.sOper]=o.rules[0].op,l[e.sFilter]="");return i.p.search=!0,$.extend(i.p.postData,l),a=$(i).triggerHandler("jqGridFilterSearch"),void 0===a&&(a=!0),a&&$.isFunction(e.onSearch)&&(a=e.onSearch.call(i,i.p.filters)),!1!==a&&$(i).trigger("reloadGrid",[{page:1}]),e.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:e.jqModal,onClose:e.onClose}),!1}),$("#"+r+"_reset").on("click",function(){var t={},n=$("#"+r);return i.p.search=!1,i.p.resetsearch=!0,!1===e.multipleSearch?t[e.sField]=t[e.sValue]=t[e.sOper]="":t[e.sFilter]="",n[0].resetFilter(),x&&$(".ui-template",u).val("default"),$.extend(i.p.postData,t),a=$(i).triggerHandler("jqGridFilterReset"),void 0===a&&(a=!0),a&&$.isFunction(e.onReset)&&(a=e.onReset.call(i)),!1!==a&&$(i).trigger("reloadGrid",[{page:1}]),e.closeAfterReset&&$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(i.p.id),jqm:e.jqModal,onClose:e.onClose}),!1}),t($("#"+r)),$(".fm-button:not(."+c.disabled+")",u).hover(function(){$(this).addClass(c.hover)},function(){$(this).removeClass(c.hover)})}}})},filterInput:function(e,t){return t=$.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null},t||{}),this.each(function(){var i=this;if(i.grid){var n,r,o,a='{"groupOp":"'+t.groupOp+'","rules":[',s=0;if(e+="","local"!==!i.p.datatype){$.each(i.p.colModel,function(){n=this.index||this.name,r=this.searchoptions||{},o=t.defaultSearch?t.defaultSearch:r.sopt?r.sopt[0]:t.defaultSearch,this.search=!1!==this.search,(this.search||t.searchAll)&&(s>0&&(a+=","),a+='{"field":"'+n+'",',a+='"op":"'+o+'",',a+='"data":"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',s++)}),a+="]}",$.extend(i.p.postData,{filters:a}),$.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]});var l="stop"===$(i).triggerHandler("jqGridFilterInputBeforeSearch");!l&&$.isFunction(t.beforeSearch)&&(l=t.beforeSearch.call(i)),l||$(i).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",[{page:1}]),$(i).triggerHandler("jqGridFilterInputAfterSearch"),$.isFunction(t.afterSearch)&&t.afterSearch.call(i)}}})}});var rp_ge={};if($.jgrid.extend({editGridRow:function(e,t){var i=$.jgrid.getRegional(this[0],"edit"),n=this[0].p.styleUI,r=$.jgrid.styleUI[n].formedit,o=$.jgrid.styleUI[n].common;return t=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:o.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1},i,t||{}),rp_ge[$(this)[0].p.id]=t,this.each(function(){function i(){var e,t={};$(x).find(".FormElement").each(function(){var e=$(".customelement",this);if(e.length){var i=e[0],n=$(i).attr("name");$.each(f.p.colModel,function(){if(this.name===n&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(g[n]=this.editoptions.custom_value.call(f,$("#"+$.jgrid.jqID(n),x),"get"),void 0===g[n])throw"e1"}catch(e){"e1"===e?$.jgrid.info_dialog(D.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.novalue,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(D.errcap,e.message,rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}return!0}})}else{switch($(this).get(0).type){case"checkbox":if($(this).is(":checked"))g[this.name]=$(this).val();else{var r=$(this).attr("offval");g[this.name]=r}break;case"select-one":g[this.name]=$(this).val();break;case"select-multiple":g[this.name]=$(this).val(),g[this.name]=g[this.name]?g[this.name].join(","):"";break;case"password":case"text":case"textarea":case"button":g[this.name]=$(this).val();break;case"radio":if(t.hasOwnProperty(this.name))return!0;t[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}f.p.autoencode&&(g[this.name]=$.jgrid.htmlEncode(g[this.name]))}});for(e in t)if(t.hasOwnProperty(e)){var i=$('input[name="'+e+'"]:checked',x).val();g[e]=void 0!==i?i:t[e],f.p.autoencode&&(g[e]=$.jgrid.htmlEncode(g[e]))}return!0}function n(e,t,i){var n,r,o,a,s,l,d=0;(rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(f.p.savedData={},f.p.savedData[t.p.id+"_id"]=e);var c=t.p.colModel;if("_empty"===e)return $(c).each(function(){n=this.name,a=$.extend({},this.editoptions||{}),(o=$("#"+$.jgrid.jqID(n),i))&&o.length&&null!==o[0]&&(s="","custom"===this.edittype&&$.isFunction(a.custom_value)?a.custom_value.call(f,$("#"+n,i),"set",s):a.defaultValue?(s=$.isFunction(a.defaultValue)?a.defaultValue.call(f):a.defaultValue,"checkbox"===o[0].type?(l=s.toLowerCase(),l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(o[0].checked=!0,o[0].defaultChecked=!0,o[0].value=s):(o[0].checked=!1,o[0].defaultChecked=!1)):o.val(s)):"checkbox"===o[0].type?(o[0].checked=!1,o[0].defaultChecked=!1,s=$(o).attr("offval")):o[0].type&&"select"===o[0].type.substr(0,6)?o[0].selectedIndex=0:o.val(s),(!0===rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(f.p.savedData[n]=s))}),void $("#id_g",i).val(e);var u=$(t).jqGrid("getInd",e,!0);u&&($('td[role="gridcell"]',u).each(function(o){if("cb"!==(n=c[o].name)&&"subgrid"!==n&&"rn"!==n&&!0===c[o].editable){if(n===t.p.ExpandColumn&&!0===t.p.treeGrid)r=$(this).text();else try{r=$.unformat.call(t,$(this),{rowId:e,colModel:c[o]},o)}catch(e){r="textarea"===c[o].edittype?$(this).text():$(this).html()}switch(f.p.autoencode&&(r=$.jgrid.htmlDecode(r)),(!0===rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(f.p.savedData[n]=r),n=$.jgrid.jqID(n),c[o].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),$("#"+n,i).val(r);break;case"select":var a=r.split(",");a=$.map(a,function(e){return $.trim(e)}),$("#"+n+" option",i).each(function(){c[o].editoptions.multiple||$.trim(r)!==$.trim($(this).text())&&a[0]!==$.trim($(this).text())&&a[0]!==$.trim($(this).val())?c[o].editoptions.multiple&&($.inArray($.trim($(this).text()),a)>-1||$.inArray($.trim($(this).val()),a)>-1)?this.selected=!0:this.selected=!1:this.selected=!0}),(!0===rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(r=$("#"+n,i).val(),c[o].editoptions.multiple&&(r=r.join(",")),f.p.savedData[n]=r);break;case"checkbox":if(r=String(r),c[o].editoptions&&c[o].editoptions.value){c[o].editoptions.value.split(":")[0]===r?$("#"+n,i)[f.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+n,i)[f.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}else r=r.toLowerCase(),r.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==r?($("#"+n,i)[f.p.useProp?"prop":"attr"]("checked",!0),$("#"+n,i)[f.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+n,i)[f.p.useProp?"prop":"attr"]("checked",!1),$("#"+n,i)[f.p.useProp?"prop":"attr"]("defaultChecked",!1));(!0===rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(r=$("#"+n,i).is(":checked")?$("#"+n,i).val():$("#"+n,i).attr("offval"),f.p.savedData[n]=r);break;case"custom":try{if(!c[o].editoptions||!$.isFunction(c[o].editoptions.custom_value))throw"e1";c[o].editoptions.custom_value.call(f,$("#"+n,i),"set",r)}catch(e){"e1"===e?$.jgrid.info_dialog(D.errcap,"function 'custom_value' "+rp_ge[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(D.errcap,e.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:rp_ge[$(this)[0]].p.styleUI})}}d++}}),d>0&&($("#id_g",x).val(e),(!0===rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(f.p.savedData[t.p.id+"_id"]=e)))}function a(){$.each(f.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&g.hasOwnProperty(t.name)&&""===g[t.name]&&(g[t.name]="null")})}function s(){var e,i,r,s,l,d,c,u=[!0,"",""],p={},h=f.p.prmNames,m=$(f).triggerHandler("jqGridAddEditBeforeCheckValues",[$(y),v]);m&&"object"==typeof m&&(g=m),$.isFunction(rp_ge[f.p.id].beforeCheckValues)&&(m=rp_ge[f.p.id].beforeCheckValues.call(f,g,$(y),v))&&"object"==typeof m&&(g=m);for(s in g)if(g.hasOwnProperty(s)&&(u=$.jgrid.checkValues.call(f,g[s],s),!1===u[0]))break;if(a(),u[0]&&(p=$(f).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[f.p.id],g,v]),void 0===p&&$.isFunction(rp_ge[f.p.id].onclickSubmit)&&(p=rp_ge[f.p.id].onclickSubmit.call(f,rp_ge[f.p.id],g,v)||{}),u=$(f).triggerHandler("jqGridAddEditBeforeSubmit",[g,$(y),v]),void 0===u&&(u=[!0,"",""]),u[0]&&$.isFunction(rp_ge[f.p.id].beforeSubmit)&&(u=rp_ge[f.p.id].beforeSubmit.call(f,g,$(y),v))),u[0]&&!rp_ge[f.p.id].processing){if(rp_ge[f.p.id].processing=!0,$("#sData",x+"_2").addClass(o.active),c=rp_ge[f.p.id].url||$(f).jqGrid("getGridParam","editurl"),r=h.oper,i="clientArray"===c?f.p.keyName:h.id,g[r]="_empty"===$.trim(g[f.p.id+"_id"])?h.addoper:h.editoper,g[r]!==h.addoper?g[i]=g[f.p.id+"_id"]:void 0===g[i]&&(g[i]=g[f.p.id+"_id"]),delete g[f.p.id+"_id"],g=$.extend(g,rp_ge[f.p.id].editData,p),!0===f.p.treeGrid){if(g[r]===h.addoper){l=$(f).jqGrid("getGridParam","selrow");var w="adjacency"===f.p.treeGridModel?f.p.treeReader.parent_id_field:"parent_id";g[w]=l}for(d in f.p.treeReader)if(f.p.treeReader.hasOwnProperty(d)){var _=f.p.treeReader[d];if(g.hasOwnProperty(_)){if(g[r]===h.addoper&&"parent_id_field"===d)continue;delete g[_]}}}g[i]=$.jgrid.stripPref(f.p.idPrefix,g[i]);var C=$.extend({url:c,type:rp_ge[f.p.id].mtype,data:$.isFunction(rp_ge[f.p.id].serializeEditData)?rp_ge[f.p.id].serializeEditData.call(f,g):g,complete:function(a,s){var d;if($("#sData",x+"_2").removeClass(o.active),g[i]=f.p.idPrefix+g[i],a.status>=300&&304!==a.status?(u[0]=!1,u[1]=$(f).triggerHandler("jqGridAddEditErrorTextFormat",[a,v]),$.isFunction(rp_ge[f.p.id].errorTextFormat)?u[1]=rp_ge[f.p.id].errorTextFormat.call(f,a,v):u[1]=s+" Status: '"+a.statusText+"'. Error code: "+a.status):(u=$(f).triggerHandler("jqGridAddEditAfterSubmit",[a,g,v]),void 0===u&&(u=[!0,"",""]),u[0]&&$.isFunction(rp_ge[f.p.id].afterSubmit)&&(u=rp_ge[f.p.id].afterSubmit.call(f,a,g,v))),!1===u[0])$(".FormError",y).html(u[1]),$(".FormError",y).show();else if(f.p.autoencode&&$.each(g,function(e,t){g[e]=$.jgrid.htmlDecode(t)}),g[r]===h.addoper?(u[2]||(u[2]=$.jgrid.randId()),null==g[i]||"_empty"===g[i]||""==g[i]?g[i]=u[2]:u[2]=g[i],rp_ge[f.p.id].reloadAfterSubmit?$(f).trigger("reloadGrid"):!0===f.p.treeGrid?$(f).jqGrid("addChildNode",u[2],l,g):$(f).jqGrid("addRowData",u[2],g,t.addedrow),rp_ge[f.p.id].closeAfterAdd?(!0!==f.p.treeGrid&&$(f).jqGrid("setSelection",u[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form})):rp_ge[f.p.id].clearAfterAdd&&n("_empty",f,y)):(rp_ge[f.p.id].reloadAfterSubmit?($(f).trigger("reloadGrid"),rp_ge[f.p.id].closeAfterEdit||setTimeout(function(){$(f).jqGrid("setSelection",g[i])},1e3)):!0===f.p.treeGrid?$(f).jqGrid("setTreeRow",g[i],g):$(f).jqGrid("setRowData",g[i],g),rp_ge[f.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form})),$.isFunction(rp_ge[f.p.id].afterComplete)&&(e=a,setTimeout(function(){$(f).triggerHandler("jqGridAddEditAfterComplete",[e,g,$(y),v]),rp_ge[f.p.id].afterComplete.call(f,e,g,$(y),v),e=null},500)),(rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&($(y).data("disabled",!1),"_empty"!==f.p.savedData[f.p.id+"_id"]))for(d in f.p.savedData)f.p.savedData.hasOwnProperty(d)&&g[d]&&(f.p.savedData[d]=g[d]);rp_ge[f.p.id].processing=!1;try{$(":input:visible",y)[0].focus()}catch(e){}}},$.jgrid.ajaxOptions,rp_ge[f.p.id].ajaxEditOptions);if(C.url||rp_ge[f.p.id].useDataProxy||($.isFunction(f.p.dataProxy)?rp_ge[f.p.id].useDataProxy=!0:(u[0]=!1,u[1]+=" "+D.nourl)),u[0])if(rp_ge[f.p.id].useDataProxy){var q=f.p.dataProxy.call(f,C,"set_"+f.p.id);void 0===q&&(q=[!0,""]),!1===q[0]?(u[0]=!1,u[1]=q[1]||"Error deleting the selected row!"):(C.data.oper===h.addoper&&rp_ge[f.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}),C.data.oper===h.editoper&&rp_ge[f.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}))}else"clientArray"===C.url?(rp_ge[f.p.id].reloadAfterSubmit=!1,g=C.data,C.complete({status:200,statusText:""},"")):$.ajax(C)}!1===u[0]&&($(".FormError",y).html(u[1]),$(".FormError",y).show())}function l(e,t){var i,n=!1;if(!(n=!($.isPlainObject(e)&&$.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){n=!0;break}if(e[i]!==t[i]){n=!0;break}}return n}function d(){var e=!0;return $(".FormError",y).hide(),rp_ge[f.p.id].checkOnUpdate&&(g={},i(),(m=l(g,f.p.savedData))&&($(y).data("disabled",!0),$(".confirm","#"+j.themodal).show(),e=!1)),e}function c(e,t){var i=t[1].length-1;0===e?$("#pData",h).addClass(o.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(o.disabled)?$("#pData",h).addClass(o.disabled):$("#pData",h).removeClass(o.disabled),e===i?$("#nData",h).addClass(o.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(o.disabled)?$("#nData",h).addClass(o.disabled):$("#nData",h).removeClass(o.disabled)}function u(){var e,t=$(f).jqGrid("getDataIDs"),i=$("#id_g",x).val();if(f.p.multiselect&&rp_ge[f.p.id].editselected){for(var n=[],r=0,o=t.length;r<o;r++)-1!==$.inArray(t[r],f.p.selarrrow)&&n.push(t[r]);return e=$.inArray(i,n),[e,n]}return e=$.inArray(i,t),[e,t]}function p(){if(rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate){var e=[],t={};e=$.map(f.p.savedData,function(e,t){return t}),$(".FormElement",A).each(function(){if(-1===e.indexOf(this.name)){var i=$(this).val(),n=$(this).get(0).type;if("checkbox"===n)$(this).is(":checked")||(i=$(this).attr("offval"));else if("select-multiple"===n)i=i.join(",");else if("radio"===n){if(t.hasOwnProperty(this.name))return!0;t[this.name]=void 0===$(this).attr("offval")?"off":$(this).attr("offval")}f.p.savedData[this.name]=i}});for(var i in t)if(t.hasOwnProperty(i)){var n=$('input[name="'+i+'"]:checked',A).val();f.p.savedData[i]=void 0!==n?n:t[i]}}}var f=this;if(f.grid&&e){f.p.savedData={};var h,g,m,v,b=f.p.id,y="FrmGrid_"+b,w="TblGrid_"+b,x="#"+$.jgrid.jqID(w),j={themodal:"editmod"+b,modalhead:"edithd"+b,modalcontent:"editcnt"+b,scrollelm:y},_=!0,C=1,q=0,S="string"==typeof rp_ge[f.p.id].template&&rp_ge[f.p.id].template.length>0,D=$.jgrid.getRegional(this,"errors");rp_ge[f.p.id].styleUI=f.p.styleUI||"jQueryUI",$.jgrid.isMobile()&&(rp_ge[f.p.id].resize=!1),"new"===e?(e="_empty",v="add",t.caption=rp_ge[f.p.id].addCaption):(t.caption=rp_ge[f.p.id].editCaption,v="edit"),t.recreateForm||$(f).data("formProp")&&$.extend(rp_ge[$(this)[0].p.id],$(f).data("formProp"));var k=!0;t.checkOnUpdate&&t.jqModal&&!t.modal&&(k=!1);var T,I=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",F=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",A=$("<form name='FormPost' id='"+y+"' class='FormGrid' onSubmit='return false;' style='width:"+F+";height:"+I+";'></form>").data("disabled",!1);if(S?(T=function(e){var t="";return"string"==typeof e&&(t=e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),t}(rp_ge[$(this)[0].p.id].template),h=x):(T=$("<table id='"+w+"' class='EditTable ui-common-table'><tbody></tbody></table>"),h=x+"_2"),y="#"+$.jgrid.jqID(y),$(A).append("<div class='FormError "+o.error+"' style='display:none;'></div>"),$(A).append("<div class='tinfo topinfo'>"+rp_ge[f.p.id].topinfo+"</div>"),$(f.p.colModel).each(function(){var e=this.formoptions;C=Math.max(C,e?e.colpos||0:0),q=Math.max(q,e?e.rowpos||0:0)}),$(A).append(T),_=$(f).triggerHandler("jqGridAddEditBeforeInitData",[A,v]),void 0===_&&(_=!0),_&&$.isFunction(rp_ge[f.p.id].beforeInitData)&&(_=rp_ge[f.p.id].beforeInitData.call(f,A,v)),!1!==_){!function(){var t;if("_empty"!==e&&void 0!==f.p.savedRow&&f.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(t=0;t<f.p.savedRow.length;t++)if(f.p.savedRow[t].id===e){$(f).jqGrid("restoreRow",e);break}}(),function(e,t,i,n){var o,a,s,l,d,c,u,p,h=0,g=[],m=!1,v="";for(u=1;u<=n;u++)v+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";if("_empty"!==e&&(m=$(t).jqGrid("getInd",e)),$(t.p.colModel).each(function(u){if(o=this.name,a=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,d=a?"style='display:none'":"","cb"!==o&&"subgrid"!==o&&!0===this.editable&&"rn"!==o){if(!1===m)l="";else if(o===t.p.ExpandColumn&&!0===t.p.treeGrid)l=$("td[role='gridcell']:eq("+u+")",t.rows[m]).text();else{try{l=$.unformat.call(t,$("td[role='gridcell']:eq("+u+")",t.rows[m]),{rowId:e,colModel:this},u)}catch(e){l=this.edittype&&"textarea"===this.edittype?$("td[role='gridcell']:eq("+u+")",t.rows[m]).text():$("td[role='gridcell']:eq("+u+")",t.rows[m]).html()}(!l||"&nbsp;"===l||"&#160;"===l||1===l.length&&160===l.charCodeAt(0))&&(l="")}var b=$.extend({},this.editoptions||{},{id:o,name:o,rowId:e,oper:"edit"}),w=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),x=parseInt(w.rowpos,10)||h+1,j=parseInt(2*(parseInt(w.colpos,10)||1),10);if("_empty"===e&&b.defaultValue&&(l=$.isFunction(b.defaultValue)?b.defaultValue.call(f):b.defaultValue),this.edittype||(this.edittype="text"),f.p.autoencode&&(l=$.jgrid.htmlDecode(l)),c=$.jgrid.createEl.call(f,this.edittype,b,l,!1,$.extend({},$.jgrid.ajaxOptions,t.p.ajaxSelectOptions||{})),"select"===this.edittype&&(l=$(c).val(),"select-multiple"===$(c).get(0).type&&l&&(l=l.join(","))),"checkbox"===this.edittype&&(l=$(c).is(":checked")?$(c).val():$(c).attr("offval")),$(c).addClass("FormElement"),$.inArray(this.edittype,["text","textarea","password","select"])>-1&&$(c).addClass(r.inputClass),p=!0,S){var _=$(A).find("#"+o);_.length?_.replaceWith(c):p=!1}else{if(s=$(i).find("tr[rowpos="+x+"]"),w.rowabove){var C=$("<tr><td class='contentinfo' colspan='"+2*n+"'>"+w.rowcontent+"</td></tr>");$(i).append(C),C[0].rp=x}0===s.length&&(s=$("<tr "+d+" rowpos='"+x+"'></tr>").addClass("FormData").attr("id","tr_"+o),$(s).append(v),$(i).append(s),s[0].rp=x),$("td:eq("+(j-2)+")",s[0]).html("<label for='"+o+"'>"+(void 0===w.label?t.p.colNames[u]:w.label)+"</label>"),$("td:eq("+(j-1)+")",s[0]).append(w.elmprefix).append(c).append(w.elmsuffix)}(rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&p&&(f.p.savedData[o]=l),"custom"===this.edittype&&$.isFunction(b.custom_value)&&b.custom_value.call(f,$("#"+o,y),"set",l),$.jgrid.bindEv.call(f,c,b),g[h]=u,h++}}),h>0){var b;S?(b="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+t.p.id+"_id' value='"+e+"'/>",$(A).append(b)):(b=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+t.p.id+"_id' value='"+e+"'/></td></tr>"),b[0].rp=h+999,$(i).append(b)),(rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate)&&(f.p.savedData[t.p.id+"_id"]=e)}}(e,f,T,C);var R="rtl"===f.p.direction,E=R?"nData":"pData",P=R?"pData":"nData",O="<a id='"+E+"' class='fm-button "+o.button+"'><span class='"+o.icon_base+" "+r.icon_prev+"'></span></a>",G="<a id='"+P+"' class='fm-button "+o.button+"'><span class='"+o.icon_base+" "+r.icon_next+"'></span></a>",N="<a id='sData' class='fm-button "+o.button+"'>"+t.bSubmit+"</a>",M="<a id='cData' class='fm-button "+o.button+"'>"+t.bCancel+"</a>",z="<table style='height:auto' class='EditTable ui-common-table' id='"+w+"_2'><tbody><tr><td colspan='2'><hr class='"+o.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(R?G+O:O+G)+"</td><td class='EditButton'>"+N+M+"</td></tr>";if(z+="</tbody></table>",q>0){var L=[];$.each($(T)[0].rows,function(e,t){L[e]=t}),L.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(L,function(e,t){$("tbody",T).append(t)})}t.gbox="#gbox_"+$.jgrid.jqID(b);var H=!1;!0===t.closeOnEscape&&(t.closeOnEscape=!1,H=!0);var U;if(S?($(A).find("#pData").replaceWith(O),$(A).find("#nData").replaceWith(G),$(A).find("#sData").replaceWith(N),$(A).find("#cData").replaceWith(M),U=$("<div id="+w+"></div>").append(A)):U=$("<div></div>").append(A).append(z),$(A).append("<div class='binfo topinfo bottominfo'>"+rp_ge[f.p.id].bottominfo+"</div>"),$.jgrid.createModal(j,U,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(f.p.id),$("#gbox_"+$.jgrid.jqID(f.p.id))[0]),R&&($("#pData, #nData",x+"_2").css("float","right"),$(".EditButton",x+"_2").css("text-align","left")),rp_ge[f.p.id].topinfo&&$(".tinfo",y).show(),rp_ge[f.p.id].bottominfo&&$(".binfo",y).show(),U=null,z=null,$("#"+$.jgrid.jqID(j.themodal)).keydown(function(e){var i=e.target;if(!0===$(y).data("disabled"))return!1;if(!0===rp_ge[f.p.id].savekey[0]&&e.which===rp_ge[f.p.id].savekey[1]&&"TEXTAREA"!==i.tagName)return $("#sData",x+"_2").trigger("click"),!1;if(27===e.which)return!!d()&&(H&&$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:t.gbox,jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}),!1);if(!0===rp_ge[f.p.id].navkeys[0]){if("_empty"===$("#id_g",x).val())return!0;if(e.which===rp_ge[f.p.id].navkeys[1])return $("#pData",h).trigger("click"),!1;if(e.which===rp_ge[f.p.id].navkeys[2])return $("#nData",h).trigger("click"),!1}}),t.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(j.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(j.themodal)).off("click").click(function(){return!!d()&&($.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}),!1)})),t.saveicon=$.extend([!0,"left",r.icon_save],t.saveicon),t.closeicon=$.extend([!0,"left",r.icon_close],t.closeicon),!0===t.saveicon[0]&&$("#sData",h).addClass("right"===t.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+o.icon_base+" "+t.saveicon[2]+"'></span>"),!0===t.closeicon[0]&&$("#cData",h).addClass("right"===t.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+o.icon_base+" "+t.closeicon[2]+"'></span>"),rp_ge[f.p.id].checkOnSubmit||rp_ge[f.p.id].checkOnUpdate){N="<a id='sNew' class='fm-button "+o.button+"' style='z-index:1002'>"+t.bYes+"</a>",G="<a id='nNew' class='fm-button "+o.button+"' style='z-index:1002;margin-left:5px'>"+t.bNo+"</a>",M="<a id='cNew' class='fm-button "+o.button+"' style='z-index:1002;margin-left:5px;'>"+t.bExit+"</a>";var B=t.zIndex||999;B++,$("<div class='"+t.overlayClass+" jqgrid-overlay confirm' style='z-index:"+B+";display:none;'>&#160;</div><div class='confirm ui-jqconfirm "+o.content+"' style='z-index:"+(B+1)+"'>"+t.saveData+"<br/><br/>"+N+G+M+"</div>").insertAfter(y),$("#sNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return s(),$(y).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),$(y).data("disabled",!1),setTimeout(function(){$(":input:visible",y)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(j.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(j.themodal)).hide(),$(y).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}),!1})}$(f).triggerHandler("jqGridAddEditInitializeForm",[$(y),v]),$.isFunction(rp_ge[f.p.id].onInitializeForm)&&rp_ge[f.p.id].onInitializeForm.call(f,$(y),v),"_empty"!==e&&rp_ge[f.p.id].viewPagerButtons?$("#pData,#nData",h).show():$("#pData,#nData",h).hide(),$(f).triggerHandler("jqGridAddEditBeforeShowForm",[$(y),v]),$.isFunction(rp_ge[f.p.id].beforeShowForm)&&rp_ge[f.p.id].beforeShowForm.call(f,$(y),v),p(),$("#"+$.jgrid.jqID(j.themodal)).data("onClose",rp_ge[f.p.id].onClose),$.jgrid.viewModal("#"+$.jgrid.jqID(j.themodal),{gbox:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,overlay:t.overlay,modal:t.modal,overlayClass:t.overlayClass,focusField:t.focusField,onHide:function(e){var t=$("#editmod"+b)[0].style.height,i=$("#editmod"+b)[0].style.width;t.indexOf("px")>-1&&(t=parseFloat(t)),i.indexOf("px")>-1&&(i=parseFloat(i)),$(f).data("formProp",{top:parseFloat($(e.w).css("top")),left:parseFloat($(e.w).css("left")),width:i,height:t,dataheight:$(y).height(),datawidth:$(y).width()}),e.w.remove(),e.o&&e.o.remove()}}),k||$("."+$.jgrid.jqID(t.overlayClass)).click(function(){return!!d()&&($.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}),!1)}),$(".fm-button","#"+$.jgrid.jqID(j.themodal)).hover(function(){$(this).addClass(o.hover)},function(){$(this).removeClass(o.hover)}),$("#sData",h).click(function(){return g={},$(".FormError",y).hide(),i(),"_empty"===g[f.p.id+"_id"]?s():!0===t.checkOnSubmit?(m=l(g,f.p.savedData),m?($(y).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(j.themodal)).show()):s()):s(),!1}),$("#cData",h).click(function(){return!!d()&&($.jgrid.hideModal("#"+$.jgrid.jqID(j.themodal),{gb:"#gbox_"+$.jgrid.jqID(b),jqm:t.jqModal,onClose:rp_ge[f.p.id].onClose,removemodal:rp_ge[f.p.id].removemodal,formprop:!rp_ge[f.p.id].recreateForm,form:rp_ge[f.p.id].form}),!1)}),$("#nData",h).click(function(){if(!d())return!1;$(".FormError",y).hide();var e=u()
;if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){$(f).triggerHandler("jqGridAddEditClickPgButtons",["next",$(y),e[1][e[0]]]);var i;if($.isFunction(t.onclickPgButtons)&&void 0!==(i=t.onclickPgButtons.call(f,"next",$(y),e[1][e[0]]))&&!1===i)return!1;if($("#"+$.jgrid.jqID(e[1][e[0]+1])).hasClass(o.disabled))return!1;n(e[1][e[0]+1],f,y),f.p.multiselect&&rp_ge[f.p.id].editselected||$(f).jqGrid("setSelection",e[1][e[0]+1]),$(f).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(y),e[1][e[0]]]),$.isFunction(t.afterclickPgButtons)&&t.afterclickPgButtons.call(f,"next",$(y),e[1][e[0]+1]),p(),c(e[0]+1,e)}return!1}),$("#pData",h).click(function(){if(!d())return!1;$(".FormError",y).hide();var e=u();if(-1!==e[0]&&e[1][e[0]-1]){$(f).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(y),e[1][e[0]]]);var i;if($.isFunction(t.onclickPgButtons)&&void 0!==(i=t.onclickPgButtons.call(f,"prev",$(y),e[1][e[0]]))&&!1===i)return!1;if($("#"+$.jgrid.jqID(e[1][e[0]-1])).hasClass(o.disabled))return!1;n(e[1][e[0]-1],f,y),f.p.multiselect&&rp_ge[f.p.id].editselected||$(f).jqGrid("setSelection",e[1][e[0]-1]),$(f).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(y),e[1][e[0]]]),$.isFunction(t.afterclickPgButtons)&&t.afterclickPgButtons.call(f,"prev",$(y),e[1][e[0]-1]),p(),c(e[0]-1,e)}return!1}),$(f).triggerHandler("jqGridAddEditAfterShowForm",[$(y),v]),$.isFunction(rp_ge[f.p.id].afterShowForm)&&rp_ge[f.p.id].afterShowForm.call(f,$(y),v);var V=u();c(V[0],V)}}})},viewGridRow:function(e,t){var i=$.jgrid.getRegional(this[0],"view"),n=this[0].p.styleUI,r=$.jgrid.styleUI[n].formedit,o=$.jgrid.styleUI[n].common;return t=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},i,t||{}),rp_ge[$(this)[0].p.id]=t,this.each(function(){function i(){!0!==rp_ge[l.p.id].closeOnEscape&&!0!==rp_ge[l.p.id].navkeys[0]||setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(h.modalhead)).attr("tabindex","-1").focus()},0)}function n(e,t){var i,n,r,o,a=0;(o=$(t).jqGrid("getInd",e,!0))&&($("td",o).each(function(e){i=t.p.colModel[e].name,n=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&(r=i===t.p.ExpandColumn&&!0===t.p.treeGrid?$(this).text():$(this).html(),i=$.jgrid.jqID("v_"+i),$("#"+i+" span","#"+u).html(r),n&&$("#"+i,"#"+u).parents("tr:first").hide(),a++)}),a>0&&$("#id_g","#"+u).val(e))}function a(e,t){var i=t[1].length-1;0===e?$("#pData","#"+u+"_2").addClass(o.disabled):void 0!==t[1][e-1]&&$("#"+$.jgrid.jqID(t[1][e-1])).hasClass(o.disabled)?$("#pData",u+"_2").addClass(o.disabled):$("#pData","#"+u+"_2").removeClass(o.disabled),e===i?$("#nData","#"+u+"_2").addClass(o.disabled):void 0!==t[1][e+1]&&$("#"+$.jgrid.jqID(t[1][e+1])).hasClass(o.disabled)?$("#nData",u+"_2").addClass(o.disabled):$("#nData","#"+u+"_2").removeClass(o.disabled)}function s(){var e=$(l).jqGrid("getDataIDs"),t=$("#id_g","#"+u).val();return[$.inArray(t,e),e]}var l=this;if(l.grid&&e){var d=l.p.id,c="ViewGrid_"+$.jgrid.jqID(d),u="ViewTbl_"+$.jgrid.jqID(d),p="ViewGrid_"+d,f="ViewTbl_"+d,h={themodal:"viewmod"+d,modalhead:"viewhd"+d,modalcontent:"viewcnt"+d,scrollelm:c},g=!!$.isFunction(rp_ge[l.p.id].beforeInitData)&&rp_ge[l.p.id].beforeInitData,m=!0,v=1,b=0;rp_ge[l.p.id].styleUI=l.p.styleUI||"jQueryUI",t.recreateForm||$(l).data("viewProp")&&$.extend(rp_ge[$(this)[0].p.id],$(l).data("viewProp"));var y=isNaN(rp_ge[$(this)[0].p.id].dataheight)?rp_ge[$(this)[0].p.id].dataheight:rp_ge[$(this)[0].p.id].dataheight+"px",w=isNaN(rp_ge[$(this)[0].p.id].datawidth)?rp_ge[$(this)[0].p.id].datawidth:rp_ge[$(this)[0].p.id].datawidth+"px",x=$("<form name='FormPost' id='"+p+"' class='FormGrid' style='width:"+w+";height:"+y+";'></form>"),j=$("<table id='"+f+"' class='EditTable ViewTable'><tbody></tbody></table>");if($(l.p.colModel).each(function(){var e=this.formoptions;v=Math.max(v,e?e.colpos||0:0),b=Math.max(b,e?e.rowpos||0:0)}),$(x).append(j),g&&void 0===(m=g.call(l,x))&&(m=!0),!1!==m){!function(e,i,n,r){var a,s,l,d,c,u,p,f,h,g=0,m=[],v=!1,b="<td class='CaptionTD form-view-label "+o.content+"' width='"+t.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+o.content+"'>&#160;</td>",y="",w="<td class='CaptionTD form-view-label "+o.content+"'>&#160;</td><td class='DataTD form-view-data "+o.content+"'>&#160;</td>",x=["integer","number","currency"],j=0,_=0;for(u=1;u<=r;u++)y+=1===u?b:w;if($(i.p.colModel).each(function(){(s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,x)?j=Math.max(j,parseInt(this.width,10)):_=Math.max(_,parseInt(this.width,10)))}),p=0!==j?j:0!==_?_:0,v=$(i).jqGrid("getInd",e),$(i.p.colModel).each(function(e){if(a=this.name,f=!1,s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,c=s?"style='display:none'":"",h="boolean"!=typeof this.viewable||this.viewable,"cb"!==a&&"subgrid"!==a&&"rn"!==a&&h){d=!1===v?"":a===i.p.ExpandColumn&&!0===i.p.treeGrid?$("td:eq("+e+")",i.rows[v]).text():$("td:eq("+e+")",i.rows[v]).html(),f="right"===this.align&&0!==p;var t=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),o=parseInt(t.rowpos,10)||g+1,u=parseInt(2*(parseInt(t.colpos,10)||1),10);if(t.rowabove){var b=$("<tr><td class='contentinfo' colspan='"+2*r+"'>"+t.rowcontent+"</td></tr>");$(n).append(b),b[0].rp=o}l=$(n).find("tr[rowpos="+o+"]"),0===l.length&&(l=$("<tr "+c+" rowpos='"+o+"'></tr>").addClass("FormData").attr("id","trv_"+a),$(l).append(y),$(n).append(l),l[0].rp=o),$("td:eq("+(u-2)+")",l[0]).html("<b>"+(void 0===t.label?i.p.colNames[e]:t.label)+"</b>"),$("td:eq("+(u-1)+")",l[0]).append("<span>"+d+"</span>").attr("id","v_"+a),f&&$("td:eq("+(u-1)+") span",l[0]).css({"text-align":"right",width:p+"px"}),m[g]=e,g++}}),g>0){var C=$("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*r-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");C[0].rp=g+99,$(n).append(C)}}(e,l,j,v);var _="rtl"===l.p.direction,C=_?"nData":"pData",q=_?"pData":"nData",S="<a id='"+C+"' class='fm-button "+o.button+"'><span class='"+o.icon_base+" "+r.icon_prev+"'></span></a>",D="<a id='"+q+"' class='fm-button "+o.button+"'><span class='"+o.icon_base+" "+r.icon_next+"'></span></a>",k="<a id='cData' class='fm-button "+o.button+"'>"+t.bClose+"</a>";if(b>0){var T=[];$.each($(j)[0].rows,function(e,t){T[e]=t}),T.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(T,function(e,t){$("tbody",j).append(t)})}t.gbox="#gbox_"+$.jgrid.jqID(d);var I=$("<div></div>").append(x).append("<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+t.labelswidth+"'>"+(_?D+S:S+D)+"</td><td class='EditButton'>"+k+"</td></tr></tbody></table>");$.jgrid.createModal(h,I,rp_ge[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(l.p.id),$("#gview_"+$.jgrid.jqID(l.p.id))[0]),_&&($("#pData, #nData","#"+u+"_2").css("float","right"),$(".EditButton","#"+u+"_2").css("text-align","left")),t.viewPagerButtons||$("#pData, #nData","#"+u+"_2").hide(),I=null,$("#"+h.themodal).keydown(function(e){if(27===e.which)return rp_ge[l.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:t.gbox,jqm:t.jqModal,onClose:t.onClose,removemodal:rp_ge[l.p.id].removemodal,formprop:!rp_ge[l.p.id].recreateForm,form:rp_ge[l.p.id].form}),!1;if(!0===t.navkeys[0]){if(e.which===t.navkeys[1])return $("#pData","#"+u+"_2").trigger("click"),!1;if(e.which===t.navkeys[2])return $("#nData","#"+u+"_2").trigger("click"),!1}}),t.closeicon=$.extend([!0,"left",r.icon_close],t.closeicon),!0===t.closeicon[0]&&$("#cData","#"+u+"_2").addClass("right"===t.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+o.icon_base+" "+t.closeicon[2]+"'></span>"),$.isFunction(t.beforeShowForm)&&t.beforeShowForm.call(l,$("#"+c)),$.jgrid.viewModal("#"+$.jgrid.jqID(h.themodal),{gbox:"#gbox_"+$.jgrid.jqID(d),jqm:t.jqModal,overlay:t.overlay,modal:t.modal,onHide:function(e){$(l).data("viewProp",{top:parseFloat($(e.w).css("top")),left:parseFloat($(e.w).css("left")),width:$(e.w).width(),height:$(e.w).height(),dataheight:$("#"+c).height(),datawidth:$("#"+c).width()}),e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+o.disabled+")","#"+u+"_2").hover(function(){$(this).addClass(o.hover)},function(){$(this).removeClass(o.hover)}),i(),$("#cData","#"+u+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:"#gbox_"+$.jgrid.jqID(d),jqm:t.jqModal,onClose:t.onClose,removemodal:rp_ge[l.p.id].removemodal,formprop:!rp_ge[l.p.id].recreateForm,form:rp_ge[l.p.id].form}),!1}),$("#nData","#"+u+"_2").click(function(){$("#FormError","#"+u).hide();var e=s();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&($.isFunction(t.onclickPgButtons)&&t.onclickPgButtons.call(l,"next",$("#"+c),e[1][e[0]]),n(e[1][e[0]+1],l),$(l).jqGrid("setSelection",e[1][e[0]+1]),$.isFunction(t.afterclickPgButtons)&&t.afterclickPgButtons.call(l,"next",$("#"+c),e[1][e[0]+1]),a(e[0]+1,e)),i(),!1}),$("#pData","#"+u+"_2").click(function(){$("#FormError","#"+u).hide();var e=s();return-1!==e[0]&&e[1][e[0]-1]&&($.isFunction(t.onclickPgButtons)&&t.onclickPgButtons.call(l,"prev",$("#"+c),e[1][e[0]]),n(e[1][e[0]-1],l),$(l).jqGrid("setSelection",e[1][e[0]-1]),$.isFunction(t.afterclickPgButtons)&&t.afterclickPgButtons.call(l,"prev",$("#"+c),e[1][e[0]-1]),a(e[0]-1,e)),i(),!1});var F=s();a(F[0],F)}}})},delGridRow:function(e,t){var i=$.jgrid.getRegional(this[0],"del"),n=this[0].p.styleUI,r=$.jgrid.styleUI[n].formedit,o=$.jgrid.styleUI[n].common;return t=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},i,t||{}),rp_ge[$(this)[0].p.id]=t,this.each(function(){var i=this;if(i.grid&&e){var n,a,s,l,d=$.isFunction(rp_ge[i.p.id].beforeShowForm),c=$.isFunction(rp_ge[i.p.id].afterShowForm),u=!!$.isFunction(rp_ge[i.p.id].beforeInitData)&&rp_ge[i.p.id].beforeInitData,p=i.p.id,f={},h=!0,g="DelTbl_"+$.jgrid.jqID(p),m="DelTbl_"+p,v={themodal:"delmod"+p,modalhead:"delhd"+p,modalcontent:"delcnt"+p,scrollelm:g};if(rp_ge[i.p.id].styleUI=i.p.styleUI||"jQueryUI",$.isArray(e)&&(e=e.join()),void 0!==$("#"+$.jgrid.jqID(v.themodal))[0]){if(u&&void 0===(h=u.call(i,$("#"+g)))&&(h=!0),!1===h)return;$("#DelData>td","#"+g).text(e),$("#DelError","#"+g).hide(),!0===rp_ge[i.p.id].processing&&(rp_ge[i.p.id].processing=!1,$("#dData","#"+g).removeClass(o.active)),d&&rp_ge[i.p.id].beforeShowForm.call(i,$("#"+g)),$.jgrid.viewModal("#"+$.jgrid.jqID(v.themodal),{gbox:"#gbox_"+$.jgrid.jqID(p),jqm:rp_ge[i.p.id].jqModal,jqM:!1,overlay:rp_ge[i.p.id].overlay,modal:rp_ge[i.p.id].modal}),c&&rp_ge[i.p.id].afterShowForm.call(i,$("#"+g))}else{var b=isNaN(rp_ge[i.p.id].dataheight)?rp_ge[i.p.id].dataheight:rp_ge[i.p.id].dataheight+"px",y=isNaN(t.datawidth)?t.datawidth:t.datawidth+"px",w="<div id='"+m+"' class='formdata' style='width:"+y+";overflow:auto;position:relative;height:"+b+";'>";w+="<table class='DelTable'><tbody>",w+="<tr id='DelError' style='display:none'><td class='"+o.error+"'></td></tr>",w+="<tr id='DelData' style='display:none'><td >"+e+"</td></tr>",w+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[i.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",w+="</tbody></table></div>";var x="<a id='dData' class='fm-button "+o.button+"'>"+t.bSubmit+"</a>",j="<a id='eData' class='fm-button "+o.button+"'>"+t.bCancel+"</a>";if(w+="<table class='EditTable ui-common-table' id='"+g+"_2'><tbody><tr><td><hr class='"+o.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+x+"&#160;"+j+"</td></tr></tbody></table>",t.gbox="#gbox_"+$.jgrid.jqID(p),$.jgrid.createModal(v,w,rp_ge[i.p.id],"#gview_"+$.jgrid.jqID(i.p.id),$("#gview_"+$.jgrid.jqID(i.p.id))[0]),u&&void 0===(h=u.call(i,$(w)))&&(h=!0),!1===h)return;$(".fm-button","#"+g+"_2").hover(function(){$(this).addClass(o.hover)},function(){$(this).removeClass(o.hover)}),t.delicon=$.extend([!0,"left",r.icon_del],rp_ge[i.p.id].delicon),t.cancelicon=$.extend([!0,"left",r.icon_cancel],rp_ge[i.p.id].cancelicon),!0===t.delicon[0]&&$("#dData","#"+g+"_2").addClass("right"===t.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+o.icon_base+" "+t.delicon[2]+"'></span>"),!0===t.cancelicon[0]&&$("#eData","#"+g+"_2").addClass("right"===t.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+o.icon_base+" "+t.cancelicon[2]+"'></span>"),$("#dData","#"+g+"_2").click(function(){var e,r=[!0,""],d=$("#DelData>td","#"+g).text();if(f={},$.isFunction(rp_ge[i.p.id].onclickSubmit)&&(f=rp_ge[i.p.id].onclickSubmit.call(i,rp_ge[i.p.id],d)||{}),$.isFunction(rp_ge[i.p.id].beforeSubmit)&&(r=rp_ge[i.p.id].beforeSubmit.call(i,d)),r[0]&&!rp_ge[i.p.id].processing){if(rp_ge[i.p.id].processing=!0,s=i.p.prmNames,n=$.extend({},rp_ge[i.p.id].delData,f),l=s.oper,n[l]=s.deloper,a=s.id,d=String(d).split(","),!d.length)return!1;for(e in d)d.hasOwnProperty(e)&&(d[e]=$.jgrid.stripPref(i.p.idPrefix,d[e]));n[a]=d.join(),$(this).addClass(o.active);var c=$.extend({url:rp_ge[i.p.id].url||$(i).jqGrid("getGridParam","editurl"),type:rp_ge[i.p.id].mtype,data:$.isFunction(rp_ge[i.p.id].serializeDelData)?rp_ge[i.p.id].serializeDelData.call(i,n):n,complete:function(e,a){var s;if($("#dData","#"+g+"_2").removeClass(o.active),e.status>=300&&304!==e.status?(r[0]=!1,$.isFunction(rp_ge[i.p.id].errorTextFormat)?r[1]=rp_ge[i.p.id].errorTextFormat.call(i,e):r[1]=a+" Status: '"+e.statusText+"'. Error code: "+e.status):$.isFunction(rp_ge[i.p.id].afterSubmit)&&(r=rp_ge[i.p.id].afterSubmit.call(i,e,n)),!1===r[0])$("#DelError>td","#"+g).html(r[1]),$("#DelError","#"+g).show();else{if(rp_ge[i.p.id].reloadAfterSubmit&&"local"!==i.p.datatype)$(i).trigger("reloadGrid");else{if(!0===i.p.treeGrid)try{$(i).jqGrid("delTreeNode",i.p.idPrefix+d[0])}catch(e){}else for(s=0;s<d.length;s++)$(i).jqGrid("delRowData",i.p.idPrefix+d[s]);i.p.selrow=null,i.p.selarrrow=[]}$.isFunction(rp_ge[i.p.id].afterComplete)&&setTimeout(function(){rp_ge[i.p.id].afterComplete.call(i,e,d)},500)}rp_ge[i.p.id].processing=!1,r[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:t.jqModal,onClose:rp_ge[i.p.id].onClose})}},$.jgrid.ajaxOptions,rp_ge[i.p.id].ajaxDelOptions);if(c.url||rp_ge[i.p.id].useDataProxy||($.isFunction(i.p.dataProxy)?rp_ge[i.p.id].useDataProxy=!0:(r[0]=!1,r[1]+=" "+$.jgrid.getRegional(i,"errors.nourl"))),r[0])if(rp_ge[i.p.id].useDataProxy){var u=i.p.dataProxy.call(i,c,"del_"+i.p.id);void 0===u&&(u=[!0,""]),!1===u[0]?(r[0]=!1,r[1]=u[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:t.jqModal,onClose:rp_ge[i.p.id].onClose})}else"clientArray"===c.url?(n=c.data,c.complete({status:200,statusText:""},"")):$.ajax(c)}return!1===r[0]&&($("#DelError>td","#"+g).html(r[1]),$("#DelError","#"+g).show()),!1}),$("#eData","#"+g+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(v.themodal),{gb:"#gbox_"+$.jgrid.jqID(p),jqm:rp_ge[i.p.id].jqModal,onClose:rp_ge[i.p.id].onClose}),!1}),d&&rp_ge[i.p.id].beforeShowForm.call(i,$("#"+g)),$.jgrid.viewModal("#"+$.jgrid.jqID(v.themodal),{gbox:"#gbox_"+$.jgrid.jqID(p),jqm:rp_ge[i.p.id].jqModal,overlay:rp_ge[i.p.id].overlay,modal:rp_ge[i.p.id].modal}),c&&rp_ge[i.p.id].afterShowForm.call(i,$("#"+g))}!0===rp_ge[i.p.id].closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(v.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(e,t,i,n,r,o,a){var s=$.jgrid.getRegional(this[0],"nav"),l=this[0].p.styleUI,d=$.jgrid.styleUI[l].navigator,c=$.jgrid.styleUI[l].common;return t=$.extend({edit:!0,editicon:d.icon_edit_nav,add:!0,addicon:d.icon_add_nav,del:!0,delicon:d.icon_del_nav,search:!0,searchicon:d.icon_search_nav,refresh:!0,refreshicon:d.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:d.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},s,t||{}),this.each(function(){if(!this.p.navGrid){var d,u,p,f={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},h=this;if(h.grid&&"string"==typeof e){$(h).data("navGrid")||$(h).data("navGrid",t),p=$(h).data("navGrid"),h.p.force_regional&&(p=$.extend(p,s)),void 0===$("#"+f.themodal)[0]&&(p.alerttop||p.alertleft||(void 0!==window.innerWidth?(p.alertleft=window.innerWidth,p.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(p.alertleft=document.documentElement.clientWidth,p.alerttop=document.documentElement.clientHeight):(p.alertleft=1024,p.alerttop=768),p.alertleft=p.alertleft/2-parseInt(p.alertwidth,10)/2,p.alerttop=p.alerttop/2-25),$.jgrid.createModal(f,"<div>"+p.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqModal:!0,drag:!0,resize:!0,caption:p.alertcap,top:p.alerttop,left:p.alertleft,width:p.alertwidth,height:p.alertheight,closeOnEscape:p.closeOnEscape,zIndex:p.alertzIndex,styleUI:h.p.styleUI},"#gview_"+$.jgrid.jqID(h.p.id),$("#gbox_"+$.jgrid.jqID(h.p.id))[0],!0));var g,m=1,v=function(){$(this).hasClass(c.disabled)||$(this).addClass(c.hover)},b=function(){$(this).removeClass(c.hover)};for(p.cloneToTop&&h.p.toppager&&(m=2),g=0;g<m;g++){var y,w,x,j=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),_="<td class='ui-pg-button "+c.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===g?(w=e,x=h.p.id,w===h.p.toppager&&(x+="_top",m=1)):(w=h.p.toppager,x=h.p.id+"_top"),"rtl"===h.p.direction&&$(j).attr("dir","rtl").css("float","right"),n=n||{},p.add&&(y=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(y).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+p.addicon+"'></span>"+p.addtext+"</div>"),$("tr",j).append(y),$(y,j).attr({title:p.addtitle||"",id:n.id||"add_"+x}).click(function(){return $(this).hasClass(c.disabled)||($.isFunction(p.addfunc)?p.addfunc.call(h):$(h).jqGrid("editGridRow","new",n)),!1}).hover(v,b),y=null),i=i||{},p.edit&&(y=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(y).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+p.editicon+"'></span>"+p.edittext+"</div>"),$("tr",j).append(y),$(y,j).attr({title:p.edittitle||"",id:i.id||"edit_"+x}).click(function(){if(!$(this).hasClass(c.disabled)){var e=h.p.selrow;e?$.isFunction(p.editfunc)?p.editfunc.call(h,e):$(h).jqGrid("editGridRow",e,i):($.jgrid.viewModal("#"+f.themodal,{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(v,b),y=null),a=a||{},p.view&&(y=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(y).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+p.viewicon+"'></span>"+p.viewtext+"</div>"),$("tr",j).append(y),$(y,j).attr({title:p.viewtitle||"",id:a.id||"view_"+x}).click(function(){if(!$(this).hasClass(c.disabled)){var e=h.p.selrow;e?$.isFunction(p.viewfunc)?p.viewfunc.call(h,e):$(h).jqGrid("viewGridRow",e,a):($.jgrid.viewModal("#"+f.themodal,{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(v,b),y=null),r=r||{},p.del&&(y=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(y).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+p.delicon+"'></span>"+p.deltext+"</div>"),$("tr",j).append(y),$(y,j).attr({title:p.deltitle||"",id:r.id||"del_"+x}).click(function(){if(!$(this).hasClass(c.disabled)){var e;h.p.multiselect?(e=h.p.selarrrow,0===e.length&&(e=null)):e=h.p.selrow,e?$.isFunction(p.delfunc)?p.delfunc.call(h,e):$(h).jqGrid("delGridRow",e,r):($.jgrid.viewModal("#"+f.themodal,{gbox:"#gbox_"+$.jgrid.jqID(h.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(v,b),y=null),(p.add||p.edit||p.del||p.view)&&$("tr",j).append(_),o=o||{},p.search&&(y=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(y).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+p.searchicon+"'></span>"+p.searchtext+"</div>"),$("tr",j).append(y),$(y,j).attr({title:p.searchtitle||"",id:o.id||"search_"+x}).click(function(){return $(this).hasClass(c.disabled)||($.isFunction(p.searchfunc)?p.searchfunc.call(h,o):$(h).jqGrid("searchGrid",o)),!1}).hover(v,b),o.showOnLoad&&!0===o.showOnLoad&&$(y,j).click(),y=null),p.refresh&&(y=$("<td class='ui-pg-button "+c.cornerall+"'></td>"),$(y).append("<div class='ui-pg-div'><span class='"+c.icon_base+" "+p.refreshicon+"'></span>"+p.refreshtext+"</div>"),$("tr",j).append(y),$(y,j).attr({title:p.refreshtitle||"",id:"refresh_"+x}).click(function(){if(!$(this).hasClass(c.disabled)){$.isFunction(p.beforeRefresh)&&p.beforeRefresh.call(h),h.p.search=!1,h.p.resetsearch=!0;try{if("currentfilter"!==p.refreshstate){var e=h.p.id;h.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.isFunction(h.clearToolbar)&&h.clearToolbar.call(h,!1)}}catch(e){}switch(p.refreshstate){case"firstpage":$(h).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(h).trigger("reloadGrid",[{current:!0}])}$.isFunction(p.afterRefresh)&&p.afterRefresh.call(h)}return!1}).hover(v,b),y=null),u=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[l].base.entrieBox+"' style='font-size:"+u+";visibility:hidden;' ></div>"),d=$(j).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),h.p._nvtd&&(p.dropmenu?(j=null,$(h).jqGrid("_buildNavMenu",w,x,t,i,n,r,o,a)):d>h.p._nvtd[0]?(h.p.responsive?(j=null,$(h).jqGrid("_buildNavMenu",w,x,t,i,n,r,o,a)):$(w+"_"+p.position,w).append(j).width(d),h.p._nvtd[0]=d):$(w+"_"+p.position,w).append(j),h.p._nvtd[1]=d),h.p.navGrid=!0}h.p.storeNavOptions&&(h.p.navOptions=p,h.p.editOptions=i,h.p.addOptions=n,h.p.delOptions=r,h.p.searchOptions=o,h.p.viewOptions=a,h.p.navButtons=[])}}})},navButtonAdd:function(e,t){var i=this[0].p.styleUI,n=$.jgrid.styleUI[i].navigator;return t=$.extend({caption:"newButton",title:"",buttonicon:n.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},t||{}),this.each(function(){if(this.grid){"string"==typeof e&&0!==e.indexOf("#")&&(e="#"+$.jgrid.jqID(e));var n=$(".navtable",e)[0],r=this,o=$.jgrid.styleUI[i].common.disabled,a=$.jgrid.styleUI[i].common.hover,s=$.jgrid.styleUI[i].common.cornerall,l=$.jgrid.styleUI[i].common.icon_base;if(r.p.storeNavOptions&&!t.internal&&r.p.navButtons.push([e,t]),n){if(t.id&&void 0!==$("#"+$.jgrid.jqID(t.id),n)[0])return;var d=$("<td></td>");"NONE"===t.buttonicon.toString().toUpperCase()?$(d).addClass("ui-pg-button "+s).append("<div class='ui-pg-div'>"+t.caption+"</div>"):$(d).addClass("ui-pg-button "+s).append("<div class='ui-pg-div'><span class='"+l+" "+t.buttonicon+"'></span>"+t.caption+"</div>"),t.id&&$(d).attr("id",t.id),"first"===t.position?0===n.rows[0].cells.length?$("tr",n).append(d):$("tr td:eq(0)",n).before(d):$("tr",n).append(d),$(d,n).attr("title",t.title||"").click(function(e){return $(this).hasClass(o)||$.isFunction(t.onClickButton)&&t.onClickButton.call(r,e),!1}).hover(function(){$(this).hasClass(o)||$(this).addClass(a)},function(){$(this).removeClass(a)})}else if(n=$(".dropdownmenu",e)[0]){var c=$(n).val(),u=t.id||$.jgrid.randId(),p=$('<li class="ui-menu-item" role="presentation"><a class="'+s+' g-menu-item" tabindex="0" role="menuitem" id="'+u+'">'+(t.caption||t.title)+"</a></li>");c&&("first"===t.position?$("#"+c).prepend(p):$("#"+c).append(p),$(p).on("click",function(e){return $(this).hasClass(o)||($("#"+c).hide(),$.isFunction(t.onClickButton)&&t.onClickButton.call(r,e)),!1}).find("a").hover(function(){$(this).hasClass(o)||$(this).addClass(a)},function(){$(this).removeClass(a)}))}}})},navSeparatorAdd:function(e,t){var i=this[0].p.styleUI,n=$.jgrid.styleUI[i].common;return t=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{}),this.each(function(){if(this.grid){"string"==typeof e&&0!==e.indexOf("#")&&(e="#"+$.jgrid.jqID(e));var i,r,o=$(".navtable",e)[0];this.p.storeNavOptions&&this.p.navButtons.push([e,t]),o?(i="<td class='ui-pg-button "+n.disabled+"' style='width:4px;'><span class='"+t.sepclass+"'></span>"+t.sepcontent+"</td>","first"===t.position?0===o.rows[0].cells.length?$("tr",o).append(i):$("tr td:eq(0)",o).before(i):$("tr",o).append(i)):(o=$(".dropdownmenu",e)[0],i="<li class='ui-menu-item "+n.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",o&&(r=$(o).val())&&("first"===t.position?$("#"+r).prepend(i):$("#"+r).append(i)))}})},_buildNavMenu:function(e,t,i,n,r,o,a,s){return this.each(function(){var l=this,d=$.jgrid.getRegional(l,"nav"),c=l.p.styleUI,u=($.jgrid.styleUI[c].navigator,$.jgrid.styleUI[c].filter),p=$.jgrid.styleUI[c].common,f="form_menu_"+$.jgrid.randId(),h=i.navButtonText?i.navButtonText:d.selectcaption||"Actions",g="<button class='dropdownmenu "+p.button+"' value='"+f+"'>"+h+"</button>";$(e+"_"+i.position,e).append(g);var m={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id};!function(){var e,d,c=$(".ui-jqgrid-view").css("font-size")||"11px",h=$('<ul id="'+f+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+c+'"></ul>');i.add&&(r=r||{},e=r.id||"add_"+t,d=$('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(i.addtext||i.addtitle)+"</a></li>").click(function(){return $(this).hasClass(p.disabled)||($.isFunction(i.addfunc)?i.addfunc.call(l):$(l).jqGrid("editGridRow","new",r),$(h).hide()),!1}),$(h).append(d)),i.edit&&(n=n||{},e=n.id||"edit_"+t,d=$('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(i.edittext||i.edittitle)+"</a></li>").click(function(){if(!$(this).hasClass(p.disabled)){var e=l.p.selrow;e?$.isFunction(i.editfunc)?i.editfunc.call(l,e):$(l).jqGrid("editGridRow",e,n):($.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(h).hide()}return!1}),$(h).append(d)),i.view&&(s=s||{},e=s.id||"view_"+t,d=$('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(i.viewtext||i.viewtitle)+"</a></li>").click(function(){if(!$(this).hasClass(p.disabled)){var e=l.p.selrow;e?$.isFunction(i.editfunc)?i.viewfunc.call(l,e):$(l).jqGrid("viewGridRow",e,s):($.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(h).hide()}return!1}),$(h).append(d)),i.del&&(o=o||{},e=o.id||"del_"+t,d=$('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(i.deltext||i.deltitle)+"</a></li>").click(function(){if(!$(this).hasClass(p.disabled)){var e;l.p.multiselect?(e=l.p.selarrrow,0===e.length&&(e=null)):e=l.p.selrow,e?$.isFunction(i.delfunc)?i.delfunc.call(l,e):$(l).jqGrid("delGridRow",e,o):($.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus()),$(h).hide()}return!1}),$(h).append(d)),(i.add||i.edit||i.del||i.view)&&$(h).append("<li class='ui-menu-item "+p.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),i.search&&(a=a||{},e=a.id||"search_"+t,d=$('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(i.searchtext||i.searchtitle)+"</a></li>").click(function(){return $(this).hasClass(p.disabled)||($.isFunction(i.searchfunc)?i.searchfunc.call(l,a):$(l).jqGrid("searchGrid",a),$(h).hide()),!1}),$(h).append(d),a.showOnLoad&&!0===a.showOnLoad&&$(d).click()),i.refresh&&(e=a.id||"search_"+t,d=$('<li class="ui-menu-item" role="presentation"><a class="'+p.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(i.refreshtext||i.refreshtitle)+"</a></li>").click(function(){if(!$(this).hasClass(p.disabled)){$.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(l),l.p.search=!1,l.p.resetsearch=!0;try{if("currentfilter"!==i.refreshstate){var e=l.p.id;l.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}$.isFunction(l.clearToolbar)&&l.clearToolbar.call(l,!1)}}catch(e){}switch(i.refreshstate){case"firstpage":$(l).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(l).trigger("reloadGrid",[{current:!0}])}$.isFunction(i.afterRefresh)&&i.afterRefresh.call(l),$(h).hide()}return!1}),$(h).append(d)),$(h).hide(),$("body").append(h),$("#"+f).addClass("ui-menu "+u.menu_widget),$("#"+f+" > li > a").hover(function(){$(this).addClass(p.hover)},function(){$(this).removeClass(p.hover)})}(),$(".dropdownmenu",e+"_"+i.position).on("click",function(e){var t=$(this).offset(),i=t.left,n=parseInt(t.top),r=$(this).val();$("#"+r).show().css({top:n-($("#"+r).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),$("body").on("click",function(e){$(e.target).hasClass("dropdownmenu")||$("#"+f).hide()})})},GridToForm:function(e,t){return this.each(function(){var i,n=this;if(n.grid){var r=$(n).jqGrid("getRowData",e);if(r)for(i in r)r.hasOwnProperty(i)&&($("[name="+$.jgrid.jqID(i)+"]",t).is("input:radio")||$("[name="+$.jgrid.jqID(i)+"]",t).is("input:checkbox")?$("[name="+$.jgrid.jqID(i)+"]",t).each(function(){$(this).val()==r[i]?$(this)[n.p.useProp?"prop":"attr"]("checked",!0):$(this)[n.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(i)+"]",t).val(r[i]))}})},FormToGrid:function(e,t,i,n){return this.each(function(){var r=this;if(r.grid){i||(i="set"),n||(n="first");var o=$(t).serializeArray(),a={};$.each(o,function(e,t){a[t.name]=t.value}),"add"===i?$(r).jqGrid("addRowData",e,a,n):"set"===i&&$(r).jqGrid("setRowData",e,a)}})}}),$.jgrid.extend({groupingSetup:function(){return this.each(function(){var e,t,i,n=this,r=n.p.colModel,o=n.p.groupingView,a=$.jgrid.styleUI[n.p.styleUI||"jQueryUI"].grouping;if(null===o||"object"!=typeof o&&!$.isFunction(o))n.p.grouping=!1;else if(o.plusicon||(o.plusicon=a.icon_plus),o.minusicon||(o.minusicon=a.icon_minus),o.groupField.length){for(void 0===o.visibiltyOnNextGrouping&&(o.visibiltyOnNextGrouping=[]),o.lastvalues=[],o._locgr||(o.groups=[]),o.counters=[],e=0;e<o.groupField.length;e++)o.groupOrder[e]||(o.groupOrder[e]="asc"),o.groupText[e]||(o.groupText[e]="{0}"),"boolean"!=typeof o.groupColumnShow[e]&&(o.groupColumnShow[e]=!0),"boolean"!=typeof o.groupSummary[e]&&(o.groupSummary[e]=!1),o.groupSummaryPos[e]||(o.groupSummaryPos[e]="footer"),!0===o.groupColumnShow[e]?(o.visibiltyOnNextGrouping[e]=!0,$(n).jqGrid("showCol",o.groupField[e])):(o.visibiltyOnNextGrouping[e]=$("#"+$.jgrid.jqID(n.p.id+"_"+o.groupField[e])).is(":visible"),$(n).jqGrid("hideCol",o.groupField[e]));for(o.summary=[],o.hideFirstGroupCol&&$.isArray(o.formatDisplayField)&&!$.isFunction(o.formatDisplayField[0])&&(o.formatDisplayField[0]=function(e){return e}),t=0,i=r.length;t<i;t++)o.hideFirstGroupCol&&(r[t].hidden||o.groupField[0]!==r[t].name||(r[t].formatter=function(){return""})),r[t].summaryType&&(r[t].summaryDivider?o.summary.push({nm:r[t].name,st:r[t].summaryType,v:"",sd:r[t].summaryDivider,vd:"",sr:r[t].summaryRound,srt:r[t].summaryRoundType||"round"}):o.summary.push({nm:r[t].name,st:r[t].summaryType,v:"",sr:r[t].summaryRound,
srt:r[t].summaryRoundType||"round"}))}else n.p.grouping=!1})},groupingPrepare:function(e,t){return this.each(function(){var i,n,r,o,a,s=this.p.groupingView,l=this,d=function(){$.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,e):(this.v=$(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,e),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=$(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,e)))},c=s.groupField.length,u=0;for(i=0;i<c;i++)n=s.groupField[i],o=s.displayField[i],r=e[n],a=null==o?null:e[o],null==a&&(a=r),void 0!==r&&(0===t?(s.groups.push({idx:i,dataIndex:n,value:r,displayValue:a,startRow:t,cnt:1,summary:[]}),s.lastvalues[i]=r,s.counters[i]={cnt:1,pos:s.groups.length-1,summary:$.extend(!0,[],s.summary)},$.each(s.counters[i].summary,d),s.groups[s.counters[i].pos].summary=s.counters[i].summary):"object"==typeof r||($.isArray(s.isInTheSameGroup)&&$.isFunction(s.isInTheSameGroup[i])?s.isInTheSameGroup[i].call(l,s.lastvalues[i],r,i,s):s.lastvalues[i]===r)?1===u?(s.groups.push({idx:i,dataIndex:n,value:r,displayValue:a,startRow:t,cnt:1,summary:[]}),s.lastvalues[i]=r,s.counters[i]={cnt:1,pos:s.groups.length-1,summary:$.extend(!0,[],s.summary)},$.each(s.counters[i].summary,d),s.groups[s.counters[i].pos].summary=s.counters[i].summary):(s.counters[i].cnt+=1,s.groups[s.counters[i].pos].cnt=s.counters[i].cnt,$.each(s.counters[i].summary,d),s.groups[s.counters[i].pos].summary=s.counters[i].summary):(s.groups.push({idx:i,dataIndex:n,value:r,displayValue:a,startRow:t,cnt:1,summary:[]}),s.lastvalues[i]=r,u=1,s.counters[i]={cnt:1,pos:s.groups.length-1,summary:$.extend(!0,[],s.summary)},$.each(s.counters[i].summary,d),s.groups[s.counters[i].pos].summary=s.counters[i].summary))}),this},groupingToggle:function(e){return this.each(function(){var t=this,i=t.p.groupingView,n=e.split("_"),r=parseInt(n[n.length-2],10);n.splice(n.length-2,2);var o,a,s=n.join("_"),l=i.minusicon,d=i.plusicon,c=$("#"+$.jgrid.jqID(e)),u=c.length?c[0].nextSibling:null,p=$("#"+$.jgrid.jqID(e)+" span.tree-wrap-"+t.p.direction),f=function(e){var t=$.map(e.split(" "),function(e){if(e.substring(0,s.length+1)===s+"_")return parseInt(e.substring(s.length+1),10)});return t.length>0?t[0]:void 0},h=!1,g=!1,m=!!t.p.frozenColumns&&t.p.id+"_frozen",v=!!m&&$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(m)),b=v&&v.length?v[0].nextSibling:null;if(p.hasClass(l)){if(u)for(;u&&!(void 0!==(o=f(u.className))&&o<=r);)$(u).hide(),u=u.nextSibling,m&&($(b).hide(),b=b.nextSibling);p.removeClass(l).addClass(d),h=!0}else{if(u)for(a=void 0;u;){if(o=f(u.className),void 0===a&&(a=void 0===o),g=$(u).hasClass("ui-subgrid")&&$(u).hasClass("ui-sg-collapsed"),void 0!==o){if(o<=r)break;o===r+1&&(g||($(u).show().find(">td>span.tree-wrap-"+t.p.direction).removeClass(l).addClass(d),m&&$(b).show().find(">td>span.tree-wrap-"+t.p.direction).removeClass(l).addClass(d)))}else a&&(g||($(u).show(),m&&$(b).show()));u=u.nextSibling,m&&(b=b.nextSibling)}p.removeClass(d).addClass(l)}$(t).triggerHandler("jqGridGroupingClickGroup",[e,h]),$.isFunction(t.p.onClickGroup)&&t.p.onClickGroup.call(t,e,h)}),!1},groupingRender:function(e,t,i,n){return this.each(function(){function r(e,t,i){var n,r=!1;if(0===t)r=i[e];else{var o=i[e].idx;if(0===o)r=i[e];else for(n=e;n>=0;n--)if(i[n].idx===o-t){r=i[n];break}}return r}function o(e,i,n,o){var a,s,l=r(e,i,n),c=d.p.colModel,u=l.cnt,p="";for(s=o;s<t;s++){var f="<td "+d.formatCol(s,1,"")+">&#160;</td>",h="{0}";$.each(l.summary,function(){if(this.nm===c[s].name){c[s].summaryTpl&&(h=c[s].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&u>0&&(this.v=this.v/u));try{this.groupCount=l.cnt,this.groupIndex=l.dataIndex,this.groupValue=l.value,a=d.formatter("",this.v,s,this)}catch(e){a=this.v}return f="<td "+d.formatCol(s,1,"")+">"+$.jgrid.template(h,a)+"</td>",!1}}),p+=f}return p}var a,s,l,d=this,c=d.p.groupingView,u="",p="",f=c.groupCollapse?c.plusicon:c.minusicon,h=[],g=c.groupField.length,m=$.jgrid.styleUI[d.p.styleUI||"jQueryUI"].common;f=f+" tree-wrap-"+d.p.direction,$.each(d.p.colModel,function(e,t){var i;for(i=0;i<g;i++)if(c.groupField[i]===t.name){h[i]=e;break}});var v,b=0,y=$.makeArray(c.groupSummary);y.reverse(),v=d.p.multiselect?' colspan="2"':"",$.each(c.groups,function(r,w){if(c._locgr&&!(w.startRow+w.cnt>(i-1)*n&&w.startRow<i*n))return!0;b++,s=d.p.id+"ghead_"+w.idx,a=s+"_"+r,p="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+m.icon_base+" "+f+"' onclick=\"jQuery('#"+$.jgrid.jqID(d.p.id)+"').jqGrid('groupingToggle','"+a+"');return false;\"></span>";try{$.isArray(c.formatDisplayField)&&$.isFunction(c.formatDisplayField[w.idx])?(w.displayValue=c.formatDisplayField[w.idx].call(d,w.displayValue,w.value,d.p.colModel[h[w.idx]],w.idx,c),l=w.displayValue):l=d.formatter(a,w.displayValue,h[w.idx],w.value)}catch(e){l=w.displayValue}var x="";if(x=$.isFunction(c.groupText[w.idx])?c.groupText[w.idx].call(d,l,w.cnt,w.summary):$.jgrid.template(c.groupText[w.idx],l,w.cnt,w.summary),"string"!=typeof x&&"number"!=typeof x&&(x=l),"header"===c.groupSummaryPos[w.idx]?(u+='<tr id="'+a+'"'+(c.groupCollapse&&w.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+m.content+" jqgroup ui-row-"+d.p.direction+" "+s+'"><td style="padding-left:'+12*w.idx+'px;"'+v+">"+p+x+"</td>",u+=o(r,0,c.groups,!1===c.groupColumnShow[w.idx]?""===v?2:3:""===v?1:2),u+="</tr>"):u+='<tr id="'+a+'"'+(c.groupCollapse&&w.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+m.content+" jqgroup ui-row-"+d.p.direction+" "+s+'"><td style="padding-left:'+12*w.idx+'px;" colspan="'+(!1===c.groupColumnShow[w.idx]?t-1:t)+'">'+p+x+"</td></tr>",g-1===w.idx){var j,_,C=c.groups[r+1],q=0,S=w.startRow,D=void 0!==C?C.startRow:c.groups[r].startRow+c.groups[r].cnt;for(c._locgr&&(q=(i-1)*n)>w.startRow&&(S=q),j=S;j<D&&e[j-q];j++)u+=e[j-q].join("");if("header"!==c.groupSummaryPos[w.idx]){var k;if(void 0!==C){for(k=0;k<c.groupField.length&&C.dataIndex!==c.groupField[k];k++);b=c.groupField.length-k}for(_=0;_<b;_++)if(y[_]){var T="";c.groupCollapse&&!c.showSummaryOnHide&&(T=' style="display:none;"'),u+="<tr"+T+' jqfootlevel="'+(w.idx-_)+'" role="row" class="'+m.content+" jqfoot ui-row-"+d.p.direction+'">',u+=o(r,_,c.groups,0),u+="</tr>"}b=k}}}),$("#"+$.jgrid.jqID(d.p.id)+" tbody:first").append(u),u=null})},groupingGroupBy:function(e,t){return this.each(function(){var i=this;"string"==typeof e&&(e=[e]);var n=i.p.groupingView;i.p.grouping=!0,n._locgr=!1,void 0===n.visibiltyOnNextGrouping&&(n.visibiltyOnNextGrouping=[]);var r;for(r=0;r<n.groupField.length;r++)!n.groupColumnShow[r]&&n.visibiltyOnNextGrouping[r]&&$(i).jqGrid("showCol",n.groupField[r]);for(r=0;r<e.length;r++)n.visibiltyOnNextGrouping[r]=$("#"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(e[r])).is(":visible");i.p.groupingView=$.extend(i.p.groupingView,t||{}),n.groupField=e,$(i).trigger("reloadGrid")})},groupingRemove:function(e){return this.each(function(){var t=this;if(void 0===e&&(e=!0),t.p.grouping=!1,!0===e){var i,n=t.p.groupingView;for(i=0;i<n.groupField.length;i++)!n.groupColumnShow[i]&&n.visibiltyOnNextGrouping[i]&&$(t).jqGrid("showCol",n.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(t.p.id)+" tbody:first").remove(),$("tr.jqgrow:hidden","#"+$.jgrid.jqID(t.p.id)+" tbody:first").show()}else $(t).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,i,n,r,o){var a={sum:function(){return parseFloat(t||0)+parseFloat(o[i]||0)},min:function(){return""===t?parseFloat(o[i]||0):Math.min(parseFloat(t),parseFloat(o[i]||0))},max:function(){return""===t?parseFloat(o[i]||0):Math.max(parseFloat(t),parseFloat(o[i]||0))},count:function(){return""===t&&(t=0),o.hasOwnProperty(i)?t+1:0},avg:function(){return a.sum()}};if(!a[e])throw"jqGrid Grouping No such method: "+e;var s=a[e]();if(null!=n)if("fixed"===r)s=s.toFixed(n);else{var l=Math.pow(10,n);s=Math.round(s*l)/l}return s}},setGroupHeaders:function(e){return e=$.extend({useColSpanStyle:!1,groupHeaders:[]},e||{}),this.each(function(){var t,i,n,r,o,a,s,l,d,c,u,p,f,h,g=this,m=0,v=g.p.colModel,b=v.length,y=g.grid.headers,w=$("table.ui-jqgrid-htable",g.grid.hDiv),x=w.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),j=w.children("thead"),_=w.find(".jqg-first-row-header"),C=$.jgrid.styleUI[g.p.styleUI||"jQueryUI"].base;g.p.groupHeader||(g.p.groupHeader=[]),g.p.groupHeader.push(e),void 0===_[0]?_=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):_.empty();var q;for($(g).prepend(j),n=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),t=0;t<b;t++)if(o=y[t].el,a=$(o),i=v[t],s={height:"0px",width:y[t].width+"px",display:i.hidden?"none":""},$("<th>",{role:"gridcell"}).css(s).addClass("ui-first-th-"+g.p.direction).appendTo(_),o.style.width="",(l=function(e,t){var i,n=t.length;for(i=0;i<n;i++)if(t[i].startColumnName===e)return i;return-1}(i.name,e.groupHeaders))>=0){for(d=e.groupHeaders[l],c=d.numberOfColumns,u=d.titleText,f=d.className||"",p=0,l=0;l<c&&t+l<b;l++)v[t+l].hidden||p++;r=$("<th>").attr({role:"columnheader"}).addClass(C.headerBox+" ui-th-column-header ui-th-"+g.p.direction+" "+f).html(u),p>0&&r.attr("colspan",String(p)),g.p.headertitles&&r.attr("title",r.text()),0===p&&r.hide(),a.before(r),n.append(o),m=c-1}else 0===m?e.useColSpanStyle?a.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass(C.headerBox+" ui-th-column-header ui-th-"+g.p.direction).css({display:i.hidden?"none":""}).insertBefore(a),n.append(o)):(n.append(o),m--);h=$(g).children("thead"),h.prepend(_),n.insertAfter(x),w.append(h),e.useColSpanStyle&&(w.find("span.ui-jqgrid-resize").each(function(){var e=$(this).parent();e.is(":visible")&&(this.style.cssText="height: "+e.height()+"px !important; cursor: col-resize;")}),w.find("div.ui-jqgrid-sortable").each(function(){var e=$(this),t=e.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&e.css("top",(t.height()-e.outerHeight())/2-4+"px")})),q=h.find("tr.jqg-first-row-header"),$(g).on("jqGridResizeStop.setGroupHeaders",function(e,t,i){q.find("th").eq(i)[0].style.width=t+"px"})})},destroyGroupHeader:function(e){return void 0===e&&(e=!0),this.each(function(){var t,i,n,r,o,a,s,l=this,d=l.grid,c=$("table.ui-jqgrid-htable thead",d.hDiv),u=l.p.colModel;if(d){for($(this).off(".setGroupHeaders"),t=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),r=d.headers,i=0,n=r.length;i<n;i++){s=u[i].hidden?"none":"",o=$(r[i].el).width(r[i].width).css("display",s);try{o.removeAttr("rowSpan")}catch(e){o.attr("rowSpan",1)}t.append(o),a=o.children("span.ui-jqgrid-resize"),a.length>0&&(a[0].style.height=""),o.children("div")[0].style.top=""}$(c).children("tr.ui-jqgrid-labels").remove(),$(c).prepend(t),!0===e&&$(l).jqGrid("setGridParam",{groupHeader:null})}})}}),$.jgrid=$.jgrid||{},$.extend($.jgrid,{saveState:function(e,t){if(t=$.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:!1},t||{}),e){var i,n,r="",o="",a=$("#"+e)[0];if(a.grid){n=$(a).data("inlineNav"),n&&a.p.inlineNav&&$(a).jqGrid("setGridParam",{_iN:n}),n=$(a).data("filterToolbar"),n&&a.p.filterToolbar&&$(a).jqGrid("setGridParam",{_fT:n}),r=$(a).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),o=$(a.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html();var s=o.indexOf("</tr>");if(o=o.slice(s+5),$.isFunction(t.beforeSetItem)&&null!=(i=t.beforeSetItem.call(a,r))&&(r=i),t.debug){$("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data</a>');var l,d,c=[],u={};c.push("Grid Options\n"),c.push(r),c.push("\n"),c.push("GridData\n"),c.push(o),u.type="plain/text;charset=utf-8";try{l=new File(c,"jqGrid_dump.txt",u)}catch(e){l=new Blob(c,u)}d=URL.createObjectURL(l),$("#link_save").attr("href",d).on("click",function(){$(this).remove()})}if(t.compression&&t.compressionModule)try{i=window[t.compressionModule][t.compressionMethod](r),null!=i&&(r=i,o=window[t.compressionModule][t.compressionMethod](o))}catch(e){}if(t.useStorage&&$.jgrid.isLocalStorage())try{window[t.storageType].setItem("jqGrid"+a.p.id,r),window[t.storageType].setItem("jqGrid"+a.p.id+"_data",o)}catch(e){22===e.code&&alert("Local storage limit is over!")}return r}}},loadState:function(e,t,i){if(i=$.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},i||{}),e){var n,r,o,a,s,l=$("#"+e)[0];if(i.useStorage)try{t=window[i.storageType].getItem("jqGrid"+l.id),o=window[i.storageType].getItem("jqGrid"+l.id+"_data")}catch(e){}if(t){if(i.decompression&&i.decompressionModule)try{n=window[i.decompressionModule][i.decompressionMethod](t),null!=n&&(t=n,o=window[i.decompressionModule][i.decompressionMethod](o))}catch(e){}if((n=jqGridUtils.parse(t))&&"object"===$.type(n)){l.grid&&$.jgrid.gridUnload(e),$.isFunction(i.beforeSetGrid)&&(r=i.beforeSetGrid(n))&&"object"===$.type(r)&&(n=r);var d=function(e){return e},c={reccount:n.reccount,records:n.records,lastpage:n.lastpage,shrinkToFit:d(n.shrinkToFit),data:d(n.data),datatype:d(n.datatype),grouping:d(n.grouping)};n.shrinkToFit=!1,n.data=[],n.datatype="local",n.grouping=!1,n.inlineNav&&(a=d(n._iN),n._iN=null,delete n._iN),n.filterToolbar&&(s=d(n._fT),n._fT=null,delete n._fT);var u=$("#"+e).jqGrid(n);if(u.append(o),u.jqGrid("setGridParam",c),n.storeNavOptions&&n.navGrid&&(u[0].p.navGrid=!1,u.jqGrid("navGrid",n.pager,n.navOptions,n.editOptions,n.addOptions,n.delOptions,n.searchOptions,n.viewOptions),n.navButtons&&n.navButtons.length))for(var p=0;p<n.navButtons.length;p++)"sepclass"in n.navButtons[p][1]?u.jqGrid("navSeparatorAdd",n.navButtons[p][0],n.navButtons[p][1]):u.jqGrid("navButtonAdd",n.navButtons[p][0],n.navButtons[p][1]);if(u[0].refreshIndex(),n.subGrid){var f=1===n.multiselect?1:0,h=!0===n.rownumbers?1:0;u.jqGrid("addSubGrid",f+h)}if(n.treeGrid)for(var g=1,m=u[0].rows.length,v=n.expColInd,b=n.treeReader.leaf_field,y=n.treeReader.expanded_field;g<m;)$(u[0].rows[g].cells[v]).find("div.treeclick").on("click",function(e){var t=e.target||e.srcElement,i=$.jgrid.stripPref(n.idPrefix,$(t,u[0].rows).closest("tr.jqgrow")[0].id),r=u[0].p._index[i];return u[0].p.data[r][b]||(u[0].p.data[r][y]?(u.jqGrid("collapseRow",u[0].p.data[r]),u.jqGrid("collapseNode",u[0].p.data[r])):(u.jqGrid("expandRow",u[0].p.data[r]),u.jqGrid("expandNode",u[0].p.data[r]))),!1}),!0===n.ExpandColClick&&$(u[0].rows[g].cells[v]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(e){var t=e.target||e.srcElement,i=$.jgrid.stripPref(n.idPrefix,$(t,u[0].rows).closest("tr.jqgrow")[0].id),r=u[0].p._index[i];return u[0].p.data[r][b]||(u[0].p.data[r][y]?(u.jqGrid("collapseRow",u[0].p.data[r]),u.jqGrid("collapseNode",u[0].p.data[r])):(u.jqGrid("expandRow",u[0].p.data[r]),u.jqGrid("expandNode",u[0].p.data[r]))),u.jqGrid("setSelection",i),!1}),g++;n.multiselect&&$.each(n.selarrrow,function(){$("#jqg_"+e+"_"+this)[n.useProp?"prop":"attr"]("checked","checked")}),n.inlineNav&&a&&(u.jqGrid("setGridParam",{inlineNav:!1}),u.jqGrid("inlineNav",n.pager,a)),n.filterToolbar&&s&&(u.jqGrid("setGridParam",{filterToolbar:!1}),s.restoreFromFilters=!0,u.jqGrid("filterToolbar",s)),n.frozenColumns&&u.jqGrid("setFrozenColumns"),u[0].updatepager(!0,!0),$.isFunction(i.afterSetGrid)&&i.afterSetGrid(u),i.clearAfterLoad&&(window[i.storageType].removeItem("jqGrid"+l.id),window[i.storageType].removeItem("jqGrid"+l.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(e,t){var i={storageType:"localStorage"};i=$.extend(i,t||{});var n,r,o;try{r=window[i.storageType].getItem("jqGrid"+e),o=window[i.storageType].getItem("jqGrid"+e+"_data"),n=null!=r&&null!=o&&"string"==typeof r&&"string"==typeof o}catch(e){n=!1}return n},setRegional:function(e,t){var i={storageType:"sessionStorage"};if(i=$.extend(i,t||{}),i.regional){$.jgrid.saveState(e,i),i.beforeSetGrid=function(e){return e.regional=i.regional,e.force_regional=!0,e},$.jgrid.loadState(e,null,i);var n=$("#"+e)[0],r=$(n).jqGrid("getGridParam","colModel"),o=-1,a=$.jgrid.getRegional(n,"nav");$.each(r,function(e){if(this.formatter&&"actions"===this.formatter)return o=e,!1}),-1!==o&&a&&$("#"+e+" tbody tr").each(function(){var e=this.cells[o];$(e).find(".ui-inline-edit").attr("title",a.edittitle),$(e).find(".ui-inline-del").attr("title",a.deltitle),$(e).find(".ui-inline-save").attr("title",a.savetitle),$(e).find(".ui-inline-cancel").attr("title",a.canceltitle)});try{window[i.storageType].removeItem("jqGrid"+n.id),window[i.storageType].removeItem("jqGrid"+n.id+"_data")}catch(e){}}},jqGridImport:function(e,t){t=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{});var i=(0===e.indexOf("#")?"":"#")+$.jgrid.jqID(e),n=function(e,t){var n,r,o,a=$(t.xmlGrid.config,e)[0],s=$(t.xmlGrid.data,e)[0];if(jqGridUtils.xmlToJSON){n=jqGridUtils.xmlToJSON(a);for(o in n)n.hasOwnProperty(o)&&(r=n[o]);if(s){var l=n.grid.datatype;n.grid.datatype="xmlstring",n.grid.datastr=e,$(i).jqGrid(r).jqGrid("setGridParam",{datatype:l})}else setTimeout(function(){$(i).jqGrid(r)},0)}else alert("xml2json or parse are not present")},r=function(e,t){if(e&&"string"==typeof e){var n=jqGridUtils.parse(e),r=n[t.jsonGrid.config],o=n[t.jsonGrid.data];if(o){var a=r.datatype;r.datatype="jsonstring",r.datastr=o,$(i).jqGrid(r).jqGrid("setGridParam",{datatype:a})}else $(i).jqGrid(r)}};switch(t.imptype){case"xml":$.ajax($.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(e,r){"success"===r&&(n(e.responseXML,t),$(i).triggerHandler("jqGridImportComplete",[e,t]),$.isFunction(t.importComplete)&&t.importComplete(e)),e=null}},t.ajaxOptions));break;case"xmlstring":if(t.impstring&&"string"==typeof t.impstring){var o=$.parseXML(t.impstring);o&&(n(o,t),$(i).triggerHandler("jqGridImportComplete",[o,t]),$.isFunction(t.importComplete)&&t.importComplete(o))}break;case"json":$.ajax($.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(e){try{r(e.responseText,t),$(i).triggerHandler("jqGridImportComplete",[e,t]),$.isFunction(t.importComplete)&&t.importComplete(e)}catch(e){}e=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(r(t.impstring,t),$(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),$.isFunction(t.importComplete)&&t.importComplete(t.impstring))}}}),$.jgrid.extend({jqGridExport:function(e){e=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},e||{});var t=null;return this.each(function(){if(this.grid){var i=$.extend(!0,{},$(this).jqGrid("getGridParam"),e.addOptions);switch(i.rownumbers&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.multiselect&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.subGrid&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.knv=null,e.exptype){case"xmlstring":t="<"+e.root+">"+jqGridUtils.jsonToXML(i,{xmlDecl:""})+"</"+e.root+">";break;case"jsonstring":t=jqGridUtils.stringify(i),e.root&&(t="{"+e.root+":"+t+"}")}}}),t},excelExport:function(e){return e=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:!1,exportgrouping:!1,exportOptions:{}},e||{}),this.each(function(){if(this.grid){var t;if("remote"===e.exptype){var i,n=$.extend({},this.p.postData);if(n[e.oper]=e.tag,$.isFunction(e.beforeExport)){var r=e.beforeExport.call(this,n);$.isPlainObject(r)&&(n=r)}if(e.exporthidden){var o,a=this.p.colModel,s=a.length,l=[];for(o=0;o<s;o++)void 0===a[o].hidden&&(a[o].hidden=!1),l.push({name:a[o].name,hidden:a[o].hidden});var d=JSON.stringify(l);"string"==typeof d&&(n.colModel=d)}e.exportgrouping&&"string"==typeof(i=JSON.stringify(this.p.groupingView))&&(n.groupingView=i);var c=jQuery.param(n);t=-1!==e.url.indexOf("?")?e.url+"&"+c:e.url+"?"+c,window.location=t}}})}}),$.jgrid.inlineEdit=$.jgrid.inlineEdit||{},$.jgrid.extend({editRow:function(e,t,i,n,r,o,a,s,l){var d={},c=$.makeArray(arguments).slice(1);return"object"===$.type(c[0])?d=c[0]:(void 0!==t&&(d.keys=t),$.isFunction(i)&&(d.oneditfunc=i),$.isFunction(n)&&(d.successfunc=n),void 0!==r&&(d.url=r),void 0!==o&&(d.extraparam=o),$.isFunction(a)&&(d.aftersavefunc=a),$.isFunction(s)&&(d.errorfunc=s),$.isFunction(l)&&(d.afterrestorefunc=l)),d=$.extend(!0,{keys:!1,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},$.jgrid.inlineEdit,d),this.each(function(){var t,i,n,r,o,a,s=this,l=0,c=null,u={},p=$(this).jqGrid("getStyleUI",s.p.styleUI+".inlinedit","inputClass",!0);if(s.grid&&!1!==(r=$(s).jqGrid("getInd",e,!0))){if(s.p.beforeAction=!0,a=$.isFunction(d.beforeEditRow)?d.beforeEditRow.call(s,d,e):void 0,void 0===a&&(a=!0),!a)return void(s.p.beforeAction=!1);n=$(r).attr("editable")||"0","0"!==n||$(r).hasClass("not-editable-row")||(o=s.p.colModel,$('td[role="gridcell"]',r).each(function(n){t=o[n].name;var r=!0===s.p.treeGrid&&t===s.p.ExpandColumn;if(r)i=$("span:first",this).html();else try{i=$.unformat.call(s,this,{rowId:e,colModel:o[n]},n)}catch(e){i=o[n].edittype&&"textarea"===o[n].edittype?$(this).text():$(this).html()}if("cb"!==t&&"subgrid"!==t&&"rn"!==t&&(s.p.autoencode&&(i=$.jgrid.htmlDecode(i)),u[t]=i,!0===o[n].editable)){null===c&&(c=n),r?$("span:first",this).html(""):$(this).html("");var a=$.extend({},o[n].editoptions||{},{id:e+"_"+t,name:t,rowId:e,oper:"edit"});o[n].edittype||(o[n].edittype="text"),("&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i="");var d=$.jgrid.createEl.call(s,o[n].edittype,a,i,!0,$.extend({},$.jgrid.ajaxOptions,s.p.ajaxSelectOptions||{}));$(d).addClass("editable inline-edit-cell"),$.inArray(o[n].edittype,["text","textarea","password","select"])>-1&&$(d).addClass(p),r?$("span:first",this).append(d):$(this).append(d),$.jgrid.bindEv.call(s,d,a),"select"===o[n].edittype&&void 0!==o[n].editoptions&&!0===o[n].editoptions.multiple&&void 0===o[n].editoptions.dataUrl&&$.jgrid.msie()&&$(d).width($(d).width()),l++}}),l>0&&(u.id=e,s.p.savedRow.push(u),$(r).attr("editable","1"),d.focusField&&("number"==typeof d.focusField&&parseInt(d.focusField,10)<=o.length&&(c=d.focusField),setTimeout(function(){var e=$("td:eq("+c+") :input:visible",r).not(":disabled");e.length>0&&e.focus()},0)),!0===d.keys&&$(r).on(d.keyevent,function(t){if(27===t.keyCode){if($(s).jqGrid("restoreRow",e,d.afterrestorefunc),s.p.inlineNav)try{$(s).jqGrid("showAddEditButtons")}catch(e){}return!1}if(13===t.keyCode){if("TEXTAREA"===t.target.tagName)return!0;if($(s).jqGrid("saveRow",e,d)&&s.p.inlineNav)try{$(s).jqGrid("showAddEditButtons")}catch(e){}return!1}}),$(s).triggerHandler("jqGridInlineEditRow",[e,d]),$.isFunction(d.oneditfunc)&&d.oneditfunc.call(s,e)))}})},saveRow:function(e,t,i,n,r,o,a){var s=$.makeArray(arguments).slice(1),l={},d=this[0];"object"===$.type(s[0])?l=s[0]:($.isFunction(t)&&(l.successfunc=t),void 0!==i&&(l.url=i),void 0!==n&&(l.extraparam=n),$.isFunction(r)&&(l.aftersavefunc=r),$.isFunction(o)&&(l.errorfunc=o),$.isFunction(a)&&(l.afterrestorefunc=a)),l=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional(d,"defaults.savetext")},$.jgrid.inlineEdit,l);var c,u,p,f,h,g=!1,m={},v={},b={},y=!1,w=$.trim($(d).jqGrid("getStyleUI",d.p.styleUI+".common","error",!0));if(!d.grid)return g;if(!1===(h=$(d).jqGrid("getInd",e,!0)))return g;var x=$.jgrid.getRegional(d,"errors"),j=$.jgrid.getRegional(d,"edit"),_=$.isFunction(l.beforeSaveRow)?l.beforeSaveRow.call(d,l,e):void 0;if(void 0===_&&(_=!0),_){if(u=$(h).attr("editable"),l.url=l.url||d.p.editurl,"1"===u){var C,q,S;if($('td[role="gridcell"]',h).each(function(e){if(C=d.p.colModel[e],c=C.name,S="","cb"!==c&&"subgrid"!==c&&!0===C.editable&&"rn"!==c&&!$(this).hasClass("not-editable-cell")){switch(C.edittype){case"checkbox":var t=["Yes","No"];C.editoptions&&(t=C.editoptions.value.split(":")),m[c]=$("input",this).is(":checked")?t[0]:t[1],S=$("input",this);break;case"text":case"password":case"textarea":case"button":m[c]=$("input, textarea",this).val(),S=$("input, textarea",this);break;case"select":if(C.editoptions.multiple){var i=$("select",this),n=[];m[c]=$(i).val(),m[c]?m[c]=m[c].join(","):m[c]="",$("select option:selected",this).each(function(e,t){n[e]=$(t).text()}),v[c]=n.join(",")}else m[c]=$("select option:selected",this).val(),v[c]=$("select option:selected",this).text();C.formatter&&"select"===C.formatter&&(v={}),S=$("select",this);break;case"custom":try{if(!C.editoptions||!$.isFunction(C.editoptions.custom_value))throw"e1";if(m[c]=C.editoptions.custom_value.call(d,$(".customelement",this),"get"),void 0===m[c])throw"e2"}catch(e){"e1"===e?$.jgrid.info_dialog(x.errcap,"function 'custom_value' "+j.msg.nodefined,j.bClose,{styleUI:d.p.styleUI}):$.jgrid.info_dialog(x.errcap,e.message,j.bClose,{styleUI:d.p.styleUI})}}if(f=$.jgrid.checkValues.call(d,m[c],e),!1===f[0])return q=e,!1;d.p.autoencode&&(m[c]=$.jgrid.htmlEncode(m[c])),"clientArray"!==l.url&&C.editoptions&&!0===C.editoptions.NullIfEmpty&&""===m[c]&&(b[c]="null",y=!0)}}),!1===f[0]){try{if($.isFunction(d.p.validationCell))d.p.validationCell.call(d,S,f[1],h.rowIndex,q);else{var D=$(d).jqGrid("getGridRowById",e),k=$.jgrid.findPos(D);$.jgrid.info_dialog(x.errcap,f[1],j.bClose,{left:k[0],top:k[1]+$(D).outerHeight(),styleUI:d.p.styleUI,onClose:function(){q>=0&&$("#"+e+"_"+d.p.colModel[q].name).focus()}})}}catch(e){alert(f[1])}return g}var T,I=d.p.prmNames,F=e;if(T=!1===d.p.keyName?I.id:d.p.keyName,m){if(m[I.oper]=I.editoper,void 0===m[T]||""===m[T])m[T]=e;else if(h.id!==d.p.idPrefix+m[T]){var A=$.jgrid.stripPref(d.p.idPrefix,e);if(void 0!==d.p._index[A]&&(d.p._index[m[T]]=d.p._index[A],delete d.p._index[A]),e=d.p.idPrefix+m[T],$(h).attr("id",e),d.p.selrow===F&&(d.p.selrow=e),$.isArray(d.p.selarrrow)){var R=$.inArray(F,d.p.selarrrow);R>=0&&(d.p.selarrrow[R]=e)}if(d.p.multiselect){var E="jqg_"+d.p.id+"_"+e;$("input.cbox",h).attr("id",E).attr("name",E)}}void 0===d.p.inlineData&&(d.p.inlineData={}),m=$.extend({},m,d.p.inlineData,l.extraparam)}if("clientArray"===l.url){m=$.extend({},m,v),d.p.autoencode&&$.each(m,function(e,t){m[e]=$.jgrid.htmlDecode(t)});var P,O=$(d).jqGrid("setRowData",e,m);for($(h).attr("editable","0"),P=0;P<d.p.savedRow.length;P++)if(String(d.p.savedRow[P].id)===String(F)){p=P;break}p>=0&&d.p.savedRow.splice(p,1),$(d).triggerHandler("jqGridInlineAfterSaveRow",[e,O,m,l]),$.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(d,e,O,m,l),g=!0,$(h).removeClass("jqgrid-new-row").off("keydown")}else $(d).jqGrid("progressBar",{method:"show",loadtype:l.saveui,htmlcontent:l.savetext}),b=$.extend({},m,b),b[T]=$.jgrid.stripPref(d.p.idPrefix,b[T]),$.ajax($.extend({url:l.url,data:$.isFunction(d.p.serializeRowData)?d.p.serializeRowData.call(d,b):b,type:l.mtype,async:!1,complete:function(t,i){if($(d).jqGrid("progressBar",{method:"hide",loadtype:l.saveui,htmlcontent:l.savetext}),"success"===i){var n,r,o=!0;if(n=$(d).triggerHandler("jqGridInlineSuccessSaveRow",[t,e,l]),$.isArray(n)||(n=[!0,b]),n[0]&&$.isFunction(l.successfunc)&&(n=l.successfunc.call(d,t)),$.isArray(n)?(o=n[0],m=n[1]||m):o=n,!0===o){for(d.p.autoencode&&$.each(m,function(e,t){m[e]=$.jgrid.htmlDecode(t)}),y&&$.each(m,function(e){"null"===m[e]&&(m[e]="")}),m=$.extend({},m,v),$(d).jqGrid("setRowData",e,m),$(h).attr("editable","0"),r=0;r<d.p.savedRow.length;r++)if(String(d.p.savedRow[r].id)===String(e)){p=r;break}p>=0&&d.p.savedRow.splice(p,1),$(d).triggerHandler("jqGridInlineAfterSaveRow",[e,t,m,l]),$.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(d,e,t,m,l),g=!0,$(h).removeClass("jqgrid-new-row").off("keydown")}else $(d).triggerHandler("jqGridInlineErrorSaveRow",[e,t,i,null,l]),$.isFunction(l.errorfunc)&&l.errorfunc.call(d,e,t,i,null),!0===l.restoreAfterError&&$(d).jqGrid("restoreRow",e,l.afterrestorefunc)}},error:function(t,i,n){if($("#lui_"+$.jgrid.jqID(d.p.id)).hide(),$(d).triggerHandler("jqGridInlineErrorSaveRow",[e,t,i,n,l]),$.isFunction(l.errorfunc))l.errorfunc.call(d,e,t,i,n);else{var r=t.responseText||t.statusText;try{$.jgrid.info_dialog(x.errcap,'<div class="'+w+'">'+r+"</div>",j.bClose,{buttonalign:"right",styleUI:d.p.styleUI})}catch(e){alert(r)}}!0===l.restoreAfterError&&$(d).jqGrid("restoreRow",e,l.afterrestorefunc)}},$.jgrid.ajaxOptions,d.p.ajaxRowOptions||{}))}return g}},restoreRow:function(e,t){var i=$.makeArray(arguments).slice(1),n={};return"object"===$.type(i[0])?n=i[0]:$.isFunction(t)&&(n.afterrestorefunc=t),n=$.extend(!0,{},$.jgrid.inlineEdit,n),this.each(function(){var t,i,r=this,o=-1,a={};if(r.grid&&!1!==(t=$(r).jqGrid("getInd",e,!0))){var s=$.isFunction(n.beforeCancelRow)?n.beforeCancelRow.call(r,n,e):void 0;if(void 0===s&&(s=!0),s){for(i=0;i<r.p.savedRow.length;i++)if(String(r.p.savedRow[i].id)===String(e)){o=i;break}if(o>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(t.id)).datepicker("hide")}catch(e){}$.each(r.p.colModel,function(){!0===this.editable&&r.p.savedRow[o].hasOwnProperty(this.name)&&(a[this.name]=r.p.savedRow[o][this.name])}),$(r).jqGrid("setRowData",e,a),$(t).attr("editable","0").off("keydown"),r.p.savedRow.splice(o,1),$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(r.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(r).jqGrid("delRowData",e),$(r).jqGrid("showAddEditButtons")},0)}$(r).triggerHandler("jqGridInlineAfterRestoreRow",[e]),$.isFunction(n.afterrestorefunc)&&n.afterrestorefunc.call(r,e)}}})},addRow:function(e){return e=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},e||{}),this.each(function(){if(this.grid){var t=this;t.p.beforeAction=!0;var i=$.isFunction(e.beforeAddRow)?e.beforeAddRow.call(t,e.addRowParams):void 0;if(void 0===i&&(i=!0),!i)return void(t.p.beforeAction=!1);if(e.rowID=$.isFunction(e.rowID)?e.rowID.call(t,e):null!=e.rowID?e.rowID:$.jgrid.randId(),!0===e.useDefValues&&$(t.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var i=this.editoptions.defaultValue,n=$.isFunction(i)?i.call(t):i;e.initdata[this.name]=n}}),$(t).jqGrid("addRowData",e.rowID,e.initdata,e.position),e.rowID=t.p.idPrefix+e.rowID,$("#"+$.jgrid.jqID(e.rowID),"#"+$.jgrid.jqID(t.p.id)).addClass("jqgrid-new-row"),e.useFormatter)$("#"+$.jgrid.jqID(e.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(t.p.id)).click();else{var n=t.p.prmNames,r=n.oper;e.addRowParams.extraparam[r]=n.addoper,$(t).jqGrid("editRow",e.rowID,e.addRowParams),$(t).jqGrid("setSelection",e.rowID)}}})},inlineNav:function(e,t){var i=this[0],n=$.jgrid.getRegional(i,"nav"),r=$.jgrid.styleUI[i.p.styleUI].inlinedit;return t=$.extend(!0,{edit:!0,editicon:r.icon_edit_nav,add:!0,addicon:r.icon_add_nav,save:!0,saveicon:r.icon_save_nav,cancel:!0,cancelicon:r.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0,saveAfterSelect:!1},n,t||{}),this.each(function(){if(this.grid&&!this.p.inlineNav){var r=$.jgrid.jqID(i.p.id),o=$.trim($(i).jqGrid("getStyleUI",i.p.styleUI+".common","disabled",!0));if(i.p.navGrid||$(i).jqGrid("navGrid",e,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),$(i).data("inlineNav")||$(i).data("inlineNav",t),i.p.force_regional&&(t=$.extend(t,n)),i.p.inlineNav=!0,!0===t.addParams.useFormatter){var a,s=i.p.colModel;for(a=0;a<s.length;a++)if(s[a].formatter&&"actions"===s[a].formatter){if(s[a].formatoptions){var l={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},d=$.extend(l,s[a].formatoptions);t.addParams.addRowParams={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:d.afterSave,errorfunc:d.onError,afterrestorefunc:d.afterRestore}}break}}t.add&&$(i).jqGrid("navButtonAdd",e,{
caption:t.addtext,title:t.addtitle,buttonicon:t.addicon,id:i.p.id+"_iladd",internal:!0,onClickButton:function(){void 0===i.p.beforeAction&&(i.p.beforeAction=!0),$(i).jqGrid("addRow",t.addParams),!t.addParams.useFormatter&&i.p.beforeAction&&($("#"+r+"_ilsave").removeClass(o),$("#"+r+"_ilcancel").removeClass(o),$("#"+r+"_iladd").addClass(o),$("#"+r+"_iledit").addClass(o))}}),t.edit&&$(i).jqGrid("navButtonAdd",e,{caption:t.edittext,title:t.edittitle,buttonicon:t.editicon,id:i.p.id+"_iledit",internal:!0,onClickButton:function(){var e=$(i).jqGrid("getGridParam","selrow");e?(void 0===i.p.beforeAction&&(i.p.beforeAction=!0),$(i).jqGrid("editRow",e,t.editParams),i.p.beforeAction&&($("#"+r+"_ilsave").removeClass(o),$("#"+r+"_ilcancel").removeClass(o),$("#"+r+"_iladd").addClass(o),$("#"+r+"_iledit").addClass(o))):($.jgrid.viewModal("#alertmod_"+r,{gbox:"#gbox_"+r,jqm:!0}),$("#jqg_alrt").focus())}}),t.save&&($(i).jqGrid("navButtonAdd",e,{caption:t.savetext||"",title:t.savetitle||"Save row",buttonicon:t.saveicon,id:i.p.id+"_ilsave",internal:!0,onClickButton:function(){var e=i.p.savedRow[0].id;if(e){var n=i.p.prmNames,o=n.oper,a=t.editParams;$("#"+$.jgrid.jqID(e),"#"+r).hasClass("jqgrid-new-row")?(t.addParams.addRowParams.extraparam[o]=n.addoper,a=t.addParams.addRowParams):(t.editParams.extraparam||(t.editParams.extraparam={}),t.editParams.extraparam[o]=n.editoper),$(i).jqGrid("saveRow",e,a)&&$(i).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod_"+r,{gbox:"#gbox_"+r,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+r+"_ilsave").addClass(o)),t.cancel&&($(i).jqGrid("navButtonAdd",e,{caption:t.canceltext||"",title:t.canceltitle||"Cancel row editing",buttonicon:t.cancelicon,id:i.p.id+"_ilcancel",internal:!0,onClickButton:function(){var e=i.p.savedRow[0].id,n=t.editParams;e?($("#"+$.jgrid.jqID(e),"#"+r).hasClass("jqgrid-new-row")&&(n=t.addParams.addRowParams),$(i).jqGrid("restoreRow",e,n),$(i).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+r,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+r+"_ilcancel").addClass(o)),!0!==t.restoreAfterSelect&&!0!==t.saveAfterSelect||$(i).on("jqGridBeforeSelectRow.inlineNav",function(e,n){i.p.savedRow.length>0&&!0===i.p.inlineNav&&n!==i.p.selrow&&null!==i.p.selrow&&(i.p.selrow===t.addParams.rowID?$(i).jqGrid("delRowData",i.p.selrow):!0===t.restoreAfterSelect?$(i).jqGrid("restoreRow",i.p.selrow,t.editParams):$(i).jqGrid("saveRow",i.p.selrow,t.editParams),$(i).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var e=$.jgrid.jqID(this.p.id),t=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));$("#"+e+"_ilsave").addClass(t),$("#"+e+"_ilcancel").addClass(t),$("#"+e+"_iladd").removeClass(t),$("#"+e+"_iledit").removeClass(t)}})}}),$.jgrid.msie()&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var i=setSelected.call(this,e,t);if(t&&this.selectedList){var n=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(n)})}return i}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(e){return this.each(function(){function t(){i.p.disableClick=!0}var i=this,n=$.jgrid.jqID(i.p.id),r={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+n+"_cb,#jqgh_"+n+"_rn,#jqgh_"+n+"_subgrid),:hidden)",placeholder:{element:function(e){return $(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){var n=$(t.item).parent(),r=$(">th",n),o=i.p.colModel,a={},s=i.p.id+"_";$.each(o,function(e){a[this.name]=e});var l=[];r.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,"");a.hasOwnProperty(e)&&l.push(a[e])}),$(i).jqGrid("remapColumns",l,!0,!0),$.isFunction(i.p.sortable.update)&&i.p.sortable.update(l),setTimeout(function(){i.p.disableClick=!1},50)}};if(i.p.sortable.options?$.extend(r,i.p.sortable.options):$.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),r.start){var o=r.start;r.start=function(e,i){t(),o.call(this,e,i)}}else r.start=t;i.p.sortable.exclude&&(r.items+=":not("+i.p.sortable.exclude+")");var a=e.sortable(r),s=a.data("sortable")||a.data("uiSortable");null!=s&&(s.data("sortable").floating=!0)})},columnChooser:function(e){function t(e,t,i){var n,r;return t>=0?(n=e.slice(),r=n.splice(t,Math.max(e.length-t,t)),t>e.length&&(t=e.length),n[t]=i,n.concat(r)):e}function i(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}var n,r,o,a,s,l,d,c=this,u={},p=[],f=c.jqGrid("getGridParam","colModel"),h=c.jqGrid("getGridParam","colNames"),g=function(e){return $.ui.multiselect.prototype&&e.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")},m=$.jgrid.getRegional(this[0],"col");if(!$("#colchooser_"+$.jgrid.jqID(c[0].p.id)).length){if(n=$('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),r=$("select",n),e=$.extend({width:400,height:240,classname:null,done:function(e){e&&c.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+70,resize:function(){var e=g(r),t=e.container.closest(".ui-dialog-content");t.length>0&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},e.dialog_opts||{})},apply_perm:function(){var i=[];$("option",r).each(function(){$(this).is(":selected")?c.jqGrid("showCol",f[this.value].name):c.jqGrid("hideCol",f[this.value].name)}),$("option[selected]",r).each(function(){i.push(parseInt(this.value,10))}),$.each(i,function(){delete u[f[parseInt(this,10)].name]}),$.each(u,function(){var e=parseInt(this,10);i=t(i,e,e)}),e.done&&e.done.call(c,i),c.jqGrid("setGridWidth",c[0].p.width,c[0].p.shrinkToFit)},cleanup:function(t){i(e.dlog,n,"destroy"),i(e.msel,r,"destroy"),n.remove(),t&&e.done&&e.done.call(c)},msel_opts:{}},m,e||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");e.msel_opts=$.extend($.ui.multiselect.defaults,e.msel_opts)}e.caption&&n.attr("title",e.caption),e.classname&&(n.addClass(e.classname),r.addClass(e.classname)),e.width&&($(">div",n).css({width:e.width,margin:"0 auto"}),r.css("width",e.width)),e.height&&($(">div",n).css("height",e.height),r.css("height",e.height-10)),r.empty(),$.each(f,function(e){if(u[this.name]=e,this.hidedlg)return void(this.hidden||p.push(e));r.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(h[e])+"</option>")}),o=$.isFunction(e.dlog_opts)?e.dlog_opts.call(c,e):e.dlog_opts,i(e.dlog,n,o),a=$.isFunction(e.msel_opts)?e.msel_opts.call(c,e):e.msel_opts,i(e.msel,r,a),s=$("#colchooser_"+$.jgrid.jqID(c[0].p.id)),s.css({margin:"auto"}),s.find(">div").css({width:"100%",height:"100%",margin:"auto"}),l=g(r),l.container.css({width:"100%",height:"100%",margin:"auto"}),l.selectedContainer.css({width:100*l.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),l.availableContainer.css({width:100-100*l.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),l.selectedList.css("height","auto"),l.availableList.css("height","auto"),d=Math.max(l.selectedList.height(),l.availableList.height()),d=Math.min(d,$(window).height()),l.selectedList.css("height",d),l.availableList.css("height",d)}},sortableRows:function(e){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(e=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},e||{}),e.start&&$.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&$.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(i,n){if($(n.item).css("border-width","0"),$("td",n.item).each(function(e){this.style.width=t.grid.cols[e].style.width}),t.p.subGrid){var r=$(n.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",r)}catch(e){}}e._start_&&e._start_.apply(this,[i,n])},e.update=function(i,n){$(n.item).css("border-width",""),!0===t.p.rownumbers&&$("td.jqgrid-rownum",t.rows).each(function(e){$(this).html(e+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))}),e._update_&&e._update_.apply(this,[i,n])},$("tbody:first",t).sortable(e),$("tbody:first > .jqgrow",t).disableSelection()))})},gridDnD:function(e){return this.each(function(){function t(){var e=$.data(r,"dnd");$("tr.jqgrow:not(.ui-draggable)",r).draggable($.isFunction(e.drag)?e.drag.call($(r),e):e.drag)}var i,n,r=this;if(r.grid&&!r.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(void 0===$("#jqgrid_dnd")[0]&&$("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"==typeof e&&"updateDnD"===e&&!0===r.p.jqgdnd)return void t();var o;if(e=$.extend({drag:function(e){return $.extend({start:function(t,i){var n,o;if(r.p.subGrid){o=$(i.helper).attr("id");try{$(r).jqGrid("collapseSubGridRow",o)}catch(e){}}for(n=0;n<$.data(r,"dnd").connectWith.length;n++)0===$($.data(r,"dnd").connectWith[n]).jqGrid("getGridParam","reccount")&&$($.data(r,"dnd").connectWith[n]).jqGrid("addRowData","jqg_empty_row",{});i.helper.addClass("ui-state-highlight"),$("td",i.helper).each(function(e){this.style.width=r.grid.headers[e].width+"px"}),e.onstart&&$.isFunction(e.onstart)&&e.onstart.call($(r),t,i)},stop:function(t,i){var n,o;for(i.helper.dropped&&!e.dragcopy&&(o=$(i.helper).attr("id"),void 0===o&&(o=$(this).attr("id")),$(r).jqGrid("delRowData",o)),n=0;n<$.data(r,"dnd").connectWith.length;n++)$($.data(r,"dnd").connectWith[n]).jqGrid("delRowData","jqg_empty_row");e.onstop&&$.isFunction(e.onstop)&&e.onstop.call($(r),t,i)}},e.drag_opts||{})},drop:function(e){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow"))return e;if(o=$(e).closest("table.ui-jqgrid-btable"),o.length>0&&void 0!==$.data(o[0],"dnd")){var t=$.data(o[0],"dnd").connectWith;return-1!==$.inArray("#"+$.jgrid.jqID(this.id),t)}return!1},drop:function(t,i){if($(i.draggable).hasClass("jqgrow")){var n=$(i.draggable).attr("id"),r=i.draggable.parent().parent().jqGrid("getRowData",n);if(!e.dropbyname){var a,s,l=0,d={},c=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(s in r)r.hasOwnProperty(s)&&(a=c[l].name,"cb"!==a&&"rn"!==a&&"subgrid"!==a&&r.hasOwnProperty(s)&&c[l]&&(d[a]=r[s]),l++);r=d}catch(e){}}if(i.helper.dropped=!0,$.data(o[0],"dnd").beforedrop&&$.isFunction($.data(o[0],"dnd").beforedrop)){var u=$.data(o[0],"dnd").beforedrop.call(this,t,i,r,$(o[0]),$(this));void 0!==u&&null!==u&&"object"==typeof u&&(r=u)}if(i.helper.dropped){var p;e.autoid&&($.isFunction(e.autoid)?p=e.autoid.call(this,r):(p=Math.ceil(1e3*Math.random()),p=e.autoidprefix+p)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",p,r,e.droppos)}e.ondrop&&$.isFunction(e.ondrop)&&e.ondrop.call(this,t,i,r)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{}),e.connectWith)for(e.connectWith=e.connectWith.split(","),e.connectWith=$.map(e.connectWith,function(e){return $.trim(e)}),$.data(r,"dnd",e),0===r.p.reccount||r.p.jqgdnd||t(),r.p.jqgdnd=!0,i=0;i<e.connectWith.length;i++)n=e.connectWith[i],$(n).droppable($.isFunction(e.drop)?e.drop.call($(r),e):e.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),req;if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,e,t),$t.p.caption&&$("#gbox_"+gID).css({height:"auto"}),$t.p.frozenColumns&&(req&&clearTimeout(req),req=setTimeout(function(){req&&clearTimeout(req),$("#"+gID).jqGrid("destroyFrozenColumns"),$("#"+gID).jqGrid("setFrozenColumns")}))},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}}),$.assocArraySize=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},$.jgrid.extend({pivotSetup:function(e,t){var i=[],n=[],r=[],o=[],a=[],s={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},l=[],d=$.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},t||{});return this.each(function(){function t(e,t){var i,n=0,r=!0;for(i in e)if(e.hasOwnProperty(i)){if(e[i]!=this[n]){r=!1;break}if(++n>=this.length)break}return r&&(h=t),r}function c(e,t,i,n,r){var o;if($.isFunction(e))o=e.call(this,t,i,n);else switch(e){case"sum":o=parseFloat(t||0)+parseFloat(n[i]||0);break;case"count":""!==t&&null!=t||(t=0),o=n.hasOwnProperty(i)?t+1:0;break;case"min":o=""===t||null==t?parseFloat(n[i]||0):Math.min(parseFloat(t),parseFloat(n[i]||0));break;case"max":o=""===t||null==t?parseFloat(n[i]||0):Math.max(parseFloat(t),parseFloat(n[i]||0));break;case"avg":o=(parseFloat(t||0)*(r-1)+parseFloat(n[i]||0))/r}return o}function u(e,t,i,r){var s,l,d,u,p,f,g=t.length,m="",v=[],b=1;for($.isArray(i)?(u=i.length,v=i):(u=1,v[0]=i),o=[],a=[],o.root=0,d=0;d<u;d++){var y,w=[];for(s=0;s<g;s++){if(p="string"==typeof t[s].aggregator?t[s].aggregator:"cust",null==i)l=$.trim(t[s].member)+"_"+p,y=l,v[0]=t[s].label||p+" "+$.trim(t[s].member);else{y=i[d].replace(/\s+/g,"");try{l=1===g?m+y:m+y+"_"+p+"_"+String(s)}catch(e){}v[d]=i[d]}l=isNaN(parseInt(l,10))?l:l+" ","avg"===t[s].aggregator&&(f=-1===h?n.length+"_"+l:h+"_"+l,D[f]?D[f]++:D[f]=1,b=D[f]),r[l]=w[l]=c(t[s].aggregator,r[l],t[s].member,e,b)}m+=i[d].replace(/\s+/g,""),o[l]=w,a[l]=v[d]}return r}function p(e){var t,n,r,o,a;for(r in e)if(e.hasOwnProperty(r)){if("object"!=typeof e[r]){if("level"===r){if(void 0===P[e.level]&&(P[e.level]="",e.level>0&&-1===e.text.indexOf("_r_Totals")&&(l[e.level-1]={useColSpanStyle:!1,groupHeaders:[]})),P[e.level]!==e.text&&e.children.length&&-1===e.text.indexOf("_r_Totals")&&e.level>0){l[e.level-1].groupHeaders.push({titleText:e.label,numberOfColumns:0});var s=l[e.level-1].groupHeaders.length-1,c=0===s?G:O;if(e.level-1==(d.rowTotals?1:0)&&s>0){for(var u=0,f=0;f<s;f++)u+=l[e.level-1].groupHeaders[f].numberOfColumns;u&&(c=u+m)}i[c]&&(l[e.level-1].groupHeaders[s].startColumnName=i[c].name,l[e.level-1].groupHeaders[s].numberOfColumns=i.length-c),O=i.length}P[e.level]=e.text}if(e.level===v&&"level"===r&&v>0)if(b>1){var h=1;for(t in e.fields)e.fields.hasOwnProperty(t)&&(1===h&&l[v-1].groupHeaders.push({startColumnName:t,numberOfColumns:1,titleText:e.label||e.text}),h++);l[v-1].groupHeaders[l[v-1].groupHeaders.length-1].numberOfColumns=h-1}else l.splice(v-1,1)}if(null!=e[r]&&"object"==typeof e[r]&&p(e[r]),"level"===r&&e.level>0&&(e.level===(0===v?e.level:v)||-1!==P[e.level].indexOf("_r_Totals"))){n=0;for(t in e.fields)if(e.fields.hasOwnProperty(t)){a={};for(o in d.aggregates[n])if(d.aggregates[n].hasOwnProperty(o))switch(o){case"member":case"label":case"aggregator":break;default:a[o]=d.aggregates[n][o]}b>1?(a.name=t,a.label=d.aggregates[n].label||e.label):(a.name=e.text,a.label="_r_Totals"===e.text?d.rowTotalsText:e.label),i.push(a),n++}}}}var f,h,g,m,v,b,y,w,x=e.length,j=0;if(d.rowTotals&&d.yDimension.length>0){var _=d.yDimension[0].dataName;d.yDimension.splice(0,0,{dataName:_}),d.yDimension[0].converter=function(){return"_r_Totals"}}if(m=$.isArray(d.xDimension)?d.xDimension.length:0,v=d.yDimension.length,b=$.isArray(d.aggregates)?d.aggregates.length:0,0===m||0===b)throw"xDimension or aggregates optiona are not set!";var C;for(g=0;g<m;g++)C={name:d.xDimension[g].dataName,frozen:d.frozenStaticCols},null==d.xDimension[g].isGroupField&&(d.xDimension[g].isGroupField=!0),C=$.extend(!0,C,d.xDimension[g]),i.push(C);for(var q=m-1,S={},D=[];j<x;){f=e[j];var k=[],T=[];y={},g=0;do{k[g]=$.trim(f[d.xDimension[g].dataName]),y[d.xDimension[g].dataName]=k[g],g++}while(g<m);var I=0;if(h=-1,w=function(e,t,i){var n;return n=_pivotfilter.call(e,t,i),n.length>0?n[0]:null}(n,t,k)){if(h>=0){if(I=0,v>=1){for(I=0;I<v;I++)T[I]=$.trim(f[d.yDimension[I].dataName]),d.yDimension[I].converter&&$.isFunction(d.yDimension[I].converter)&&(T[I]=d.yDimension[I].converter.call(this,T[I],k,T));w=u(f,d.aggregates,T,w)}else 0===v&&(w=u(f,d.aggregates,null,w));n[h]=w}}else{if(I=0,v>=1){for(I=0;I<v;I++)T[I]=$.trim(f[d.yDimension[I].dataName]),d.yDimension[I].converter&&$.isFunction(d.yDimension[I].converter)&&(T[I]=d.yDimension[I].converter.call(this,T[I],k,T));y=u(f,d.aggregates,T,y)}else 0===v&&(y=u(f,d.aggregates,null,y));n.push(y)}var F,A=0,R=null,E=null;for(F in o)if(o.hasOwnProperty(F)){if(0===A)S.children&&void 0!==S.children||(S={text:F,level:0,children:[],label:F}),R=S.children;else{for(E=null,g=0;g<R.length;g++)if(R[g].text===F){E=R[g];break}E?R=E.children:(R.push({children:[],text:F,level:A,fields:o[F],label:a[F]}),R=R[R.length-1].children)}A++}j++}D=null;var P=[],O=i.length,G=O;v>0&&(l[v-1]={useColSpanStyle:!1,groupHeaders:[]}),p(S);var N;if(d.colTotals)for(var M=n.length;M--;)for(g=m;g<i.length;g++)N=i[g].name,r[N]?r[N]+=parseFloat(n[M][N]||0):r[N]=parseFloat(n[M][N]||0);if(q>0)for(g=0;g<q;g++)i[g].isGroupField&&(s.groupingView.groupField.push(i[g].name),s.groupingView.groupSummary.push(d.groupSummary),s.groupingView.groupSummaryPos.push(d.groupSummaryPos));else s.grouping=!1;s.sortname=i[q].name,s.groupingView.hideFirstGroupCol=!0}),{colModel:i,rows:n,groupOptions:s,groupHeaders:l,summary:r}},jqPivot:function(e,t,i,n){return this.each(function(){function r(e){if(!$.isArray(e))throw"data provides is not an array";var n,r,a,s,l=jQuery(o).jqGrid("pivotSetup",e,t),d=$.assocArraySize(l.summary)>0,c=$.jgrid.from.call(o,l.rows);for(t.ignoreCase&&(c=c.ignoreCase()),n=0;n<l.groupOptions.groupingView.groupField.length;n++)r=t.xDimension[n].sortorder?t.xDimension[n].sortorder:"asc",a=t.xDimension[n].sorttype?t.xDimension[n].sorttype:"text",c.orderBy(l.groupOptions.groupingView.groupField[n],r,a,"",a);if(s=t.xDimension.length,i.sortname){for(r=i.sortorder?i.sortorder:"asc",a="text",n=0;n<s;n++)if(t.xDimension[n].dataName===i.sortname){a=t.xDimension[n].sorttype?t.xDimension[n].sorttype:"text";break}c.orderBy(i.sortname,r,a,"",a)}else l.groupOptions.sortname&&s&&(r=t.xDimension[s-1].sortorder?t.xDimension[s-1].sortorder:"asc",a=t.xDimension[s-1].sorttype?t.xDimension[s-1].sorttype:"text",c.orderBy(l.groupOptions.sortname,r,a,"",a));jQuery(o).jqGrid($.extend(!0,{datastr:$.extend(c.select(),d?{userdata:l.summary}:{}),datatype:"jsonstring",footerrow:d,userDataOnFooter:d,colModel:l.colModel,viewrecords:!0,sortname:t.xDimension[0].dataName},l.groupOptions,i||{}));var u=l.groupHeaders;if(u.length)for(n=0;n<u.length;n++)u[n]&&u[n].groupHeaders.length&&jQuery(o).jqGrid("setGroupHeaders",u[n]);t.frozenStaticCols&&jQuery(o).jqGrid("setFrozenColumns")}var o=this;"string"==typeof e?$.ajax($.extend({url:e,dataType:"json",success:function(e){r($.jgrid.getAccessor(e,n&&n.reader?n.reader:"rows"))}},n||{})):r(e)})}}),$.jgrid.extend({setSubGrid:function(){return this.each(function(){var e,t,i=this,n=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].subgrid,r={plusicon:n.icon_plus,minusicon:n.icon_minus,openicon:n.icon_open,expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(i.p.subGridOptions=$.extend(r,i.p.subGridOptions||{}),i.p.colNames.unshift(""),i.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?i.p.subGridWidth+i.p.cellLayout:i.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),e=i.p.subGridModel,e[0])for(e[0].align=$.extend([],e[0].align||[]),t=0;t<e[0].name.length;t++)e[0].align[t]=e[0].align[t]||"left"})},addSubGridCell:function(e,t){var i,n,r,o="";return this.each(function(){o=this.formatCol(e,t),n=this.p.id,i=this.p.subGridOptions.plusicon,r=$.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+n+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+o+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+r.icon_base+" "+i+"'></span></a></td>"},addSubGrid:function(e,t){return this.each(function(){var i=this;if(i.grid){var n,r,o,a,s,l=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].base,d=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,c=function(e,t,n){var r=$("<td align='"+i.p.subGridModel[0].align[n]+"'></td>").html(t);$(e).append(r)},u=function(e,t){var n,r,o,a=$("<table class='"+l.rowTable+" ui-common-table'><tbody></tbody></table>"),s=$("<tr></tr>");for(r=0;r<i.p.subGridModel[0].name.length;r++)n=$("<th class='"+l.headerBox+" ui-th-subgrid ui-th-column ui-th-"+i.p.direction+"'></th>"),$(n).html(i.p.subGridModel[0].name[r]),$(n).width(i.p.subGridModel[0].width[r]),$(s).append(n);$(a).append(s),e&&(o=i.p.xmlReader.subgrid,$(o.root+" "+o.row,e).each(function(){if(s=$("<tr class='"+d.content+" ui-subtblcell'></tr>"),!0===o.repeatitems)$(o.cell,this).each(function(e){c(s,$(this).text()||"&#160;",e)});else{var e=i.p.subGridModel[0].mapping||i.p.subGridModel[0].name;if(e)for(r=0;r<e.length;r++)c(s,$(e[r],this).text()||"&#160;",r)}$(a).append(s)}));var u=$("table:first",i.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(u+t)).append(a),i.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(i.p.id)).hide(),!1},p=function(e,t){var n,r,o,a,s,u,p=$("<table class='"+l.rowTable+" ui-common-table'><tbody></tbody></table>"),f=$("<tr></tr>");for(o=0;o<i.p.subGridModel[0].name.length;o++)n=$("<th class='"+l.headerBox+" ui-th-subgrid ui-th-column ui-th-"+i.p.direction+"'></th>"),$(n).html(i.p.subGridModel[0].name[o]),$(n).width(i.p.subGridModel[0].width[o]),$(f).append(n);if($(p).append(f),e&&(s=i.p.jsonReader.subgrid,void 0!==(r=$.jgrid.getAccessor(e,s.root))))for(o=0;o<r.length;o++){if(a=r[o],f=$("<tr class='"+d.content+" ui-subtblcell'></tr>"),!0===s.repeatitems)for(s.cell&&(a=a[s.cell]),u=0;u<a.length;u++)c(f,a[u]||"&#160;",u);else{var h=i.p.subGridModel[0].mapping||i.p.subGridModel[0].name;if(h.length)for(u=0;u<h.length;u++)c(f,a[h[u]]||"&#160;",u)}$(p).append(f)}var g=$("table:first",i.grid.bDiv).attr("id")+"_";return $("#"+$.jgrid.jqID(g+t)).append(p),i.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(i.p.id)).hide(),!1},f=function(e){var t,n,r,o;if(t=$(e).attr("id"),n={nd_:(new Date).getTime()},n[i.p.prmNames.subgridid]=t,!i.p.subGridModel[0])return!1;if(i.p.subGridModel[0].params)for(o=0;o<i.p.subGridModel[0].params.length;o++)for(r=0;r<i.p.colModel.length;r++)i.p.colModel[r].name===i.p.subGridModel[0].params[o]&&(n[i.p.colModel[r].name]=$("td:eq("+r+")",e).text().replace(/\&#160\;/gi,""));if(!i.grid.hDiv.loading)switch(i.grid.hDiv.loading=!0,$("#load_"+$.jgrid.jqID(i.p.id)).show(),i.p.subgridtype||(i.p.subgridtype=i.p.datatype),$.isFunction(i.p.subgridtype)?i.p.subgridtype.call(i,n):i.p.subgridtype=i.p.subgridtype.toLowerCase(),i.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:i.p.mtype,url:$.isFunction(i.p.subGridUrl)?i.p.subGridUrl.call(i,n):i.p.subGridUrl,dataType:i.p.subgridtype,data:$.isFunction(i.p.serializeSubGridData)?i.p.serializeSubGridData.call(i,n):n,complete:function(e){"xml"===i.p.subgridtype?u(e.responseXML,t):p($.jgrid.parse(e.responseText),t),e=null}},$.jgrid.ajaxOptions,i.p.ajaxSubgridOptions||{}))}return!1},h=0;$.each(i.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||h++});var g,m=i.rows.length,v=1,b=$.isFunction(i.p.isHasSubGrid);for(void 0!==t&&t>0&&(v=t,m=t+1);v<m;){if($(i.rows[v]).hasClass("jqgrow")){if(i.p.scroll&&$(i.rows[v].cells[e]).off("click"),g=null,b)var g=i.p.isHasSubGrid.call(i,i.rows[v].id);!1===g?i.rows[v].cells[e].innerHTML="":$(i.rows[v].cells[e]).on("click",function(){var t=$(this).parent("tr")[0];if(r=i.p.id,n=t.id,s=$("#"+r+"_"+n+"_expandedContent"),$(this).hasClass("sgcollapsed")){if(a=$(i).triggerHandler("jqGridSubGridBeforeExpand",[r+"_"+n,n]),a=!1!==a&&"stop"!==a,a&&$.isFunction(i.p.subGridBeforeExpand)&&(a=i.p.subGridBeforeExpand.call(i,r+"_"+n,n)),!1===a)return!1;!0===i.p.subGridOptions.reloadOnExpand||!1===i.p.subGridOptions.reloadOnExpand&&!s.hasClass("ui-subgrid")?(o=e>=1?"<td colspan='"+e+"'>&#160;</td>":"",$(t).after("<tr role='row' id='"+r+"_"+n+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+o+"<td class='"+d.content+" subgrid-cell'><span class='"+d.icon_base+" "+i.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(i.p.colNames.length-1-h,10)+"' class='"+d.content+" subgrid-data'><div id="+r+"_"+n+" class='tablediv'></div></td></tr>"),$(i).triggerHandler("jqGridSubGridRowExpanded",[r+"_"+n,n]),$.isFunction(i.p.subGridRowExpanded)?i.p.subGridRowExpanded.call(i,r+"_"+n,n):f(t)):s.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+d.icon_base+" "+i.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),i.p.subGridOptions.selectOnExpand&&$(i).jqGrid("setSelection",n)}else if($(this).hasClass("sgexpanded")){if(a=$(i).triggerHandler("jqGridSubGridRowColapsed",[r+"_"+n,n]),a=!1!==a&&"stop"!==a,a&&$.isFunction(i.p.subGridRowColapsed)&&(a=i.p.subGridRowColapsed.call(i,r+"_"+n,n)),!1===a)return!1;!0===i.p.subGridOptions.reloadOnExpand?s.remove(".ui-subgrid"):s.hasClass("ui-subgrid")&&s.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded"),$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+d.icon_base+" "+i.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),i.p.subGridOptions.selectOnCollapse&&$(i).jqGrid("setSelection",n)}return!1})}v++}!0===i.p.subGridOptions.expandOnLoad&&$(i.rows).filter(".jqgrow").each(function(e,t){$(t.cells[0]).click()}),i.subGridXml=function(e,t){u(e,t)},i.subGridJson=function(e,t){p(e,t)}}})},expandSubGridRow:function(e){return this.each(function(){var t=this;if((t.grid||e)&&!0===t.p.subGrid){var i=$(this).jqGrid("getInd",e,!0);if(i){var n=$("td.sgcollapsed",i)[0];n&&$(n).trigger("click")}}})},collapseSubGridRow:function(e){return this.each(function(){var t=this;if((t.grid||e)&&!0===t.p.subGrid){var i=$(this).jqGrid("getInd",e,!0);if(i){var n=$("td.sgexpanded",i)[0];n&&$(n).trigger("click")}}})},toggleSubGridRow:function(e){return this.each(function(){var t=this;if((t.grid||e)&&!0===t.p.subGrid){var i=$(this).jqGrid("getInd",e,!0);if(i){var n=$("td.sgcollapsed",i)[0];n?$(n).trigger("click"):(n=$("td.sgexpanded",i)[0])&&$(n).trigger("click")}}})}}),$.jgrid.extend({setTreeNode:function(e,t){return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var n,r,o,a,s,l,d,c,u=i.p.expColInd,p=i.p.treeReader.expanded_field,f=i.p.treeReader.leaf_field,h=i.p.treeReader.level_field,g=i.p.treeReader.icon_field,m=i.p.treeReader.loaded,v=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,b=e;for($(i).triggerHandler("jqGridBeforeSetTreeNode",[b,t]),$.isFunction(i.p.beforeSetTreeNode)&&i.p.beforeSetTreeNode.call(i,b,t);e<t;){var y=$.jgrid.stripPref(i.p.idPrefix,i.rows[e].id),w=i.p._index[y];d=i.p.data[w],"nested"===i.p.treeGridModel&&(d[f]||(n=parseInt(d[i.p.treeReader.left_field],10),r=parseInt(d[i.p.treeReader.right_field],10),d[f]=r===n+1?"true":"false",i.rows[e].cells[i.p._treeleafpos].innerHTML=d[f])),o=parseInt(d[h],10),0===i.p.tree_root_level?(a=o+1,s=o):(a=o,s=o-1),l="<div class='tree-wrap tree-wrap-"+i.p.direction+"' style='width:"+18*a+"px;'>",l+="<div style='"+("rtl"===i.p.direction?"right:":"left:")+18*s+"px;' class='"+v.icon_base+" ",void 0!==d[m]&&("true"===d[m]||!0===d[m]?d[m]=!0:d[m]=!1),"true"===d[f]||!0===d[f]?(l+=(void 0!==d[g]&&""!==d[g]?d[g]:i.p.treeIcons.leaf)+" tree-leaf treeclick",d[f]=!0,c="leaf"):(d[f]=!1,c=""),d[p]=("true"===d[p]||!0===d[p])&&(d[m]||void 0===d[m]),!1===d[p]?l+=!0===d[f]?"'":i.p.treeIcons.plus+" tree-plus treeclick'":l+=!0===d[f]?"'":i.p.treeIcons.minus+" tree-minus treeclick'",l+="></div></div>",$(i.rows[e].cells[u]).wrapInner("<span class='cell-wrapper"+c+"'></span>").prepend(l),o!==parseInt(i.p.tree_root_level,10)&&($(i).jqGrid("isVisibleNode",d)||$(i.rows[e]).css("display","none")),$(i.rows[e].cells[u]).find("div.treeclick").on("click",function(e){var t=e.target||e.srcElement,n=$.jgrid.stripPref(i.p.idPrefix,$(t,i.rows).closest("tr.jqgrow")[0].id),r=i.p._index[n];return i.p.data[r][f]||(i.p.data[r][p]?($(i).jqGrid("collapseRow",i.p.data[r]),$(i).jqGrid("collapseNode",i.p.data[r])):($(i).jqGrid("expandRow",i.p.data[r]),$(i).jqGrid("expandNode",i.p.data[r]))),!1}),!0===i.p.ExpandColClick&&$(i.rows[e].cells[u]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(e){var t=e.target||e.srcElement,n=$.jgrid.stripPref(i.p.idPrefix,$(t,i.rows).closest("tr.jqgrow")[0].id),r=i.p._index[n];return i.p.data[r][f]||(i.p.data[r][p]?($(i).jqGrid("collapseRow",i.p.data[r]),$(i).jqGrid("collapseNode",i.p.data[r])):($(i).jqGrid("expandRow",i.p.data[r]),$(i).jqGrid("expandNode",i.p.data[r]))),$(i).jqGrid("setSelection",n),!1}),e++}$(i).triggerHandler("jqGridAfterSetTreeNode",[b,t]),$.isFunction(i.p.afterSetTreeNode)&&i.p.afterSetTreeNode.call(i,b,t)}})},setTreeGrid:function(){return this.each(function(){var e,t,i,n,r=this,o=0,a=!1,s=[],l=$.jgrid.styleUI[r.p.styleUI||"jQueryUI"].treegrid;if(r.p.treeGrid){r.p.treedatatype||$.extend(r.p,{treedatatype:r.p.datatype}),r.p.loadonce&&(r.p.treedatatype="local"),r.p.subGrid=!1,r.p.altRows=!1,r.p.pgbuttons=!1,r.p.pginput=!1,r.p.gridview=!0,null===r.p.rowTotal&&(r.p.rowNum=1e4),r.p.multiselect=!1,r.p.rowList=[],r.p.expColInd=0,e=l.icon_plus,"jQueryUI"===r.p.styleUI&&(e+="rtl"===r.p.direction?"w":"e"),r.p.treeIcons=$.extend({plus:e,minus:l.icon_minus,leaf:l.icon_leaf},r.p.treeIcons||{}),"nested"===r.p.treeGridModel?r.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},r.p.treeReader):"adjacency"===r.p.treeGridModel&&(r.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},r.p.treeReader));for(i in r.p.colModel)if(r.p.colModel.hasOwnProperty(i)){t=r.p.colModel[i].name,t!==r.p.ExpandColumn||a||(a=!0,r.p.expColInd=o),o++
;for(n in r.p.treeReader)r.p.treeReader.hasOwnProperty(n)&&r.p.treeReader[n]===t&&s.push(t)}$.each(r.p.treeReader,function(e,t){t&&-1===$.inArray(t,s)&&("leaf_field"===e&&(r.p._treeleafpos=o),o++,r.p.colNames.push(t),r.p.colModel.push({name:t,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(e){this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){var i=$(t).jqGrid("getNodeChildren",e),n=t.p.treeReader.expanded_field,r=e[t.p.localReader.id];!1!==(!$.isFunction(t.p.beforeExpandTreeGridRow)||t.p.beforeExpandTreeGridRow.call(t,r,e,i))&&($(i).each(function(){var e=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",e)).css("display",""),this[n]&&$(t).jqGrid("expandRow",this)}),$.isFunction(t.p.afterExpandTreeGridRow)&&t.p.afterExpandTreeGridRow.call(t,r,e,i))}})},collapseRow:function(e){this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){var i=$(t).jqGrid("getNodeChildren",e),n=t.p.treeReader.expanded_field,r=e[t.p.localReader.id];!1!==(!$.isFunction(t.p.beforeCollapseTreeGridRow)||t.p.beforeCollapseTreeGridRow.call(t,r,e,i))&&($(i).each(function(){var e=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",e)).css("display","none"),this[n]&&$(t).jqGrid("collapseRow",this)}),$.isFunction(t.p.afterCollapseTreeGridRow)&&t.p.afterCollapseTreeGridRow.call(t,r,e,i))}})},getRootNodes:function(e){var t=[];return this.each(function(){var i,n,r,o=this;if(o.grid&&o.p.treeGrid)switch("boolean"!=typeof e&&(e=!1),r=e?$(o).jqGrid("getRowData",null,!0):o.p.data,o.p.treeGridModel){case"nested":i=o.p.treeReader.level_field,$(r).each(function(){parseInt(this[i],10)===parseInt(o.p.tree_root_level,10)&&(e?t.push(o.p.data[o.p._index[this[o.p.keyName]]]):t.push(this))});break;case"adjacency":n=o.p.treeReader.parent_id_field,$(r).each(function(){null!==this[n]&&"null"!==String(this[n]).toLowerCase()||(e?t.push(o.p.data[o.p._index[this[o.p.keyName]]]):t.push(this))})}}),t},getNodeDepth:function(e){var t=null;return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this;switch(i.p.treeGridModel){case"nested":var n=i.p.treeReader.level_field;t=parseInt(e[n],10)-parseInt(i.p.tree_root_level,10);break;case"adjacency":t=$(i).jqGrid("getNodeAncestors",e).length}}}),t},getNodeParent:function(e){var t=null;return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var n=i.p.treeReader.left_field,r=i.p.treeReader.right_field,o=i.p.treeReader.level_field,a=parseInt(e[n],10),s=parseInt(e[r],10),l=parseInt(e[o],10);$(this.p.data).each(function(){if(parseInt(this[o],10)===l-1&&parseInt(this[n],10)<a&&parseInt(this[r],10)>s)return t=this,!1});break;case"adjacency":for(var d=i.p.treeReader.parent_id_field,c=i.p.localReader.id,u=e[c],p=i.p._index[u];p--;)if(i.p.data[p][c]===$.jgrid.stripPref(i.p.idPrefix,e[d])){t=i.p.data[p];break}}}),t},getNodeChildren:function(e,t){var i=[];return this.each(function(){var n=this;if(n.grid&&n.p.treeGrid){var r,o,a=t?this.rows.length:this.p.data.length;switch(n.p.treeGridModel){case"nested":var s=n.p.treeReader.left_field,l=n.p.treeReader.right_field,d=n.p.treeReader.level_field,c=parseInt(e[s],10),u=parseInt(e[l],10),p=parseInt(e[d],10);for(r=0;r<a;r++)(o=t?n.p.data[n.p._index[this.rows[r].id]]:n.p.data[r])&&parseInt(o[d],10)===p+1&&parseInt(o[s],10)>c&&parseInt(o[l],10)<u&&i.push(o);break;case"adjacency":var f=n.p.treeReader.parent_id_field,h=n.p.localReader.id;for(r=0;r<a;r++)(o=t?n.p.data[n.p._index[this.rows[r].id]]:n.p.data[r])&&String(o[f])===$.jgrid.stripPref(n.p.idPrefix,e[h])&&i.push(o)}}}),i},getFullTreeNode:function(e,t){var i=[];return this.each(function(){var n,r=this,o=r.p.treeReader.expanded_field;if(r.grid&&r.p.treeGrid)switch(null!=t&&"boolean"==typeof t||(t=!1),r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,s=r.p.treeReader.right_field,l=r.p.treeReader.level_field,d=parseInt(e[a],10),c=parseInt(e[s],10),u=parseInt(e[l],10);$(this.p.data).each(function(){parseInt(this[l],10)>=u&&parseInt(this[a],10)>=d&&parseInt(this[a],10)<=c&&(t&&(this[o]=!0),i.push(this))});break;case"adjacency":if(e){i.push(e);var p=r.p.treeReader.parent_id_field,f=r.p.localReader.id;$(this.p.data).each(function(e){for(n=i.length,e=0;e<n;e++)if($.jgrid.stripPref(r.p.idPrefix,i[e][f])===this[p]){t&&(this[o]=!0),i.push(this);break}})}}}),i},getNodeAncestors:function(e,t,i){var n=[];return void 0===t&&(t=!1),this.each(function(){if(this.grid&&this.p.treeGrid){i=void 0!==i&&this.p.treeReader.expanded_field;for(var r=$(this).jqGrid("getNodeParent",e);r;){if(i)try{r[i]=!0}catch(e){}t?n.unshift(r):n.push(r),r=$(this).jqGrid("getNodeParent",r)}}}),n},isVisibleNode:function(e){var t=!0;return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var n=$(i).jqGrid("getNodeAncestors",e),r=i.p.treeReader.expanded_field;$(n).each(function(){if(!(t=t&&this[r]))return!1})}}),t},isNodeLoaded:function(e){var t;return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var n=i.p.treeReader.leaf_field,r=i.p.treeReader.loaded;t=void 0!==e&&(void 0!==e[r]?e[r]:!!(e[n]||$(i).jqGrid("getNodeChildren",e).length>0))}}),t},setLeaf:function(e,t,i){return this.each(function(){var n=$.jgrid.getAccessor(e,this.p.localReader.id),r=$("#"+n,this.grid.bDiv)[0],o=this.p.treeReader.leaf_field;try{var a=this.p._index[n];null!=a&&(this.p.data[a][o]=t)}catch(e){}if(!0===t)$("div.treeclick",r).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf");else if(!1===t){var s=this.p.treeIcons.minus+" tree-minus";i&&(s=this.p.treeIcons.plus+" tree-plus"),$("div.treeclick",r).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(s)}})},reloadNode:function(e,t){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.localReader.id,n=this.p.selrow;$(this).jqGrid("delChildren",e[i]),void 0===t&&(t=!1),t||jQuery._data(this,"events").jqGridAfterSetTreeNode||$(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var e=this.p.treeReader.leaf_field;if(this.p.reloadnode){var t=this.p.reloadnode,i=$(this).jqGrid("getNodeChildren",t);t[e]&&i.length?$(this).jqGrid("setLeaf",t,!1):t[e]||0!==i.length||$(this).jqGrid("setLeaf",t,!0)}this.p.reloadnode=!1});var r=this.p.treeReader.expanded_field,o=this.p.treeReader.parent_id_field,a=this.p.treeReader.loaded,s=this.p.treeReader.level_field,l=this.p.treeReader.leaf_field,d=this.p.treeReader.left_field,c=this.p.treeReader.right_field,u=$.jgrid.getAccessor(e,this.p.localReader.id),p=$("#"+u,this.grid.bDiv)[0];e[r]=!0,e[l]||$("div.treeclick",p).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=p.rowIndex,this.p.datatype=this.p.treedatatype,this.p.reloadnode=e,t&&(this.p.treeANode=p.rowIndex>0?p.rowIndex-1:1,$(this).jqGrid("delRowData",u)),"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:u,n_left:e[d],n_right:e[c],n_level:e[s]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:u,parentid:e[o],n_level:e[s]}}),$(this).trigger("reloadGrid"),e[a]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{selrow:n,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{selrow:n,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(e){return this.each(function(){if(this.grid&&this.p.treeGrid){var t=this.p.treeReader.expanded_field,i=this.p.treeReader.parent_id_field,n=this.p.treeReader.loaded,r=this.p.treeReader.level_field,o=this.p.treeReader.left_field,a=this.p.treeReader.right_field;if(!e[t]){var s=$.jgrid.getAccessor(e,this.p.localReader.id),l=$("#"+this.p.idPrefix+$.jgrid.jqID(s),this.grid.bDiv)[0],d=this.p._index[s];if(!1===(!$.isFunction(this.p.beforeExpandTreeGridNode)||this.p.beforeExpandTreeGridNode.call(this,s,e)))return;$(this).jqGrid("isNodeLoaded",this.p.data[d])?(e[t]=!0,$("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(e[t]=!0,$("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:s,n_left:e[o],n_right:e[a],n_level:e[r]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:s,parentid:e[i],n_level:e[r]}}),$(this).trigger("reloadGrid"),e[n]=!0,"nested"===this.p.treeGridModel?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})),$.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,s,e)}}})},collapseNode:function(e){return this.each(function(){if(this.grid&&this.p.treeGrid){var t=this.p.treeReader.expanded_field;if(e[t]){var i=$.jgrid.getAccessor(e,this.p.localReader.id),n=!$.isFunction(this.p.beforeCollapseTreeGridNode)||this.p.beforeCollapseTreeGridNode.call(this,i,e),r=$("#"+this.p.idPrefix+$.jgrid.jqID(i),this.grid.bDiv)[0];if(e[t]=!1,!1===n)return;$("div.treeclick",r).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"),$.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,i,e)}}})},SortTree:function(e,t,i,n){return this.each(function(){if(this.grid&&this.p.treeGrid){var r,o,a,s,l,d=[],c=this,u=$(this).jqGrid("getRootNodes",c.p.search);for(s=$.jgrid.from.call(this,u),s.orderBy(e,t,i,n),l=s.select(),r=0,o=l.length;r<o;r++)a=l[r],d.push(a),$(this).jqGrid("collectChildrenSortTree",d,a,e,t,i,n);$.each(d,function(e){var t=$.jgrid.getAccessor(this,c.p.localReader.id);$("#"+$.jgrid.jqID(c.p.id)+" tbody tr:eq("+e+")").after($("tr#"+$.jgrid.jqID(t),c.grid.bDiv))}),s=null,l=null,d=null}})},searchTree:function(e){var t,i,n,r,o,a,s=e.length||0,l=[],d=[],c=[];return this.each(function(){if(this.grid&&this.p.treeGrid&&s)for(t=this.p.localReader.id;s--;)if(l=$(this).jqGrid("getNodeAncestors",e[s],!0,!0),l.push(e[s]),i=l[0][t],-1===$.inArray(i,d))d.push(i),c=c.concat(l);else for(o=0,n=l.length;o<n;o++){var u=!1;for(a=0,r=c.length;a<r;a++)if(l[o][t]===c[a][t]){u=!0;break}u||c.push(l[o])}}),c},collectChildrenSortTree:function(e,t,i,n,r,o){return this.each(function(){if(this.grid&&this.p.treeGrid){var a,s,l,d,c,u;for(d=$(this).jqGrid("getNodeChildren",t,this.p.search),c=$.jgrid.from.call(this,d),c.orderBy(i,n,r,o),u=c.select(),a=0,s=u.length;a<s;a++)l=u[a],e.push(l),$(this).jqGrid("collectChildrenSortTree",e,l,i,n,r,o)}})},setTreeRow:function(e,t){var i=!1;return this.each(function(){var n=this;n.grid&&n.p.treeGrid&&(i=$(n).jqGrid("setRowData",e,t))}),i},delTreeNode:function(e){return this.each(function(){var t,i,n,r,o,a=this,s=a.p.localReader.id,l=a.p.treeReader.left_field,d=a.p.treeReader.right_field;if(a.grid&&a.p.treeGrid){var c=a.p._index[e];if(void 0!==c){i=parseInt(a.p.data[c][d],10),n=i-parseInt(a.p.data[c][l],10)+1;var u=$(a).jqGrid("getFullTreeNode",a.p.data[c]);if(u.length>0)for(t=0;t<u.length;t++)$(a).jqGrid("delRowData",u[t][s]);if("nested"===a.p.treeGridModel){if(r=$.jgrid.from.call(a,a.p.data).greater(l,i,{stype:"integer"}).select(),r.length)for(o in r)r.hasOwnProperty(o)&&(r[o][l]=parseInt(r[o][l],10)-n);if(r=$.jgrid.from.call(a,a.p.data).greater(d,i,{stype:"integer"}).select(),r.length)for(o in r)r.hasOwnProperty(o)&&(r[o][d]=parseInt(r[o][d],10)-n)}}}})},delChildren:function(e){return this.each(function(){var t,i,n,r,o=this,a=o.p.localReader.id,s=o.p.treeReader.left_field,l=o.p.treeReader.right_field;if(o.grid&&o.p.treeGrid){var d=o.p._index[e];if(void 0!==d){t=parseInt(o.p.data[d][l],10),i=t-parseInt(o.p.data[d][s],10)+1;var c=$(o).jqGrid("getFullTreeNode",o.p.data[d]);if(c.length>0)for(var u=0;u<c.length;u++)c[u][a]!==e&&$(o).jqGrid("delRowData",c[u][a]);if("nested"===o.p.treeGridModel){if(n=$.jgrid.from(o.p.data).greater(s,t,{stype:"integer"}).select(),n.length)for(r in n)n.hasOwnProperty(r)&&(n[r][s]=parseInt(n[r][s],10)-i);if(n=$.jgrid.from(o.p.data).greater(l,t,{stype:"integer"}).select(),n.length)for(r in n)n.hasOwnProperty(r)&&(n[r][l]=parseInt(n[r][l],10)-i)}}}})},addChildNode:function(e,t,i,n){var r=this[0];if(i){var o,a,s,l,d,c,u,p,f=r.p.treeReader.expanded_field,h=r.p.treeReader.leaf_field,g=r.p.treeReader.level_field,m=r.p.treeReader.parent_id_field,v=r.p.treeReader.left_field,b=r.p.treeReader.right_field,y=r.p.treeReader.loaded,w=0,x=t;if(void 0===n&&(n=!1),null==e){if((d=r.p.data.length-1)>=0)for(;d>=0;)w=Math.max(w,parseInt(r.p.data[d][r.p.localReader.id],10)),d--;e=w+1}var j=$(r).jqGrid("getInd",t);if(u=!1,void 0===t||null===t||""===t)t=null,x=null,o="last",l=r.p.tree_root_level,d=r.p.data.length+1;else{o="after",a=r.p._index[t],s=r.p.data[a],t=s[r.p.localReader.id],l=parseInt(s[g],10)+1;var _=$(r).jqGrid("getFullTreeNode",s);_.length?(d=_[_.length-1][r.p.localReader.id],x=d,d=$(r).jqGrid("getInd",x)+1):d=$(r).jqGrid("getInd",t)+1,s[h]&&(u=!0,s[f]=!0,$(r.rows[j]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(r.p.treeIcons.leaf+" tree-leaf").addClass(r.p.treeIcons.minus+" tree-minus"),r.p.data[a][h]=!1,s[y]=!0)}if(c=d+1,void 0===i[f]&&(i[f]=!1),void 0===i[y]&&(i[y]=!1),i[g]=l,void 0===i[h]&&(i[h]=!0),"adjacency"===r.p.treeGridModel&&(i[m]=t),"nested"===r.p.treeGridModel){var C,q,S;if(null!==t){if(p=parseInt(s[b],10),C=$.jgrid.from.call(r,r.p.data),C=C.greaterOrEquals(b,p,{stype:"integer"}),q=C.select(),q.length)for(S in q)q.hasOwnProperty(S)&&(q[S][v]=q[S][v]>p?parseInt(q[S][v],10)+2:q[S][v],q[S][b]=q[S][b]>=p?parseInt(q[S][b],10)+2:q[S][b]);i[v]=p,i[b]=p+1}else{if(p=parseInt($(r).jqGrid("getCol",b,!1,"max"),10),q=$.jgrid.from.call(r,r.p.data).greater(v,p,{stype:"integer"}).select(),q.length)for(S in q)q.hasOwnProperty(S)&&(q[S][v]=parseInt(q[S][v],10)+2);if(q=$.jgrid.from.call(r,r.p.data).greater(b,p,{stype:"integer"}).select(),q.length)for(S in q)q.hasOwnProperty(S)&&(q[S][b]=parseInt(q[S][b],10)+2);i[v]=p+1,i[b]=p+2}}(null===t||$(r).jqGrid("isNodeLoaded",s)||u)&&($(r).jqGrid("addRowData",e,i,o,x),$(r).jqGrid("setTreeNode",d,c)),s&&!s[f]&&n&&$(r.rows[j]).find("div.treeclick").click()}}}),$.fn.jqDrag=function(e){return i(this,e,"d")},$.fn.jqResize=function(e,t){return i(this,e,"r",t)},$.jqDnR={dnr:{},e:0,drag:function(e){return"d"==M.k?E.css({left:M.X+e.pageX-M.pX,top:M.Y+e.pageY-M.pY}):(E.css({width:Math.max(e.pageX-M.pX+M.W,0),height:Math.max(e.pageY-M.pY+M.H,0)}),M1&&E1.css({width:Math.max(e.pageX-M1.pX+M1.W,0),height:Math.max(e.pageY-M1.pY+M1.H,0)})),!1},stop:function(){$(document).off("mousemove",J.drag).off("mouseup",J.stop)}};var J=$.jqDnR,M=J.dnr,E=J.e,E1,M1,i=function(e,t,i,n){return e.each(function(){t=t?$(t,e):e,t.on("mousedown",{e:e,k:i},function(e){var t=e.data,i={};if(E=t.e,E1=!!n&&$(n),"relative"!=E.css("position"))try{E.position(i)}catch(e){}if(M={X:i.left||f("left")||0,Y:i.top||f("top")||0,W:f("width")||E[0].scrollWidth||0,H:f("height")||E[0].scrollHeight||0,pX:e.pageX,pY:e.pageY,k:t.k},M1=!(!E1||"d"==t.k)&&{X:i.left||f1("left")||0,Y:i.top||f1("top")||0,W:E1[0].offsetWidth||f1("width")||0,H:E1[0].offsetHeight||f1("height")||0,pX:e.pageX,pY:e.pageY,k:t.k},$("input.hasDatepicker",E[0])[0])try{$("input.hasDatepicker",E[0]).datepicker("hide")}catch(e){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},f=function(e){return parseInt(E.css(e),10)||!1},f1=function(e){return parseInt(E1.css(e),10)||!1};$.fn.tinyDraggable=function(e){var t=$.extend({handle:0,exclude:0},e);return this.each(function(){var e,i,n=$(this);(t.handle?$(t.handle,n):n).on({mousedown:function(r){if(!t.exclude||!~$.inArray(r.target,$(t.exclude,n))){r.preventDefault();var o=n.offset();e=r.pageX-o.left,i=r.pageY-o.top,$(document).on("mousemove.drag",function(t){n.offset({top:t.pageY-i,left:t.pageX-e})})}},mouseup:function(e){$(document).off("mousemove.drag")}})})},$.fn.jqm=function(e){var t={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:F,ajaxText:"",target:F,modal:F,toTop:F,onShow:F,onHide:F,onLoad:F};return this.each(function(){if(this._jqm)return H[this._jqm].c=$.extend({},H[this._jqm].c,e);s++,this._jqm=s,H[s]={c:$.extend(t,$.jqm.params,e),a:F,w:$(this).addClass("jqmID"+s),s:s},t.trigger&&$(this).jqmAddTrigger(t.trigger)})},$.fn.jqmAddClose=function(e){return hs(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return hs(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function(t,i){var n=H[t],r=n.c,o="."+r.closeClass,a=parseInt(n.w.css("z-index"));a=a>0?a:3e3;var s=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":a-1,opacity:r.overlay/100});if(n.a)return F;if(n.t=i,n.a=!0,n.w.css("z-index",a),r.modal?(A[0]||setTimeout(function(){new L("bind")},1),A.push(t)):r.overlay>0?r.closeoverlay&&n.w.jqmAddClose(s):s=F,n.o=s?s.addClass(r.overlayClass).prependTo("body"):F,r.ajax){var l=r.target||n.w,d=r.ajax;l="string"==typeof l?$(l,n.w):$(l),d="@"===d.substr(0,1)?$(i).attr(d.substring(1)):d,l.html(r.ajaxText).load(d,function(){r.onLoad&&r.onLoad.call(this,n),o&&n.w.jqmAddClose($(o,n.w)),e(n)})}else o&&n.w.jqmAddClose($(o,n.w));return r.toTop&&n.o&&n.w.before('<span id="jqmP'+n.w[0]._jqm+'"></span>').insertAfter(n.o),r.onShow?r.onShow(n):n.w.show(),e(n),F},close:function(e){var t=H[e];return t.a?(t.a=F,A[0]&&(A.pop(),A[0]||new L("unbind")),t.c.toTop&&t.o&&$("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove()),F):F},params:{}};var s=0,H=$.jqm.hash,A=[],F=!1,e=function(e){void 0===e.c.focusField&&(e.c.focusField=0),e.c.focusField>=0&&f(e)},f=function(e){try{$(":input:visible",e.w)[parseInt(e.c.focusField,10)].focus()}catch(e){}},L=function(e){$(document)[e]("keypress",m)[e]("keydown",m)[e]("mousedown",m)},m=function(e){var t=H[A[A.length-1]],i=!$(e.target).parents(".jqmID"+t.s)[0];return i&&($(".jqmID"+t.s).each(function(){var t=$(this),n=t.offset();if(n.top<=e.pageY&&e.pageY<=n.top+t.height()&&n.left<=e.pageX&&e.pageX<=n.left+t.width())return i=!1,!1}),f(t)),!i},hs=function(e,t,i){return e.each(function(){var e=this._jqm;$(t).each(function(){this[i]||(this[i]=[],$(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])H[this[e][t]]&&H[this[e][t]].w[e](this);return F})),this[i].push(e)})})};$.fmatter={},$.extend($.fmatter,{isBoolean:function(e){return"boolean"==typeof e},isObject:function(e){return e&&("object"==typeof e||$.isFunction(e))||!1},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(e){return!(!this.isString(e)&&this.isValue(e))&&(!this.isValue(e)||""===(e=$.trim(e).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"")))}}),$.fn.fmatter=function(e,t,i,n,r){var o=t;i=$.extend({},$.jgrid.getRegional(this,"formatter"),i);try{o=$.fn.fmatter[e].call(this,t,i,n,r)}catch(e){}return o},$.fmatter.util={NumberFormat:function(e,t){if($.fmatter.isNumber(e)||(e*=1),$.fmatter.isNumber(e)){var i,n=e<0,r=String(e),o=t.decimalSeparator||".";if($.fmatter.isNumber(t.decimalPlaces)){var a=t.decimalPlaces,s=Math.pow(10,a);if(r=String(Math.round(e*s)/s),i=r.lastIndexOf("."),a>0)for(i<0?(r+=o,i=r.length-1):"."!==o&&(r=r.replace(".",o));r.length-1-i<a;)r+="0"}if(t.thousandsSeparator){var l=t.thousandsSeparator;i=r.lastIndexOf(o),i=i>-1?i:r.length;var d,c=r.substring(i),u=-1;for(d=i;d>0;d--)u++,u%3==0&&d!==i&&(!n||d>1)&&(c=l+c),c=r.charAt(d-1)+c;r=c}return r=t.prefix?t.prefix+r:r,r=t.suffix?r+t.suffix:r}return e}},$.fn.fmatter.defaultFormat=function(e,t){return $.fmatter.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"},$.fn.fmatter.email=function(e,t){return $.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):'<a href="mailto:'+e+'">'+e+"</a>"},$.fn.fmatter.checkbox=function(e,t){var i,n=$.extend({},t.checkbox);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(n=$.extend({},n,t.colModel.formatoptions)),i=!0===n.disabled?'disabled="disabled"':"",($.fmatter.isEmpty(e)||void 0===e)&&(e=$.fn.fmatter.defaultFormat(e,n)),e=String(e),e=(e+"").toLowerCase(),'<input type="checkbox" '+(e.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"")+' value="'+e+'" offval="no" '+i+"/>"},$.fn.fmatter.link=function(e,t){var i={target:t.target},n="";return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(n="target="+i.target),$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):"<a "+n+' href="'+e+'">'+e+"</a>"},$.fn.fmatter.showlink=function(e,t){var i,n={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName},r="";return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(n=$.extend({},n,t.colModel.formatoptions)),n.target&&(r="target="+n.target),i=n.baseLinkUrl+n.showAction+"?"+n.idName+"="+t.rowId+n.addParam,$.fmatter.isString(e)||$.fmatter.isNumber(e)?"<a "+r+' href="'+i+'">'+e+"</a>":$.fn.fmatter.defaultFormat(e,t)},$.fn.fmatter.integer=function(e,t){var i=$.extend({},t.integer);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?i.defaultValue:$.fmatter.util.NumberFormat(e,i)},$.fn.fmatter.number=function(e,t){var i=$.extend({},t.number);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?i.defaultValue:$.fmatter.util.NumberFormat(e,i)},$.fn.fmatter.currency=function(e,t){var i=$.extend({},t.currency);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(e)?i.defaultValue:$.fmatter.util.NumberFormat(e,i)},$.fn.fmatter.date=function(e,t,i,n){var r=$.extend({},t.date);return void 0!==t.colModel&&void 0!==t.colModel.formatoptions&&(r=$.extend({},r,t.colModel.formatoptions)),r.reformatAfterEdit||"edit"!==n?$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):$.jgrid.parseDate.call(this,r.srcformat,e,r.newformat,r):$.fn.fmatter.defaultFormat(e,t)},$.fn.fmatter.select=function(e,t){e=String(e);var i,n,r=!1,o=[];if(void 0!==t.colModel.formatoptions?(r=t.colModel.formatoptions.value,i=void 0===t.colModel.formatoptions.separator?":":t.colModel.formatoptions.separator,n=void 0===t.colModel.formatoptions.delimiter?";":t.colModel.formatoptions.delimiter):void 0!==t.colModel.editoptions&&(r=t.colModel.editoptions.value,i=void 0===t.colModel.editoptions.separator?":":t.colModel.editoptions.separator,n=void 0===t.colModel.editoptions.delimiter?";":t.colModel.editoptions.delimiter),r){var a,s=!0==(null!=t.colModel.editoptions&&!0===t.colModel.editoptions.multiple),l=[];if(s&&(l=e.split(","),l=$.map(l,function(e){return $.trim(e)})),$.fmatter.isString(r)){var d,c=r.split(n),u=0;for(d=0;d<c.length;d++)if(a=c[d].split(i),a.length>2&&(a[1]=$.map(a,function(e,t){if(t>0)return e}).join(i)),s)$.inArray(a[0],l)>-1&&(o[u]=a[1],u++);else if($.trim(a[0])===$.trim(e)){o[0]=a[1];break}}else $.fmatter.isObject(r)&&(s?o=$.map(l,function(e){return r[e]}):o[0]=r[e]||"")}return e=o.join(", "),""===e?$.fn.fmatter.defaultFormat(e,t):e},$.fn.fmatter.rowactions=function(e){var t=$(this).closest("tr.jqgrow"),i=t.attr("id"),n=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),r=$("#"+n),o=r[0],a=o.p,s=a.colModel[$.jgrid.getCellIndex(this)],l=s.frozen?$("tr#"+i+" td:eq("+$.jgrid.getCellIndex(this)+") > div",r):$(this).parent(),d={extraparam:{}},c=function(e,t){$.isFunction(d.afterSave)&&d.afterSave.call(o,e,t),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide()},u=function(e){$.isFunction(d.afterRestore)&&d.afterRestore.call(o,e),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==s.formatoptions&&(d=$.extend(d,s.formatoptions)),void 0!==a.editOptions&&(d.editOptions=a.editOptions),void 0!==a.delOptions&&(d.delOptions=a.delOptions),t.hasClass("jqgrid-new-row")&&(d.extraparam[a.prmNames.oper]=a.prmNames.addoper);var p={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:c,errorfunc:d.onError,afterrestorefunc:u,restoreAfterError:d.restoreAfterError,mtype:d.mtype};switch(e){case"edit":r.jqGrid("editRow",i,p),l.find("div.ui-inline-edit,div.ui-inline-del").hide(),l.find("div.ui-inline-save,div.ui-inline-cancel").show(),r.triggerHandler("jqGridAfterGridComplete");break;case"save":r.jqGrid("saveRow",i,p)&&(l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),r.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":r.jqGrid("restoreRow",i,u),l.find("div.ui-inline-edit,div.ui-inline-del").show(),l.find("div.ui-inline-save,div.ui-inline-cancel").hide(),r.triggerHandler("jqGridAfterGridComplete");break;case"del":r.jqGrid("delGridRow",i,d.delOptions);break;case"formedit":r.jqGrid("setSelection",i),r.jqGrid("editGridRow",i,d.editOptions)}},$.fn.fmatter.actions=function(e,t){var i,n={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},r=t.rowId,o="",a=$.jgrid.getRegional(this,"nav"),s=$.jgrid.styleUI[t.styleUI||"jQueryUI"].fmatter,l=$.jgrid.styleUI[t.styleUI||"jQueryUI"].common;if(void 0!==t.colModel.formatoptions&&(n=$.extend(n,t.colModel.formatoptions)),void 0===r||$.fmatter.isEmpty(r))return"";var d="onmouseover=jQuery(this).addClass('"+l.hover+"'); onmouseout=jQuery(this).removeClass('"+l.hover+"');  ";return n.editformbutton?(i="id='jEditButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+d,o+="<div title='"+a.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='"+l.icon_base+" "+s.icon_edit+"'></span></div>"):n.editbutton&&(i="id='jEditButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+d,o+="<div title='"+a.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='"+l.icon_base+" "+s.icon_edit+"'></span></div>"),n.delbutton&&(i="id='jDeleteButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+d,o+="<div title='"+a.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+i+"><span class='"+l.icon_base+" "+s.icon_del+"'></span></div>"),i="id='jSaveButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+d,o+="<div title='"+a.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+i+"><span class='"+l.icon_base+" "+s.icon_save+"'></span></div>",i="id='jCancelButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+d,"<div style='margin-left:8px;'>"+(o+="<div title='"+a.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+i+"><span class='"+l.icon_base+" "+s.icon_cancel+"'></span></div>")+"</div>"},$.unformat=function(e,t,i,n){var r,o,a=t.colModel.formatter,s=t.colModel.formatoptions||{},l=/([\.\*\_\'\(\)\{\}\+\?\\])/g,d=t.colModel.unformat||$.fn.fmatter[a]&&$.fn.fmatter[a].unformat;if(void 0!==d&&$.isFunction(d))r=d.call(this,$(e).text(),t,e);else if(void 0!==a&&$.fmatter.isString(a)){var c,u=$.jgrid.getRegional(this,"formatter")||{};switch(a){case"integer":s=$.extend({},u.integer,s),o=s.thousandsSeparator.replace(l,"\\$1"),c=new RegExp(o,"g"),r=$(e).text().replace(c,"");break;case"number":s=$.extend({},u.number,s),o=s.thousandsSeparator.replace(l,"\\$1"),c=new RegExp(o,"g"),r=$(e).text().replace(c,"").replace(s.decimalSeparator,".");break;case"currency":s=$.extend({},u.currency,s),o=s.thousandsSeparator.replace(l,"\\$1"),c=new RegExp(o,"g"),r=$(e).text(),s.prefix&&s.prefix.length&&(r=r.substr(s.prefix.length)),s.suffix&&s.suffix.length&&(r=r.substr(0,r.length-s.suffix.length)),r=r.replace(c,"").replace(s.decimalSeparator,".");break;case"checkbox":var p=t.colModel.editoptions?t.colModel.editoptions.value.split(":"):["Yes","No"];r=$("input",e).is(":checked")?p[0]:p[1];break;case"select":r=$.unformat.select(e,t,i,n);break;case"actions":return"";default:r=$(e).text()}}return void 0!==r?r:!0===n?$(e).text():$.jgrid.htmlDecode($(e).html())},$.unformat.select=function(e,t,i,n){var r=[],o=$(e).text();if(!0===n)return o;var a=$.extend({},void 0!==t.colModel.formatoptions?t.colModel.formatoptions:t.colModel.editoptions),s=void 0===a.separator?":":a.separator,l=void 0===a.delimiter?";":a.delimiter;if(a.value){var d,c=a.value,u=!0===a.multiple,p=[];if(u&&(p=o.split(","),p=$.map(p,function(e){return $.trim(e)})),$.fmatter.isString(c)){var f,h=c.split(l),g=0;for(f=0;f<h.length;f++)if(d=h[f].split(s),d.length>2&&(d[1]=$.map(d,function(e,t){if(t>0)return e}).join(s)),u)$.inArray($.trim(d[1]),p)>-1&&(r[g]=d[0],g++);else if($.trim(d[1])===$.trim(o)){r[0]=d[0];break}}else($.fmatter.isObject(c)||$.isArray(c))&&(u||(p[0]=o),r=$.map(p,function(e){var t;if($.each(c,function(i,n){if(n===e)return t=i,!1}),void 0!==t)return t}));return r.join(", ")}return o||""},$.unformat.date=function(e,t){var i=$.jgrid.getRegional(this,"formatter.date")||{};return void 0!==t.formatoptions&&(i=$.extend({},i,t.formatoptions)),$.fmatter.isEmpty(e)?$.fn.fmatter.defaultFormat(e,t):$.jgrid.parseDate.call(this,i.newformat,e,i.srcformat,i)};var dragging,placeholders=$();$.fn.html5sortable=function(e){var t=String(e);return e=$.extend({connectWith:!1},e),this.each(function(){if(/^enable|disable|destroy$/.test(t)){var i=$(this).children($(this).data("items")).attr("draggable","enable"===t);return void("destroy"===t&&i.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"))}var n,r,i=$(this).children(e.items),o=$("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+' class="sortable-placeholder '+e.placeholderClass+'">').html("&nbsp;");i.find(e.handle).mousedown(function(){n=!0}).mouseup(function(){n=!1}),$(this).data("items",e.items),placeholders=placeholders.add(o),e.connectWith&&$(e.connectWith).add(this).data("connectWith",e.connectWith),i.attr("draggable","true").on("dragstart.h5s",function(t){if(e.handle&&!n)return!1;n=!1;var i=t.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),r=(dragging=$(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){dragging&&(dragging.removeClass("sortable-dragging").show(),placeholders.detach(),r!==dragging.index()&&dragging.parent().trigger("sortupdate",{item:dragging,startindex:r,endindex:dragging.index()}),dragging=null)}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(t){return!i.is(dragging)&&e.connectWith!==$(dragging).parent().data("connectWith")||("drop"===t.type?(t.stopPropagation(),placeholders.filter(":visible").after(dragging),dragging.trigger("dragend.h5s"),!1):(t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="move",i.is(this)?(e.forcePlaceholderSize&&o.height(dragging.outerHeight()),dragging.hide(),$(this)[o.index()<$(this).index()?"after":"before"](o),placeholders.not(o).detach()):placeholders.is(this)||$(this).children(e.items).length||(placeholders.detach(),$(this).append(o)),!1))})})},window.jqGridUtils={stringify:function(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})},parse:function(str){return JSON.parse(str,function(key,value){if("string"==typeof value&&-1!==value.indexOf("function")){var sv=value.split(" ");return"function"===sv[0].trim()&&"}"===value.trim().slice(-1)?eval("("+value+")"):value}return value})},encode:function(e){
return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,t){var i=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),n=this,r=function(e,t){return"#text"===e?i.encode?n.encode(t):t:"function"==typeof t?"<"+e+"><![CDATA["+t+"]]></"+e+">\n":""===t?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(i.encode?n.encode(t):t)+"</"+e+">\n"},o=function(e,t){for(var i=[],n=0;n<t.length;n++){var s=t[n];void 0===s||null==s?i[i.length]="<"+e+" />":"object"==typeof s&&s.constructor==Array?i[i.length]=o(e,s):i[i.length]="object"==typeof s?a(e,s):r(e,s)}return i.length||(i[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),i.join("")},a=function(e,t){var s=[],l=[];for(var d in t)if(t.hasOwnProperty(d)){var c=t[d];d.charAt(0)!==i.attr_prefix?null==c?s[s.length]="<"+d+" />":"object"==typeof c&&c.constructor===Array?s[s.length]=o(d,c):s[s.length]="object"==typeof c?a(d,c):r(d,c):l[l.length]=" "+d.substring(1)+'="'+(i.encode?n.encode(c):c)+'"'}var u=l.join(""),p=s.join("");return null==e||(p=s.length>0?p.match(/\n/)?"<"+e+u+">\n"+p+"</"+e+">\n":"<"+e+u+">"+p+"</"+e+">\n":"<"+e+u+" />\n"),p},s=a(null,e);return i.xmlDecl+s},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){var __force_array={};if(o.force_array)for(var i=0;i<o.force_array.length;i++)__force_array[o.force_array[i]]=1;"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement);var addNode=function(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType){if(null==e.nodeValue.match(/[^\x00-\x20]/))return;return e.nodeValue}var t,i,n,r,a={};if(e.attributes&&e.attributes.length)for(t={},i=0;i<e.attributes.length;i++)"string"==typeof(n=e.attributes[i].nodeName)&&(r=e.attributes[i].nodeValue)&&(n=o.attr_prefix+n,void 0===a[n]&&(a[n]=0),a[n]++,addNode(t,n,a[n],r));if(e.childNodes&&e.childNodes.length){var s=!0;for(t&&(s=!1),i=0;i<e.childNodes.length&&s;i++){var l=e.childNodes[i].nodeType;3!==l&&4!==l&&(s=!1)}if(s)for(t||(t=""),i=0;i<e.childNodes.length;i++)t+=e.childNodes[i].nodeValue;else for(t||(t={}),i=0;i<e.childNodes.length;i++)"string"==typeof(n=e.childNodes[i].nodeName)&&(r=parseElement(e.childNodes[i]))&&(void 0===a[n]&&(a[n]=0),a[n]++,addNode(t,n,a[n],r))}return t}},json=parseElement(root);if(__force_array[root.nodeName]&&(json=[json]),11!==root.nodeType){var tmp={};tmp[root.nodeName]=json,json=tmp}return json}}}});